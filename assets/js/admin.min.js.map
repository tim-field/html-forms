{"version":3,"sources":["admin.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","require","undefined","define","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","1","module","openTab","tabTarget","this","getAttribute","_i","tabs","tab","classList","toggle","preventDefault","CodeMirror","element","document","querySelector","fromTextArea","selectionPointer","matchTags","bothTags","mode","htmlMode","autoCloseTags","autoRefresh","querySelectorAll","tabNavs","addEventListener","codemirror","codemirror/addon/edit/closetag.js","codemirror/addon/edit/matchtags","codemirror/addon/fold/xml-fold","codemirror/mode/css/css","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","2","mod","amd","autoCloseGT","cm","getOption","Pass","ranges","listSelections","replacements","empty","pos","head","tok","getTokenAt","inner","innerMode","getMode","state","name","tagName","opt","html","configuration","dontCloseTags","htmlDontClose","indentTags","htmlIndent","end","ch","slice","lowerTagName","toLowerCase","type","test","string","charAt","indexOf","closingTagExists","indent","text","newPos","Pos","line","info","replaceRange","anchor","sel","setSelections","indentLine","autoCloseCurrent","typingSlash","start","replacement","context","getLine","replaceSelections","autoCloseSlash","collection","elt","newTag","scanForClosingTag","Math","min","lastLine","nextClose","tag","cx","onCx","prev","to","next","defineOption","val","old","Init","removeKeyMap","map","whenClosing","whenOpening","addKeyMap","commands","closeTag","../../lib/codemirror","../fold/xml-fold","3","clear","tagHit","tagOther","doMatchTags","failedTagMatch","operation","somethingSelected","cur","getCursor","range","getViewport","from","max","match","findMatchingTag","matchBothTags","hit","at","open","close","markText","className","other","maybeUpdateMatch","off","on","toMatchingTag","found","extendSelection","4","cmp","b","Iter","firstLine","tagAt","iter","getTokenTypeAt","nextLine","prevLine","toTagEnd","gt","lastSlash","lastIndexOf","selfClose","toTagStart","lt","xmlTagStart","lastIndex","exec","index","toNextTag","toPrevTag","findMatchingClose","stack","startLine","startCh","push","findMatchingOpen","endLine","endCh","nameStartChar","RegExp","registerHelper","openTag","startPos","endPos","here","findEnclosingTag","forward","5","global","factory","classTest","cls","removeChildren","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","content","style","createElement","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","node","current","joinClasses","as","split","bind","args","Array","arguments","apply","copyObj","target","overwrite","prop","hasOwnProperty","countColumn","tabSize","startIndex","startValue","search","nextTab","array","findColumn","goal","col","skipped","spaceStr","spaceStrs","lst","arr","out","insertSorted","value","score","priority","splice","nothing","createObj","base","props","inst","Object","create","isWordCharBasic","toUpperCase","nonASCIISingleCaseWordChar","isWordChar","helper","source","isEmpty","isExtendingChar","charCodeAt","extendingChars","skipExtendingChars","str","dir","findFirst","pred","abs","mid","floor","Display","place","doc","input","d","scrollbarFiller","gutterFiller","lineDiv","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","lines","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","scroller","wrapper","ie","ie_version","zIndex","paddingRight","webkit","gecko","mobile","draggable","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","shift","selForContextMenu","activeTouch","init","size","chunk","children","sz","chunkSize","getBetween","getLines","updateLineHeight","height","diff","lineNo","no","_lineAtHeight","h","outer","i$1","lh","isLine","lineNumberFor","options","String","lineNumberFormatter","firstLineNumber","sticky","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","_clipPos","last","clipToLen","linelen","clipPosArray","seeReadOnlySpans","sawReadOnlySpans","seeCollapsedSpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","markedSpans","concat","attachLine","markedSpansBefore","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","span$1","found$1","clearEmptySpans","newMarkers","gapMarkers","gap","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","m","find","j","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","id","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","lineLength","len","findMaxLine","display","iterateBidiSections","order","part","level","getBidiPartAt","bidiOther","getOrder","direction","bidiOrdering","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","prepareMeasureForLine","targetTop","measureCharPrepared","top","moveVisually","bidi","partPos","mv","getWrappedLineExtent","lineWrapping","wrappedLineExtentChar","begin","wrappedLineExtent","searchInVisualLine","getRes","res","nextCh","getHandlers","emitter","_handlers","noHandlers","removeEventListener","detachEvent","map$$1","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","set","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","mac","ctrlKey","zeroWidthElement","zwspSupported","offsetHeight","offsetWidth","hasBadBidiRects","badBidiRects","txt","r0","getBoundingClientRect","r1","left","right","hasBadZoomedRects","badZoomedRects","normal","fromRange","defineMode","dependencies","modes","defineMIME","mime","spec","mimeModes","resolveMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","startState","a1","a2","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","overlays","overlay","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","result","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","Context","findStartLine","saved","fromSaved","processLine","startAt","stream","StringStream","callBlankLine","eol","readToken","blankLine","token","takeToken","asArray","tokens","Token","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","after","SavedContext","lookAhead","indented","retreatFrontier","updateLine","estimateHeight","estHeight","cleanUpLine","interpretTokenStyle","cache","styleToClassCacheWithMode","styleToClassCache","replace","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","maps","caches","lastChild","defaultSpecialCharPlaceholder","title","toString","startStyle","endStyle","css","displayText","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","j$1","j$2","upto","tokenText","LineView","hidden","buildViewArray","nextPos","pushOperation","op","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","signalLater","list","orphanDelayedCallbacks","setTimeout","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","background","wrap","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterWidth","alignable","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","clientWidth","eventInWidget","paddingTop","offsetTop","paddingVert","paddingH","window","getComputedStyle","currentStyle","data","parseInt","isNaN","scrollGap","displayWidth","displayHeight","clientHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","before","updateExternalMeasurement","measureChar","bias","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","nodeAndOffsetInLineMap","collapse","mStart","mEnd","coverStart","coverEnd","getUsefulRect","nullRect","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","pageScrollX","chrome","android","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","intoCoordSystem","includeWidgets","yOff","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","get","getBidi","invert","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","mergedPos","assign","prevDiff","prevPos","beginLeft","steps","ceil","prevPos$1","diff_change_per_step","box","textHeight","measureText","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","selection","primIndex","range$$1","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","add","fragment","rightSide","drawForLine","fromArg","toArg","lineLen","rightPos","leftPos","tmp","leftSide","padding","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","reset","receivedFocus","rmClass","updateHeightsInViewport","prevBottom","updateWidgetHeight","visibleLines","viewport","ensure","ensureFrom","ensureTo","alignHorizontally","comp","gutterW","align","maybeUpdateLineNumberWidth","innerW","updateGutterSpace","maybeScrollWindow","doScroll","innerHeight","phantom","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","measureForScrollbars","docH","viewHeight","viewWidth","barLeft","docHeight","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","update","paddingBottom","borderBottom","coverGutterNextToScrollbar","initScrollbars","scrollbarModel","scrollbarStyle","axis","_startOperation","viewChanged","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","nextOpId","_endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","i$4","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","minWidth","takeFocus","hasFocus","setDocumentHeight","postUpdateDisplay","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","regChange","lendiff","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","time","highlight","highlightWorker","Date","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","marginBottom","borderRightWidth","selectionSnapshot","active","getSelection","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","createRange","setEnd","removeAllRanges","addRange","editorIsHidden","force","visible","viewportMargin","different","wrapperHeight","toUpdate","selSnapshot","patchDisplay","minHeight","oldDisplayWidth","updateNumbersFrom","rm","currentWheelTarget","container","updateNumber","updateGutters","specs","gElt","setGuttersForLineNumbers","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","wheelPixelsPerUnit","onScrollWheel","scroll","canScrollX","canScrollY","presto","pixels","wheelSamples","movedX","movedY","sample","normalizeSelection","prim","sort","inv","Range","Selection","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","linesFor","Line","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","origin","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","equals","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","events","newGroup","instantiateSel","copy","event","deepCopy","newChanges","Number","extendRange","posBefore","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","this$1","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","atomic","near","movePos","far","cantEdit","selectAll","sel_dontScroll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","_replaceRange","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","adjustScrollWhenAboveVisible","addLineWidget","LineWidget","insertAt","aboveVisible","_markText","markTextShared","TextMarker","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","nextMarkerId","cloneNode","isParent","SharedTextMarker","findSharedMarkers","findMarks","clipPos","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","onDrop","clearDragCursor","lastDrop","files","dataTransfer","isReadOnly","FileReader","File","read","file","allowDropFileTypes","reader","onload","join","lineSeparator","readAsText","draggingText","text$1","getData","selected","replaceSelection","onDragStart","setData","effectAllowed","setDragImage","safari","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","ensureGlobalHandlers","globalsRegistered","registerGlobalHandlers","resizeTimer","onResize","setSize","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","keyNames","keyCode","addModifierNames","noShift","altKey","flipCtrlCmd","metaKey","shiftKey","keyName","altGraphKey","keyMap","deleteNearSelection","compute","kill","toKill","replaced","lineStart","visual","lineEnd","lineStartSmart","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","dispatchKey","seq","keySeq","stopSeq","handleKeyBinding","motion","handleCharBinding","onKeyDown","handled","lastStoppedKey","hasCopyEvent","showCrossHair","up","onKeyUp","onKeyPress","charCode","fromCharCode","clickRepeat","now","lastDoubleClick","compare","lastClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","captureRightClick","onContextMenu","configureMouse","option","unit","chromeOS","addNew","moveOnDrag","contained","behavior","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","e2","rangeForUnit","findWordAt","extendTo","lastPos","startCol","posCol","startSel","ourIndex","oldRange","ourRange","ranges$1","sel_mouse","curCount","counter","editorSize","move","gutterEvent","prevent","mX","mY","lineBox","g","contextMenuInGutter","themeChanged","theme","guttersChanged","dragDropChanged","funcs","dragFunctions","enter","over","leave","drop","wrappingChanged","CodeMirror$1","defaults","Doc","inputStyles","inputStyle","pasteIncoming","cutIncoming","Delayed","autofocus","registerEventHandlers","optionHandlers","finishInit","initHooks","textRendering","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","word","clearTimeout","pageX","pageY","coordsChar","inp","getField","how","aggressive","curSpace","indentation","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","setLastCopied","newLastCopied","lastCopied","applyTextInput","inserted","deleted","paste","textLines","splitLinesAuto","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","getRange","disableBrowserMagic","field","spellcheck","hiddenTextarea","te","div","ios","border","_findPosH","findNextLine","moveOnce","boundToLine","origDir","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","posToDOM","side","isInGutter","scan","badPos","bad","domTextBetween","recognizeMarker","closing","lineSep","addText","walk","cmText","textContent","markerID","isBlock","nodeName","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist","previousSibling","dist$1","textarea","getValue","tabindex","tabIndex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","getWrapperElement","userAgent","navigator","platform","ie_upto10","ie_11up","edge","documentMode","qtwebkit","vendor","mac_geMountainLion","windows","presto_version","endNode","setStart","createTextRange","moveToElementText","moveEnd","moveStart","selectInput","select","selectionStart","selectionEnd","_e","ms","sel_move","charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","types","type$1","prev$1","type$2","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","i$7","nstart","unshift","reverse","attachEvent","nl","rt","hasSelection","ownerDocument","parentElement","compareEndPoints","oncopy","lineOracle","lastColumnPos","lastColumnValue","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","oracle","maxLookAhead","NativeScrollbars","vert","horiz","checkedZeroWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","w","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","native","null","there","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","oldH","withOp","dHeight","nextDocId","cleanGeneration","setValue","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","addSelection","getSelections","dup","newSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","127","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","delWrappedLineRight","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","defineInitHook","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","poll","pollSelection","pollInterval","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","prepareCopyCut","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","prepareSelectAllHack","extval","rehide","oldWrapperCSS","oldCSS","detectingSelectAll","resetSelectionOnContextMenu","wrapperBox","oldScrollY","scrollY","scrollTo","mouseup","disabled","deflt","notOnInit","newBreaks","refresh","getInputField","detach","attach","integer","helpers","setOption","getDoc","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getHelpers","help","_global","getStateAfter","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","check","getScrollInfo","interpret","startOperation","endOperation","swapDoc","getScrollerElement","getGutterElement","registerGlobalHelper","predicate","dontDelegate","method","contenteditable","defineExtension","func","defineDocExtension","cmpPos","version","6","keySet","tokenCComment","maybeEnd","tokenize","config","parserConfig","ret","tp","tokenBase","tokenHooks","tokenString","tokenParenthesized","quote","escaped","pushContext","popContext","pass","states","popAndPass","wordAsValue","valueKeywords","colorKeywords","inline","propertyKeywords","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","allowNested","lineComment","supportsAtComponent","stateArg","block","maybeprop","propBlock","_stream","parens","pseudo","atBlock","atComponentBlock","atBlock_parens","restricted_atBlock_before","restricted_atBlock","keyframes","interpolation","textAfter","blockCommentStart","blockCommentEnd","fold","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","fontProperties_","counterDescriptors_","colorKeywords_","valueKeywords_","allWords","/",":","$","#","@","&","7","maybeBackup","pat","getAttrRegexp","attr","regexp","attrRegexpCache","getAttrValue","getTagRegexp","anchored","addTags","findMatchingMode","tagInfo","tagText","defaultTags","script","htmlState","tags","inTag","endTagA","endTag","localState","localMode","multilineTagIndentFactor","multilineTagIndentPastTag","configTags","configScript","scriptTypes","matches","local","../css/css","../javascript/javascript","../xml/xml","readRegexp","inSet","cont","tokenComment","expressionAllowed","isOperatorChar","tokenQuasi","lexical","wordRE","lastType","keywords","propertyIsEnumerable","kw","jsonldMode","isJsonldKeyword","findFatArrow","fatArrowAt","arrow","isTS","depth","sawSomething","bracket","brackets","JSLexical","inScope","varname","localVars","vars","parseJS","cc","marked","jsonMode","expression","statement","lex","register","inList","globalVars","pushcontext","defaultVars","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","maybeelse","functiondef","forspec","typeexpr","maybelabel","funarg","afterExport","afterImport","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","atomicTypes","classExpression","maybeexpressionNoComma","maybeexpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","expr","property","continueQuasi","targetNoComma","maybeTypeArgs","_","getterSetter","afterprop","what","sep","proceed","maybetype","afterType","typeprop","typearg","maybeReturnType","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","isContinuedStatement","statementIndent","jsonld","json","typescript","wordCharacters","A","B","C","operator","atom","jsKeywords","if","while","with","else","do","try","finally","return","break","continue","new","delete","throw","debugger","var","const","let","function","catch","for","switch","case","default","in","typeof","instanceof","true","false","class","super","yield","export","import","extends","await","tsKeywords","interface","implements","namespace","enum","public","private","protected","abstract","readonly","number","boolean","any","variable","jsonld-keyword","basecolumn","firstChar","c","doubleIndentSwitch","closeBrackets","skipExpression","htmlConfig","autoSelfClosers","area","br","command","embed","frame","hr","keygen","meta","param","track","wbr","menuitem","implicitlyClosed","dd","li","optgroup","rp","tbody","td","tfoot","tr","contextGrabbers","dt","address","article","aside","blockquote","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","header","hgroup","menu","nav","ol","section","table","ul","thead","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","editorConf","config_","inText","chain","parser","inBlock","doctype","baseState","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","setStyle","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","isInText","baseIndent","fullLine","alignCDATA","tagAfter","grabbers","skipAttribute"],"mappings":"AAAA,YAEA,IAAIA,SAA4B,kBAAXC,SAAoD,gBAApBA,QAAOC,SAAwB,SAAUC,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXF,SAAyBE,EAAIC,cAAgBH,QAAUE,IAAQF,OAAOI,UAAY,eAAkBF,KAEtQ,WACE,GAAIG,OAAUC,GAA6DC,MAASD,IAAU,QAAUE,GAAEC,EAAGC,EAAGC,GAC9G,QAASC,GAAEC,EAAGC,GACZ,IAAKJ,EAAEG,GAAI,CACT,IAAKJ,EAAEI,GAAI,CACT,GAAIE,GAAsB,kBAAXV,IAAyBA,CAAQ,KAAKS,GAAKC,EAAG,MAAOA,GAAEF,GAAG,EAAI,IAAIG,EAAG,MAAOA,GAAEH,GAAG,EAAI,IAAII,GAAI,GAAIC,OAAM,uBAAyBL,EAAI,IAAK,MAAMI,GAAEE,KAAO,mBAAoBF,EAC5L,GAAIG,GAAIV,EAAEG,IAAOQ,WAAcZ,GAAEI,GAAG,GAAGS,KAAKF,EAAEC,QAAS,SAAUb,GAChE,GAAIE,GAAID,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,GAAQF,IACnCY,EAAGA,EAAEC,QAASb,EAAGC,EAAGC,EAAGC,GAC3B,MAAOD,GAAEG,GAAGQ,QACkC,IAAK,GAAjDL,GAAsB,kBAAXX,IAAyBA,EAAiBQ,EAAI,EAAGA,EAAIF,EAAEY,OAAQV,IAC7ED,EAAED,EAAEE,GACL,OAAOD,KACLY,GAAI,SAAUnB,EAASoB,EAAQJ,GA8BhC,QAASK,GAAQlB,GAEf,IAAK,GADDmB,GAAYC,KAAKC,aAAa,mBACzBC,EAAK,EAAGA,EAAKC,EAAKR,OAAQO,IAAM,CACvC,GAAIE,GAAMD,EAAKD,EACfE,GAAIC,UAAUC,OAAO,gBAAiBF,EAAIH,aAAa,cAAgBF,GAGzEnB,EAAE2B,iBAhCJ,GAAIC,GAAa/B,EAAQ,aACzBA,GAAQ,2BACRA,EAAQ,yCACRA,EAAQ,2BACRA,EAAQ,uCACRA,EAAQ,kCACRA,EAAQ,mCACRA,EAAQ,oCAcR,KAAK,GAZDgC,GAAUC,SAASC,cAAc,mBAUjCR,GATSK,EAAWI,aAAaH,GACnCI,kBAAkB,EAClBC,WAAaC,UAAU,GACvBC,KAAM,YACNC,UAAU,EACVC,eAAe,EACfC,aAAa,IAGJT,SAASU,iBAAiB,YACjCC,EAAUX,SAASU,iBAAiB,kBAC/BhC,EAAI,EAAGA,EAAIiC,EAAQ1B,OAAQP,IAClCiC,EAAQjC,GAAGkC,iBAAiB,QAASxB,KAYpCyB,WAAc,EAAGC,oCAAqC,EAAGC,kCAAmC,EAAGC,iCAAkC,EAAGC,0BAA2B,EAAGC,sCAAuC,EAAGC,wCAAyC,EAAGC,0BAA2B,IAAMC,GAAI,SAAUtD,EAASoB,EAAQJ,IA4B3T,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,wBAAyBA,EAAQ,qBAA+C,kBAAVE,IAAwBA,EAAOsD,IACjHtD,GAAQ,uBAAwB,oBAAqBqD,GACrDA,EAAIxB,aACL,SAAUA,GAiBX,QAAS0B,GAAYC,GACnB,GAAIA,EAAGC,UAAU,gBAAiB,MAAO5B,GAAW6B,IAGpD,KAAK,GAFDC,GAASH,EAAGI,iBACZC,KACKpD,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,IAAKkD,EAAOlD,GAAGqD,QAAS,MAAOjC,GAAW6B,IAC1C,IAAIK,GAAMJ,EAAOlD,GAAGuD,KAChBC,EAAMT,EAAGU,WAAWH,GACpBI,EAAQtC,EAAWuC,UAAUZ,EAAGa,UAAWJ,EAAIK,OAC/CA,EAAQH,EAAMG,KAClB,IAAuB,OAAnBH,EAAM9B,KAAKkC,OAAkBD,EAAME,QAAS,MAAO3C,GAAW6B,IAElE,IAAIe,GAAMjB,EAAGC,UAAU,iBACnBiB,EAAmC,QAA5BP,EAAM9B,KAAKsC,cAClBC,EAA6E,eAA7C,KAARH,EAAsB,YAAcjF,QAAQiF,KAAqBA,EAAIG,eAAiBF,GAAQG,EACtHC,EAA0E,eAA7C,KAARL,EAAsB,YAAcjF,QAAQiF,KAAqBA,EAAIK,YAAcJ,GAAQK,EAEhHP,EAAUF,EAAME,OAChBP,GAAIe,IAAMjB,EAAIkB,KAAIT,EAAUA,EAAQU,MAAM,EAAGV,EAAQxD,OAASiD,EAAIe,IAAMjB,EAAIkB,IAChF,IAAIE,GAAeX,EAAQY,aAE3B,KAAKZ,GAAuB,UAAZP,EAAIoB,OAAqBpB,EAAIe,KAAOjB,EAAIkB,KAAO,SAASK,KAAKrB,EAAIsB,OAAOC,OAAOvB,EAAIsB,OAAOvE,OAAS,KAA4B,GAArBiD,EAAIsB,OAAOvE,SAA4B,OAAZiD,EAAIoB,MAA+B,YAAdf,EAAMe,MAAsBpB,EAAIsB,OAAOE,QAAQ,MAAQxB,EAAIsB,OAAOvE,OAAS,GACrP4D,GAAiBa,EAAQb,EAAeO,IAAiB,GAAKO,EAAiBlC,EAAIgB,EAAST,EAAKO,GAAO,GAAO,MAAOzC,GAAW6B,IAEjI,IAAIiC,GAASb,GAAcW,EAAQX,EAAYK,IAAiB,CAChEtB,GAAapD,IAAOkF,OAAQA,EAC1BC,KAAM,KAAOD,EAAS,OAAS,IAAM,KAAOnB,EAAU,IACtDqB,OAAQF,EAAS9D,EAAWiE,IAAI/B,EAAIgC,KAAO,EAAG,GAAKlE,EAAWiE,IAAI/B,EAAIgC,KAAMhC,EAAIkB,GAAK,IAGzF,IAAK,GAAIxE,GAAIkD,EAAO3C,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC3C,GAAIuF,GAAOnC,EAAapD,EACxB+C,GAAGyC,aAAaD,EAAKJ,KAAMjC,EAAOlD,GAAGuD,KAAML,EAAOlD,GAAGyF,OAAQ,UAC7D,IAAIC,GAAM3C,EAAGI,iBAAiBsB,MAAM,EACpCiB,GAAI1F,IAAOuD,KAAMgC,EAAKH,OAAQK,OAAQF,EAAKH,QAC3CrC,EAAG4C,cAAcD,GACbH,EAAKL,SACPnC,EAAG6C,WAAWL,EAAKH,OAAOE,KAAM,MAAM,GACtCvC,EAAG6C,WAAWL,EAAKH,OAAOE,KAAO,EAAG,MAAM,KAKhD,QAASO,GAAiB9C,EAAI+C,GAI5B,IAAK,GAHD5C,GAASH,EAAGI,iBACZC,KACAG,EAAOuC,EAAc,IAAM,KACtB9F,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,IAAKkD,EAAOlD,GAAGqD,QAAS,MAAOjC,GAAW6B,IAC1C,IAAIK,GAAMJ,EAAOlD,GAAGuD,KAChBC,EAAMT,EAAGU,WAAWH,GACpBI,EAAQtC,EAAWuC,UAAUZ,EAAGa,UAAWJ,EAAIK,OAC/CA,EAAQH,EAAMG,KAClB,IAAIiC,IAA4B,UAAZtC,EAAIoB,MAA4C,KAAxBpB,EAAIsB,OAAOC,OAAO,IAAavB,EAAIuC,OAASzC,EAAIkB,GAAK,GAAI,MAAOpD,GAAW6B,IAKvH,IAAI+C,EACJ,IAAuB,OAAnBtC,EAAM9B,KAAKkC,KACb,GAAyB,aAArBf,EAAGa,UAAUE,MAA0C,cAAnBJ,EAAM9B,KAAKkC,KAAsBkC,EAAczC,EAAO,aAAc,CAAA,GAAyB,aAArBR,EAAGa,UAAUE,MAA0C,OAAnBJ,EAAM9B,KAAKkC,KAAiD,MAAO1C,GAAW6B,IAApD+C,GAAczC,EAAO,YAC9L,CACL,IAAKM,EAAMoC,UAAYpC,EAAMoC,QAAQlC,SAAWkB,EAAiBlC,EAAIc,EAAMoC,QAAQlC,QAAST,EAAKO,GAAQ,MAAOzC,GAAW6B,IAC3H+C,GAAczC,EAAOM,EAAMoC,QAAQlC,QAEO,KAAxChB,EAAGmD,QAAQ5C,EAAIgC,MAAMP,OAAOvB,EAAIe,OAAayB,GAAe,KAChE5C,EAAapD,GAAKgG,EAEpBjD,EAAGoD,kBAAkB/C,GACrBF,EAASH,EAAGI,gBACZ,KAAK,GAAInD,GAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,KAC7BA,GAAKkD,EAAO3C,OAAS,GAAK2C,EAAOlD,GAAGuD,KAAK+B,KAAOpC,EAAOlD,EAAI,GAAGuD,KAAK+B,OAAMvC,EAAG6C,WAAW1C,EAAOlD,GAAGuD,KAAK+B,MAI9G,QAASc,GAAerD,GACtB,MAAIA,GAAGC,UAAU,gBAAwB5B,EAAW6B,KAC7C4C,EAAiB9C,GAAI,GAO9B,QAASiC,GAAQqB,EAAYC,GAC3B,GAAID,EAAWrB,QAAS,MAAOqB,GAAWrB,QAAQsB,EAClD,KAAK,GAAItG,GAAI,EAAGR,EAAI6G,EAAW9F,OAAQP,EAAIR,IAAKQ,EAC9C,GAAIqG,EAAWrG,IAAMsG,EAAK,MAAOtG,EAClC,QAAQ,EAKX,QAASiF,GAAiBlC,EAAIgB,EAAST,EAAKO,EAAO0C,GACjD,IAAKnF,EAAWoF,kBAAmB,OAAO,CAC1C,IAAIjC,GAAMkC,KAAKC,IAAI3D,EAAG4D,WAAa,EAAGrD,EAAIgC,KAAO,KAC7CsB,EAAYxF,EAAWoF,kBAAkBzD,EAAIO,EAAK,KAAMiB,EAC5D,KAAKqC,GAAaA,EAAUC,KAAO9C,EAAS,OAAO,CAKnD,KAAK,GAJD+C,GAAKjD,EAAMoC,QAINc,EAAOR,EAAS,EAAI,EAAGO,GAAMA,EAAG/C,SAAWA,EAAS+C,EAAKA,EAAGE,OACjED,CACHzD,GAAMsD,EAAUK,EACjB,KAAK,GAAIjH,GAAI,EAAGA,EAAI+G,EAAM/G,IAAK,CAC7B,GAAIkH,GAAO9F,EAAWoF,kBAAkBzD,EAAIO,EAAK,KAAMiB,EACvD,KAAK2C,GAAQA,EAAKL,KAAO9C,EAAS,OAAO,CACzCT,GAAM4D,EAAKD,GAEb,OAAO,EA9HT7F,EAAW+F,aAAa,iBAAiB,EAAO,SAAUpE,EAAIqE,EAAKC,GAEjE,GADIA,GAAOjG,EAAWkG,MAAQD,GAAKtE,EAAGwE,aAAa,iBAC9CH,EAAL,CACA,GAAII,IAAQ1D,KAAM,kBAC+C,eAA7C,KAARsD,EAAsB,YAAcrI,QAAQqI,KAAqBA,EAAIK,eAAaD,EAAI,OAAS,SAAUzE,GACnH,MAAOqD,GAAerD,MAEyC,eAA7C,KAARqE,EAAsB,YAAcrI,QAAQqI,KAAqBA,EAAIM,eAAaF,EAAI,OAAS,SAAUzE,GACnH,MAAOD,GAAYC,KAErBA,EAAG4E,UAAUH,KAGf,IAAIpD,IAAiB,OAAQ,OAAQ,KAAM,MAAO,UAAW,QAAS,KAAM,MAAO,QAAS,SAAU,OAAQ,OAAQ,QAAS,SAAU,QAAS,OAC9IE,GAAc,SAAU,aAAc,OAAQ,SAAU,MAAO,KAAM,WAAY,OAAQ,WAAY,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,OAAQ,OAAQ,SAAU,QAAS,SAAU,SAAU,KAAM,IAAK,SAAU,QAAS,KAkFlOlD,GAAWwG,SAASC,SAAW,SAAU9E,GACvC,MAAO8C,GAAiB9C,QAgCzB+E,uBAAwB,EAAGC,mBAAoB,IAAMC,GAAI,SAAU3I,EAASoB,EAAQJ,IAIvF,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,wBAAyBA,EAAQ,qBAA+C,kBAAVE,IAAwBA,EAAOsD,IACjHtD,GAAQ,uBAAwB,oBAAqBqD,GACrDA,EAAIxB,aACL,SAAUA,GAiBX,QAAS6G,GAAMlF,GACTA,EAAGc,MAAMqE,QAAQnF,EAAGc,MAAMqE,OAAOD,QACjClF,EAAGc,MAAMsE,UAAUpF,EAAGc,MAAMsE,SAASF,QACzClF,EAAGc,MAAMqE,OAASnF,EAAGc,MAAMsE,SAAW,KAGxC,QAASC,GAAYrF,GACnBA,EAAGc,MAAMwE,gBAAiB,EAC1BtF,EAAGuF,UAAU,WAEX,GADAL,EAAMlF,IACFA,EAAGwF,oBAAP,CACA,GAAIC,GAAMzF,EAAG0F,YACTC,EAAQ3F,EAAG4F,aACfD,GAAME,KAAOnC,KAAKC,IAAIgC,EAAME,KAAMJ,EAAIlD,MAAMoD,EAAMzB,GAAKR,KAAKoC,IAAIL,EAAIlD,KAAO,EAAGoD,EAAMzB,GACpF,IAAI6B,GAAQ1H,EAAW2H,gBAAgBhG,EAAIyF,EAAKE,EAChD,IAAKI,EAAL,CACA,GAAI/F,EAAGc,MAAMmF,cAAe,CAC1B,GAAIC,GAAkB,QAAZH,EAAMI,GAAeJ,EAAMK,KAAOL,EAAMM,KAC9CH,KAAKlG,EAAGc,MAAMqE,OAASnF,EAAGsG,SAASJ,EAAIL,KAAMK,EAAIhC,IAAMqC,UAAW,4BAExE,GAAIC,GAAoB,SAAZT,EAAMI,GAAgBJ,EAAMK,KAAOL,EAAMM,KACjDG,GAAOxG,EAAGc,MAAMsE,SAAWpF,EAAGsG,SAASE,EAAMX,KAAMW,EAAMtC,IAAMqC,UAAW,2BAAiCvG,EAAGc,MAAMwE,gBAAiB,MAI7I,QAASmB,GAAiBzG,GACpBA,EAAGc,MAAMwE,gBAAgBD,EAAYrF,GAxC3C3B,EAAW+F,aAAa,aAAa,EAAO,SAAUpE,EAAIqE,EAAKC,GACzDA,GAAOA,GAAOjG,EAAWkG,OAC3BvE,EAAG0G,IAAI,iBAAkBrB,GACzBrF,EAAG0G,IAAI,iBAAkBD,GACzBvB,EAAMlF,IAEJqE,IACFrE,EAAGc,MAAMmF,cAA6E,eAA7C,KAAR5B,EAAsB,YAAcrI,QAAQqI,KAAqBA,EAAIzF,SACtGoB,EAAG2G,GAAG,iBAAkBtB,GACxBrF,EAAG2G,GAAG,iBAAkBF,GACxBpB,EAAYrF,MAiChB3B,EAAWwG,SAAS+B,cAAgB,SAAU5G,GAC5C,GAAI6G,GAAQxI,EAAW2H,gBAAgBhG,EAAIA,EAAG0F,YAC9C,IAAImB,EAAO,CACT,GAAIL,GAAoB,SAAZK,EAAMV,GAAgBU,EAAMT,KAAOS,EAAMR,KACjDG,IAAOxG,EAAG8G,gBAAgBN,EAAMtC,GAAIsC,EAAMX,YAIjDd,uBAAwB,EAAGC,mBAAoB,IAAM+B,GAAI,SAAUzK,EAASoB,EAAQJ,IAIvF,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,yBAAmD,kBAAVE,IAAwBA,EAAOsD,IACpFtD,GAAQ,wBAAyBqD,GACjCA,EAAIxB,aACL,SAAUA,GAIX,QAAS2I,GAAIhK,EAAGiK,GACd,MAAOjK,GAAEuF,KAAO0E,EAAE1E,MAAQvF,EAAEyE,GAAKwF,EAAExF,GAOrC,QAASyF,GAAKlH,EAAIuC,EAAMd,EAAIkE,GAC1B9H,KAAK0E,KAAOA,EAAK1E,KAAK4D,GAAKA,EAC3B5D,KAAKmC,GAAKA,EAAGnC,KAAKuE,KAAOpC,EAAGmD,QAAQZ,GACpC1E,KAAK8F,IAAMgC,EAAQjC,KAAKoC,IAAIH,EAAME,KAAM7F,EAAGmH,aAAenH,EAAGmH,YAC7DtJ,KAAKiI,IAAMH,EAAQjC,KAAKC,IAAIgC,EAAMzB,GAAK,EAAGlE,EAAG4D,YAAc5D,EAAG4D,WAGhE,QAASwD,GAAMC,EAAM5F,GACnB,GAAII,GAAOwF,EAAKrH,GAAGsH,eAAehF,EAAI+E,EAAK9E,KAAMd,GACjD,OAAOI,IAAQ,UAAUC,KAAKD,GAGhC,QAAS0F,GAASF,GAChB,KAAIA,EAAK9E,MAAQ8E,EAAKvB,KAGtB,MAFAuB,GAAK5F,GAAK,EACV4F,EAAKjF,KAAOiF,EAAKrH,GAAGmD,UAAUkE,EAAK9E,OAC5B,EAET,QAASiF,GAASH,GAChB,KAAIA,EAAK9E,MAAQ8E,EAAK1D,KAGtB,MAFA0D,GAAKjF,KAAOiF,EAAKrH,GAAGmD,UAAUkE,EAAK9E,MACnC8E,EAAK5F,GAAK4F,EAAKjF,KAAK5E,QACb,EAGT,QAASiK,GAASJ,GAChB,OAAS,CACP,GAAIK,GAAKL,EAAKjF,KAAKH,QAAQ,IAAKoF,EAAK5F,GACrC,KAAW,GAAPiG,EAAU,CACZ,GAAIH,EAASF,GAAO,QAAc,QAEpC,CAAA,GAAKD,EAAMC,EAAMK,EAAK,GAAtB,CAGA,GAAIC,GAAYN,EAAKjF,KAAKwF,YAAY,IAAKF,GACvCG,EAAYF,GAAa,IAAM,KAAK7F,KAAKuF,EAAKjF,KAAKV,MAAMiG,EAAY,EAAGD,GAE5E,OADAL,GAAK5F,GAAKiG,EAAK,EACRG,EAAY,YAAc,UAL/BR,EAAK5F,GAAKiG,EAAK,IAQrB,QAASI,GAAWT,GAClB,OAAS,CACP,GAAIU,GAAKV,EAAK5F,GAAK4F,EAAKjF,KAAKwF,YAAY,IAAKP,EAAK5F,GAAK,IAAM,CAC9D,KAAW,GAAPsG,EAAU,CACZ,GAAIP,EAASH,GAAO,QAAc,QAEpC,GAAKD,EAAMC,EAAMU,EAAK,GAAtB,CAGAC,EAAYC,UAAYF,EACxBV,EAAK5F,GAAKsG,CACV,IAAIhC,GAAQiC,EAAYE,KAAKb,EAAKjF,KAClC,IAAI2D,GAASA,EAAMoC,OAASJ,EAAI,MAAOhC,OALrCsB,GAAK5F,GAAKsG,GAShB,QAASK,GAAUf,GACjB,OAAS,CACPW,EAAYC,UAAYZ,EAAK5F,EAC7B,IAAIoF,GAAQmB,EAAYE,KAAKb,EAAKjF,KAClC,KAAKyE,EAAO,CACV,GAAIU,EAASF,GAAO,QAAc,QAEpC,CAAA,GAAKD,EAAMC,EAAMR,EAAMsB,MAAQ,GAI/B,MADAd,GAAK5F,GAAKoF,EAAMsB,MAAQtB,EAAM,GAAGrJ,OAC1BqJ,CAHLQ,GAAK5F,GAAKoF,EAAMsB,MAAQ,IAM9B,QAASE,GAAUhB,GACjB,OAAS,CACP,GAAIK,GAAKL,EAAK5F,GAAK4F,EAAKjF,KAAKwF,YAAY,IAAKP,EAAK5F,GAAK,IAAM,CAC9D,KAAW,GAAPiG,EAAU,CACZ,GAAIF,EAASH,GAAO,QAAc,QAEpC,CAAA,GAAKD,EAAMC,EAAMK,EAAK,GAAtB,CAGA,GAAIC,GAAYN,EAAKjF,KAAKwF,YAAY,IAAKF,GACvCG,EAAYF,GAAa,IAAM,KAAK7F,KAAKuF,EAAKjF,KAAKV,MAAMiG,EAAY,EAAGD,GAE5E,OADAL,GAAK5F,GAAKiG,EAAK,EACRG,EAAY,YAAc,UAL/BR,EAAK5F,GAAKiG,IAShB,QAASY,GAAkBjB,EAAMvD,GAE/B,IADA,GAAIyE,QACK,CACP,GACI/G,GADA2C,EAAOiE,EAAUf,GAEjBmB,EAAYnB,EAAK9E,KACjBkG,EAAUpB,EAAK5F,IAAM0C,EAAOA,EAAK,GAAG3G,OAAS,EACjD,KAAK2G,KAAU3C,EAAMiG,EAASJ,IAAQ,MACtC,IAAW,aAAP7F,EACJ,GAAI2C,EAAK,GAAI,CAEX,IAAK,GAAIlH,GAAIsL,EAAM/K,OAAS,EAAGP,GAAK,IAAKA,EACvC,GAAIsL,EAAMtL,IAAMkH,EAAK,GAAI,CACvBoE,EAAM/K,OAASP,CACf,OAEH,GAAIA,EAAI,KAAO6G,GAAOA,GAAOK,EAAK,IAAK,OACtCL,IAAKK,EAAK,GACV0B,KAAMvD,EAAIkG,EAAWC,GACrBvE,GAAI5B,EAAI+E,EAAK9E,KAAM8E,EAAK5F,SAI1B8G,GAAMG,KAAKvE,EAAK,KAItB,QAASwE,GAAiBtB,EAAMvD,GAE9B,IADA,GAAIyE,QACK,CACP,GAAItE,GAAOoE,EAAUhB,EACrB,KAAKpD,EAAM,MACX,IAAY,aAARA,EAAJ,CAGA,GAAI2E,GAAUvB,EAAK9E,KACfsG,EAAQxB,EAAK5F,GACbuB,EAAQ8E,EAAWT,EACvB,KAAKrE,EAAO,MACZ,IAAIA,EAAM,GAERuF,EAAMG,KAAK1F,EAAM,QACZ,CAEL,IAAK,GAAI/F,GAAIsL,EAAM/K,OAAS,EAAGP,GAAK,IAAKA,EACvC,GAAIsL,EAAMtL,IAAM+F,EAAM,GAAI,CACxBuF,EAAM/K,OAASP,CACf,OAEH,GAAIA,EAAI,KAAO6G,GAAOA,GAAOd,EAAM,IAAK,OACvCc,IAAKd,EAAM,GACX6C,KAAMvD,EAAI+E,EAAK9E,KAAM8E,EAAK5F,IAC1ByC,GAAI5B,EAAIsG,EAASC,SAnBnBf,GAAWT,IAhIjB,GAAI/E,GAAMjE,EAAWiE,IAKjBwG,EAAgB,+KAEhBd,EAAc,GAAIe,QAAO,UAAYD,EAAgB,+NAAyB,IAkJlFzK,GAAW2K,eAAe,OAAQ,MAAO,SAAUhJ,EAAIgD,GAErD,IADA,GAAIqE,GAAO,GAAIH,GAAKlH,EAAIgD,EAAMT,KAAM,KAC3B,CACP,GACIf,GADAyH,EAAUb,EAAUf,EAExB,KAAK4B,GAAW5B,EAAK9E,MAAQS,EAAMT,QAAUf,EAAMiG,EAASJ,IAAQ,MACpE,KAAK4B,EAAQ,IAAa,aAAPzH,EAAoB,CACrC,GAAI0H,GAAW5G,EAAI+E,EAAK9E,KAAM8E,EAAK5F,IAC/B0H,EAASb,EAAkBjB,EAAM4B,EAAQ,GAC7C,OAAOE,KAAYtD,KAAMqD,EAAUhF,GAAIiF,EAAOtD,UAIpDxH,EAAW2H,gBAAkB,SAAUhG,EAAIO,EAAKoF,GAC9C,GAAI0B,GAAO,GAAIH,GAAKlH,EAAIO,EAAIgC,KAAMhC,EAAIkB,GAAIkE,EAC1C,KAA+B,GAA3B0B,EAAKjF,KAAKH,QAAQ,OAAyC,GAA3BoF,EAAKjF,KAAKH,QAAQ,KAAtD,CACA,GAAIT,GAAMiG,EAASJ,GACfnD,EAAK1C,GAAOc,EAAI+E,EAAK9E,KAAM8E,EAAK5F,IAChCuB,EAAQxB,GAAOsG,EAAWT,EAC9B,IAAK7F,GAAQwB,KAASgE,EAAIK,EAAM9G,GAAO,GAAvC,CACA,GAAI6I,IAASvD,KAAMvD,EAAI+E,EAAK9E,KAAM8E,EAAK5F,IAAKyC,GAAIA,EAAIJ,IAAKd,EAAM,GAC/D,OAAW,aAAPxB,GAA6B4E,KAAMgD,EAAM/C,MAAO,KAAMF,GAAI,QAE1DnD,EAAM,IAECoD,KAAMuC,EAAiBtB,EAAMrE,EAAM,IAAKqD,MAAO+C,EAAMjD,GAAI,UAGlEkB,EAAO,GAAIH,GAAKlH,EAAIkE,EAAG3B,KAAM2B,EAAGzC,GAAIkE,IAC3BS,KAAMgD,EAAM/C,MAAOiC,EAAkBjB,EAAMrE,EAAM,IAAKmD,GAAI,YAIvE9H,EAAWgL,iBAAmB,SAAUrJ,EAAIO,EAAKoF,EAAO7B,GAEtD,IADA,GAAIuD,GAAO,GAAIH,GAAKlH,EAAIO,EAAIgC,KAAMhC,EAAIkB,GAAIkE,KACjC,CACP,GAAIS,GAAOuC,EAAiBtB,EAAMvD,EAClC,KAAKsC,EAAM,KACX,IAAIkD,GAAU,GAAIpC,GAAKlH,EAAIO,EAAIgC,KAAMhC,EAAIkB,GAAIkE,GACzCU,EAAQiC,EAAkBgB,EAASlD,EAAKtC,IAC5C,IAAIuC,EAAO,OAASD,KAAMA,EAAMC,MAAOA,KAK3ChI,EAAWoF,kBAAoB,SAAUzD,EAAIO,EAAKQ,EAAMS,GAEtD,MAAO8G,GADI,GAAIpB,GAAKlH,EAAIO,EAAIgC,KAAMhC,EAAIkB,GAAID,GAAQqE,KAAM,EAAG3B,GAAI1C,GAAQ,MACxCT,QAGhCgE,uBAAwB,IAAMwE,GAAI,SAAUjN,EAASoB,EAAQJ,IAUhE,SAAWkM,EAAQC,GACqD,gBAAlD,KAAZnM,EAA0B,YAActB,QAAQsB,SAA4C,KAAXI,EAAyBA,EAAOJ,QAAUmM,IAA8B,kBAAXjN,IAAyBA,EAAOsD,IAAMtD,EAAOiN,GAAWD,EAAOnL,WAAaoL,KACjO5L,KAAM,WA0CP,QAAS6L,GAAUC,GACjB,MAAO,IAAIZ,QAAO,UAAYY,EAAM,iBAYtC,QAASC,GAAenN,GACtB,IAAK,GAAIoN,GAAQpN,EAAEqN,WAAWtM,OAAQqM,EAAQ,IAAKA,EACjDpN,EAAEsN,YAAYtN,EAAEuN,WAElB,OAAOvN,GAGT,QAASwN,GAAqBC,EAAQzN,GACpC,MAAOmN,GAAeM,GAAQC,YAAY1N,GAG5C,QAAS8G,GAAIO,EAAKsG,EAAS7D,EAAW8D,GACpC,GAAI5N,GAAI8B,SAAS+L,cAAcxG,EAO/B,IANIyC,IACF9J,EAAE8J,UAAYA,GAEZ8D,IACF5N,EAAE4N,MAAME,QAAUF,GAEE,gBAAXD,GACT3N,EAAE0N,YAAY5L,SAASiM,eAAeJ,QACjC,IAAIA,EACT,IAAK,GAAInN,GAAI,EAAGA,EAAImN,EAAQ5M,SAAUP,EACpCR,EAAE0N,YAAYC,EAAQnN,GAG1B,OAAOR,GAGT,QAASgO,GAAK3G,EAAKsG,EAAS7D,EAAW8D,GACrC,GAAI5N,GAAI8G,EAAIO,EAAKsG,EAAS7D,EAAW8D,EAErC,OADA5N,GAAEiO,aAAa,OAAQ,gBAChBjO,EA0BT,QAASkO,GAAST,EAAQU,GAKxB,GAJsB,GAAlBA,EAAMC,WAEND,EAAQA,EAAME,YAEdZ,EAAOS,SACT,MAAOT,GAAOS,SAASC,EAEzB,IAIE,GAHsB,IAAlBA,EAAMC,WACRD,EAAQA,EAAMG,MAEZH,GAASV,EACX,OAAO,QAEFU,EAAQA,EAAME,YAGzB,QAASE,KAIP,GAAIC,EACJ,KACEA,EAAgB1M,SAAS0M,cACzB,MAAOxO,GACPwO,EAAgB1M,SAAS2M,MAAQ,KAEnC,KAAOD,GAAiBA,EAAcE,YAAcF,EAAcE,WAAWF,eAC3EA,EAAgBA,EAAcE,WAAWF,aAE3C,OAAOA,GAGT,QAASG,GAASC,EAAM1B,GACtB,GAAI2B,GAAUD,EAAK9E,SACdmD,GAAUC,GAAK7H,KAAKwJ,KACvBD,EAAK9E,YAAc+E,EAAU,IAAM,IAAM3B,GAG7C,QAAS4B,GAAYvO,EAAGiK,GAEtB,IAAK,GADDuE,GAAKxO,EAAEyO,MAAM,KACRxO,EAAI,EAAGA,EAAIuO,EAAGhO,OAAQP,IACzBuO,EAAGvO,KAAOyM,EAAU8B,EAAGvO,IAAI6E,KAAKmF,KAClCA,GAAK,IAAMuE,EAAGvO,GAGlB,OAAOgK,GAoBT,QAASyE,GAAKxO,GACZ,GAAIyO,GAAOC,MAAMvP,UAAUqF,MAAMnE,KAAKsO,UAAW,EACjD,OAAO,YACL,MAAO3O,GAAE4O,MAAM,KAAMH,IAIzB,QAASI,GAAQ5P,EAAK6P,EAAQC,GACvBD,IACHA,KAEF,KAAK,GAAIE,KAAQ/P,IACXA,EAAIgQ,eAAeD,KAAwB,IAAdD,GAAwBD,EAAOG,eAAeD,KAC7EF,EAAOE,GAAQ/P,EAAI+P,GAGvB,OAAOF,GAKT,QAASI,GAAYrK,EAAQP,EAAK6K,EAASC,EAAYC,GAC1C,MAAP/K,IAEU,IADZA,EAAMO,EAAOyK,OAAO,kBAElBhL,EAAMO,EAAOvE,OAGjB,KAAK,GAAIP,GAAIqP,GAAc,EAAG3P,EAAI4P,GAAc,IAAK,CACnD,GAAIE,GAAU1K,EAAOE,QAAQ,KAAMhF,EACnC,IAAIwP,EAAU,GAAKA,GAAWjL,EAC5B,MAAO7E,IAAK6E,EAAMvE,EAEpBN,IAAK8P,EAAUxP,EACfN,GAAK0P,EAAU1P,EAAI0P,EACnBpP,EAAIwP,EAAU,GAYlB,QAASxK,GAAQyK,EAAOnJ,GACtB,IAAK,GAAItG,GAAI,EAAGA,EAAIyP,EAAMlP,SAAUP,EAClC,GAAIyP,EAAMzP,IAAMsG,EACd,MAAOtG,EAGX,QAAQ,EAmBV,QAAS0P,GAAW5K,EAAQ6K,EAAMP,GAChC,IAAK,GAAI9L,GAAM,EAAGsM,EAAM,IAAK,CAC3B,GAAIJ,GAAU1K,EAAOE,QAAQ,KAAM1B,IACnB,GAAZkM,IACFA,EAAU1K,EAAOvE,OAEnB,IAAIsP,GAAUL,EAAUlM,CACxB,IAAIkM,GAAW1K,EAAOvE,QAAUqP,EAAMC,GAAWF,EAC/C,MAAOrM,GAAMmD,KAAKC,IAAImJ,EAASF,EAAOC,EAKxC,IAHAA,GAAOJ,EAAUlM,EACjBsM,GAAOR,EAAUQ,EAAMR,EACvB9L,EAAMkM,EAAU,EACZI,GAAOD,EACT,MAAOrM,IAMb,QAASwM,GAASpQ,GAChB,KAAOqQ,GAAUxP,QAAUb,GACzBqQ,GAAUtE,KAAKuE,EAAID,IAAa,IAElC,OAAOA,IAAUrQ,GAGnB,QAASsQ,GAAIC,GACX,MAAOA,GAAIA,EAAI1P,OAAS,GAG1B,QAASiH,GAAIiI,EAAOxP,GAElB,IAAK,GADDiQ,MACKlQ,EAAI,EAAGA,EAAIyP,EAAMlP,OAAQP,IAChCkQ,EAAIlQ,GAAKC,EAAEwP,EAAMzP,GAAIA,EAEvB,OAAOkQ,GAGT,QAASC,GAAaV,EAAOW,EAAOC,GAGlC,IAFA,GAAI/M,GAAM,EACNgN,EAAWD,EAAMD,GACd9M,EAAMmM,EAAMlP,QAAU8P,EAAMZ,EAAMnM,KAASgN,GAChDhN,GAEFmM,GAAMc,OAAOjN,EAAK,EAAG8M,GAGvB,QAASI,MAET,QAASC,GAAUC,EAAMC,GACvB,GAAIC,EAUJ,OATIC,QAAOC,OACTF,EAAOC,OAAOC,OAAOJ,IAErBF,EAAQpR,UAAYsR,EACpBE,EAAO,GAAIJ,IAETG,GACF7B,EAAQ6B,EAAOC,GAEVA,EAIT,QAASG,GAAgBvM,GACvB,MAAQ,KAAKK,KAAKL,IAAOA,EAAK,MAAWA,EAAGwM,eAAiBxM,EAAGG,eAAiBsM,GAA2BpM,KAAKL,IAGnH,QAAS0M,GAAW1M,EAAI2M,GACtB,MAAKA,MAGDA,EAAOC,OAAOpM,QAAQ,QAAU,GAAK+L,EAAgBvM,KAGlD2M,EAAOtM,KAAKL,GALVuM,EAAgBvM,GAQ3B,QAAS6M,GAAQnS,GACf,IAAK,GAAIQ,KAAKR,GACZ,GAAIA,EAAIgQ,eAAexP,IAAMR,EAAIQ,GAC/B,OAAO,CAGX,QAAO,EAST,QAAS4R,GAAgB9M,GACvB,MAAOA,GAAG+M,WAAW,IAAM,KAAOC,GAAe3M,KAAKL,GAIxD,QAASiN,GAAmBC,EAAKpO,EAAKqO,GACpC,MAAQA,EAAM,EAAIrO,EAAM,EAAIA,EAAMoO,EAAInR,SAAW+Q,EAAgBI,EAAI3M,OAAOzB,KAC1EA,GAAOqO,CAET,OAAOrO,GAKT,QAASsO,GAAUC,EAAMjJ,EAAM3B,GAC7B,OAAS,CACP,GAAIR,KAAKqL,IAAIlJ,EAAO3B,IAAO,EACzB,MAAO4K,GAAKjJ,GAAQA,EAAO3B,CAE7B,IAAI8K,GAAMtL,KAAKuL,OAAOpJ,EAAO3B,GAAM,EAC/B4K,GAAKE,GACP9K,EAAK8K,EAELnJ,EAAOmJ,GASb,QAASE,GAAQC,EAAOC,EAAKC,GAC3B,GAAIC,GAAIzR,IACRA,MAAKwR,MAAQA,EAGbC,EAAEC,gBAAkBhM,EAAI,MAAO,KAAM,+BACrC+L,EAAEC,gBAAgB7E,aAAa,iBAAkB,QAGjD4E,EAAEE,aAAejM,EAAI,MAAO,KAAM,4BAClC+L,EAAEE,aAAa9E,aAAa,iBAAkB,QAE9C4E,EAAEG,QAAUhF,EAAK,MAAO,KAAM,mBAE9B6E,EAAEI,aAAenM,EAAI,MAAO,KAAM,KAAM,kCACxC+L,EAAEK,UAAYpM,EAAI,MAAO,KAAM,sBAE/B+L,EAAEM,QAAUrM,EAAI,MAAO,KAAM,sBAE7B+L,EAAEO,YAActM,EAAI,MAAO,KAAM,sBAEjC+L,EAAEQ,UAAYrF,EAAK,OAAQ6E,EAAEM,QAASN,EAAEO,YAAaP,EAAEI,aAAcJ,EAAEK,UAAWL,EAAEG,SAAU,KAAM,oCACpG,IAAIM,GAAQtF,EAAK,OAAQ6E,EAAEQ,WAAY,mBAEvCR,GAAEU,MAAQzM,EAAI,OAAQwM,GAAQ,KAAM,sBAEpCT,EAAEW,MAAQ1M,EAAI,OAAQ+L,EAAEU,OAAQ,oBAChCV,EAAEY,WAAa,KAIfZ,EAAEa,aAAe5M,EAAI,MAAO,KAAM,KAAM,+BAAiC6M,GAAc,mBAEvFd,EAAEe,QAAU9M,EAAI,MAAO,KAAM,sBAC7B+L,EAAEgB,WAAa,KAEfhB,EAAEiB,SAAWhN,EAAI,OAAQ+L,EAAEW,MAAOX,EAAEa,aAAcb,EAAEe,SAAU,qBAC9Df,EAAEiB,SAAS7F,aAAa,WAAY,MAEpC4E,EAAEkB,QAAUjN,EAAI,OAAQ+L,EAAEC,gBAAiBD,EAAEE,aAAcF,EAAEiB,UAAW,cAGpEE,IAAMC,GAAa,IACrBpB,EAAEe,QAAQhG,MAAMsG,QAAU,EAAErB,EAAEiB,SAASlG,MAAMuG,aAAe,GAEzDC,IAAYC,IAASC,KACxBzB,EAAEiB,SAASS,WAAY,GAGrB7B,IACEA,EAAMhF,YACRgF,EAAMhF,YAAYmF,EAAEkB,SAEpBrB,EAAMG,EAAEkB,UAKZlB,EAAE2B,SAAW3B,EAAE4B,OAAS9B,EAAI+B,MAC5B7B,EAAE8B,iBAAmB9B,EAAE+B,eAAiBjC,EAAI+B,MAE5C7B,EAAEgC,QACFhC,EAAEiC,aAAe,KAGjBjC,EAAEkC,iBAAmB,KAErBlC,EAAEmC,WAAa,EACfnC,EAAEoC,eAAiBpC,EAAEqC,cAAgB,EACrCrC,EAAEsC,kBAAoB,KAEtBtC,EAAEuC,eAAiBvC,EAAEwC,UAAYxC,EAAEyC,SAAW,EAC9CzC,EAAE0C,mBAAoB,EAItB1C,EAAE2C,aAAe3C,EAAE4C,kBAAoB5C,EAAE6C,aAAe,KAIxD7C,EAAE8C,cAAe,EAEjB9C,EAAE+C,gBAAkB/C,EAAEgD,iBAAmBhD,EAAEiD,eAAiB,KAI5DjD,EAAEkD,QAAU,KACZlD,EAAEmD,cAAgB,EAClBnD,EAAEoD,gBAAiB,EAGnBpD,EAAEqD,QAAUrD,EAAEsD,QAAUtD,EAAEuD,YAAcvD,EAAEwD,YAAc,KAGxDxD,EAAEyD,OAAQ,EAIVzD,EAAE0D,kBAAoB,KAEtB1D,EAAE2D,YAAc,KAEhB5D,EAAM6D,KAAK5D,GAIb,QAASnM,GAAQiM,EAAKzS,GAEpB,IADAA,GAAKyS,EAAI+B,OACD,GAAKxU,GAAKyS,EAAI+D,KACpB,KAAM,IAAIhW,OAAM,qBAAuBR,EAAIyS,EAAI+B,OAAS,oBAG1D,KADA,GAAIiC,GAAQhE,GACJgE,EAAMrD,OACZ,IAAK,GAAI9S,GAAI,KAAMA,EAAG,CACpB,GAAI2N,GAAQwI,EAAMC,SAASpW,GACvBqW,EAAK1I,EAAM2I,WACf,IAAI5W,EAAI2W,EAAI,CACVF,EAAQxI,CAAM,OAEhBjO,GAAK2W,EAGT,MAAOF,GAAMrD,MAAMpT,GAKrB,QAAS6W,GAAWpE,EAAKpM,EAAOxB,GAC9B,GAAI2L,MACAxQ,EAAIqG,EAAMT,IAYd,OAXA6M,GAAI/H,KAAKrE,EAAMT,KAAMf,EAAIe,KAAO,EAAG,SAAUA,GAC3C,GAAIH,GAAOG,EAAKH,IACZzF,IAAK6E,EAAIe,OACXH,EAAOA,EAAKV,MAAM,EAAGF,EAAIC,KAEvB9E,GAAKqG,EAAMT,OACbH,EAAOA,EAAKV,MAAMsB,EAAMvB,KAE1B0L,EAAIzE,KAAKtG,KACPzF,IAEGwQ,EAGT,QAASsG,GAASrE,EAAKvJ,EAAM3B,GAC3B,GAAIiJ,KAIJ,OAHAiC,GAAI/H,KAAKxB,EAAM3B,EAAI,SAAU3B,GAC3B4K,EAAIzE,KAAKnG,EAAKH,QAET+K,EAKT,QAASuG,GAAiBnR,EAAMoR,GAC9B,GAAIC,GAAOD,EAASpR,EAAKoR,MACzB,IAAIC,EACF,IAAK,GAAIjX,GAAI4F,EAAM5F,EAAGA,EAAIA,EAAEuN,OAC1BvN,EAAEgX,QAAUC,EAOlB,QAASC,GAAOtR,GACd,GAAmB,MAAfA,EAAK2H,OACP,MAAO,KAIT,KAAK,GAFDzE,GAAMlD,EAAK2H,OACX4J,EAAK7R,EAAQwD,EAAIsK,MAAOxN,GACnB6Q,EAAQ3N,EAAIyE,OAAQkJ,EAAO3N,EAAM2N,EAAOA,EAAQA,EAAMlJ,OAC7D,IAAK,GAAIjN,GAAI,EACPmW,EAAMC,SAASpW,IAAMwI,IADRxI,EAIjB6W,GAAMV,EAAMC,SAASpW,GAAGsW,WAG5B,OAAOO,GAAKrO,EAAI0L,MAKlB,QAAS4C,GAAcX,EAAOY,GAC5B,GAAIrX,GAAIyW,EAAMjC,KACd8C,GAAO,EAAG,CACR,IAAK,GAAIC,GAAM,EAAGA,EAAMd,EAAMC,SAAS7V,SAAU0W,EAAK,CACpD,GAAItJ,GAAQwI,EAAMC,SAASa,GACvBzS,EAAKmJ,EAAM+I,MACf,IAAIK,EAAIvS,EAAI,CACV2R,EAAQxI,CAAM,SAASqJ,GAEzBD,GAAKvS,EACL9E,GAAKiO,EAAM2I,YAEb,MAAO5W,UACCyW,EAAMrD,MAEhB,KADA,GAAI9S,GAAI,EACDA,EAAImW,EAAMrD,MAAMvS,SAAUP,EAAG,CAClC,GAAIsF,GAAO6Q,EAAMrD,MAAM9S,GACnBkX,EAAK5R,EAAKoR,MACd,IAAIK,EAAIG,EACN,KAEFH,IAAKG,EAEP,MAAOxX,GAAIM,EAGb,QAASmX,GAAOhF,EAAK/R,GACnB,MAAOA,IAAK+R,EAAI+B,OAAS9T,EAAI+R,EAAI+B,MAAQ/B,EAAI+D,KAG/C,QAASkB,GAAcC,EAASrX,GAC9B,MAAOsX,QAAOD,EAAQE,oBAAoBvX,EAAIqX,EAAQG,kBAIxD,QAASnS,GAAIC,EAAMd,EAAIiT,GAGrB,OAFe,KAAXA,IAAmBA,EAAS,QAE1B7W,eAAgByE,IACpB,MAAO,IAAIA,GAAIC,EAAMd,EAAIiT,EAE3B7W,MAAK0E,KAAOA,EACZ1E,KAAK4D,GAAKA,EACV5D,KAAK6W,OAASA,EAKhB,QAAS1N,GAAIhK,EAAGiK,GACd,MAAOjK,GAAEuF,KAAO0E,EAAE1E,MAAQvF,EAAEyE,GAAKwF,EAAExF,GAGrC,QAASkT,GAAe3X,EAAGiK,GACzB,MAAOjK,GAAE0X,QAAUzN,EAAEyN,QAAuB,GAAb1N,EAAIhK,EAAGiK,GAGxC,QAAS2N,GAAQC,GACf,MAAOvS,GAAIuS,EAAEtS,KAAMsS,EAAEpT,IAEvB,QAASqT,GAAO9X,EAAGiK,GACjB,MAAOD,GAAIhK,EAAGiK,GAAK,EAAIA,EAAIjK,EAE7B,QAAS+X,GAAO/X,EAAGiK,GACjB,MAAOD,GAAIhK,EAAGiK,GAAK,EAAIjK,EAAIiK,EAK7B,QAAS+N,GAAS5F,EAAKzS,GACrB,MAAO+G,MAAKoC,IAAIsJ,EAAI+B,MAAOzN,KAAKC,IAAIhH,EAAGyS,EAAI+B,MAAQ/B,EAAI+D,KAAO,IAEhE,QAAS8B,GAAS7F,EAAK7O,GACrB,GAAIA,EAAIgC,KAAO6M,EAAI+B,MACjB,MAAO7O,GAAI8M,EAAI+B,MAAO,EAExB,IAAI+D,GAAO9F,EAAI+B,MAAQ/B,EAAI+D,KAAO,CAClC,OAAI5S,GAAIgC,KAAO2S,EACN5S,EAAI4S,EAAM/R,EAAQiM,EAAK8F,GAAM9S,KAAK5E,QAEpC2X,EAAU5U,EAAK4C,EAAQiM,EAAK7O,EAAIgC,MAAMH,KAAK5E,QAEpD,QAAS2X,GAAU5U,EAAK6U,GACtB,GAAI3T,GAAKlB,EAAIkB,EACb,OAAU,OAANA,GAAcA,EAAK2T,EACd9S,EAAI/B,EAAIgC,KAAM6S,GACZ3T,EAAK,EACPa,EAAI/B,EAAIgC,KAAM,GAEdhC,EAGX,QAAS8U,GAAajG,EAAK1C,GAEzB,IAAK,GADDS,MACKlQ,EAAI,EAAGA,EAAIyP,EAAMlP,OAAQP,IAChCkQ,EAAIlQ,GAAKgY,EAAS7F,EAAK1C,EAAMzP,GAE/B,OAAOkQ,GAOT,QAASmI,KACPC,IAAmB,EAGrB,QAASC,KACPC,IAAoB,EAKtB,QAASC,GAAWC,EAAQ9P,EAAM3B,GAChCrG,KAAK8X,OAASA,EACd9X,KAAKgI,KAAOA,EAAKhI,KAAKqG,GAAKA,EAI7B,QAAS0R,GAAiBC,EAAOF,GAC/B,GAAIE,EACF,IAAK,GAAI5Y,GAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAAG,CACrC,GAAI6Y,GAAOD,EAAM5Y,EACjB,IAAI6Y,EAAKH,QAAUA,EACjB,MAAOG,IAOf,QAASC,GAAiBF,EAAOC,GAE/B,IAAK,GADDlZ,GACKK,EAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAC9B4Y,EAAM5Y,IAAM6Y,IACblZ,IAAMA,OAAS8L,KAAKmN,EAAM5Y,GAG/B,OAAOL,GAGT,QAASoZ,GAAczT,EAAMuT,GAC3BvT,EAAK0T,YAAc1T,EAAK0T,YAAc1T,EAAK0T,YAAYC,QAAQJ,KAAUA,GACzEA,EAAKH,OAAOQ,WAAW5T,GAOzB,QAAS6T,GAAkB9R,EAAKmE,EAAS4N,GACvC,GAAIC,EACJ,IAAIhS,EACF,IAAK,GAAIrH,GAAI,EAAGA,EAAIqH,EAAI9G,SAAUP,EAAG,CACnC,GAAI6Y,GAAOxR,EAAIrH,GACX0Y,EAASG,EAAKH,OACdY,EAA4B,MAAbT,EAAKjQ,OAAiB8P,EAAOa,cAAgBV,EAAKjQ,MAAQ4C,EAAUqN,EAAKjQ,KAAO4C,EACnG,IAAI8N,GAAgBT,EAAKjQ,MAAQ4C,GAA0B,YAAfkN,EAAO9T,QAAwBwU,IAAaP,EAAKH,OAAOc,YAAa,CAC/G,GAAIC,GAAuB,MAAXZ,EAAK5R,KAAeyR,EAAOgB,eAAiBb,EAAK5R,IAAMuE,EAAUqN,EAAK5R,GAAKuE,IAAU6N,IAAOA,OAAU5N,KAAK,GAAIgN,GAAWC,EAAQG,EAAKjQ,KAAM6Q,EAAY,KAAOZ,EAAK5R,MAI3L,MAAOoS,GAET,QAASM,GAAiBtS,EAAKuE,EAAOwN,GACpC,GAAIC,EACJ,IAAIhS,EACF,IAAK,GAAIrH,GAAI,EAAGA,EAAIqH,EAAI9G,SAAUP,EAAG,CACnC,GAAI6Y,GAAOxR,EAAIrH,GACX0Y,EAASG,EAAKH,OACde,EAAuB,MAAXZ,EAAK5R,KAAeyR,EAAOgB,eAAiBb,EAAK5R,IAAM2E,EAAQiN,EAAK5R,GAAK2E,EACzF,IAAI6N,GAAaZ,EAAKjQ,MAAQgD,GAAwB,YAAf8M,EAAO9T,QAAwBwU,GAAYP,EAAKH,OAAOc,YAAa,CACzG,GAAIF,GAA4B,MAAbT,EAAKjQ,OAAiB8P,EAAOa,cAAgBV,EAAKjQ,MAAQgD,EAAQiN,EAAKjQ,KAAOgD,IAAQyN,IAAOA,OAAU5N,KAAK,GAAIgN,GAAWC,EAAQY,EAAe,KAAOT,EAAKjQ,KAAOgD,EAAkB,MAAXiN,EAAK5R,GAAa,KAAO4R,EAAK5R,GAAK2E,KAIxO,MAAOyN,GAST,QAASO,GAAuBzH,EAAK0H,GACnC,GAAIA,EAAOC,KACT,MAAO,KAET,IAAIC,GAAW5C,EAAOhF,EAAK0H,EAAOjR,KAAKtD,OAASY,EAAQiM,EAAK0H,EAAOjR,KAAKtD,MAAM0T,YAC3EgB,EAAU7C,EAAOhF,EAAK0H,EAAO5S,GAAG3B,OAASY,EAAQiM,EAAK0H,EAAO5S,GAAG3B,MAAM0T,WAC1E,KAAKe,IAAaC,EAChB,MAAO,KAGT,IAAIxO,GAAUqO,EAAOjR,KAAKpE,GACtBoH,EAAQiO,EAAO5S,GAAGzC,GAClB4U,EAA0C,GAA/BrP,EAAI8P,EAAOjR,KAAMiR,EAAO5S,IAEnCiN,EAAQiF,EAAkBY,EAAUvO,EAAS4N,GAC7CnB,EAAO0B,EAAiBK,EAASpO,EAAOwN,GAGxCa,EAAiC,GAAtBJ,EAAO1U,KAAK5E,OACvB2Z,EAASlK,EAAI6J,EAAO1U,MAAM5E,QAAU0Z,EAAWzO,EAAU,EAC7D,IAAI0I,EAEF,IAAK,GAAIlU,GAAI,EAAGA,EAAIkU,EAAM3T,SAAUP,EAAG,CACrC,GAAI6Y,GAAO3E,EAAMlU,EACjB,IAAe,MAAX6Y,EAAK5R,GAAY,CACnB,GAAI2C,GAAQ+O,EAAiBV,EAAMY,EAAKH,OACnC9O,GAEMqQ,IACTpB,EAAK5R,GAAiB,MAAZ2C,EAAM3C,GAAa,KAAO2C,EAAM3C,GAAKiT,GAF/CrB,EAAK5R,GAAKuE,GAOlB,GAAIyM,EAEF,IAAK,GAAIhB,GAAM,EAAGA,EAAMgB,EAAK1X,SAAU0W,EAAK,CAC1C,GAAIkD,GAASlC,EAAKhB,EAIlB,IAHiB,MAAbkD,EAAOlT,KACTkT,EAAOlT,IAAMiT,GAEI,MAAfC,EAAOvR,KAAc,CACvB,GAAIwR,GAAUzB,EAAiBzE,EAAOiG,EAAOzB,OACxC0B,KACHD,EAAOvR,KAAOsR,EACVD,IACD/F,IAAUA,OAAazI,KAAK0O,QAIjCA,GAAOvR,MAAQsR,EACXD,IACD/F,IAAUA,OAAazI,KAAK0O,GAMjCjG,IACFA,EAAQmG,GAAgBnG,IAEtB+D,GAAQA,GAAQ/D,IAClB+D,EAAOoC,GAAgBpC,GAGzB,IAAIqC,IAAcpG,EAClB,KAAK+F,EAAU,CAEb,GACIM,GADAC,EAAMX,EAAO1U,KAAK5E,OAAS,CAE/B,IAAIia,EAAM,GAAKtG,EACb,IAAK,GAAIuG,GAAM,EAAGA,EAAMvG,EAAM3T,SAAUka,EACjB,MAAjBvG,EAAMuG,GAAKxT,KACZsT,IAAeA,OAAkB9O,KAAK,GAAIgN,GAAWvE,EAAMuG,GAAK/B,OAAQ,KAAM,MAIrF,KAAK,GAAIgC,GAAM,EAAGA,EAAMF,IAAOE,EAC7BJ,EAAW7O,KAAK8O,EAElBD,GAAW7O,KAAKwM,GAElB,MAAOqC,GAKT,QAASD,IAAgBzB,GACvB,IAAK,GAAI5Y,GAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAAG,CACrC,GAAI6Y,GAAOD,EAAM5Y,EACA,OAAb6Y,EAAKjQ,MAAgBiQ,EAAKjQ,MAAQiQ,EAAK5R,KAAqC,IAA/B4R,EAAKH,OAAOiC,gBAC3D/B,EAAMrI,OAAOvQ,IAAK,GAGtB,MAAK4Y,GAAMrY,OAGJqY,EAFE,KAMX,QAASgC,IAAqBzI,EAAKvJ,EAAM3B,GACvC,GAAI4T,GAAU,IAWd,IAVA1I,EAAI/H,KAAKxB,EAAKtD,KAAM2B,EAAG3B,KAAO,EAAG,SAAUA,GACzC,GAAIA,EAAK0T,YACP,IAAK,GAAIhZ,GAAI,EAAGA,EAAIsF,EAAK0T,YAAYzY,SAAUP,EAAG,CAChD,GAAI8a,GAAOxV,EAAK0T,YAAYhZ,GAAG0Y,QAC3BoC,EAAKC,UAAcF,IAAsC,GAA3B7V,EAAQ6V,EAASC,KAChDD,IAAYA,OAAepP,KAAKqP,OAKpCD,EACH,MAAO,KAGT,KAAK,GADDG,KAAWpS,KAAMA,EAAM3B,GAAIA,IACtBjH,EAAI,EAAGA,EAAI6a,EAAQta,SAAUP,EAGpC,IAAK,GAFDib,GAAKJ,EAAQ7a,GACbkb,EAAID,EAAGE,KAAK,GACPC,EAAI,EAAGA,EAAIJ,EAAMza,SAAU6a,EAAG,CACrC,GAAIC,GAAIL,EAAMI,EACd,MAAIrR,EAAIsR,EAAEpU,GAAIiU,EAAEtS,MAAQ,GAAKmB,EAAIsR,EAAEzS,KAAMsS,EAAEjU,IAAM,GAAjD,CAGA,GAAIqU,IAAYF,EAAG,GACfG,EAAQxR,EAAIsR,EAAEzS,KAAMsS,EAAEtS,MACtB4S,EAAMzR,EAAIsR,EAAEpU,GAAIiU,EAAEjU,KAClBsU,EAAQ,IAAMN,EAAG1B,gBAAkBgC,IACrCD,EAAS7P,MAAO7C,KAAMyS,EAAEzS,KAAM3B,GAAIiU,EAAEtS,QAElC4S,EAAM,IAAMP,EAAGvB,iBAAmB8B,IACpCF,EAAS7P,MAAO7C,KAAMsS,EAAEjU,GAAIA,GAAIoU,EAAEpU,KAEpC+T,EAAMzK,OAAO1B,MAAMmM,EAAOM,GAC1BF,GAAKE,EAAS/a,OAAS,GAG3B,MAAOya,GAIT,QAASS,IAAkBnW,GACzB,GAAIsT,GAAQtT,EAAK0T,WACjB,IAAKJ,EAAL,CAGA,IAAK,GAAI5Y,GAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAClC4Y,EAAM5Y,GAAG0Y,OAAOgD,WAAWpW,EAE7BA,GAAK0T,YAAc,MAErB,QAAS2C,IAAkBrW,EAAMsT,GAC/B,GAAKA,EAAL,CAGA,IAAK,GAAI5Y,GAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAClC4Y,EAAM5Y,GAAG0Y,OAAOQ,WAAW5T,EAE7BA,GAAK0T,YAAcJ,GAKrB,QAASgD,IAAUlD,GACjB,MAAOA,GAAOa,eAAiB,EAAI,EAErC,QAASsC,IAAWnD,GAClB,MAAOA,GAAOgB,eAAiB,EAAI,EAMrC,QAASoC,IAAwB/b,EAAGiK,GAClC,GAAI+R,GAAUhc,EAAE+S,MAAMvS,OAASyJ,EAAE8I,MAAMvS,MACvC,IAAe,GAAXwb,EACF,MAAOA,EAET,IAAIC,GAAOjc,EAAEob,OACTc,EAAOjS,EAAEmR,OACTe,EAAUnS,EAAIiS,EAAKpT,KAAMqT,EAAKrT,OAASgT,GAAU7b,GAAK6b,GAAU5R,EACpE,IAAIkS,EACF,OAAQA,CAEV,IAAIC,GAAQpS,EAAIiS,EAAK/U,GAAIgV,EAAKhV,KAAO4U,GAAW9b,GAAK8b,GAAW7R,EAChE,OAAImS,IAGGnS,EAAEoS,GAAKrc,EAAEqc,GAKlB,QAASC,IAAoB/W,EAAMS,GACjC,GACI6D,GADA0S,EAAM9D,IAAqBlT,EAAK0T,WAEpC,IAAIsD,EACF,IAAK,GAAIC,OAAK,GAAQvc,EAAI,EAAGA,EAAIsc,EAAI/b,SAAUP,EAC7Cuc,EAAKD,EAAItc,GACLuc,EAAG7D,OAAO8D,WAA0C,OAA5BzW,EAAQwW,EAAG3T,KAAO2T,EAAGtV,OAAiB2C,GAASkS,GAAwBlS,EAAO2S,EAAG7D,QAAU,KACrH9O,EAAQ2S,EAAG7D,OAIjB,OAAO9O,GAET,QAAS6S,IAAqBnX,GAC5B,MAAO+W,IAAoB/W,GAAM,GAEnC,QAASoX,IAAmBpX,GAC1B,MAAO+W,IAAoB/W,GAAM,GAMnC,QAASqX,IAA0BxK,EAAKyK,EAAWhU,EAAM3B,EAAIyR,GAC3D,GAAIpT,GAAOY,EAAQiM,EAAKyK,GACpBN,EAAM9D,IAAqBlT,EAAK0T,WACpC,IAAIsD,EACF,IAAK,GAAItc,GAAI,EAAGA,EAAIsc,EAAI/b,SAAUP,EAAG,CACnC,GAAIuc,GAAKD,EAAItc,EACb,IAAKuc,EAAG7D,OAAO8D,UAAf,CAGA,GAAI5S,GAAQ2S,EAAG7D,OAAOyC,KAAK,GACvBe,EAAUnS,EAAIH,EAAMhB,KAAMA,IAASgT,GAAUW,EAAG7D,QAAUkD,GAAUlD,GACpEyD,EAAQpS,EAAIH,EAAM3C,GAAIA,IAAO4U,GAAWU,EAAG7D,QAAUmD,GAAWnD,EACpE,MAAIwD,GAAW,GAAKC,GAAS,GAAKD,GAAW,GAAKC,GAAS,KAGvDD,GAAW,IAAMK,EAAG7D,OAAOgB,gBAAkBhB,EAAOa,cAAgBxP,EAAIH,EAAM3C,GAAI2B,IAAS,EAAImB,EAAIH,EAAM3C,GAAI2B,GAAQ,IAAMsT,GAAW,IAAMK,EAAG7D,OAAOgB,gBAAkBhB,EAAOa,cAAgBxP,EAAIH,EAAMhB,KAAM3B,IAAO,EAAI8C,EAAIH,EAAMhB,KAAM3B,GAAM,IAClP,OAAO,IAUf,QAAS4V,IAAWvX,GAElB,IADA,GAAIwX,GACGA,EAASL,GAAqBnX,IACnCA,EAAOwX,EAAO3B,MAAM,GAAG,GAAM7V,IAE/B,OAAOA,GAGT,QAASyX,IAAczX,GAErB,IADA,GAAIwX,GACGA,EAASJ,GAAmBpX,IACjCA,EAAOwX,EAAO3B,KAAK,GAAG,GAAM7V,IAE9B,OAAOA,GAKT,QAAS0X,IAAoB1X,GAE3B,IADA,GAAIwX,GAAQhK,EACLgK,EAASJ,GAAmBpX,IACjCA,EAAOwX,EAAO3B,KAAK,GAAG,GAAM7V,MAAMwN,IAAUA,OAAarH,KAAKnG,EAEhE,OAAOwN,GAKT,QAASmK,IAAa9K,EAAK+K,GACzB,GAAI5X,GAAOY,EAAQiM,EAAK+K,GACpBC,EAAMN,GAAWvX,EACrB,OAAIA,IAAQ6X,EACHD,EAEFtG,EAAOuG,GAKhB,QAASC,IAAgBjL,EAAK+K,GAC5B,GAAIA,EAAQ/K,EAAIxL,WACd,MAAOuW,EAET,IACIJ,GADAxX,EAAOY,EAAQiM,EAAK+K,EAExB,KAAKG,GAAalL,EAAK7M,GACrB,MAAO4X,EAET,MAAOJ,EAASJ,GAAmBpX,IACjCA,EAAOwX,EAAO3B,KAAK,GAAG,GAAM7V,IAE9B,OAAOsR,GAAOtR,GAAQ,EAMxB,QAAS+X,IAAalL,EAAK7M,GACzB,GAAIgX,GAAM9D,IAAqBlT,EAAK0T,WACpC,IAAIsD,EACF,IAAK,GAAIC,OAAK,GAAQvc,EAAI,EAAGA,EAAIsc,EAAI/b,SAAUP,EAE7C,GADAuc,EAAKD,EAAItc,GACJuc,EAAG7D,OAAO8D,UAAf,CAGA,GAAe,MAAXD,EAAG3T,KACL,OAAO,CAET,KAAI2T,EAAG7D,OAAO4E,YAGC,GAAXf,EAAG3T,MAAa2T,EAAG7D,OAAOa,eAAiBgE,GAAkBpL,EAAK7M,EAAMiX,GAC1E,OAAO,GAKf,QAASgB,IAAkBpL,EAAK7M,EAAMuT,GACpC,GAAe,MAAXA,EAAK5R,GAAY,CACnB,GAAI1C,GAAMsU,EAAKH,OAAOyC,KAAK,GAAG,EAC9B,OAAOoC,IAAkBpL,EAAK5N,EAAIe,KAAMqT,EAAiBpU,EAAIe,KAAK0T,YAAaH,EAAKH,SAEtF,GAAIG,EAAKH,OAAOgB,gBAAkBb,EAAK5R,IAAM3B,EAAKH,KAAK5E,OACrD,OAAO,CAET,KAAK,GAAIgc,OAAK,GAAQvc,EAAI,EAAGA,EAAIsF,EAAK0T,YAAYzY,SAAUP,EAE1D,GADAuc,EAAKjX,EAAK0T,YAAYhZ,GAClBuc,EAAG7D,OAAO8D,YAAcD,EAAG7D,OAAO4E,YAAcf,EAAG3T,MAAQiQ,EAAK5R,KAAgB,MAATsV,EAAGtV,IAAcsV,EAAGtV,IAAM4R,EAAKjQ,QAAU2T,EAAG7D,OAAOa,eAAiBV,EAAKH,OAAOgB,iBAAmB6D,GAAkBpL,EAAK7M,EAAMiX,GACzM,OAAO,EAMb,QAASiB,IAAcC,GACrBA,EAAUZ,GAAWY,EAIrB,KAAK,GAFD1G,GAAI,EACJZ,EAAQsH,EAAQxQ,OACXjN,EAAI,EAAGA,EAAImW,EAAMrD,MAAMvS,SAAUP,EAAG,CAC3C,GAAIsF,GAAO6Q,EAAMrD,MAAM9S,EACvB,IAAIsF,GAAQmY,EACV,KAEA1G,IAAKzR,EAAKoR,OAGd,IAAK,GAAI2E,GAAIlF,EAAMlJ,OAAQoO,EAAGlF,EAAQkF,EAAGA,EAAIlF,EAAMlJ,OACjD,IAAK,GAAIgK,GAAM,EAAGA,EAAMoE,EAAEjF,SAAS7V,SAAU0W,EAAK,CAChD,GAAIzO,GAAM6S,EAAEjF,SAASa,EACrB,IAAIzO,GAAO2N,EACT,KAEAY,IAAKvO,EAAIkO,OAIf,MAAOK,GAMT,QAAS2G,IAAWpY,GAClB,GAAmB,GAAfA,EAAKoR,OACP,MAAO,EAKT,KAHA,GACIoG,GADAa,EAAMrY,EAAKH,KAAK5E,OAEhBiI,EAAMlD,EACHwX,EAASL,GAAqBjU,IAAM,CACzC,GAAIoB,GAAQkT,EAAO3B,KAAK,GAAG,EAC3B3S,GAAMoB,EAAMhB,KAAKtD,KACjBqY,GAAO/T,EAAMhB,KAAKpE,GAAKoF,EAAM3C,GAAGzC,GAGlC,IADAgE,EAAMlD,EACCwX,EAASJ,GAAmBlU,IAAM,CACvC,GAAI4R,GAAU0C,EAAO3B,KAAK,GAAG,EAC7BwC,IAAOnV,EAAIrD,KAAK5E,OAAS6Z,EAAQxR,KAAKpE,GACtCgE,EAAM4R,EAAQnT,GAAG3B,KACjBqY,GAAOnV,EAAIrD,KAAK5E,OAAS6Z,EAAQnT,GAAGzC,GAEtC,MAAOmZ,GAIT,QAASC,IAAY7a,GACnB,GAAIsP,GAAItP,EAAG8a,QACP1L,EAAMpP,EAAGoP,GACbE,GAAEkD,QAAUrP,EAAQiM,EAAKA,EAAI+B,OAC7B7B,EAAEmD,cAAgBkI,GAAWrL,EAAEkD,SAC/BlD,EAAEoD,gBAAiB,EACnBtD,EAAI/H,KAAK,SAAU9E,GACjB,GAAIqY,GAAMD,GAAWpY,EACjBqY,GAAMtL,EAAEmD,gBACVnD,EAAEmD,cAAgBmI,EAClBtL,EAAEkD,QAAUjQ,KAOlB,QAASwY,IAAoBC,EAAOnV,EAAM3B,EAAIhH,GAC5C,IAAK8d,EACH,MAAO9d,GAAE2I,EAAM3B,EAAI,MAGrB,KAAK,GADD2C,IAAQ,EACH5J,EAAI,EAAGA,EAAI+d,EAAMxd,SAAUP,EAAG,CACrC,GAAIge,GAAOD,EAAM/d,IACbge,EAAKpV,KAAO3B,GAAM+W,EAAK/W,GAAK2B,GAAQA,GAAQ3B,GAAM+W,EAAK/W,IAAM2B,KAC/D3I,EAAEwG,KAAKoC,IAAImV,EAAKpV,KAAMA,GAAOnC,KAAKC,IAAIsX,EAAK/W,GAAIA,GAAmB,GAAd+W,EAAKC,MAAa,MAAQ,OAC9ErU,GAAQ,GAGPA,GACH3J,EAAE2I,EAAM3B,EAAI,OAKhB,QAASiX,IAAcH,EAAOvZ,EAAIiT,GAChC,GAAI7N,EACJuU,IAAY,IACZ,KAAK,GAAIne,GAAI,EAAGA,EAAI+d,EAAMxd,SAAUP,EAAG,CACrC,GAAIwI,GAAMuV,EAAM/d,EAChB,IAAIwI,EAAII,KAAOpE,GAAMgE,EAAIvB,GAAKzC,EAC5B,MAAOxE,EAELwI,GAAIvB,IAAMzC,IACRgE,EAAII,MAAQJ,EAAIvB,IAAgB,UAAVwQ,EACxB7N,EAAQ5J,EAERme,GAAYne,GAGZwI,EAAII,MAAQpE,IACVgE,EAAII,MAAQJ,EAAIvB,IAAgB,UAAVwQ,EACxB7N,EAAQ5J,EAERme,GAAYne,GAIlB,MAAgB,OAAT4J,EAAgBA,EAAQuU,GAuNjC,QAASC,IAAS9Y,EAAM+Y,GACtB,GAAIN,GAAQzY,EAAKyY,KAIjB,OAHa,OAATA,IACFA,EAAQzY,EAAKyY,MAAQO,GAAahZ,EAAKH,KAAMkZ,IAExCN,EAGT,QAASQ,IAAkBjZ,EAAMd,EAAImN,GACnC,GAAI5C,GAAS0C,EAAmBnM,EAAKH,KAAMX,EAAKmN,EAAKA,EACrD,OAAO5C,GAAS,GAAKA,EAASzJ,EAAKH,KAAK5E,OAAS,KAAOwO,EAG1D,QAASyP,IAAclZ,EAAMS,EAAO4L,GAClC,GAAInN,GAAK+Z,GAAkBjZ,EAAMS,EAAMvB,GAAImN,EAC3C,OAAa,OAANnN,EAAa,KAAO,GAAIa,GAAIU,EAAMT,KAAMd,EAAImN,EAAM,EAAI,QAAU,UAGzE,QAAS8M,IAAUC,EAAU3b,EAAI0a,EAAS7G,EAAQjF,GAChD,GAAI+M,EAAU,CACZ,GAAIX,GAAQK,GAASX,EAAS1a,EAAGoP,IAAIkM,UACrC,IAAIN,EAAO,CACT,GAGIvZ,GAHAwZ,EAAOrM,EAAM,EAAI3B,EAAI+N,GAASA,EAAM,GACpCY,EAAqBhN,EAAM,IAAoB,GAAdqM,EAAKC,OACtCxG,EAASkH,EAAqB,QAAU,QAQ5C,IAAIX,EAAKC,MAAQ,EAAG,CAClB,GAAIW,GAAOC,GAAsB9b,EAAI0a,EACrCjZ,GAAKmN,EAAM,EAAI8L,EAAQtY,KAAK5E,OAAS,EAAI,CACzC,IAAIue,GAAYC,GAAoBhc,EAAI6b,EAAMpa,GAAIwa,GAClDxa,GAAKoN,EAAU,SAAUpN,GACvB,MAAOua,IAAoBhc,EAAI6b,EAAMpa,GAAIwa,KAAOF,GAC/CnN,EAAM,IAAoB,GAAdqM,EAAKC,OAAcD,EAAKpV,KAAOoV,EAAK/W,GAAK,EAAGzC,GAC7C,UAAViT,IACFjT,EAAK+Z,GAAkBd,EAASjZ,EAAI,QAGtCA,GAAKmN,EAAM,EAAIqM,EAAK/W,GAAK+W,EAAKpV,IAEhC,OAAO,IAAIvD,GAAIuR,EAAQpS,EAAIiT,IAG/B,MAAO,IAAIpS,GAAIuR,EAAQjF,EAAM,EAAI8L,EAAQtY,KAAK5E,OAAS,EAAGoR,EAAM,EAAI,SAAW,SAGjF,QAASsN,IAAalc,EAAIuC,EAAMS,EAAO4L,GACrC,GAAIuN,GAAOd,GAAS9Y,EAAMvC,EAAGoP,IAAIkM,UACjC,KAAKa,EACH,MAAOV,IAAclZ,EAAMS,EAAO4L,EAEhC5L,GAAMvB,IAAMc,EAAKH,KAAK5E,QACxBwF,EAAMvB,GAAKc,EAAKH,KAAK5E,OACrBwF,EAAM0R,OAAS,UACN1R,EAAMvB,IAAM,IACrBuB,EAAMvB,GAAK,EACXuB,EAAM0R,OAAS,QAEjB,IAAI0H,GAAUjB,GAAcgB,EAAMnZ,EAAMvB,GAAIuB,EAAM0R,QAC9CuG,EAAOkB,EAAKC,EAChB,IAAwB,OAApBpc,EAAGoP,IAAIkM,WAAsBL,EAAKC,MAAQ,GAAK,IAAMtM,EAAM,EAAIqM,EAAK/W,GAAKlB,EAAMvB,GAAKwZ,EAAKpV,KAAO7C,EAAMvB,IAGxG,MAAOga,IAAclZ,EAAMS,EAAO4L,EAGpC,IAGIiN,GAHAQ,EAAK,SAAY9b,EAAKqO,GACxB,MAAO4M,IAAkBjZ,EAAMhC,YAAe+B,GAAM/B,EAAIkB,GAAKlB,EAAKqO,IAGhE0N,EAAuB,SAA8B7a,GACvD,MAAKzB,GAAGsU,QAAQiI,cAGhBV,EAAOA,GAAQC,GAAsB9b,EAAIuC,GAClCia,GAAsBxc,EAAIuC,EAAMsZ,EAAMpa,KAHlCgb,MAAO,EAAGjb,IAAKe,EAAKH,KAAK5E,SAKlCkf,EAAoBJ,EAAqC,UAAhBtZ,EAAM0R,OAAqB2H,EAAGrZ,GAAQ,GAAKA,EAAMvB,GAE9F,IAAwB,OAApBzB,EAAGoP,IAAIkM,WAAoC,GAAdL,EAAKC,MAAY,CAChD,GAAIU,GAAmC,GAAdX,EAAKC,OAActM,EAAM,EAC9CnN,EAAK4a,EAAGrZ,EAAO4Y,EAAqB,GAAK,EAC7C,IAAU,MAANna,IAAgBma,EAAwEna,GAAMwZ,EAAK/W,IAAMzC,GAAMib,EAAkBlb,IAA5FC,GAAMwZ,EAAKpV,MAAQpE,GAAMib,EAAkBD,OAAuD,CAEzI,GAAI/H,GAASkH,EAAqB,SAAW,OAC7C,OAAO,IAAItZ,GAAIU,EAAMT,KAAMd,EAAIiT,IAOnC,GAAIiI,GAAqB,SAA4BP,EAASxN,EAAK8N,GAKjE,IAJA,GAAIE,GAAS,SAAgBnb,EAAIma,GAC/B,MAAOA,GAAqB,GAAItZ,GAAIU,EAAMT,KAAM8Z,EAAG5a,EAAI,GAAI,UAAY,GAAIa,GAAIU,EAAMT,KAAMd,EAAI,UAG1F2a,GAAW,GAAKA,EAAUD,EAAK3e,OAAQ4e,GAAWxN,EAAK,CAC5D,GAAIqM,GAAOkB,EAAKC,GACZR,EAAqBhN,EAAM,IAAoB,GAAdqM,EAAKC,OACtCzZ,EAAKma,EAAqBc,EAAkBD,MAAQJ,EAAGK,EAAkBlb,KAAM,EACnF,IAAIyZ,EAAKpV,MAAQpE,GAAMA,EAAKwZ,EAAK/W,GAC/B,MAAO0Y,GAAOnb,EAAIma,EAGpB,IADAna,EAAKma,EAAqBX,EAAKpV,KAAOwW,EAAGpB,EAAK/W,IAAK,GAC/CwY,EAAkBD,OAAShb,GAAMA,EAAKib,EAAkBlb,IAC1D,MAAOob,GAAOnb,EAAIma,KAMpBiB,EAAMF,EAAmBP,EAAUxN,EAAKA,EAAK8N,EACjD,IAAIG,EACF,MAAOA,EAIT,IAAIC,GAASlO,EAAM,EAAI8N,EAAkBlb,IAAM6a,EAAGK,EAAkBD,OAAQ,EAC5E,OAAc,OAAVK,GAAoBlO,EAAM,GAAKkO,GAAUva,EAAKH,KAAK5E,UACrDqf,EAAMF,EAAmB/N,EAAM,EAAI,EAAIuN,EAAK3e,OAAS,EAAGoR,EAAK0N,EAAqBQ,KAO7E,KALID,EA0Bb,QAASE,IAAYC,EAASnb,GAC5B,MAAOmb,GAAQC,WAAaD,EAAQC,UAAUpb,IAASqb,GAGzD,QAASxW,IAAIsW,EAASnb,EAAM3E,GAC1B,GAAI8f,EAAQG,oBACVH,EAAQG,oBAAoBtb,EAAM3E,GAAG,OAChC,IAAI8f,EAAQI,YACjBJ,EAAQI,YAAY,KAAOvb,EAAM3E,OAC5B,CACL,GAAImgB,GAASL,EAAQC,UACjB/P,EAAMmQ,GAAUA,EAAOxb,EAC3B,IAAIqL,EAAK,CACP,GAAI/E,GAAQlG,EAAQiL,EAAKhQ,EACrBiL,IAAS,IACXkV,EAAOxb,GAAQqL,EAAIxL,MAAM,EAAGyG,GAAO+N,OAAOhJ,EAAIxL,MAAMyG,EAAQ,OAMpE,QAASmV,IAAON,EAASnb,GACvB,GAAI0b,GAAWR,GAAYC,EAASnb,EACpC,IAAK0b,EAAS/f,OAId,IAAK,GADDmO,GAAOC,MAAMvP,UAAUqF,MAAMnE,KAAKsO,UAAW,GACxC5O,EAAI,EAAGA,EAAIsgB,EAAS/f,SAAUP,EACrCsgB,EAAStgB,GAAG6O,MAAM,KAAMH,GAO5B,QAAS6R,IAAexd,EAAIvD,EAAGghB,GAO7B,MANgB,gBAALhhB,KACTA,GAAMoF,KAAMpF,EAAG2B,eAAgB,WAC3BP,KAAK6f,kBAAmB,KAG9BJ,GAAOtd,EAAIyd,GAAYhhB,EAAEoF,KAAM7B,EAAIvD,GAC5BkhB,GAAmBlhB,IAAMA,EAAEmhB,iBAGpC,QAASC,IAAqB7d,GAC5B,GAAIkN,GAAMlN,EAAGid,WAAajd,EAAGid,UAAUa,cACvC,IAAK5Q,EAIL,IAAK,GADD6Q,GAAM/d,EAAGge,MAAMC,yBAA2Bje,EAAGge,MAAMC,2BAC9ChhB,EAAI,EAAGA,EAAIiQ,EAAI1P,SAAUP,GACH,GAAzBgF,EAAQ8b,EAAK7Q,EAAIjQ,KACnB8gB,EAAIrV,KAAKwE,EAAIjQ,IAKnB,QAASihB,IAAWlB,EAASnb,GAC3B,MAAOkb,IAAYC,EAASnb,GAAMrE,OAAS,EAK7C,QAAS2gB,IAAWC,GAClBA,EAAK/hB,UAAUsK,GAAK,SAAU9E,EAAM3E,GAClCyJ,GAAG9I,KAAMgE,EAAM3E,IAEjBkhB,EAAK/hB,UAAUqK,IAAM,SAAU7E,EAAM3E,GACnCwJ,GAAI7I,KAAMgE,EAAM3E,IAOpB,QAASmhB,IAAiB5hB,GACpBA,EAAE2B,eACJ3B,EAAE2B,iBAEF3B,EAAE6hB,aAAc,EAGpB,QAASC,IAAkB9hB,GACrBA,EAAE+hB,gBACJ/hB,EAAE+hB,kBAEF/hB,EAAEgiB,cAAe,EAGrB,QAASd,IAAmBlhB,GAC1B,MAA6B,OAAtBA,EAAEihB,iBAA2BjhB,EAAEihB,iBAAoC,GAAjBjhB,EAAE6hB,YAE7D,QAASI,IAAOjiB,GACd4hB,GAAiB5hB,GAAG8hB,GAAkB9hB,GAGxC,QAASkiB,IAASliB,GAChB,MAAOA,GAAEuP,QAAUvP,EAAEmiB,WAEvB,QAASC,IAASpiB,GAChB,GAAIwK,GAAIxK,EAAEqiB,KAaV,OAZS,OAAL7X,IACa,EAAXxK,EAAEsiB,OACJ9X,EAAI,EACgB,EAAXxK,EAAEsiB,OACX9X,EAAI,EACgB,EAAXxK,EAAEsiB,SACX9X,EAAI,IAGJ+X,IAAOviB,EAAEwiB,SAAgB,GAALhY,IACtBA,EAAI,GAECA,EAeT,QAASiY,IAAiBtP,GACxB,GAAqB,MAAjBuP,GAAuB,CACzB,GAAIrd,GAAOyB,EAAI,OAAQ,IACvB0G,GAAqB2F,EAASrM,EAAI,QAASzB,EAAMvD,SAASiM,eAAe,QAClC,GAAnCoF,EAAQ5F,WAAWoV,eACrBD,GAAgBrd,EAAKud,aAAe,GAAKvd,EAAKsd,aAAe,KAAO3O,IAAMC,GAAa,IAG3F,GAAIrF,GAAO8T,GAAgB5b,EAAI,OAAQ,KAAYA,EAAI,OAAQ,IAAQ,KAAM,wDAE7E,OADA8H,GAAKX,aAAa,UAAW,IACtBW,EAKT,QAASiU,IAAgB1P,GACvB,GAAoB,MAAhB2P,GACF,MAAOA,GAET,IAAIC,GAAMvV,EAAqB2F,EAASrR,SAASiM,eAAe,QAC5DiV,EAAK9Z,GAAM6Z,EAAK,EAAG,GAAGE,wBACtBC,EAAKha,GAAM6Z,EAAK,EAAG,GAAGE,uBAE1B,OADA9V,GAAegG,MACV6P,GAAMA,EAAGG,MAAQH,EAAGI,SAGlBN,GAAeI,EAAGE,MAAQJ,EAAGI,MAAQ,GAwD9C,QAASC,IAAkBlQ,GACzB,GAAsB,MAAlBmQ,GACF,MAAOA,GAET,IAAI1U,GAAOpB,EAAqB2F,EAASrM,EAAI,OAAQ,MACjDyc,EAAS3U,EAAKqU,wBACdO,EAAYta,GAAM0F,EAAM,EAAG,GAAGqU,uBAClC,OAAOK,IAAiBrc,KAAKqL,IAAIiR,EAAOJ,KAAOK,EAAUL,MAAQ,EAUnE,QAASM,IAAWnf,EAAMlC,GACpBgN,UAAUrO,OAAS,IACrBqB,EAAKshB,aAAevU,MAAMvP,UAAUqF,MAAMnE,KAAKsO,UAAW,IAE5DuU,GAAMrf,GAAQlC,EAGhB,QAASwhB,IAAWC,EAAMC,GACxBC,GAAUF,GAAQC,EAKpB,QAASE,IAAYF,GACnB,GAAmB,gBAARA,IAAoBC,GAAUrU,eAAeoU,GACtDA,EAAOC,GAAUD,OACZ,IAAIA,GAA4B,gBAAbA,GAAKxf,MAAoByf,GAAUrU,eAAeoU,EAAKxf,MAAO,CACtF,GAAI8F,GAAQ2Z,GAAUD,EAAKxf,KACP,iBAAT8F,KACTA,GAAU9F,KAAM8F,IAElB0Z,EAAO7S,EAAU7G,EAAO0Z,GACxBA,EAAKxf,KAAO8F,EAAM9F,SACb,CAAA,GAAmB,gBAARwf,IAAoB,0BAA0Bze,KAAKye,GACnE,MAAOE,IAAY,kBACd,IAAmB,gBAARF,IAAoB,2BAA2Bze,KAAKye,GACpE,MAAOE,IAAY,oBAErB,MAAmB,gBAARF,IACAxf,KAAMwf,GAERA,IAAUxf,KAAM,QAM3B,QAASF,IAAQyT,EAASiM,GACxBA,EAAOE,GAAYF,EACnB,IAAIG,GAAWN,GAAMG,EAAKxf,KAC1B,KAAK2f,EACH,MAAO7f,IAAQyT,EAAS,aAE1B,IAAIqM,GAAUD,EAASpM,EAASiM,EAChC,IAAIK,GAAezU,eAAeoU,EAAKxf,MAAO,CAC5C,GAAI8f,GAAOD,GAAeL,EAAKxf,KAC/B,KAAK,GAAImL,KAAQ2U,GACVA,EAAK1U,eAAeD,KAGrByU,EAAQxU,eAAeD,KACzByU,EAAQ,IAAMzU,GAAQyU,EAAQzU,IAEhCyU,EAAQzU,GAAQ2U,EAAK3U,IAOzB,GAJAyU,EAAQ5f,KAAOwf,EAAKxf,KAChBwf,EAAKO,aACPH,EAAQG,WAAaP,EAAKO,YAExBP,EAAKQ,UACP,IAAK,GAAIC,KAAUT,GAAKQ,UACtBJ,EAAQK,GAAUT,EAAKQ,UAAUC,EAIrC,OAAOL,GAMT,QAASM,IAAWpiB,EAAMqiB,GAExBnV,EAAQmV,EADGN,GAAezU,eAAetN,GAAQ+hB,GAAe/hB,GAAQ+hB,GAAe/hB,OAIzF,QAASsiB,IAAUtiB,EAAMiC,GACvB,IAAc,IAAVA,EACF,MAAOA,EAET,IAAIjC,EAAKsiB,UACP,MAAOtiB,GAAKsiB,UAAUrgB,EAExB,IAAIsgB,KACJ,KAAK,GAAIzkB,KAAKmE,GAAO,CACnB,GAAIuD,GAAMvD,EAAMnE,EACZ0H,aAAeuH,SACjBvH,EAAMA,EAAI6R,YAEZkL,EAAOzkB,GAAK0H,EAEd,MAAO+c,GAKT,QAASxgB,IAAU/B,EAAMiC,GAEvB,IADA,GAAI0B,GACG3D,EAAK+B,YACV4B,EAAO3D,EAAK+B,UAAUE,KACT0B,EAAK3D,MAAQA,GAG1BiC,EAAQ0B,EAAK1B,MACbjC,EAAO2D,EAAK3D,IAEd,OAAO2D,KAAU3D,KAAMA,EAAMiC,MAAOA,GAGtC,QAASugB,IAAWxiB,EAAMyiB,EAAIC,GAC5B,OAAO1iB,EAAKwiB,YAAaxiB,EAAKwiB,WAAWC,EAAIC,GAkK/C,QAASC,IAAcxhB,EAAIuC,EAAMW,EAASue,GAGxC,GAAIC,IAAM1hB,EAAGc,MAAM6gB,SACfC,IAEJC,IAAQ7hB,EAAIuC,EAAKH,KAAMpC,EAAGoP,IAAIvQ,KAAMqE,EAAS,SAAU1B,EAAK6I,GAC1D,MAAOqX,GAAGhZ,KAAKlH,EAAK6I,IACnBuX,EAAaH,EAmChB,KAAK,GAlCD3gB,GAAQoC,EAAQpC,MAkCXhE,EAAI,EAAGA,EAAIkD,EAAGc,MAAMghB,SAAStkB,SAAUV,GA/BrC,SAAcA,GACvB,GAAIilB,GAAU/hB,EAAGc,MAAMghB,SAAShlB,GAC5BG,EAAI,EACJkJ,EAAK,CACTjD,GAAQpC,OAAQ,EAChB+gB,GAAQ7hB,EAAIuC,EAAKH,KAAM2f,EAAQljB,KAAMqE,EAAS,SAAU1B,EAAK6I,GAG3D,IAFA,GAAIrH,GAAQ/F,EAELkJ,EAAK3E,GAAK,CACf,GAAIwgB,GAAQN,EAAGzkB,EACX+kB,GAAQxgB,GACVkgB,EAAGlU,OAAOvQ,EAAG,EAAGuE,EAAKkgB,EAAGzkB,EAAI,GAAI+kB,GAElC/kB,GAAK,EACLkJ,EAAKzC,KAAKC,IAAInC,EAAKwgB,GAErB,GAAK3X,EAGL,GAAI0X,EAAQE,OACVP,EAAGlU,OAAOxK,EAAO/F,EAAI+F,EAAOxB,EAAK,WAAa6I,GAC9CpN,EAAI+F,EAAQ,MAEZ,MAAOA,EAAQ/F,EAAG+F,GAAS,EAAG,CAC5B,GAAIyC,GAAMic,EAAG1e,EAAQ,EACrB0e,GAAG1e,EAAQ,IAAMyC,EAAMA,EAAM,IAAM,IAAM,WAAa4E,IAGzDuX,IAIE9kB,EAGP,OAFCoG,GAAQpC,MAAQA,GAERohB,OAAQR,EAAIS,QAASP,EAAYQ,SAAWR,EAAYS,UAAYT,EAAc,MAG7F,QAASU,IAActiB,EAAIuC,EAAMggB,GAC/B,IAAKhgB,EAAK2f,QAAU3f,EAAK2f,OAAO,IAAMliB,EAAGc,MAAM6gB,QAAS,CACtD,GAAIze,GAAUsf,GAAiBxiB,EAAI6T,EAAOtR,IACtCkgB,EAAalgB,EAAKH,KAAK5E,OAASwC,EAAGsU,QAAQoO,oBAAsBvB,GAAUnhB,EAAGoP,IAAIvQ,KAAMqE,EAAQpC,OAChG6hB,EAASnB,GAAcxhB,EAAIuC,EAAMW,EACjCuf,KACFvf,EAAQpC,MAAQ2hB,GAElBlgB,EAAKqgB,WAAa1f,EAAQ2f,MAAMJ,GAChClgB,EAAK2f,OAASS,EAAOT,OACjBS,EAAOR,QACT5f,EAAKugB,aAAeH,EAAOR,QAClB5f,EAAKugB,eACdvgB,EAAKugB,aAAe,MAElBP,IAAmBviB,EAAGoP,IAAI2T,oBAC5B/iB,EAAGoP,IAAI4T,aAAetf,KAAKoC,IAAI9F,EAAGoP,IAAI4T,eAAgBhjB,EAAGoP,IAAI2T,oBAGjE,MAAOxgB,GAAK2f,OAGd,QAASM,IAAiBxiB,EAAIrD,EAAGsmB,GAC/B,GAAI7T,GAAMpP,EAAGoP,IACT0L,EAAU9a,EAAG8a,OACjB,KAAK1L,EAAIvQ,KAAKwiB,WACZ,MAAO,IAAI6B,IAAQ9T,GAAK,EAAMzS,EAEhC,IAAIqG,GAAQmgB,GAAcnjB,EAAIrD,EAAGsmB,GAC7BG,EAAQpgB,EAAQoM,EAAI+B,OAAShO,EAAQiM,EAAKpM,EAAQ,GAAG4f,WACrD1f,EAAUkgB,EAAQF,GAAQG,UAAUjU,EAAKgU,EAAOpgB,GAAS,GAAIkgB,IAAQ9T,EAAKiS,GAAWjS,EAAIvQ,MAAOmE,EAWpG,OATAoM,GAAI/H,KAAKrE,EAAOrG,EAAG,SAAU4F,GAC3B+gB,GAAYtjB,EAAIuC,EAAKH,KAAMc,EAC3B,IAAI3C,GAAM2C,EAAQX,IAClBA,GAAKqgB,WAAariB,GAAO5D,EAAI,GAAK4D,EAAM,GAAK,GAAKA,GAAOua,EAAQ7J,UAAY1Q,EAAMua,EAAQ5J,OAAShO,EAAQ2f,OAAS,KACrH3f,EAAQqE,aAEN0b,IACF7T,EAAI4T,aAAe9f,EAAQX,MAEtBW,EAMT,QAASogB,IAAYtjB,EAAIoC,EAAMc,EAASqgB,GACtC,GAAI1kB,GAAOmB,EAAGoP,IAAIvQ,KACd2kB,EAAS,GAAIC,IAAarhB,EAAMpC,EAAGsU,QAAQjI,QAASnJ,EAKxD,KAJAsgB,EAAOxgB,MAAQwgB,EAAOjjB,IAAMgjB,GAAW,EAC3B,IAARnhB,GACFshB,GAAc7kB,EAAMqE,EAAQpC,QAEtB0iB,EAAOG,OACbC,GAAU/kB,EAAM2kB,EAAQtgB,EAAQpC,OAChC0iB,EAAOxgB,MAAQwgB,EAAOjjB,IAI1B,QAASmjB,IAAc7kB,EAAMiC,GAC3B,GAAIjC,EAAKglB,UACP,MAAOhlB,GAAKglB,UAAU/iB,EAExB,IAAKjC,EAAK+B,UAAV,CAGA,GAAID,GAAQC,GAAU/B,EAAMiC,EAC5B,OAAIH,GAAM9B,KAAKglB,UACNljB,EAAM9B,KAAKglB,UAAUljB,EAAMG,WADpC,IAKF,QAAS8iB,IAAU/kB,EAAM2kB,EAAQ1iB,EAAOH,GACtC,IAAK,GAAI1D,GAAI,EAAGA,EAAI,GAAIA,IAAK,CACvB0D,IACFA,EAAM,GAAKC,GAAU/B,EAAMiC,GAAOjC,KAEpC,IAAIwL,GAAQxL,EAAKilB,MAAMN,EAAQ1iB,EAC/B,IAAI0iB,EAAOjjB,IAAMijB,EAAOxgB,MACtB,MAAOqH,GAGX,KAAM,IAAIlN,OAAM,QAAU0B,EAAKkC,KAAO,8BAWxC,QAASgjB,IAAU/jB,EAAIO,EAAK0iB,EAASe,GACnC,GAEI3Z,GAFA+E,EAAMpP,EAAGoP,IACTvQ,EAAOuQ,EAAIvQ,IAEf0B,GAAM0U,EAAS7F,EAAK7O,EACpB,IAGI0jB,GAHA1hB,EAAOY,EAAQiM,EAAK7O,EAAIgC,MACxBW,EAAUsf,GAAiBxiB,EAAIO,EAAIgC,KAAM0gB,GACzCO,EAAS,GAAIC,IAAalhB,EAAKH,KAAMpC,EAAGsU,QAAQjI,QAASnJ,EAK7D,KAHI8gB,IACFC,OAEMD,GAAWR,EAAOjjB,IAAMA,EAAIkB,MAAQ+hB,EAAOG,OACjDH,EAAOxgB,MAAQwgB,EAAOjjB,IACtB8J,EAAQuZ,GAAU/kB,EAAM2kB,EAAQtgB,EAAQpC,OACpCkjB,GACFC,EAAOvb,KAAK,GAAIwb,IAAMV,EAAQnZ,EAAO8W,GAAU/R,EAAIvQ,KAAMqE,EAAQpC,QAGrE,OAAOkjB,GAAUC,EAAS,GAAIC,IAAMV,EAAQnZ,EAAOnH,EAAQpC,OAG7D,QAASqjB,IAAmBtiB,EAAMuiB,GAChC,GAAIviB,EACF,OAAS,CACP,GAAIwiB,GAAYxiB,EAAKkE,MAAM,oCAC3B,KAAKse,EACH,KAEFxiB,GAAOA,EAAKH,MAAM,EAAG2iB,EAAUlc,OAAStG,EAAKH,MAAM2iB,EAAUlc,MAAQkc,EAAU,GAAG7mB,OAClF,IAAI0O,GAAOmY,EAAU,GAAK,UAAY,WAClB,OAAhBD,EAAOlY,GACTkY,EAAOlY,GAAQmY,EAAU,GACf,GAAItb,QAAO,UAAasb,EAAU,GAAK,WAAYviB,KAAKsiB,EAAOlY,MACzEkY,EAAOlY,IAAS,IAAMmY,EAAU,IAItC,MAAOxiB,GAIT,QAASggB,IAAQ7hB,EAAIoC,EAAMvD,EAAMqE,EAAShG,EAAG0kB,EAAaH,GACxD,GAAI6C,GAAezlB,EAAKylB,YACJ,OAAhBA,IACFA,EAAetkB,EAAGsU,QAAQgQ,aAE5B,IAGIja,GAHAka,EAAW,EACXC,EAAW,KACXhB,EAAS,GAAIC,IAAarhB,EAAMpC,EAAGsU,QAAQjI,QAASnJ,GAEpDvC,EAAQX,EAAGsU,QAAQmQ,eAAiB,KAIxC,KAHY,IAARriB,GACF+hB,GAAmBT,GAAc7kB,EAAMqE,EAAQpC,OAAQ8gB,IAEjD4B,EAAOG,OAAO,CAWpB,GAVIH,EAAOjjB,IAAMP,EAAGsU,QAAQoO,oBAC1B4B,GAAe,EACX7C,GACF6B,GAAYtjB,EAAIoC,EAAMc,EAASsgB,EAAOjjB,KAExCijB,EAAOjjB,IAAM6B,EAAK5E,OAClB6M,EAAQ,MAERA,EAAQ8Z,GAAmBP,GAAU/kB,EAAM2kB,EAAQtgB,EAAQpC,MAAOH,GAAQihB,GAExEjhB,EAAO,CACT,GAAI+jB,GAAQ/jB,EAAM,GAAGI,IACjB2jB,KACFra,EAAQ,MAAQA,EAAQqa,EAAQ,IAAMra,EAAQqa,IAGlD,IAAKJ,GAAgBE,GAAYna,EAAO,CACtC,KAAOka,EAAWf,EAAOxgB,OACvBuhB,EAAW7gB,KAAKC,IAAI6f,EAAOxgB,MAAOuhB,EAAW,KAC7CrnB,EAAEqnB,EAAUC,EAEdA,GAAWna,EAEbmZ,EAAOxgB,MAAQwgB,EAAOjjB,IAExB,KAAOgkB,EAAWf,EAAOjjB,KAAK,CAI5B,GAAIA,GAAMmD,KAAKC,IAAI6f,EAAOjjB,IAAKgkB,EAAW,IAC1CrnB,GAAEqD,EAAKikB,GACPD,EAAWhkB,GASf,QAAS4iB,IAAcnjB,EAAIrD,EAAGsmB,GAK5B,IAAK,GAJD0B,GACAC,EACAxV,EAAMpP,EAAGoP,IACTyV,EAAM5B,GAAW,EAAItmB,GAAKqD,EAAGoP,IAAIvQ,KAAK+B,UAAY,IAAO,KACpD4L,EAAS7P,EAAG6P,EAASqY,IAAOrY,EAAQ,CAC3C,GAAIA,GAAU4C,EAAI+B,MAChB,MAAO/B,GAAI+B,KAEb,IAAI5O,GAAOY,EAAQiM,EAAK5C,EAAS,GAC7BsY,EAAQviB,EAAKqgB,UACjB,IAAIkC,KAAW7B,GAAWzW,GAAUsY,YAAiBC,IAAeD,EAAME,UAAY,IAAM5V,EAAI4T,cAC9F,MAAOxW,EAET,IAAIyY,GAAW7Y,EAAY7J,EAAKH,KAAM,KAAMpC,EAAGsU,QAAQjI,UACxC,MAAXuY,GAAmBD,EAAYM,KACjCL,EAAUpY,EAAS,EACnBmY,EAAYM,GAGhB,MAAOL,GAGT,QAASM,IAAgB9V,EAAKzS,GAE5B,GADAyS,EAAI4T,aAAetf,KAAKC,IAAIyL,EAAI4T,aAAcrmB,KAC1CyS,EAAI2T,kBAAoBpmB,EAAI,IAAhC,CAIA,IAAK,GADDqG,GAAQoM,EAAI+B,MACP5O,EAAO5F,EAAI,EAAG4F,EAAOS,EAAOT,IAAQ,CAC3C,GAAI6gB,GAAQjgB,EAAQiM,EAAK7M,GAAMqgB,UAI/B,IAAIQ,MAAYA,YAAiB2B,MAAiBxiB,EAAO6gB,EAAM4B,UAAYroB,GAAI,CAC7EqG,EAAQT,EAAO,CACf,QAGJ6M,EAAI2T,kBAAoBrf,KAAKC,IAAIyL,EAAI2T,kBAAmB/f,IAqB1D,QAASmiB,IAAW5iB,EAAMH,EAAM6T,EAAamP,GAC3C7iB,EAAKH,KAAOA,EACRG,EAAKqgB,aACPrgB,EAAKqgB,WAAa,MAEhBrgB,EAAK2f,SACP3f,EAAK2f,OAAS,MAEE,MAAd3f,EAAKyY,QACPzY,EAAKyY,MAAQ,MAEftC,GAAkBnW,GAClBqW,GAAkBrW,EAAM0T,EACxB,IAAIoP,GAAYD,EAAiBA,EAAe7iB,GAAQ,CACpD8iB,IAAa9iB,EAAKoR,QACpBD,EAAiBnR,EAAM8iB,GAK3B,QAASC,IAAY/iB,GACnBA,EAAK2H,OAAS,KACdwO,GAAkBnW,GAQpB,QAASgjB,IAAoBlb,EAAOiK,GAClC,IAAKjK,GAAS,QAAQvI,KAAKuI,GACzB,MAAO,KAET,IAAImb,GAAQlR,EAAQmQ,aAAegB,GAA4BC,EAC/D,OAAOF,GAAMnb,KAAWmb,EAAMnb,GAASA,EAAMsb,QAAQ,OAAQ,UAQ/D,QAASC,IAAiB5lB,EAAI6lB,GAI5B,GAAIzb,GAAUK,EAAK,OAAQ,KAAM,KAAMoG,GAAS,sBAAwB,MACpEiV,GAAYC,IAAKtb,EAAK,OAAQL,GAAU,mBAAoBA,QAASA,EACvEyC,IAAK,EAAGtM,IAAK,EAAGP,GAAIA,EACpBgmB,eAAe,EACfC,aAAcxV,IAAMI,KAAW7Q,EAAGC,UAAU,gBAC9C4lB,GAASjW,UAGT,KAAK,GAAI3S,GAAI,EAAGA,IAAM4oB,EAASK,KAAOL,EAASK,KAAK1oB,OAAS,GAAIP,IAAK,CACpE,GAAIsF,GAAOtF,EAAI4oB,EAASK,KAAKjpB,EAAI,GAAK4oB,EAAStjB,KAC3CyY,MAAQ,EACZ8K,GAAQvlB,IAAM,EACdulB,EAAQK,SAAWC,GAGf9G,GAAgBtf,EAAG8a,QAAQlL,WAAaoL,EAAQK,GAAS9Y,EAAMvC,EAAGoP,IAAIkM,cACxEwK,EAAQK,SAAWE,GAAkBP,EAAQK,SAAUnL,IAEzD8K,EAAQrhB,MAER6hB,IAAkB/jB,EAAMujB,EAASxD,GAActiB,EAAIuC,EADzBsjB,GAAY7lB,EAAG8a,QAAQtJ,kBAAoBqC,EAAOtR,KAExEA,EAAKugB,eACHvgB,EAAKugB,aAAaV,UACpB0D,EAAQ1D,QAAU7W,EAAYhJ,EAAKugB,aAAaV,QAAS0D,EAAQ1D,SAAW,KAE1E7f,EAAKugB,aAAaT,YACpByD,EAAQzD,UAAY9W,EAAYhJ,EAAKugB,aAAaT,UAAWyD,EAAQzD,WAAa,MAK5D,GAAtByD,EAAQrhB,IAAIjH,QACdsoB,EAAQrhB,IAAIiE,KAAK,EAAG,EAAGod,EAAQ1b,QAAQD,YAAY+U,GAAiBlf,EAAG8a,QAAQlL,WAIxE,GAAL3S,GACF4oB,EAASjW,QAAQnL,IAAMqhB,EAAQrhB,IAC/BohB,EAASjW,QAAQ4V,YAEhBK,EAASjW,QAAQ2W,OAASV,EAASjW,QAAQ2W,UAAY7d,KAAKod,EAAQrhB,MAAMohB,EAASjW,QAAQ4W,SAAWX,EAASjW,QAAQ4W,YAAc9d,UAK1I,GAAImI,GAAQ,CACV,GAAIqE,GAAO4Q,EAAQ1b,QAAQqc,WACvB,aAAa3kB,KAAKoT,EAAK3O,YAAc2O,EAAK1W,eAAiB0W,EAAK1W,cAAc,cAChFsnB,EAAQ1b,QAAQ7D,UAAY,oBAShC,MALA+W,IAAOtd,EAAI,aAAcA,EAAI6lB,EAAStjB,KAAMujB,EAAQC;yCAChDD,EAAQC,IAAIxf,YACduf,EAAQzD,UAAY9W,EAAYua,EAAQC,IAAIxf,UAAWuf,EAAQzD,WAAa,KAGvEyD,EAGT,QAASY,IAA8BjlB,GACrC,GAAIqiB,GAAQvgB,EAAI,OAAQ,IAAU,iBAGlC,OAFAugB,GAAM6C,MAAQ,MAAQllB,EAAG+M,WAAW,GAAGoY,SAAS,IAChD9C,EAAMpZ,aAAa,aAAcoZ,EAAM6C,OAChC7C,EAKT,QAASsC,IAAWN,EAAS1jB,EAAMiI,EAAOwc,EAAYC,EAAUH,EAAOI,GACrE,GAAK3kB,EAAL,CAGA,GAGIgI,GAHA4c,EAAclB,EAAQG,YAAcA,GAAY7jB,EAAM0jB,EAAQE,eAAiB5jB,EAC/E6kB,EAAUnB,EAAQ9lB,GAAGc,MAAMomB,aAC3BC,GAAW,CAEf,IAAKF,EAAQnlB,KAAKM,GAQX,CACLgI,EAAU7L,SAAS6oB,wBAEnB,KADA,GAAI7mB,GAAM,IACG,CACX0mB,EAAQhf,UAAY1H,CACpB,IAAI4X,GAAI8O,EAAQ/e,KAAK9F,GACjB0K,EAAUqL,EAAIA,EAAEhQ,MAAQ5H,EAAM6B,EAAK5E,OAAS+C,CAChD,IAAIuM,EAAS,CACX,GAAI0S,GAAMjhB,SAASiM,eAAewc,EAAYtlB,MAAMnB,EAAKA,EAAMuM,GAC3D2D,KAAMC,GAAa,EACrBtG,EAAQD,YAAY5G,EAAI,QAASic,KAEjCpV,EAAQD,YAAYqV,GAEtBsG,EAAQrhB,IAAIiE,KAAKod,EAAQvlB,IAAKulB,EAAQvlB,IAAMuM,EAAS0S,GACrDsG,EAAQjZ,KAAOC,EACfgZ,EAAQvlB,KAAOuM,EAEjB,IAAKqL,EACH,KAEF5X,IAAOuM,EAAU,CACjB,IAAIua,OAAQ,EACZ,IAAY,MAARlP,EAAE,GAAY,CAChB,GAAI9L,GAAUyZ,EAAQ9lB,GAAGsU,QAAQjI,QAC7Bib,EAAWjb,EAAUyZ,EAAQjZ,IAAMR,CACvCgb,GAAQjd,EAAQD,YAAY5G,EAAI,OAAQwJ,EAASua,GAAW,WAC5DD,EAAM3c,aAAa,OAAQ,gBAC3B2c,EAAM3c,aAAa,UAAW,MAC9Bob,EAAQjZ,KAAOya,MACE,MAARnP,EAAE,IAAsB,MAARA,EAAE,IAC3BkP,EAAQjd,EAAQD,YAAY5G,EAAI,OAAgB,MAAR4U,EAAE,GAAa,IAAW,IAAU,mBAC5EkP,EAAM3c,aAAa,UAAWyN,EAAE,IAChC2N,EAAQjZ,KAAO,IAEfwa,EAAQvB,EAAQ9lB,GAAGsU,QAAQiT,uBAAuBpP,EAAE,IACpDkP,EAAM3c,aAAa,UAAWyN,EAAE,IAC5B1H,IAAMC,GAAa,EACrBtG,EAAQD,YAAY5G,EAAI,QAAS8jB,KAEjCjd,EAAQD,YAAYkd,GAEtBvB,EAAQjZ,KAAO,EAEjBiZ,GAAQrhB,IAAIiE,KAAKod,EAAQvlB,IAAKulB,EAAQvlB,IAAM,EAAG8mB,GAC/CvB,EAAQvlB,WApDVulB,GAAQjZ,KAAOzK,EAAK5E,OACpB4M,EAAU7L,SAASiM,eAAewc,GAClClB,EAAQrhB,IAAIiE,KAAKod,EAAQvlB,IAAKulB,EAAQvlB,IAAM6B,EAAK5E,OAAQ4M,GACrDqG,IAAMC,GAAa,IACrByW,GAAW,GAEbrB,EAAQvlB,KAAO6B,EAAK5E,MAkDtB,IADAsoB,EAAQE,cAA2D,IAA3CgB,EAAYxY,WAAWpM,EAAK5E,OAAS,GACzD6M,GAASwc,GAAcC,GAAYK,GAAYJ,EAAK,CACtD,GAAIS,GAAYnd,GAAS,EACrBwc,KACFW,GAAaX,GAEXC,IACFU,GAAaV,EAEf,IAAIhD,GAAQvgB,EAAI,QAAS6G,GAAUod,EAAWT,EAI9C,OAHIJ,KACF7C,EAAM6C,MAAQA,GAETb,EAAQ1b,QAAQD,YAAY2Z,GAErCgC,EAAQ1b,QAAQD,YAAYC,IAG9B,QAAS6b,IAAY7jB,EAAMqlB,GACzB,GAAIrlB,EAAK5E,OAAS,IAAM,KAAKsE,KAAKM,GAChC,MAAOA,EAIT,KAAK,GAFDslB,GAAcD,EACd9E,EAAS,GACJ1lB,EAAI,EAAGA,EAAImF,EAAK5E,OAAQP,IAAK,CACpC,GAAIwE,GAAKW,EAAKJ,OAAO/E,EACX,MAANwE,IAAaimB,GAAgBzqB,GAAKmF,EAAK5E,OAAS,GAA+B,IAA1B4E,EAAKoM,WAAWvR,EAAI,KAC3EwE,EAAK,KAEPkhB,GAAUlhB,EACVimB,EAAoB,KAANjmB,EAEhB,MAAOkhB,GAKT,QAAS0D,IAAkB1lB,EAAOqa,GAChC,MAAO,UAAU8K,EAAS1jB,EAAMiI,EAAOwc,EAAYC,EAAUH,EAAOI,GAClE1c,EAAQA,EAAQA,EAAQ,mBAAqB,iBAG7C,KAFA,GAAIrH,GAAQ8iB,EAAQvlB,IAChBiB,EAAMwB,EAAQZ,EAAK5E,SACd,CAGP,IAAK,GADDyd,OAAO,GACFhe,EAAI,EAAGA,EAAI+d,EAAMxd,SACxByd,EAAOD,EAAM/d,KACTge,EAAK/W,GAAKlB,GAASiY,EAAKpV,MAAQ7C,IAFJ/F,KAMlC,GAAIge,EAAK/W,IAAM1C,EACb,MAAOb,GAAMmlB,EAAS1jB,EAAMiI,EAAOwc,EAAYC,EAAUH,EAAOI,EAElEpmB,GAAMmlB,EAAS1jB,EAAKV,MAAM,EAAGuZ,EAAK/W,GAAKlB,GAAQqH,EAAOwc,EAAY,KAAMF,EAAOI,GAC/EF,EAAa,KACbzkB,EAAOA,EAAKV,MAAMuZ,EAAK/W,GAAKlB,GAC5BA,EAAQiY,EAAK/W,KAKnB,QAASyjB,IAAmB7B,EAAS3S,EAAMwC,EAAQiS,GACjD,GAAIC,IAAUD,GAAgBjS,EAAO4E,UACjCsN,IACF/B,EAAQrhB,IAAIiE,KAAKod,EAAQvlB,IAAKulB,EAAQvlB,IAAM4S,EAAM0U,IAE/CD,GAAgB9B,EAAQ9lB,GAAG8a,QAAQzL,MAAMyY,wBACvCD,IACHA,EAAS/B,EAAQ1b,QAAQD,YAAY5L,SAAS+L,cAAc,UAE9Dud,EAAOnd,aAAa,YAAaiL,EAAO0D,KAEtCwO,IACF/B,EAAQ9lB,GAAG8a,QAAQzL,MAAM0Y,cAAcF,GACvC/B,EAAQ1b,QAAQD,YAAY0d,IAE9B/B,EAAQvlB,KAAO4S,EACf2S,EAAQE,eAAgB,EAK1B,QAASM,IAAkB/jB,EAAMujB,EAAS5D,GACxC,GAAIrM,GAAQtT,EAAK0T,YACb+R,EAAUzlB,EAAKH,KACf+D,EAAK,CACT,IAAK0P,EAmBL,IAZA,GAIIxL,GACA0c,EAEAkB,EACAC,EACAC,EACAxB,EACAlN,EAXAmB,EAAMoN,EAAQxqB,OACd+C,EAAM,EACNtD,EAAI,EACJmF,EAAO,GAGPgmB,EAAa,IAMR,CACP,GAAIA,GAAc7nB,EAAK,CAErB0nB,EAAYC,EAAeC,EAAiBxB,EAAQI,EAAM,GAC1DtN,EAAY,KAAK2O,EAAaC,EAAAA,CAG9B,KAAK,GAFDC,MACAC,MAAY,GACPlQ,EAAI,EAAGA,EAAIxC,EAAMrY,SAAU6a,EAAG,CACrC,GAAImB,GAAK3D,EAAMwC,GACXF,EAAIqB,EAAG7D,MACG,aAAVwC,EAAEtW,MAAsB2X,EAAG3T,MAAQtF,GAAO4X,EAAEoC,WAC9C+N,EAAe5f,KAAKyP,GACXqB,EAAG3T,MAAQtF,IAAiB,MAATiZ,EAAGtV,IAAcsV,EAAGtV,GAAK3D,GAAO4X,EAAEsB,WAAaD,EAAGtV,IAAM3D,GAAOiZ,EAAG3T,MAAQtF,IACzF,MAATiZ,EAAGtV,IAAcsV,EAAGtV,IAAM3D,GAAO6nB,EAAa5O,EAAGtV,KACnDkkB,EAAa5O,EAAGtV,GAChBgkB,EAAe,IAEb/P,EAAE5R,YACJ0hB,GAAa,IAAM9P,EAAE5R,WAEnB4R,EAAE4O,MACJA,GAAOA,EAAMA,EAAM,IAAM,IAAM5O,EAAE4O,KAE/B5O,EAAE0O,YAAcrN,EAAG3T,MAAQtF,IAC7B4nB,GAAkB,IAAMhQ,EAAE0O,YAExB1O,EAAE2O,UAAYtN,EAAGtV,IAAMkkB,IACxBG,IAAcA,OAAiB7f,KAAKyP,EAAE2O,SAAUtN,EAAGtV,IAElDiU,EAAEwO,QAAUA,IACdA,EAAQxO,EAAEwO,OAERxO,EAAEsB,aAAeA,GAAaV,GAAwBU,EAAU9D,OAAQwC,GAAK,KAC/EsB,EAAYD,IAELA,EAAG3T,KAAOtF,GAAO6nB,EAAa5O,EAAG3T,OAC1CuiB,EAAa5O,EAAG3T,MAGpB,GAAI0iB,EACF,IAAK,GAAIC,GAAM,EAAGA,EAAMD,EAAU/qB,OAAQgrB,GAAO,EAC3CD,EAAUC,EAAM,IAAMJ,IACxBF,GAAgB,IAAMK,EAAUC,GAKtC,KAAK/O,GAAaA,EAAU5T,MAAQtF,EAClC,IAAK,GAAIkoB,GAAM,EAAGA,EAAMH,EAAe9qB,SAAUirB,EAC/Cd,GAAmB7B,EAAS,EAAGwC,EAAeG,GAGlD,IAAIhP,IAAcA,EAAU5T,MAAQ,IAAMtF,EAAK,CAE7C,GADAonB,GAAmB7B,GAA0B,MAAhBrM,EAAUvV,GAAa0W,EAAM,EAAInB,EAAUvV,IAAM3D,EAAKkZ,EAAU9D,OAA0B,MAAlB8D,EAAU5T,MAC3F,MAAhB4T,EAAUvV,GACZ,MAEEuV,GAAUvV,IAAM3D,IAClBkZ,GAAY,IAIlB,GAAIlZ,GAAOqa,EACT,KAIF,KADA,GAAI8N,GAAOhlB,KAAKC,IAAIiX,EAAKwN,KACZ,CACX,GAAIhmB,EAAM,CACR,GAAIZ,GAAMjB,EAAM6B,EAAK5E,MACrB,KAAKic,EAAW,CACd,GAAIkP,GAAYnnB,EAAMknB,EAAOtmB,EAAKV,MAAM,EAAGgnB,EAAOnoB,GAAO6B,CACzD0jB,GAAQK,SAASL,EAAS6C,EAAWte,EAAQA,EAAQ4d,EAAYA,EAAWE,EAAgB5nB,EAAMooB,EAAUnrB,QAAU4qB,EAAaF,EAAe,GAAIvB,EAAOI,GAE/J,GAAIvlB,GAAOknB,EAAM,CACftmB,EAAOA,EAAKV,MAAMgnB,EAAOnoB,GAAKA,EAAMmoB,CAAK,OAE3CnoB,EAAMiB,EACN2mB,EAAiB,GAEnB/lB,EAAO4lB,EAAQtmB,MAAMyE,EAAIA,EAAK+b,EAAOjlB,MACrCoN,EAAQkb,GAAoBrD,EAAOjlB,KAAM6oB,EAAQ9lB,GAAGsU,cAnGtD,KAAK,GAAIJ,GAAM,EAAGA,EAAMgO,EAAO1kB,OAAQ0W,GAAO,EAC5C4R,EAAQK,SAASL,EAASkC,EAAQtmB,MAAMyE,EAAIA,EAAK+b,EAAOhO,IAAOqR,GAAoBrD,EAAOhO,EAAM,GAAI4R,EAAQ9lB,GAAGsU,UA0GrH,QAASsU,IAASxZ,EAAK7M,EAAM4X,GAE3Btc,KAAK0E,KAAOA,EAEZ1E,KAAKqoB,KAAOjM,GAAoB1X,GAEhC1E,KAAKsV,KAAOtV,KAAKqoB,KAAOrS,EAAO5G,EAAIpP,KAAKqoB,OAAS/L,EAAQ,EAAI,EAC7Dtc,KAAKwN,KAAOxN,KAAKuE,KAAO,KACxBvE,KAAKgrB,OAASvO,GAAalL,EAAK7M,GAIlC,QAASumB,IAAe9oB,EAAI6F,EAAM3B,GAGhC,IAAK,GADD6kB,GADArc,KAEKnM,EAAMsF,EAAMtF,EAAM2D,EAAI3D,EAAMwoB,EAAS,CAC5C,GAAIzX,GAAO,GAAIsX,IAAS5oB,EAAGoP,IAAKjM,EAAQnD,EAAGoP,IAAK7O,GAAMA,EACtDwoB,GAAUxoB,EAAM+Q,EAAK6B,KACrBzG,EAAMhE,KAAK4I,GAEb,MAAO5E,GAKT,QAASsc,IAAcC,GACjBC,GACFA,GAAeC,IAAIzgB,KAAKugB,GAExBA,EAAGG,UAAYF,IACbC,KAAMF,GACNI,qBAKN,QAASC,IAAoBC,GAG3B,GAAIC,GAAYD,EAAMF,iBAClBpsB,EAAI,CACR,GAAG,CACD,KAAOA,EAAIusB,EAAUhsB,OAAQP,IAC3BusB,EAAUvsB,GAAGM,KAAK,KAEpB,KAAK,GAAI8a,GAAI,EAAGA,EAAIkR,EAAMJ,IAAI3rB,OAAQ6a,IAAK,CACzC,GAAI4Q,GAAKM,EAAMJ,IAAI9Q,EACnB,IAAI4Q,EAAGhL,uBACL,KAAOgL,EAAGQ,qBAAuBR,EAAGhL,uBAAuBzgB,QACzDyrB,EAAGhL,uBAAuBgL,EAAGQ,wBAAwBlsB,KAAK,KAAM0rB,EAAGjpB,WAIlE/C,EAAIusB,EAAUhsB,QAGzB,QAASksB,IAAgBT,EAAIU,GAC3B,GAAIJ,GAAQN,EAAGG,SACf,IAAKG,EAIL,IACED,GAAoBC,GACpB,QACAL,GAAiB,KACjBS,EAAMJ,IAaV,QAASK,IAAY5M,EAASnb,GAC5B,GAAIqL,GAAM6P,GAAYC,EAASnb,EAC/B,IAAKqL,EAAI1P,OAAT,CAGA,GACIqsB,GADAle,EAAOC,MAAMvP,UAAUqF,MAAMnE,KAAKsO,UAAW,EAE7Cqd,IACFW,EAAOX,GAAeG,iBACbS,GACTD,EAAOC,IAEPD,EAAOC,MACPC,WAAWC,GAAmB,GAQhC,KAAK,GAAI/sB,GAAI,EAAGA,EAAIiQ,EAAI1P,SAAUP,GANvB,SAAcA,GACvB4sB,EAAKnhB,KAAK,WACR,MAAOwE,GAAIjQ,GAAG6O,MAAM,KAAMH,MAKvB1O,IAIT,QAAS+sB,MACP,GAAIC,GAAUH,EACdA,IAAyB,IACzB,KAAK,GAAI7sB,GAAI,EAAGA,EAAIgtB,EAAQzsB,SAAUP,EACpCgtB,EAAQhtB,KAOZ,QAASitB,IAAqBlqB,EAAI6lB,EAAU1L,EAAOgQ,GACjD,IAAK,GAAI9R,GAAI,EAAGA,EAAIwN,EAASuE,QAAQ5sB,OAAQ6a,IAAK,CAChD,GAAIxW,GAAOgkB,EAASuE,QAAQ/R,EAChB,SAARxW,EACFwoB,GAAerqB,EAAI6lB,GACF,UAARhkB,EACTyoB,GAAiBtqB,EAAI6lB,EAAU1L,EAAOgQ,GACrB,SAARtoB,EACT0oB,GAAkBvqB,EAAI6lB,GACL,UAARhkB,GACT2oB,GAAkBxqB,EAAI6lB,EAAUsE,GAGpCtE,EAASuE,QAAU,KAKrB,QAASK,IAAkB5E,GAWzB,MAVIA,GAASxa,MAAQwa,EAASzjB,OAC5ByjB,EAASxa,KAAO9H,EAAI,MAAO,KAAM,KAAM,sBACnCsiB,EAASzjB,KAAK0I,YAChB+a,EAASzjB,KAAK0I,WAAW4f,aAAa7E,EAASxa,KAAMwa,EAASzjB,MAEhEyjB,EAASxa,KAAKlB,YAAY0b,EAASzjB,MAC/BqO,IAAMC,GAAa,IACrBmV,EAASxa,KAAKhB,MAAMsG,OAAS,IAG1BkV,EAASxa,KAGlB,QAASsf,IAAqB3qB,EAAI6lB,GAChC,GAAIlc,GAAMkc,EAASzD,QAAUyD,EAASzD,QAAU,KAAOyD,EAAStjB,KAAK6f,SAAW,IAAMyD,EAAStjB,KAAK6f,OAIpG,IAHIzY,IACFA,GAAO,8BAELkc,EAAS+E,WACPjhB,EACFkc,EAAS+E,WAAWrkB,UAAYoD,GAEhCkc,EAAS+E,WAAW9f,WAAWf,YAAY8b,EAAS+E,YAAY/E,EAAS+E,WAAa,UAEnF,IAAIjhB,EAAK,CACd,GAAIkhB,GAAOJ,GAAkB5E,EAC7BA,GAAS+E,WAAaC,EAAKC,aAAavnB,EAAI,MAAO,KAAMoG,GAAMkhB,EAAK7gB,YACpEhK,EAAG8a,QAAQzL,MAAM0Y,cAAclC,EAAS+E,aAM5C,QAASG,IAAe/qB,EAAI6lB,GAC1B,GAAImF,GAAMhrB,EAAG8a,QAAQtJ,gBACrB,OAAIwZ,IAAOA,EAAIzoB,MAAQsjB,EAAStjB,MAC9BvC,EAAG8a,QAAQtJ,iBAAmB,KAC9BqU,EAASjW,QAAUob,EAAIpb,QAChBob,EAAIC,OAENrF,GAAiB5lB,EAAI6lB,GAM9B,QAASwE,IAAerqB,EAAI6lB,GAC1B,GAAIlc,GAAMkc,EAASzjB,KAAKmE,UACpB0kB,EAAQF,GAAe/qB,EAAI6lB,EAC3BA,GAASzjB,MAAQyjB,EAASxa,OAC5Bwa,EAASxa,KAAO4f,EAAMlF,KAExBF,EAASzjB,KAAK0I,WAAW4f,aAAaO,EAAMlF,IAAKF,EAASzjB,MAC1DyjB,EAASzjB,KAAO6oB,EAAMlF,IAClBkF,EAAM7I,SAAWyD,EAASzD,SAAW6I,EAAM5I,WAAawD,EAASxD,WACnEwD,EAASzD,QAAU6I,EAAM7I,QACzByD,EAASxD,UAAY4I,EAAM5I,UAC3BkI,GAAkBvqB,EAAI6lB,IACblc,IACTkc,EAASzjB,KAAKmE,UAAYoD,GAI9B,QAAS4gB,IAAkBvqB,EAAI6lB,GAC7B8E,GAAqB3qB,EAAI6lB,GACrBA,EAAStjB,KAAK2oB,UAChBT,GAAkB5E,GAAUtf,UAAYsf,EAAStjB,KAAK2oB,UAC7CrF,EAASxa,MAAQwa,EAASzjB,OACnCyjB,EAASxa,KAAK9E,UAAY,GAE5B,IAAI8b,GAAYwD,EAASxD,UAAYwD,EAASxD,UAAY,KAAOwD,EAAStjB,KAAK8f,WAAa,IAAMwD,EAAStjB,KAAK8f,SAChHwD,GAASzjB,KAAKmE,UAAY8b,GAAa,GAGzC,QAASiI,IAAiBtqB,EAAI6lB,EAAU1L,EAAOgQ,GAS7C,GARItE,EAASsF,SACXtF,EAASxa,KAAKtB,YAAY8b,EAASsF,QACnCtF,EAASsF,OAAS,MAEhBtF,EAASuF,mBACXvF,EAASxa,KAAKtB,YAAY8b,EAASuF,kBACnCvF,EAASuF,iBAAmB,MAE1BvF,EAAStjB,KAAK8oB,YAAa,CAC7B,GAAIR,GAAOJ,GAAkB5E,EAC7BA,GAASuF,iBAAmB7nB,EAAI,MAAO,KAAM,gCAAkCsiB,EAAStjB,KAAK8oB,YAAa,UAAYrrB,EAAGsU,QAAQgX,YAAcnB,EAAKoB,UAAYpB,EAAKqB,kBAAoB,cAAgBrB,EAAKqB,iBAAmB,MACjOxrB,EAAG8a,QAAQzL,MAAM0Y,cAAclC,EAASuF,kBACxCP,EAAKC,aAAajF,EAASuF,iBAAkBvF,EAASzjB,MAExD,GAAI0V,GAAU+N,EAAStjB,KAAKkpB,aAC5B,IAAIzrB,EAAGsU,QAAQoX,aAAe5T,EAAS,CACrC,GAAI6T,GAASlB,GAAkB5E,GAC3B+F,EAAa/F,EAASsF,OAAS5nB,EAAI,MAAO,KAAM,4BAA6B,UAAYvD,EAAGsU,QAAQgX,YAAcnB,EAAKoB,UAAYpB,EAAKqB,kBAAoB,KAShK,IARAxrB,EAAG8a,QAAQzL,MAAM0Y,cAAc6D,GAC/BD,EAAOb,aAAac,EAAY/F,EAASzjB,MACrCyjB,EAAStjB,KAAK8oB,cAChBO,EAAWrlB,WAAa,IAAMsf,EAAStjB,KAAK8oB,cAE1CrrB,EAAGsU,QAAQoX,aAAiB5T,GAAYA,EAAQ,4BAClD+N,EAASgG,WAAaD,EAAWzhB,YAAY5G,EAAI,MAAO8Q,EAAcrU,EAAGsU,QAAS6F,GAAQ,8CAA+C,SAAWgQ,EAAK2B,WAAW,0BAA4B,cAAgB9rB,EAAG8a,QAAQ5I,kBAAoB,QAE7O4F,EACF,IAAK,GAAIiU,GAAI,EAAGA,EAAI/rB,EAAGsU,QAAQjE,QAAQ7S,SAAUuuB,EAAG,CAClD,GAAI1S,GAAKrZ,EAAGsU,QAAQjE,QAAQ0b,GACxBllB,EAAQiR,EAAQ3L,eAAekN,IAAOvB,EAAQuB,EAC9CxS,IACF+kB,EAAWzhB,YAAY5G,EAAI,OAAQsD,GAAQ,wBAAyB,SAAWsjB,EAAK2B,WAAWzS,GAAM,cAAgB8Q,EAAK6B,YAAY3S,GAAM,SAOtJ,QAASmR,IAAkBxqB,EAAI6lB,EAAUsE,GACnCtE,EAASoG,YACXpG,EAASoG,UAAY,KAEvB,KAAK,GAAI5gB,GAAOwa,EAASxa,KAAKrB,WAAY7F,MAAO,GAAQkH,EAAMA,EAAOlH,EACpEA,EAAOkH,EAAK6gB,YACU,yBAAlB7gB,EAAK9E,WACPsf,EAASxa,KAAKtB,YAAYsB,EAG9B8gB,IAAkBnsB,EAAI6lB,EAAUsE,GAIlC,QAASiC,IAAiBpsB,EAAI6lB,EAAU1L,EAAOgQ,GAC7C,GAAIc,GAAQF,GAAe/qB,EAAI6lB,EAY/B,OAXAA,GAASzjB,KAAOyjB,EAASxa,KAAO4f,EAAMlF,IAClCkF,EAAM7I,UACRyD,EAASzD,QAAU6I,EAAM7I,SAEvB6I,EAAM5I,YACRwD,EAASxD,UAAY4I,EAAM5I,WAG7BkI,GAAkBvqB,EAAI6lB,GACtByE,GAAiBtqB,EAAI6lB,EAAU1L,EAAOgQ,GACtCgC,GAAkBnsB,EAAI6lB,EAAUsE,GACzBtE,EAASxa,KAKlB,QAAS8gB,IAAkBnsB,EAAI6lB,EAAUsE,GAEvC,GADAkC,GAAqBrsB,EAAI6lB,EAAStjB,KAAMsjB,EAAUsE,GAAM,GACpDtE,EAASK,KACX,IAAK,GAAIjpB,GAAI,EAAGA,EAAI4oB,EAASK,KAAK1oB,OAAQP,IACxCovB,GAAqBrsB,EAAI6lB,EAASK,KAAKjpB,GAAI4oB,EAAUsE,GAAM,GAKjE,QAASkC,IAAqBrsB,EAAIuC,EAAMsjB,EAAUsE,EAAMmC,GACtD,GAAK/pB,EAAKgqB,QAIV,IAAK,GADD1B,GAAOJ,GAAkB5E,GACpB5oB,EAAI,EAAGuvB,EAAKjqB,EAAKgqB,QAAStvB,EAAIuvB,EAAGhvB,SAAUP,EAAG,CACrD,GAAI4qB,GAAS2E,EAAGvvB,GACZoO,EAAO9H,EAAI,OAAQskB,EAAOxc,MAAO,wBAChCwc,GAAO4E,mBACVphB,EAAKX,aAAa,mBAAoB,QAExCgiB,GAAmB7E,EAAQxc,EAAMwa,EAAUsE,GAC3CnqB,EAAG8a,QAAQzL,MAAM0Y,cAAc1c,GAC3BihB,GAAczE,EAAO8E,MACvB9B,EAAKC,aAAazf,EAAMwa,EAASsF,QAAUtF,EAASzjB,MAEpDyoB,EAAK1gB,YAAYkB,GAEnBue,GAAY/B,EAAQ,WAIxB,QAAS6E,IAAmB7E,EAAQxc,EAAMwa,EAAUsE,GAClD,GAAItC,EAAO+E,UAAW,EACnB/G,EAASoG,YAAcpG,EAASoG,eAAiBvjB,KAAK2C,EACvD,IAAIwhB,GAAQ1C,EAAK2C,YACjBzhB,GAAKhB,MAAMuV,KAAOuK,EAAKoB,SAAW,KAC7B1D,EAAOkF,cACVF,GAAS1C,EAAKqB,iBACdngB,EAAKhB,MAAM2iB,YAAc7C,EAAKqB,iBAAmB,MAEnDngB,EAAKhB,MAAMwiB,MAAQA,EAAQ,KAEzBhF,EAAOkF,cACT1hB,EAAKhB,MAAMsG,OAAS,EACpBtF,EAAKhB,MAAM4iB,SAAW,WACjBpF,EAAO+E,YACVvhB,EAAKhB,MAAM6iB,YAAc/C,EAAKqB,iBAAmB,OAKvD,QAAS2B,IAAatF,GACpB,GAAqB,MAAjBA,EAAOlU,OACT,MAAOkU,GAAOlU,MAEhB,IAAI3T,GAAK6nB,EAAOzY,IAAIpP,EACpB,KAAKA,EACH,MAAO,EAET,KAAK2K,EAASpM,SAAS2M,KAAM2c,EAAOxc,MAAO,CACzC,GAAI+hB,GAAc,qBACdvF,GAAOkF,cACTK,GAAe,iBAAmBptB,EAAG8a,QAAQzK,QAAQgP,YAAc,OAEjEwI,EAAO+E,YACTQ,GAAe,UAAYptB,EAAG8a,QAAQtK,QAAQ6c,YAAc,OAE9DpjB,EAAqBjK,EAAG8a,QAAQlL,QAASrM,EAAI,OAAQskB,EAAOxc,MAAO,KAAM+hB,IAE3E,MAAOvF,GAAOlU,OAASkU,EAAOxc,KAAKP,WAAWsU,aAIhD,QAASkO,IAAcxS,EAASre,GAC9B,IAAK,GAAIE,GAAIgiB,GAASliB,GAAIE,GAAKme,EAAQtK,QAAS7T,EAAIA,EAAEmO,WACpD,IAAKnO,GAAmB,GAAdA,EAAEkO,UAAuD,QAAtClO,EAAEmB,aAAa,qBAAiCnB,EAAEmO,YAAcgQ,EAAQ7K,OAAStT,GAAKme,EAAQ9K,MACzH,OAAO,EAOb,QAASud,IAAWzS,GAClB,MAAOA,GAAQhL,UAAU0d,UAE3B,QAASC,IAAY3S,GACnB,MAAOA,GAAQ9K,MAAMoP,aAAetE,EAAQhL,UAAUsP,aAExD,QAASsO,IAAS5S,GAChB,GAAIA,EAAQvI,eACV,MAAOuI,GAAQvI,cAEjB,IAAI9V,GAAIwN,EAAqB6Q,EAAQlL,QAASrM,EAAI,MAAO,MACrD8G,EAAQsjB,OAAOC,iBAAmBD,OAAOC,iBAAiBnxB,GAAKA,EAAEoxB,aACjEC,GAASlO,KAAMmO,SAAS1jB,EAAM2iB,aAAcnN,MAAOkO,SAAS1jB,EAAMuG,cAItE,OAHKod,OAAMF,EAAKlO,OAAUoO,MAAMF,EAAKjO,SACnC/E,EAAQvI,eAAiBub,GAEpBA,EAGT,QAASG,IAAUjuB,GACjB,MAAOoQ,IAAcpQ,EAAG8a,QAAQjJ,eAElC,QAASqc,IAAaluB,GACpB,MAAOA,GAAG8a,QAAQvK,SAAS8c,YAAcY,GAAUjuB,GAAMA,EAAG8a,QAAQ/I,SAEtE,QAASoc,IAAcnuB,GACrB,MAAOA,GAAG8a,QAAQvK,SAAS6d,aAAeH,GAAUjuB,GAAMA,EAAG8a,QAAQhJ,UAOvE,QAASuc,IAAkBruB,EAAI6lB,EAAUyI,GACvC,GAAIC,GAAWvuB,EAAGsU,QAAQiI,aACtBiS,EAAWD,GAAYL,GAAaluB,EACxC,KAAK6lB,EAASjW,QAAQ6e,SAAWF,GAAY1I,EAASjW,QAAQid,OAAS2B,EAAU,CAC/E,GAAIC,GAAU5I,EAASjW,QAAQ6e,UAC/B,IAAIF,EAAU,CACZ1I,EAASjW,QAAQid,MAAQ2B,CAEzB,KAAK,GADDE,GAAQ7I,EAASzjB,KAAK4H,WAAW2kB,iBAC5B1xB,EAAI,EAAGA,EAAIyxB,EAAMlxB,OAAS,EAAGP,IAAK,CACzC,GAAIwI,GAAMipB,EAAMzxB,GACZkH,EAAOuqB,EAAMzxB,EAAI,EACjByG,MAAKqL,IAAItJ,EAAImpB,OAASzqB,EAAKyqB,QAAU,GACvCH,EAAQ/lB,MAAMjD,EAAImpB,OAASzqB,EAAK8X,KAAO,EAAIqS,EAAKrS,MAItDwS,EAAQ/lB,KAAK4lB,EAAKM,OAASN,EAAKrS,MAOpC,QAAS4S,IAAgBhJ,EAAUtjB,EAAM4X,GACvC,GAAI0L,EAAStjB,MAAQA,EACnB,OAASkC,IAAKohB,EAASjW,QAAQnL,IAAK+gB,MAAOK,EAASjW,QAAQ4V,MAE9D,KAAK,GAAIvoB,GAAI,EAAGA,EAAI4oB,EAASK,KAAK1oB,OAAQP,IACxC,GAAI4oB,EAASK,KAAKjpB,IAAMsF,EACtB,OAASkC,IAAKohB,EAASjW,QAAQ2W,KAAKtpB,GAAIuoB,MAAOK,EAASjW,QAAQ4W,OAAOvpB,GAG3E,KAAK,GAAIiX,GAAM,EAAGA,EAAM2R,EAASK,KAAK1oB,OAAQ0W,IAC5C,GAAIL,EAAOgS,EAASK,KAAKhS,IAAQiG,EAC/B,OAAS1V,IAAKohB,EAASjW,QAAQ2W,KAAKrS,GAAMsR,MAAOK,EAASjW,QAAQ4W,OAAOtS,GAAM4a,QAAQ,GAO7F,QAASC,IAA0B/uB,EAAIuC,GACrCA,EAAOuX,GAAWvX,EAClB,IAAI4X,GAAQtG,EAAOtR,GACf+O,EAAOtR,EAAG8a,QAAQtJ,iBAAmB,GAAIoX,IAAS5oB,EAAGoP,IAAK7M,EAAM4X,EACpE7I,GAAK6I,MAAQA,CACb,IAAI8Q,GAAQ3Z,EAAK2Z,MAAQrF,GAAiB5lB,EAAIsR,EAG9C,OAFAA,GAAKlP,KAAO6oB,EAAMlF,IAClB9b,EAAqBjK,EAAG8a,QAAQjL,YAAaob,EAAMlF,KAC5CzU,EAKT,QAAS0d,IAAYhvB,EAAIuC,EAAMd,EAAIwtB,GACjC,MAAOjT,IAAoBhc,EAAI8b,GAAsB9b,EAAIuC,GAAOd,EAAIwtB,GAItE,QAASC,IAAgBlvB,EAAIma,GAC3B,GAAIA,GAASna,EAAG8a,QAAQ7J,UAAYkJ,EAAQna,EAAG8a,QAAQ5J,OACrD,MAAOlR,GAAG8a,QAAQxJ,KAAK6d,GAAcnvB,EAAIma,GAE3C,IAAI6Q,GAAMhrB,EAAG8a,QAAQtJ,gBACrB,OAAIwZ,IAAO7Q,GAAS6Q,EAAI7Q,OAASA,EAAQ6Q,EAAI7Q,MAAQ6Q,EAAI7X,KAChD6X,MADT,GAUF,QAASlP,IAAsB9b,EAAIuC,GACjC,GAAI4X,GAAQtG,EAAOtR,GACf+O,EAAO4d,GAAgBlvB,EAAIma,EAC3B7I,KAASA,EAAKlP,KAChBkP,EAAO,KACEA,GAAQA,EAAK8Y,UACtBF,GAAqBlqB,EAAIsR,EAAM6I,EAAOiV,GAAcpvB,IACpDA,EAAGge,MAAMqR,aAAc,GAEpB/d,IACHA,EAAOyd,GAA0B/uB,EAAIuC,GAGvC,IAAIC,GAAOqsB,GAAgBvd,EAAM/O,EAAM4X,EACvC,QACE5X,KAAMA,EAAM+O,KAAMA,EAAMgd,KAAM,KAC9B7pB,IAAKjC,EAAKiC,IAAK+gB,MAAOhjB,EAAKgjB,MAAOsJ,OAAQtsB,EAAKssB,OAC/CQ,YAAY,GAMhB,QAAStT,IAAoBhc,EAAIuvB,EAAU9tB,EAAIwtB,EAAMO,GAC/CD,EAAST,SACXrtB,GAAM,EAER,IACIoF,GADA4oB,EAAMhuB,GAAMwtB,GAAQ,GAiBxB,OAfIM,GAAS/J,MAAMrZ,eAAesjB,GAChC5oB,EAAQ0oB,EAAS/J,MAAMiK,IAElBF,EAASjB,OACZiB,EAASjB,KAAOiB,EAASje,KAAKlP,KAAKsd,yBAEhC6P,EAASD,aACZjB,GAAkBruB,EAAIuvB,EAASje,KAAMie,EAASjB,MAC9CiB,EAASD,YAAa,GAExBzoB,EAAQ6oB,GAAiB1vB,EAAIuvB,EAAU9tB,EAAIwtB,GACtCpoB,EAAM8oB,QACTJ,EAAS/J,MAAMiK,GAAO5oB,KAGjB+Y,KAAM/Y,EAAM+Y,KAAMC,MAAOhZ,EAAMgZ,MACtC5D,IAAKuT,EAAY3oB,EAAM+oB,KAAO/oB,EAAMoV,IACpC2S,OAAQY,EAAY3oB,EAAMgpB,QAAUhpB,EAAM+nB,QAK9C,QAASkB,IAAuBzS,EAAQ5b,EAAIwtB,GAI1C,IAAK,GAHD5jB,GAAMrI,EAAOxB,EAAKuuB,EAAUC,EAAQC,EAG/BhzB,EAAI,EAAGA,EAAIogB,EAAO7f,OAAQP,GAAK,EAgBtC,GAfA+yB,EAAS3S,EAAOpgB,GAChBgzB,EAAO5S,EAAOpgB,EAAI,GACdwE,EAAKuuB,GACPhtB,EAAQ,EAAExB,EAAM,EAChBuuB,EAAW,QACFtuB,EAAKwuB,GACdjtB,EAAQvB,EAAKuuB,EACbxuB,EAAMwB,EAAQ,IACL/F,GAAKogB,EAAO7f,OAAS,GAAKiE,GAAMwuB,GAAQ5S,EAAOpgB,EAAI,GAAKwE,KACjED,EAAMyuB,EAAOD,EACbhtB,EAAQxB,EAAM,EACVC,GAAMwuB,IACRF,EAAW,UAGF,MAAT/sB,EAAe,CAKjB,GAJAqI,EAAOgS,EAAOpgB,EAAI,GACd+yB,GAAUC,GAAQhB,IAAS5jB,EAAKoL,WAAa,OAAS,WACxDsZ,EAAWd,GAED,QAARA,GAA2B,GAATjsB,EACpB,KAAO/F,GAAKogB,EAAOpgB,EAAI,IAAMogB,EAAOpgB,EAAI,IAAMogB,EAAOpgB,EAAI,GAAGwZ,YAC1DpL,EAAOgS,EAAkB,GAAVpgB,GAAK,IACpB8yB,EAAW,MAGf,IAAY,SAARd,GAAmBjsB,GAASitB,EAAOD,EACrC,KAAO/yB,EAAIogB,EAAO7f,OAAS,GAAK6f,EAAOpgB,EAAI,IAAMogB,EAAOpgB,EAAI,KAAOogB,EAAOpgB,EAAI,GAAGwZ,YAC/EpL,EAAOgS,GAAQpgB,GAAK,GAAK,GACzB8yB,EAAW,OAGf,OAGJ,OAAS1kB,KAAMA,EAAMrI,MAAOA,EAAOxB,IAAKA,EAAKuuB,SAAUA,EAAUG,WAAYF,EAAQG,SAAUF,GAGjG,QAASG,IAAc1B,EAAOO,GAC5B,GAAIX,GAAO+B,EACX,IAAY,QAARpB,EACF,IAAK,GAAIhyB,GAAI,EAAGA,EAAIyxB,EAAMlxB,SACnB8wB,EAAOI,EAAMzxB,IAAI2iB,MAAQ0O,EAAKzO,MADH5iB,SAMlC,KAAK,GAAIiX,GAAMwa,EAAMlxB,OAAS,EAAG0W,GAAO,IACjCoa,EAAOI,EAAMxa,IAAM0L,MAAQ0O,EAAKzO,MADI3L,KAM7C,MAAOoa,GAGT,QAASoB,IAAiB1vB,EAAIuvB,EAAU9tB,EAAIwtB,GAC1C,GAMIX,GANAnf,EAAQ2gB,GAAuBP,EAAS9qB,IAAKhD,EAAIwtB,GACjD5jB,EAAO8D,EAAM9D,KACbrI,EAAQmM,EAAMnM,MACdxB,EAAM2N,EAAM3N,IACZuuB,EAAW5gB,EAAM4gB,QAGrB,IAAqB,GAAjB1kB,EAAKR,SAAe,CAEtB,IAAK,GAAIqJ,GAAM,EAAGA,EAAM,EAAGA,IAAO,CAEhC,KAAOlR,GAASuL,EAAgBghB,EAAShtB,KAAKH,KAAKJ,OAAOmN,EAAM+gB,WAAaltB,OACzEA,CAEJ,MAAOmM,EAAM+gB,WAAa1uB,EAAM2N,EAAMghB,UAAY5hB,EAAgBghB,EAAShtB,KAAKH,KAAKJ,OAAOmN,EAAM+gB,WAAa1uB,OAC3GA,CAOJ,IAJE8sB,EADE7d,IAAMC,GAAa,GAAc,GAAT1N,GAAcxB,GAAO2N,EAAMghB,SAAWhhB,EAAM+gB,WAC/D7kB,EAAKP,WAAW4U,wBAEhB0Q,GAAczqB,GAAM0F,EAAMrI,EAAOxB,GAAKmtB,iBAAkBM,GAE7DX,EAAK1O,MAAQ0O,EAAKzO,OAAkB,GAAT7c,EAC7B,KAEFxB,GAAMwB,EACNA,GAAgB,EAChB+sB,EAAW,QAETtf,IAAMC,GAAa,KACrB4d,EAAOgC,GAA0BtwB,EAAG8a,QAAQlL,QAAS0e,QAElD,CAEDtrB,EAAQ,IACV+sB,EAAWd,EAAO,QAEpB,IAAIP,EAEFJ,GADEtuB,EAAGsU,QAAQiI,eAAiBmS,EAAQrjB,EAAKsjB,kBAAkBnxB,OAAS,EAC/DkxB,EAAc,SAARO,EAAkBP,EAAMlxB,OAAS,EAAI,GAE3C6N,EAAKqU,wBAGhB,GAAIjP,IAAMC,GAAa,IAAM1N,KAAWsrB,IAASA,EAAK1O,OAAS0O,EAAKzO,OAAQ,CAC1E,GAAI0Q,GAAQllB,EAAKP,WAAW6jB,iBAAiB,EAE3CL,GADEiC,GACO3Q,KAAM2Q,EAAM3Q,KAAMC,MAAO0Q,EAAM3Q,KAAO4Q,GAAUxwB,EAAG8a,SAAUmB,IAAKsU,EAAMtU,IAAK2S,OAAQ2B,EAAM3B,QAE7FyB,GASX,IALA,GAAIT,GAAOtB,EAAKrS,IAAMsT,EAASjB,KAAKrS,IAChCwU,EAAOnC,EAAKM,OAASW,EAASjB,KAAKrS,IACnCjN,GAAO4gB,EAAOa,GAAQ,EACtBhC,EAAUc,EAASje,KAAK1B,QAAQ6e,QAChCxxB,EAAI,EACDA,EAAIwxB,EAAQjxB,OAAS,KACtBwR,EAAMyf,EAAQxxB,IADWA,KAK/B,GAAIgf,GAAMhf,EAAIwxB,EAAQxxB,EAAI,GAAK,EAC3ByzB,EAAMjC,EAAQxxB,GACd0lB,GAAW/C,MAAmB,SAAZmQ,EAAsBzB,EAAKzO,MAAQyO,EAAK1O,MAAQ2P,EAASjB,KAAK1O,KAClFC,OAAoB,QAAZkQ,EAAqBzB,EAAK1O,KAAO0O,EAAKzO,OAAS0P,EAASjB,KAAK1O,KACrE3D,IAAKA,EAAK2S,OAAQ8B,EAQpB,OAPKpC,GAAK1O,MAAS0O,EAAKzO,QACtB8C,EAAOgN,OAAQ,GAEZ3vB,EAAGsU,QAAQqc,4BACdhO,EAAOiN,KAAOA,EAAKjN,EAAOkN,QAAUY,GAG/B9N,EAKT,QAAS2N,IAA0B1gB,EAAS0e,GAC1C,IAAKX,OAAOiD,QAAgC,MAAtBA,OAAOC,aAAuBD,OAAOC,aAAeD,OAAOE,aAAehR,GAAkBlQ,GAChH,MAAO0e,EAET,IAAIyC,GAASH,OAAOC,YAAcD,OAAOE,WACrCE,EAASJ,OAAOK,YAAcL,OAAOM,UACzC,QAAStR,KAAM0O,EAAK1O,KAAOmR,EAAQlR,MAAOyO,EAAKzO,MAAQkR,EACrD9U,IAAKqS,EAAKrS,IAAM+U,EAAQpC,OAAQN,EAAKM,OAASoC,GAGlD,QAASG,IAA6BtL,GACpC,GAAIA,EAASjW,UACXiW,EAASjW,QAAQ4V,SACjBK,EAASjW,QAAQ6e,QAAU,KACvB5I,EAASK,MACX,IAAK,GAAIjpB,GAAI,EAAGA,EAAI4oB,EAASK,KAAK1oB,OAAQP,IACxC4oB,EAASjW,QAAQ4W,OAAOvpB,MAMhC,QAASm0B,IAA0BpxB,GACjCA,EAAG8a,QAAQuW,gBAAkB,KAC7BznB,EAAe5J,EAAG8a,QAAQjL,YAC1B,KAAK,GAAI5S,GAAI,EAAGA,EAAI+C,EAAG8a,QAAQxJ,KAAK9T,OAAQP,IAC1Ck0B,GAA6BnxB,EAAG8a,QAAQxJ,KAAKrU,IAIjD,QAASq0B,IAAYtxB,GACnBoxB,GAA0BpxB,GAC1BA,EAAG8a,QAAQzI,gBAAkBrS,EAAG8a,QAAQxI,iBAAmBtS,EAAG8a,QAAQvI,eAAiB,KAClFvS,EAAGsU,QAAQiI,eACdvc,EAAG8a,QAAQpI,gBAAiB,GAE9B1S,EAAG8a,QAAQ3I,aAAe,KAG5B,QAASof,MAIP,MAAIC,KAAUC,KACHlzB,SAAS2M,KAAKwU,wBAAwBE,KAAOmO,SAASH,iBAAiBrvB,SAAS2M,MAAMgiB,aAE1FS,OAAO+D,cAAgBnzB,SAASozB,iBAAmBpzB,SAAS2M,MAAM0mB,WAE3E,QAASC,MACP,MAAIL,KAAUC,KACHlzB,SAAS2M,KAAKwU,wBAAwBzD,IAAM8R,SAASH,iBAAiBrvB,SAAS2M,MAAM4mB,YAEzFnE,OAAOoE,cAAgBxzB,SAASozB,iBAAmBpzB,SAAS2M,MAAM8mB,UAO3E,QAASC,IAAgBjyB,EAAI0a,EAAS4T,EAAMprB,EAASgvB,GACnD,IAAKA,GAAkBxX,EAAQ6R,QAC7B,IAAK,GAAItvB,GAAI,EAAGA,EAAIyd,EAAQ6R,QAAQ/uB,SAAUP,EAC5C,GAAIyd,EAAQ6R,QAAQtvB,GAAG0vB,MAAO,CAC5B,GAAIxZ,GAAOga,GAAazS,EAAQ6R,QAAQtvB,GACxCqxB,GAAKrS,KAAO9I,EAAKmb,EAAKM,QAAUzb,EAItC,GAAe,QAAXjQ,EACF,MAAOorB,EAEJprB,KACHA,EAAU,QAEZ,IAAIivB,GAAO1X,GAAcC,EAMzB,IALe,SAAXxX,EACFivB,GAAQ5E,GAAWvtB,EAAG8a,SAEtBqX,GAAQnyB,EAAG8a,QAAQrJ,WAEN,QAAXvO,GAAgC,UAAXA,EAAqB,CAC5C,GAAIkvB,GAAOpyB,EAAG8a,QAAQhL,UAAU4P,uBAChCyS,IAAQC,EAAKnW,KAAkB,UAAX/Y,EAAsB,EAAI2uB,KAC9C,IAAIQ,GAAOD,EAAKxS,MAAmB,UAAX1c,EAAsB,EAAIquB,KAClDjD,GAAK1O,MAAQyS,EAAK/D,EAAKzO,OAASwS,EAGlC,MADA/D,GAAKrS,KAAOkW,EAAK7D,EAAKM,QAAUuD,EACzB7D,EAKT,QAASgE,IAAgBtyB,EAAIuyB,EAAQrvB,GACnC,GAAe,OAAXA,EACF,MAAOqvB,EAET,IAAI3S,GAAO2S,EAAO3S,KACd3D,EAAMsW,EAAOtW,GAEjB,IAAe,QAAX/Y,EACF0c,GAAQ2R,KACRtV,GAAO4V,SACF,IAAe,SAAX3uB,IAAuBA,EAAS,CACzC,GAAIsvB,GAAWxyB,EAAG8a,QAAQ7K,MAAMyP,uBAChCE,IAAQ4S,EAAS5S,KACjB3D,GAAOuW,EAASvW,IAGlB,GAAIwW,GAAezyB,EAAG8a,QAAQhL,UAAU4P,uBACxC,QAASE,KAAMA,EAAO6S,EAAa7S,KAAM3D,IAAKA,EAAMwW,EAAaxW,KAGnE,QAASyW,IAAY1yB,EAAIO,EAAK2C,EAASwX,EAASuU,GAI9C,MAHKvU,KACHA,EAAUvX,EAAQnD,EAAGoP,IAAK7O,EAAIgC,OAEzB0vB,GAAgBjyB,EAAI0a,EAASsU,GAAYhvB,EAAI0a,EAASna,EAAIkB,GAAIwtB,GAAO/rB,GAmB9E,QAASyvB,IAAc3yB,EAAIO,EAAK2C,EAASwX,EAASkY,EAAiBpD,GAKjE,QAASqD,GAAIpxB,EAAIoe,GACf,GAAI1H,GAAI6D,GAAoBhc,EAAI4yB,EAAiBnxB,EAAIoe,EAAQ,QAAU,OAAQ2P,EAM/E,OALI3P,GACF1H,EAAEyH,KAAOzH,EAAE0H,MAEX1H,EAAE0H,MAAQ1H,EAAEyH,KAEPqS,GAAgBjyB,EAAI0a,EAASvC,EAAGjV,GAgBzC,QAAS4vB,GAAQrxB,EAAI2a,EAAS2W,GAC5B,GAAI9X,GAAOD,EAAMoB,GACbyD,EAAQ5E,EAAKC,MAAQ,GAAK,CAC9B,OAAO2X,GAAIE,EAAStxB,EAAK,EAAIA,EAAIoe,GAASkT,GA9B5CrY,EAAUA,GAAWvX,EAAQnD,EAAGoP,IAAK7O,EAAIgC,MACpCqwB,IACHA,EAAkB9W,GAAsB9b,EAAI0a,GAW9C,IAAIM,GAAQK,GAASX,EAAS1a,EAAGoP,IAAIkM,WACjC7Z,EAAKlB,EAAIkB,GACTiT,EAASnU,EAAImU,MAQjB,IAPIjT,GAAMiZ,EAAQtY,KAAK5E,QACrBiE,EAAKiZ,EAAQtY,KAAK5E,OAClBkX,EAAS,UACAjT,GAAM,IACfA,EAAK,EACLiT,EAAS,UAENsG,EACH,MAAO6X,GAAc,UAAVne,EAAqBjT,EAAK,EAAIA,EAAc,UAAViT,EAQ/C,IAAI0H,GAAUjB,GAAcH,EAAOvZ,EAAIiT,GACnClO,EAAQ4U,GACR/W,EAAMyuB,EAAQrxB,EAAI2a,EAAmB,UAAV1H,EAI/B,OAHa,OAATlO,IACFnC,EAAImC,MAAQssB,EAAQrxB,EAAI+E,EAAiB,UAAVkO,IAE1BrQ,EAKT,QAAS2uB,IAAehzB,EAAIO,GAC1B,GAAIqf,GAAO,CACXrf,GAAM0U,EAASjV,EAAGoP,IAAK7O,GAClBP,EAAGsU,QAAQiI,eACdqD,EAAO4Q,GAAUxwB,EAAG8a,SAAWva,EAAIkB,GAErC,IAAIiZ,GAAUvX,EAAQnD,EAAGoP,IAAK7O,EAAIgC,MAC9B0Z,EAAMxB,GAAcC,GAAW6S,GAAWvtB,EAAG8a,QACjD,QAAS8E,KAAMA,EAAMC,MAAOD,EAAM3D,IAAKA,EAAK2S,OAAQ3S,EAAMvB,EAAQ/G,QASpE,QAASsf,IAAY1wB,EAAMd,EAAIiT,EAAQwe,EAASC,GAC9C,GAAI5yB,GAAM+B,EAAIC,EAAMd,EAAIiT,EAKxB,OAJAnU,GAAI4yB,KAAOA,EACPD,IACF3yB,EAAI2yB,SAAU,GAET3yB,EAKT,QAAS6yB,IAAYpzB,EAAI6U,EAAGwe,GAC1B,GAAIjkB,GAAMpP,EAAGoP,GAEb,KADAikB,GAAKrzB,EAAG8a,QAAQrJ,YACR,EACN,MAAOwhB,IAAY7jB,EAAI+B,MAAO,EAAG,MAAM,GAAO,EAEhD,IAAIgJ,GAAQpG,EAAc3E,EAAKikB,GAC3Bne,EAAO9F,EAAI+B,MAAQ/B,EAAI+D,KAAO,CAClC,IAAIgH,EAAQjF,EACV,MAAO+d,IAAY7jB,EAAI+B,MAAQ/B,EAAI+D,KAAO,EAAGhQ,EAAQiM,EAAK8F,GAAM9S,KAAK5E,OAAQ,MAAM,EAAM,EAEvFqX,GAAI,IACNA,EAAI,EAIN,KADA,GAAI6F,GAAUvX,EAAQiM,EAAK+K,KAClB,CACP,GAAItT,GAAQysB,GAAgBtzB,EAAI0a,EAASP,EAAOtF,EAAGwe,GAC/CtZ,EAASJ,GAAmBe,GAC5B6Y,EAAYxZ,GAAUA,EAAO3B,KAAK,GAAG,EACzC,KAAI2B,KAAWlT,EAAMpF,GAAK8xB,EAAU1tB,KAAKpE,IAAMoF,EAAMpF,IAAM8xB,EAAU1tB,KAAKpE,IAAMoF,EAAMssB,KAAO,GAG3F,MAAOtsB,EAFPsT,GAAQtG,EAAO6G,EAAU6Y,EAAUrvB,GAAG3B,OAO5C,QAASma,IAAkB1c,EAAI0a,EAASkY,EAAiBS,GACvD,GAAIzjB,GAAU,SAAiBnO,GAC7B,MAAOwwB,IAAgBjyB,EAAI0a,EAASsB,GAAoBhc,EAAI4yB,EAAiBnxB,GAAK,SAEhFD,EAAMkZ,EAAQtY,KAAK5E,OACnBif,EAAQ5N,EAAU,SAAUpN,GAC9B,MAAOmO,GAAQnO,EAAK,GAAGmtB,QAAUyE,GAChC7xB,EAAK,EAIR,OAHAA,GAAMqN,EAAU,SAAUpN,GACxB,MAAOmO,GAAQnO,GAAIwa,IAAMoX,GACxB5W,EAAOjb,IACDib,MAAOA,EAAOjb,IAAKA,GAG9B,QAASgb,IAAsBxc,EAAI0a,EAASkY,EAAiB5mB,GAE3D,MAAO0Q,IAAkB1c,EAAI0a,EAASkY,EADtBX,GAAgBjyB,EAAI0a,EAASsB,GAAoBhc,EAAI4yB,EAAiB5mB,GAAS,QAAQiQ,KAIzG,QAASqX,IAAgBtzB,EAAI0a,EAASb,EAAWhF,EAAGwe,GAClDA,GAAK5Y,GAAcC,EACnB,IAGIna,GAHAkc,EAAQ,EACRjb,EAAMkZ,EAAQtY,KAAK5E,OACnBo1B,EAAkB9W,GAAsB9b,EAAI0a,EAGhD,IADYW,GAASX,EAAS1a,EAAGoP,IAAIkM,WAC1B,CACT,GAAItb,EAAGsU,QAAQiI,aAAc,CAC3B,GAAIiX,EACJA,GAAS9W,GAAkB1c,EAAI0a,EAASkY,EAAiBS,GAAI5W,EAAQ+W,EAAO/W,MAAOjb,EAAMgyB,EAAOhyB,IAElGjB,EAAM,GAAI+B,GAAIuX,EAAWnW,KAAKuL,MAAMwN,GAASjb,EAAMib,GAAS,GAC5D,IAEIgX,GAEAC,EAJAC,EAAYhB,GAAc3yB,EAAIO,EAAK,OAAQma,EAASkY,GAAiBhT,KACrEhR,EAAM+kB,EAAY9e,EAAI,GAAK,EAE3BjB,EAAO+f,EAAY9e,EAEnB+e,EAAQlwB,KAAKmwB,MAAMryB,EAAMib,GAAS,EACtCxI,GAAO,EAAG,CACRwf,EAAW7f,EACX8f,EAAUnzB,CAEV,KADA,GAAItD,GAAI,EACDA,EAAI22B,IAAS32B,EAAG,CACrB,GAAI62B,GAAYvzB,CAEhB,IAAW,OADXA,EAAM2b,GAAalc,EAAI0a,EAASna,EAAKqO,KAClBrO,EAAIkB,GAAKgb,GAASjb,IAAsB,UAAdjB,EAAImU,OAAqBnU,EAAIkB,GAAK,EAAIlB,EAAIkB,IAAK,CAC1FlB,EAAMuzB,CACN,MAAM7f,IAIV,GADAL,EAAO+e,GAAc3yB,EAAIO,EAAK,OAAQma,EAASkY,GAAiBhT,KAAO/K,EACnE+e,EAAQ,EAAG,CACb,GAAIG,GAAuBrwB,KAAKqL,IAAI6E,EAAO6f,GAAYG,CACvDA,GAAQlwB,KAAKC,IAAIiwB,EAAOlwB,KAAKmwB,KAAKnwB,KAAKqL,IAAI6E,GAAQmgB,IACnDnlB,EAAMgF,EAAO,EAAI,GAAK,SAET,GAARA,IAAcggB,EAAQ,GAAKhlB,EAAM,GAAKgF,EAAO,GAAKlQ,KAAKqL,IAAI6E,IAASlQ,KAAKqL,IAAI0kB,IACtF,IAAI/vB,KAAKqL,IAAI6E,GAAQlQ,KAAKqL,IAAI0kB,GAAW,CACvC,GAAI7f,EAAO,GAAK6f,EAAW,EACzB,KAAM,IAAIt2B,OAAM,gDAElBoD,GAAMmzB,OAEH,CACL,GAAIjyB,GAAKoN,EAAU,SAAUpN,GAC3B,GAAIuyB,GAAM/B,GAAgBjyB,EAAI0a,EAASsB,GAAoBhc,EAAI4yB,EAAiBnxB,GAAK,OACrF,OAAIuyB,GAAI/X,IAAMoX,GAEZ7xB,EAAMkC,KAAKC,IAAIlC,EAAID,IACZ,KACEwyB,EAAIpF,QAAUyE,KAEdW,EAAIpU,KAAO/K,KAEXmf,EAAInU,MAAQhL,IAGdA,EAAImf,EAAIpU,KAAOoU,EAAInU,MAAQhL,IAEnC4H,EAAOjb,EACVC,GAAKiN,EAAmBgM,EAAQtY,KAAMX,EAAI,GAC1ClB,EAAM,GAAI+B,GAAIuX,EAAWpY,EAAIA,GAAMD,EAAM,SAAW,SAEtD,GAAI+wB,GAASI,GAAc3yB,EAAIO,EAAK,OAAQma,EAASkY,EAKrD,QAJIS,EAAId,EAAOtW,KAAOsW,EAAO3D,OAASyE,KACpC9yB,EAAI2yB,SAAU,GAEhB3yB,EAAI4yB,KAAOte,EAAI0d,EAAO3S,MAAQ,EAAI/K,EAAI0d,EAAO1S,MAAQ,EAAI,EAClDtf,EAKT,QAAS0zB,IAAWnZ,GAClB,GAAgC,MAA5BA,EAAQxI,iBACV,MAAOwI,GAAQxI,gBAEjB,IAAmB,MAAf4hB,GAAqB,CACvBA,GAAc3wB,EAAI,MAGlB,KAAK,GAAItG,GAAI,EAAGA,EAAI,KAAMA,EACxBi3B,GAAY/pB,YAAY5L,SAASiM,eAAe,MAChD0pB,GAAY/pB,YAAY5G,EAAI,MAE9B2wB,IAAY/pB,YAAY5L,SAASiM,eAAe,MAElDP,EAAqB6Q,EAAQlL,QAASskB,GACtC,IAAIvgB,GAASugB,GAAY9U,aAAe,EAKxC,OAJIzL,GAAS,IACXmH,EAAQxI,iBAAmBqB,GAE7B/J,EAAekR,EAAQlL,SAChB+D,GAAU,EAInB,QAAS6c,IAAU1V,GACjB,GAA+B,MAA3BA,EAAQzI,gBACV,MAAOyI,GAAQzI,eAEjB,IAAI3P,GAASa,EAAI,OAAQ,cACrBwiB,EAAMxiB,EAAI,OAAQb,GACtBuH,GAAqB6Q,EAAQlL,QAASmW,EACtC,IAAIuI,GAAO5rB,EAAOgd,wBACdmN,GAASyB,EAAKzO,MAAQyO,EAAK1O,MAAQ,EAIvC,OAHIiN,GAAQ,IACV/R,EAAQzI,gBAAkBwa,GAErBA,GAAS,GAKlB,QAASuC,IAAcpvB,GAKrB,IAAK,GAJDsP,GAAItP,EAAG8a,QACP8E,KACAiN,KACAf,EAAaxc,EAAEe,QAAQ8jB,WAClBx3B,EAAI2S,EAAEe,QAAQrG,WAAY/M,EAAI,EAAGN,EAAGA,EAAIA,EAAEuvB,cAAejvB,EAChE2iB,EAAK5f,EAAGsU,QAAQjE,QAAQpT,IAAMN,EAAEy3B,WAAaz3B,EAAEw3B,WAAarI,EAC5De,EAAM7sB,EAAGsU,QAAQjE,QAAQpT,IAAMN,EAAE0wB,WAEnC,QAAS9B,SAAU8I,GAAqB/kB,GACtCkc,iBAAkBlc,EAAEe,QAAQgP,YAC5ByM,WAAYlM,EACZoM,YAAaa,EACbC,aAAcxd,EAAEkB,QAAQ6c,aAM5B,QAASgH,IAAqBvZ,GAC5B,MAAOA,GAAQvK,SAASmP,wBAAwBE,KAAO9E,EAAQ7K,MAAMyP,wBAAwBE,KAM/F,QAASwF,IAAeplB,GACtB,GAAIs0B,GAAKL,GAAWj0B,EAAG8a,SACnByT,EAAWvuB,EAAGsU,QAAQiI,aACtBgY,EAAUhG,GAAY7qB,KAAKoC,IAAI,EAAG9F,EAAG8a,QAAQvK,SAAS8c,YAAcmD,GAAUxwB,EAAG8a,SAAW,EAChG,OAAO,UAAUvY,GACf,GAAI+X,GAAata,EAAGoP,IAAK7M,GACvB,MAAO,EAGT,IAAIiyB,GAAgB,CACpB,IAAIjyB,EAAKgqB,QACP,IAAK,GAAItvB,GAAI,EAAGA,EAAIsF,EAAKgqB,QAAQ/uB,OAAQP,IACnCsF,EAAKgqB,QAAQtvB,GAAG0W,SAClB6gB,GAAiBjyB,EAAKgqB,QAAQtvB,GAAG0W,OAKvC,OAAI4a,GACKiG,GAAiB9wB,KAAKmwB,KAAKtxB,EAAKH,KAAK5E,OAAS+2B,IAAY,GAAKD,EAE/DE,EAAgBF,GAK7B,QAASG,IAAoBz0B,GAC3B,GAAIoP,GAAMpP,EAAGoP,IACTslB,EAAMtP,GAAeplB,EACzBoP,GAAI/H,KAAK,SAAU9E,GACjB,GAAI8iB,GAAYqP,EAAInyB,EAChB8iB,IAAa9iB,EAAKoR,QACpBD,EAAiBnR,EAAM8iB,KAU7B,QAASsP,IAAa30B,EAAIvD,EAAGm4B,EAASC,GACpC,GAAI/Z,GAAU9a,EAAG8a,OACjB,KAAK8Z,GAAyD,QAA9CjW,GAASliB,GAAGqB,aAAa,kBACvC,MAAO,KAGT,IAAI+W,GACAwe,EACAyB,EAAQha,EAAQhL,UAAU4P,uBAE9B,KACE7K,EAAIpY,EAAEs4B,QAAUD,EAAMlV,KAAKyT,EAAI52B,EAAEu4B,QAAUF,EAAM7Y,IACjD,MAAOxf,GACP,MAAO,MAET,GACI8F,GADAgwB,EAASa,GAAYpzB,EAAI6U,EAAGwe,EAEhC,IAAIwB,GAA0B,GAAftC,EAAOY,OAAc5wB,EAAOY,EAAQnD,EAAGoP,IAAKmjB,EAAOhwB,MAAMH,MAAM5E,QAAU+0B,EAAO9wB,GAAI,CACjG,GAAIwzB,GAAU7oB,EAAY7J,EAAMA,EAAK/E,OAAQwC,EAAGsU,QAAQjI,SAAW9J,EAAK/E,MACxE+0B,GAASjwB,EAAIiwB,EAAOhwB,KAAMmB,KAAKoC,IAAI,EAAGpC,KAAKwxB,OAAOrgB,EAAI6Y,GAAS1tB,EAAG8a,SAAS8E,MAAQ4Q,GAAUxwB,EAAG8a,UAAYma,IAE9G,MAAO1C,GAKT,QAASpD,IAAcnvB,EAAIrD,GACzB,GAAIA,GAAKqD,EAAG8a,QAAQ5J,OAClB,MAAO,KAGT,KADAvU,GAAKqD,EAAG8a,QAAQ7J,UACR,EACN,MAAO,KAGT,KAAK,GADDK,GAAOtR,EAAG8a,QAAQxJ,KACbrU,EAAI,EAAGA,EAAIqU,EAAK9T,OAAQP,IAE/B,IADAN,GAAK2U,EAAKrU,GAAGkW,MACL,EACN,MAAOlW,GAKb,QAASk4B,IAAgBn1B,GACvBA,EAAG8a,QAAQzL,MAAM+lB,cAAcp1B,EAAG8a,QAAQzL,MAAMgmB,oBAGlD,QAASA,IAAiBr1B,EAAIs1B,GAM5B,IAAK,GALDlmB,GAAMpP,EAAGoP,IACTuT,KACA4S,EAAc5S,EAAO6S,QAAUj3B,SAAS6oB,yBACxCqO,EAAc9S,EAAO+S,UAAYn3B,SAAS6oB,yBAErCnqB,EAAI,EAAGA,EAAImS,EAAIzM,IAAIxC,OAAO3C,OAAQP,IACzC,IAAgB,IAAZq4B,GAAqBr4B,GAAKmS,EAAIzM,IAAIgzB,UAAtC,CAGA,GAAIC,GAAWxmB,EAAIzM,IAAIxC,OAAOlD,EAC9B,MAAI24B,EAAS/vB,OAAOtD,MAAQvC,EAAG8a,QAAQ5J,QAAU0kB,EAAS1xB,KAAK3B,KAAOvC,EAAG8a,QAAQ7J,UAAjF,CAGA,GAAIwI,GAAYmc,EAASt1B,SACrBmZ,GAAazZ,EAAGsU,QAAQuhB,0BAC1BC,GAAoB91B,EAAI41B,EAASp1B,KAAM+0B,GAEpC9b,GACHsc,GAAmB/1B,EAAI41B,EAAUH,IAGrC,MAAO9S,GAIT,QAASmT,IAAoB91B,EAAIQ,EAAM4jB,GACrC,GAAI7jB,GAAMoyB,GAAc3yB,EAAIQ,EAAM,MAAO,KAAM,MAAOR,EAAGsU,QAAQqc,2BAE7DqF,EAAS5R,EAAOja,YAAY5G,EAAI,MAAO,IAAQ,qBAKnD,IAJAyyB,EAAO3rB,MAAMuV,KAAOrf,EAAIqf,KAAO,KAC/BoW,EAAO3rB,MAAM4R,IAAM1b,EAAI0b,IAAM,KAC7B+Z,EAAO3rB,MAAMsJ,OAASjQ,KAAKoC,IAAI,EAAGvF,EAAIquB,OAASruB,EAAI0b,KAAOjc,EAAGsU,QAAQ2hB,aAAe,KAEhF11B,EAAIiG,MAAO,CAEb,GAAI0vB,GAAc9R,EAAOja,YAAY5G,EAAI,MAAO,IAAQ,gDACxD2yB,GAAY7rB,MAAMyQ,QAAU,GAC5Bob,EAAY7rB,MAAMuV,KAAOrf,EAAIiG,MAAMoZ,KAAO,KAC1CsW,EAAY7rB,MAAM4R,IAAM1b,EAAIiG,MAAMyV,IAAM,KACxCia,EAAY7rB,MAAMsJ,OAA8C,KAApCpT,EAAIiG,MAAMooB,OAASruB,EAAIiG,MAAMyV,KAAa,MAK1E,QAAS8Z,IAAmB/1B,EAAI41B,EAAUxR,GAQxC,QAAS+R,GAAIvW,EAAM3D,EAAK4Q,EAAO+B,GACzB3S,EAAM,IACRA,EAAM,GAERA,EAAMvY,KAAKwxB,MAAMjZ,GACjB2S,EAASlrB,KAAKwxB,MAAMtG,GACpBwH,EAASjsB,YAAY5G,EAAI,MAAO,KAAM,sBAAuB,6BAA+Bqc,EAAO,0CAA4C3D,EAAM,eAA0B,MAAT4Q,EAAgBwJ,EAAYzW,EAAOiN,GAAS,8CAAgD+B,EAAS3S,GAAO,OAGpR,QAASqa,GAAY/zB,EAAMg0B,EAASC,GAIlC,QAASjE,GAAO9wB,EAAIwtB,GAClB,MAAOyD,IAAY1yB,EAAIsC,EAAIC,EAAMd,GAAK,MAAOiZ,EAASuU,GAJxD,GAEIjsB,GAAOxB,EAFPkZ,EAAUvX,EAAQiM,EAAK7M,GACvBk0B,EAAU/b,EAAQtY,KAAK5E,MA+C3B,OAzCAud,IAAoBM,GAASX,EAAStL,EAAIkM,WAAYib,GAAW,EAAY,MAATC,EAAgBC,EAAUD,EAAO,SAAU3wB,EAAM3B,EAAI0K,GACvH,GACI8nB,GACA9W,EACAC,EAHA8W,EAAUpE,EAAO1sB,EAAM,OAI3B,IAAIA,GAAQ3B,EACVwyB,EAAWC,EACX/W,EAAOC,EAAQ8W,EAAQ/W,SAClB,CAEL,GADA8W,EAAWnE,EAAOruB,EAAK,EAAG,SACf,OAAP0K,EAAc,CAChB,GAAIgoB,GAAMD,CAAQA,GAAUD,EAASA,EAAWE,EAElDhX,EAAO+W,EAAQ/W,KACfC,EAAQ6W,EAAS7W,MAEJ,MAAX0W,GAA2B,GAAR1wB,IACrB+Z,EAAOiX,GAELH,EAASza,IAAM0a,EAAQ1a,IAAM,IAE/Bka,EAAIvW,EAAM+W,EAAQ1a,IAAK,KAAM0a,EAAQ/H,QACrChP,EAAOiX,EACHF,EAAQ/H,OAAS8H,EAASza,KAC5Bka,EAAIvW,EAAM+W,EAAQ/H,OAAQ,KAAM8H,EAASza,MAGhC,MAATua,GAAiBtyB,GAAMuyB,IACzB5W,EAAQwW,KAELrzB,GAAS2zB,EAAQ1a,IAAMjZ,EAAMiZ,KAAO0a,EAAQ1a,KAAOjZ,EAAMiZ,KAAO0a,EAAQ/W,KAAO5c,EAAM4c,QACxF5c,EAAQ2zB,KAELn1B,GAAOk1B,EAAS9H,OAASptB,EAAIotB,QAAU8H,EAAS9H,QAAUptB,EAAIotB,QAAU8H,EAAS7W,MAAQre,EAAIqe,SAChGre,EAAMk1B,GAEJ9W,EAAOiX,EAAW,IACpBjX,EAAOiX,GAETV,EAAIvW,EAAM8W,EAASza,IAAK4D,EAAQD,EAAM8W,EAAS9H,WAExC5rB,MAAOA,EAAOxB,IAAKA,GAjE9B,GAAIsZ,GAAU9a,EAAG8a,QACb1L,EAAMpP,EAAGoP,IACTgnB,EAAW73B,SAAS6oB,yBACpB0P,EAAUpJ,GAAS1tB,EAAG8a,SACtB+b,EAAWC,EAAQlX,KACnByW,EAAY3yB,KAAKoC,IAAIgV,EAAQ5K,WAAYge,GAAaluB,GAAM8a,EAAQ7K,MAAMmkB,YAAc0C,EAAQjX,MA+DhGkX,EAAQnB,EAAS/vB,OACjBmxB,EAAMpB,EAAS1xB,IACnB,IAAI6yB,EAAMx0B,MAAQy0B,EAAIz0B,KACpB+zB,EAAYS,EAAMx0B,KAAMw0B,EAAMt1B,GAAIu1B,EAAIv1B,QACjC,CACL,GAAIw1B,GAAW9zB,EAAQiM,EAAK2nB,EAAMx0B,MAC9B20B,EAAS/zB,EAAQiM,EAAK4nB,EAAIz0B,MAC1B40B,EAAcrd,GAAWmd,IAAand,GAAWod,GACjDE,EAAUd,EAAYS,EAAMx0B,KAAMw0B,EAAMt1B,GAAI01B,EAAcF,EAAS70B,KAAK5E,OAAS,EAAI,MAAMgE,IAC3F61B,EAAaf,EAAYU,EAAIz0B,KAAM40B,EAAc,EAAI,KAAMH,EAAIv1B,IAAIuB,KACnEm0B,KACEC,EAAQnb,IAAMob,EAAWpb,IAAM,GACjCka,EAAIiB,EAAQvX,MAAOuX,EAAQnb,IAAK,KAAMmb,EAAQxI,QAC9CuH,EAAIU,EAAUQ,EAAWpb,IAAKob,EAAWzX,KAAMyX,EAAWzI,SAE1DuH,EAAIiB,EAAQvX,MAAOuX,EAAQnb,IAAKob,EAAWzX,KAAOwX,EAAQvX,MAAOuX,EAAQxI,SAGzEwI,EAAQxI,OAASyI,EAAWpb,KAC9Bka,EAAIU,EAAUO,EAAQxI,OAAQ,KAAMyI,EAAWpb,KAInDmI,EAAOja,YAAYisB,GAIrB,QAASkB,IAAat3B,GACpB,GAAKA,EAAGc,MAAMy2B,QAAd,CAGA,GAAIzc,GAAU9a,EAAG8a,OACjB0c,eAAc1c,EAAQ2c,QACtB,IAAI9wB,IAAK,CACTmU,GAAQnL,UAAUtF,MAAMqtB,WAAa,GACjC13B,EAAGsU,QAAQqjB,gBAAkB,EAC/B7c,EAAQ2c,QAAUG,YAAY,WAC5B,MAAO9c,GAAQnL,UAAUtF,MAAMqtB,YAAc/wB,GAAMA,GAAM,GAAK,UAC7D3G,EAAGsU,QAAQqjB,iBACL33B,EAAGsU,QAAQqjB,gBAAkB,IACtC7c,EAAQnL,UAAUtF,MAAMqtB,WAAa,WAIzC,QAASG,IAAY73B,GACdA,EAAGc,MAAMy2B,UACZv3B,EAAG8a,QAAQzL,MAAMyoB,QAAQC,GAAQ/3B,IAIrC,QAASg4B,IAAeh4B,GACtBA,EAAGc,MAAMm3B,mBAAoB,EAC7BlO,WAAW,WACL/pB,EAAGc,MAAMm3B,oBACXj4B,EAAGc,MAAMm3B,mBAAoB,EAC7BC,GAAOl4B,KAER,KAGL,QAAS+3B,IAAQ/3B,EAAIvD,GACfuD,EAAGc,MAAMm3B,oBACXj4B,EAAGc,MAAMm3B,mBAAoB,GAGJ,YAAvBj4B,EAAGsU,QAAQ0D,WAGVhY,EAAGc,MAAMy2B,UACZja,GAAOtd,EAAI,QAASA,EAAIvD,GACxBuD,EAAGc,MAAMy2B,SAAU,EACnBnsB,EAASpL,EAAG8a,QAAQtK,QAAS,sBAIxBxQ,EAAGge,OAAShe,EAAG8a,QAAQ9H,mBAAqBhT,EAAGoP,IAAIzM,MACtD3C,EAAG8a,QAAQzL,MAAM8oB,QACbtnB,IACFkZ,WAAW,WACT,MAAO/pB,GAAG8a,QAAQzL,MAAM8oB,OAAM,IAC7B,KAGPn4B,EAAG8a,QAAQzL,MAAM+oB,iBAEnBd,GAAat3B,IAEf,QAASk4B,IAAOl4B,EAAIvD,GACduD,EAAGc,MAAMm3B,oBAITj4B,EAAGc,MAAMy2B,UACXja,GAAOtd,EAAI,OAAQA,EAAIvD,GACvBuD,EAAGc,MAAMy2B,SAAU,EACnBc,GAAQr4B,EAAG8a,QAAQtK,QAAS,uBAE9BgnB,cAAcx3B,EAAG8a,QAAQ2c,SACzB1N,WAAW,WACJ/pB,EAAGc,MAAMy2B,UACZv3B,EAAG8a,QAAQ/H,OAAQ,IAEpB,MAKL,QAASulB,IAAwBt4B,GAG/B,IAAK,GAFD8a,GAAU9a,EAAG8a,QACbyd,EAAazd,EAAQrL,QAAQ+d,UACxBvwB,EAAI,EAAGA,EAAI6d,EAAQxJ,KAAK9T,OAAQP,IAAK,CAC5C,GAAIwI,GAAMqV,EAAQxJ,KAAKrU,GACnB0W,MAAS,EACb,KAAIlO,EAAIojB,OAAR,CAGA,GAAIpY,IAAMC,GAAa,EAAG,CACxB,GAAIggB,GAAMjrB,EAAI4F,KAAKmiB,UAAY/nB,EAAI4F,KAAK+T,YACxCzL,GAAS+c,EAAM6H,EACfA,EAAa7H,MACR,CACL,GAAIsD,GAAMvuB,EAAI4F,KAAKqU,uBACnB/L,GAASqgB,EAAIpF,OAASoF,EAAI/X,IAE5B,GAAIrI,GAAOnO,EAAIlD,KAAKoR,OAASA,CAI7B,IAHIA,EAAS,IACXA,EAASsgB,GAAWnZ,KAElBlH,EAAO,MAAQA,GAAQ,QACzBF,EAAiBjO,EAAIlD,KAAMoR,GAC3B6kB,GAAmB/yB,EAAIlD,MACnBkD,EAAIygB,MACN,IAAK,GAAI7N,GAAI,EAAGA,EAAI5S,EAAIygB,KAAK1oB,OAAQ6a,IACnCmgB,GAAmB/yB,EAAIygB,KAAK7N,MAStC,QAASmgB,IAAmBj2B,GAC1B,GAAIA,EAAKgqB,QACP,IAAK,GAAItvB,GAAI,EAAGA,EAAIsF,EAAKgqB,QAAQ/uB,SAAUP,EACzCsF,EAAKgqB,QAAQtvB,GAAG0W,OAASpR,EAAKgqB,QAAQtvB,GAAGoO,KAAKP,WAAWsU,aAQ/D,QAASqZ,IAAa3d,EAAS1L,EAAKspB,GAClC,GAAIzc,GAAMyc,GAA4B,MAAhBA,EAASzc,IAAcvY,KAAKoC,IAAI,EAAG4yB,EAASzc,KAAOnB,EAAQvK,SAASyhB,SAC1F/V,GAAMvY,KAAKuL,MAAMgN,EAAMsR,GAAWzS,GAClC,IAAI8T,GAAS8J,GAA+B,MAAnBA,EAAS9J,OAAiB8J,EAAS9J,OAAS3S,EAAMnB,EAAQtK,QAAQ4d,aAEvFvoB,EAAOkO,EAAc3E,EAAK6M,GAC1B/X,EAAK6P,EAAc3E,EAAKwf,EAG5B,IAAI8J,GAAYA,EAASC,OAAQ,CAC/B,GAAIC,GAAaF,EAASC,OAAO9yB,KAAKtD,KAClCs2B,EAAWH,EAASC,OAAOz0B,GAAG3B,IAC9Bq2B,GAAa/yB,GACfA,EAAO+yB,EACP10B,EAAK6P,EAAc3E,EAAKqL,GAActX,EAAQiM,EAAKwpB,IAAe9d,EAAQtK,QAAQ4d,eACzE1qB,KAAKC,IAAIk1B,EAAUzpB,EAAIxL,aAAeM,IAC/C2B,EAAOkO,EAAc3E,EAAKqL,GAActX,EAAQiM,EAAKypB,IAAa/d,EAAQtK,QAAQ4d,cAClFlqB,EAAK20B,GAGT,OAAShzB,KAAMA,EAAM3B,GAAIR,KAAKoC,IAAI5B,EAAI2B,EAAO,IAK/C,QAASizB,IAAkB94B,GACzB,GAAI8a,GAAU9a,EAAG8a,QACbxJ,EAAOwJ,EAAQxJ,IACnB,IAAKwJ,EAAQ1I,cAAkB0I,EAAQzK,QAAQrG,YAAehK,EAAGsU,QAAQgX,YAAzE,CAMA,IAAK,GAHDyN,GAAO1E,GAAqBvZ,GAAWA,EAAQvK,SAASqhB,WAAa5xB,EAAGoP,IAAIwiB,WAC5EoH,EAAUle,EAAQzK,QAAQgP,YAC1BO,EAAOmZ,EAAO,KACT97B,EAAI,EAAGA,EAAIqU,EAAK9T,OAAQP,IAC/B,IAAKqU,EAAKrU,GAAG4rB,OAAQ,CACf7oB,EAAGsU,QAAQgX,cACTha,EAAKrU,GAAGkuB,SACV7Z,EAAKrU,GAAGkuB,OAAO9gB,MAAMuV,KAAOA,GAE1BtO,EAAKrU,GAAGmuB,mBACV9Z,EAAKrU,GAAGmuB,iBAAiB/gB,MAAMuV,KAAOA,GAG1C,IAAIqZ,GAAQ3nB,EAAKrU,GAAGgvB,SACpB,IAAIgN,EACF,IAAK,GAAI5gB,GAAI,EAAGA,EAAI4gB,EAAMz7B,OAAQ6a,IAChC4gB,EAAM5gB,GAAGhO,MAAMuV,KAAOA,EAK1B5f,EAAGsU,QAAQgX,cACbxQ,EAAQzK,QAAQhG,MAAMuV,KAAOmZ,EAAOC,EAAU,OAOlD,QAASE,IAA2Bl5B,GAClC,IAAKA,EAAGsU,QAAQoX,YACd,OAAO,CAET,IAAItc,GAAMpP,EAAGoP,IACT8F,EAAOb,EAAcrU,EAAGsU,QAASlF,EAAI+B,MAAQ/B,EAAI+D,KAAO,GACxD2H,EAAU9a,EAAG8a,OACjB,IAAI5F,EAAK1X,QAAUsd,EAAQ3I,aAAc,CACvC,GAAIrQ,GAAOgZ,EAAQlL,QAAQzF,YAAY5G,EAAI,OAAQA,EAAI,MAAO2R,IAAQ,gDAClEikB,EAASr3B,EAAKkI,WAAWqV,YACzByX,EAAUh1B,EAAKud,YAAc8Z,CAOjC,OANAre,GAAQxK,WAAWjG,MAAMwiB,MAAQ,GACjC/R,EAAQ5I,kBAAoBxO,KAAKoC,IAAIqzB,EAAQre,EAAQxK,WAAW+O,YAAcyX,GAAW,EACzFhc,EAAQ7I,aAAe6I,EAAQ5I,kBAAoB4kB,EACnDhc,EAAQ3I,aAAe2I,EAAQ5I,kBAAoBgD,EAAK1X,QAAU,EAClEsd,EAAQxK,WAAWjG,MAAMwiB,MAAQ/R,EAAQ7I,aAAe,KACxDmnB,GAAkBp5B,IACX,EAET,OAAO,EAOT,QAASq5B,IAAkBr5B,EAAIsuB,GAC7B,IAAI9Q,GAAexd,EAAI,wBAAvB,CAIA,GAAI8a,GAAU9a,EAAG8a,QACbkZ,EAAMlZ,EAAQ7K,MAAMyP,wBACpB4Z,EAAW,IAMf,IALIhL,EAAKrS,IAAM+X,EAAI/X,IAAM,EACvBqd,GAAW,EACFhL,EAAKM,OAASoF,EAAI/X,KAAO0R,OAAO4L,aAAeh7B,SAASozB,gBAAgBvD,gBACjFkL,GAAW,GAEG,MAAZA,IAAqBE,GAAS,CAChC,GAAIC,GAAal2B,EAAI,MAAO,IAAU,KAAM,uDAAyD+qB,EAAKrS,IAAMnB,EAAQrJ,WAAa8b,GAAWvtB,EAAG8a,UAAY,0CAA4CwT,EAAKM,OAASN,EAAKrS,IAAMgS,GAAUjuB,GAAM8a,EAAQhJ,WAAa,uCAAyCwc,EAAK1O,KAAO,cAAgBlc,KAAKoC,IAAI,EAAGwoB,EAAKzO,MAAQyO,EAAK1O,MAAQ,MACpX5f,GAAG8a,QAAQhL,UAAU3F,YAAYsvB,GACjCA,EAAWC,eAAeJ,GAC1Bt5B,EAAG8a,QAAQhL,UAAU/F,YAAY0vB,KAOrC,QAASE,IAAkB35B,EAAIO,EAAKiB,EAAKo4B,GACzB,MAAVA,IACFA,EAAS,EAEX,IAAItL,EACCtuB,GAAGsU,QAAQiI,cAAgBhc,GAAOiB,IAIrCjB,EAAMA,EAAIkB,GAAKa,EAAI/B,EAAIgC,KAAoB,UAAdhC,EAAImU,OAAqBnU,EAAIkB,GAAK,EAAIlB,EAAIkB,GAAI,SAAWlB,EACtFiB,EAAoB,UAAdjB,EAAImU,OAAqBpS,EAAI/B,EAAIgC,KAAMhC,EAAIkB,GAAK,EAAG,UAAYlB,EAEvE,KAAK,GAAIs5B,GAAQ,EAAGA,EAAQ,EAAGA,IAAS,CACtC,GAAIC,IAAU,EACVvH,EAASI,GAAc3yB,EAAIO,GAC3Bw5B,EAAav4B,GAAOA,GAAOjB,EAAeoyB,GAAc3yB,EAAIwB,GAA3B+wB,CACrCjE,IAAS1O,KAAMlc,KAAKC,IAAI4uB,EAAO3S,KAAMma,EAAUna,MAC7C3D,IAAKvY,KAAKC,IAAI4uB,EAAOtW,IAAK8d,EAAU9d,KAAO2d,EAC3C/Z,MAAOnc,KAAKoC,IAAIysB,EAAO3S,KAAMma,EAAUna,MACvCgP,OAAQlrB,KAAKoC,IAAIysB,EAAO3D,OAAQmL,EAAUnL,QAAUgL,EACtD,IAAII,GAAYC,GAAmBj6B,EAAIsuB,GACnC4L,EAAWl6B,EAAGoP,IAAI4iB,UAClBmI,EAAYn6B,EAAGoP,IAAIwiB,UAavB,IAZ2B,MAAvBoI,EAAUhI,YACZoI,GAAgBp6B,EAAIg6B,EAAUhI,WAC1BtuB,KAAKqL,IAAI/O,EAAGoP,IAAI4iB,UAAYkI,GAAY,IAC1CJ,GAAU,IAGc,MAAxBE,EAAUpI,aACZyI,GAAcr6B,EAAIg6B,EAAUpI,YACxBluB,KAAKqL,IAAI/O,EAAGoP,IAAIwiB,WAAauI,GAAa,IAC5CL,GAAU,KAGTA,EACH,MAGJ,MAAOxL,GAIT,QAASoL,IAAe15B,EAAIsuB,GAC1B,GAAI0L,GAAYC,GAAmBj6B,EAAIsuB,EACZ,OAAvB0L,EAAUhI,WACZoI,GAAgBp6B,EAAIg6B,EAAUhI,WAEJ,MAAxBgI,EAAUpI,YACZyI,GAAcr6B,EAAIg6B,EAAUpI,YAQhC,QAASqI,IAAmBj6B,EAAIsuB,GAC9B,GAAIxT,GAAU9a,EAAG8a,QACbwf,EAAarG,GAAWj0B,EAAG8a,QAC3BwT,GAAKrS,IAAM,IACbqS,EAAKrS,IAAM,EAEb,IAAIse,GAAYv6B,EAAGge,OAA+B,MAAtBhe,EAAGge,MAAMgU,UAAoBhyB,EAAGge,MAAMgU,UAAYlX,EAAQvK,SAASyhB,UAC3FpB,EAASzC,GAAcnuB,GACvB2iB,IACA2L,GAAKM,OAASN,EAAKrS,IAAM2U,IAC3BtC,EAAKM,OAASN,EAAKrS,IAAM2U,EAE3B,IAAI4J,GAAYx6B,EAAGoP,IAAIuE,OAAS8Z,GAAY3S,GACxC2f,EAAQnM,EAAKrS,IAAMqe,EACnBI,EAAWpM,EAAKM,OAAS4L,EAAYF,CACzC,IAAIhM,EAAKrS,IAAMse,EACb5X,EAAOqP,UAAYyI,EAAQ,EAAInM,EAAKrS,QAC/B,IAAIqS,EAAKM,OAAS2L,EAAY3J,EAAQ,CAC3C,GAAI+J,GAASj3B,KAAKC,IAAI2qB,EAAKrS,KAAMye,EAAWF,EAAYlM,EAAKM,QAAUgC,EACnE+J,IAAUJ,IACZ5X,EAAOqP,UAAY2I,GAIvB,GAAIC,GAAa56B,EAAGge,OAAgC,MAAvBhe,EAAGge,MAAM4T,WAAqB5xB,EAAGge,MAAM4T,WAAa9W,EAAQvK,SAASqhB,WAC9FiJ,EAAU3M,GAAaluB,IAAOA,EAAGsU,QAAQgX,YAAcxQ,EAAQzK,QAAQgP,YAAc,GACrFyb,EAAUxM,EAAKzO,MAAQyO,EAAK1O,KAAOib,CAWvC,OAVIC,KACFxM,EAAKzO,MAAQyO,EAAK1O,KAAOib,GAEvBvM,EAAK1O,KAAO,GACd+C,EAAOiP,WAAa,EACXtD,EAAK1O,KAAOgb,EACrBjY,EAAOiP,WAAaluB,KAAKoC,IAAI,EAAGwoB,EAAK1O,MAAQkb,EAAU,EAAI,KAClDxM,EAAKzO,MAAQgb,EAAUD,EAAa,IAC7CjY,EAAOiP,WAAatD,EAAKzO,OAASib,EAAU,EAAI,IAAMD,GAEjDlY,EAKT,QAASoY,IAAe/6B,EAAIic,GACf,MAAPA,IAGJ+e,GAAmBh7B,GACnBA,EAAGge,MAAMgU,WAAmC,MAAtBhyB,EAAGge,MAAMgU,UAAoBhyB,EAAGoP,IAAI4iB,UAAYhyB,EAAGge,MAAMgU,WAAa/V,GAK9F,QAASgf,IAAoBj7B,GAC3Bg7B,GAAmBh7B,EACnB,IAAIyF,GAAMzF,EAAG0F,WACb1F,GAAGge,MAAMkd,aAAgBr1B,KAAMJ,EAAKvB,GAAIuB,EAAKm0B,OAAQ55B,EAAGsU,QAAQ6mB,oBAGlE,QAASC,IAAep7B,EAAI6U,EAAGwe,GACpB,MAALxe,GAAkB,MAALwe,GACf2H,GAAmBh7B,GAEZ,MAAL6U,IACF7U,EAAGge,MAAM4T,WAAa/c,GAEf,MAALwe,IACFrzB,EAAGge,MAAMgU,UAAYqB,GAIzB,QAASgI,IAAcr7B,EAAI41B,GACzBoF,GAAmBh7B,GACnBA,EAAGge,MAAMkd,YAActF,EAOzB,QAASoF,IAAmBh7B,GAC1B,GAAI41B,GAAW51B,EAAGge,MAAMkd,WACxB,IAAItF,EAAU,CACZ51B,EAAGge,MAAMkd,YAAc,IAGvBI,IAAoBt7B,EAFTgzB,GAAehzB,EAAI41B,EAAS/vB,MAC9BmtB,GAAehzB,EAAI41B,EAAS1xB,IACH0xB,EAASgE,SAI/C,QAAS0B,IAAoBt7B,EAAI6F,EAAM3B,EAAI01B,GACzC,GAAI2B,GAAOtB,GAAmBj6B,GAC5B4f,KAAMlc,KAAKC,IAAIkC,EAAK+Z,KAAM1b,EAAG0b,MAC7B3D,IAAKvY,KAAKC,IAAIkC,EAAKoW,IAAK/X,EAAG+X,KAAO2d,EAClC/Z,MAAOnc,KAAKoC,IAAID,EAAKga,MAAO3b,EAAG2b,OAC/B+O,OAAQlrB,KAAKoC,IAAID,EAAK+oB,OAAQ1qB,EAAG0qB,QAAUgL,GAE7CwB,IAAep7B,EAAIu7B,EAAK3J,WAAY2J,EAAKvJ,WAK3C,QAASoI,IAAgBp6B,EAAIqE,GACvBX,KAAKqL,IAAI/O,EAAGoP,IAAI4iB,UAAY3tB,GAAO,IAGlCyM,IACH0qB,GAAoBx7B,GAAMic,IAAK5X,IAEjCo3B,GAAaz7B,EAAIqE,GAAK,GAClByM,IACF0qB,GAAoBx7B,GAEtB07B,GAAY17B,EAAI,MAGlB,QAASy7B,IAAaz7B,EAAIqE,EAAKs3B,GAC7Bt3B,EAAMX,KAAKC,IAAI3D,EAAG8a,QAAQvK,SAASqrB,aAAe57B,EAAG8a,QAAQvK,SAAS6d,aAAc/pB,IAChFrE,EAAG8a,QAAQvK,SAASyhB,WAAa3tB,GAAQs3B,KAG7C37B,EAAGoP,IAAI4iB,UAAY3tB,EACnBrE,EAAG8a,QAAQ+gB,WAAWJ,aAAap3B,GAC/BrE,EAAG8a,QAAQvK,SAASyhB,WAAa3tB,IACnCrE,EAAG8a,QAAQvK,SAASyhB,UAAY3tB,IAMpC,QAASg2B,IAAcr6B,EAAIqE,EAAKy3B,EAAYH,GAC1Ct3B,EAAMX,KAAKC,IAAIU,EAAKrE,EAAG8a,QAAQvK,SAASwrB,YAAc/7B,EAAG8a,QAAQvK,SAAS8c,cACrEyO,EAAaz3B,GAAOrE,EAAGoP,IAAIwiB,WAAaluB,KAAKqL,IAAI/O,EAAGoP,IAAIwiB,WAAavtB,GAAO,KAAOs3B,IAGxF37B,EAAGoP,IAAIwiB,WAAavtB,EACpBy0B,GAAkB94B,GACdA,EAAG8a,QAAQvK,SAASqhB,YAAcvtB,IACpCrE,EAAG8a,QAAQvK,SAASqhB,WAAavtB,GAEnCrE,EAAG8a,QAAQ+gB,WAAWxB,cAAch2B,IAOtC,QAAS23B,IAAqBh8B,GAC5B,GAAIsP,GAAItP,EAAG8a,QACPke,EAAU1pB,EAAEe,QAAQgP,YACpB4c,EAAOv4B,KAAKwxB,MAAMl1B,EAAGoP,IAAIuE,OAAS8Z,GAAYztB,EAAG8a,SACrD,QACEsT,aAAc9e,EAAEiB,SAAS6d,aACzB8N,WAAY5sB,EAAEkB,QAAQ4d,aACtB2N,YAAazsB,EAAEiB,SAASwrB,YAAa1O,YAAa/d,EAAEiB,SAAS8c,YAC7D8O,UAAW7sB,EAAEkB,QAAQ6c,YACrB+O,QAASp8B,EAAGsU,QAAQgX,YAAc0N,EAAU,EAC5CqD,UAAWJ,EACXL,aAAcK,EAAOhO,GAAUjuB,GAAMsP,EAAEwC,UACvCD,eAAgBvC,EAAEuC,eAClBma,YAAagN,GA8HjB,QAASsD,IAAiBt8B,EAAI4P,GACvBA,IACHA,EAAUosB,GAAqBh8B,GAEjC,IAAIu8B,GAAav8B,EAAG8a,QAAQ/I,SACxByqB,EAAcx8B,EAAG8a,QAAQhJ,SAC7B2qB,IAAsBz8B,EAAI4P,EAC1B,KAAK,GAAI3S,GAAI,EAAGA,EAAI,GAAKs/B,GAAcv8B,EAAG8a,QAAQ/I,UAAYyqB,GAAex8B,EAAG8a,QAAQhJ,UAAW7U,IAC7Fs/B,GAAcv8B,EAAG8a,QAAQ/I,UAAY/R,EAAGsU,QAAQiI,cAClD+b,GAAwBt4B,GAE1By8B,GAAsBz8B,EAAIg8B,GAAqBh8B,IAC/Cu8B,EAAav8B,EAAG8a,QAAQ/I,SAASyqB,EAAcx8B,EAAG8a,QAAQhJ,UAM9D,QAAS2qB,IAAsBz8B,EAAI4P,GACjC,GAAIN,GAAItP,EAAG8a,QACP4hB,EAAQptB,EAAEusB,WAAWc,OAAO/sB,EAEhCN,GAAEW,MAAM5F,MAAMuG,cAAgBtB,EAAEyC,SAAW2qB,EAAM7c,OAAS,KAC1DvQ,EAAEW,MAAM5F,MAAMuyB,eAAiBttB,EAAEwC,UAAY4qB,EAAM9N,QAAU,KAC7Dtf,EAAEa,aAAa9F,MAAMwyB,aAAeH,EAAM9N,OAAS,uBAE/C8N,EAAM7c,OAAS6c,EAAM9N,QACvBtf,EAAEC,gBAAgBlF,MAAMyQ,QAAU,QAClCxL,EAAEC,gBAAgBlF,MAAMsJ,OAAS+oB,EAAM9N,OAAS,KAChDtf,EAAEC,gBAAgBlF,MAAMwiB,MAAQ6P,EAAM7c,MAAQ,MAE9CvQ,EAAEC,gBAAgBlF,MAAMyQ,QAAU,GAEhC4hB,EAAM9N,QAAU5uB,EAAGsU,QAAQwoB,4BAA8B98B,EAAGsU,QAAQgX,aACtEhc,EAAEE,aAAanF,MAAMyQ,QAAU,QAC/BxL,EAAEE,aAAanF,MAAMsJ,OAAS+oB,EAAM9N,OAAS,KAC7Ctf,EAAEE,aAAanF,MAAMwiB,MAAQjd,EAAQoc,YAAc,MAEnD1c,EAAEE,aAAanF,MAAMyQ,QAAU,GAMnC,QAASiiB,IAAe/8B,GAClBA,EAAG8a,QAAQ+gB,aACb77B,EAAG8a,QAAQ+gB,WAAW32B,QAClBlF,EAAG8a,QAAQ+gB,WAAWzwB,UACxBitB,GAAQr4B,EAAG8a,QAAQtK,QAASxQ,EAAG8a,QAAQ+gB,WAAWzwB,WAItDpL,EAAG8a,QAAQ+gB,WAAa,GAAImB,IAAeh9B,EAAGsU,QAAQ2oB,gBAAgB,SAAU5xB,GAC9ErL,EAAG8a,QAAQtK,QAAQsa,aAAazf,EAAMrL,EAAG8a,QAAQvL,iBAEjD5I,GAAG0E,EAAM,YAAa,WAChBrL,EAAGc,MAAMy2B,SACXxN,WAAW,WACT,MAAO/pB,GAAG8a,QAAQzL,MAAMyoB,SACvB,KAGPzsB,EAAKX,aAAa,iBAAkB,SACnC,SAAUnK,EAAK28B,GACJ,cAARA,EACF7C,GAAcr6B,EAAIO,GAElB65B,GAAgBp6B,EAAIO,IAErBP,GACCA,EAAG8a,QAAQ+gB,WAAWzwB,UACxBA,EAASpL,EAAG8a,QAAQtK,QAASxQ,EAAG8a,QAAQ+gB,WAAWzwB,UAYvD,QAAS+xB,IAAgBn9B,GACvBA,EAAGge,OACDhe,GAAIA,EACJo9B,aAAa,EACbZ,YAAax8B,EAAGoP,IAAIuE,OACpB0b,aAAa,EACbgO,YAAa,KACbC,QAAQ,EACRC,WAAY,KACZtf,uBAAwB,KACxBwL,qBAAsB,EACtB+T,kBAAkB,EAClBC,eAAe,EACf7L,WAAY,KAAMI,UAAW,KAC7BkJ,YAAa,KACbpD,OAAO,EACPze,KAAMqkB,IAER1U,GAAchpB,EAAGge,OAInB,QAAS2f,IAAc39B,GAErB0pB,GADS1pB,EAAGge,MACQ,SAAUuL,GAC5B,IAAK,GAAItsB,GAAI,EAAGA,EAAIssB,EAAMJ,IAAI3rB,OAAQP,IACpCssB,EAAMJ,IAAIlsB,GAAG+C,GAAGge,MAAQ,IAE1B4f,IAAcrU,KAMlB,QAASqU,IAAcrU,GAErB,IAAK,GADDJ,GAAMI,EAAMJ,IACPlsB,EAAI,EAAGA,EAAIksB,EAAI3rB,OAAQP,IAE9B4gC,GAAgB1U,EAAIlsB,GAEtB,KAAK,GAAIiX,GAAM,EAAGA,EAAMiV,EAAI3rB,OAAQ0W,IAElC4pB,GAAgB3U,EAAIjV,GAEtB,KAAK,GAAIwD,GAAM,EAAGA,EAAMyR,EAAI3rB,OAAQka,IAElCqmB,GAAgB5U,EAAIzR,GAEtB,KAAK,GAAIC,GAAM,EAAGA,EAAMwR,EAAI3rB,OAAQma,IAElCqmB,GAAgB7U,EAAIxR,GAEtB,KAAK,GAAIsmB,GAAM,EAAGA,EAAM9U,EAAI3rB,OAAQygC,IAElCC,GAAoB/U,EAAI8U,IAI5B,QAASJ,IAAgB5U,GACvB,GAAIjpB,GAAKipB,EAAGjpB,GACR8a,EAAU9a,EAAG8a,OACjBqjB,IAAoBn+B,GAChBipB,EAAGwU,eACL5iB,GAAY7a,GAGdipB,EAAGmV,WAAanV,EAAGmU,aAAenU,EAAGoG,aAA+B,MAAhBpG,EAAG+I,WAAqB/I,EAAGiS,cAAgBjS,EAAGiS,YAAYr1B,KAAKtD,KAAOuY,EAAQ7J,UAAYgY,EAAGiS,YAAYh3B,GAAG3B,MAAQuY,EAAQ5J,SAAW4J,EAAQpI,gBAAkB1S,EAAGsU,QAAQiI,aAChO0M,EAAG0T,OAAS1T,EAAGmV,YAAc,GAAIC,IAAcr+B,EAAIipB,EAAGmV,aAAgBniB,IAAKgN,EAAG+I,UAAW2G,OAAQ1P,EAAGiS,aAAejS,EAAGoG,aAGxH,QAASyO,IAAgB7U,GACvBA,EAAGqV,eAAiBrV,EAAGmV,YAAcG,GAAsBtV,EAAGjpB,GAAIipB,EAAG0T,QAGvE,QAASoB,IAAgB9U,GACvB,GAAIjpB,GAAKipB,EAAGjpB,GACR8a,EAAU9a,EAAG8a,OACbmO,GAAGqV,gBACLhG,GAAwBt4B,GAG1BipB,EAAGuV,WAAaxC,GAAqBh8B,GAKjC8a,EAAQpI,iBAAmB1S,EAAGsU,QAAQiI,eACxC0M,EAAGwV,cAAgBzP,GAAYhvB,EAAI8a,EAAQtI,QAASsI,EAAQtI,QAAQpQ,KAAK5E,QAAQoiB,KAAO,EACxF5f,EAAG8a,QAAQ5K,WAAa+Y,EAAGwV,cAC3BxV,EAAGuV,WAAWzC,YAAcr4B,KAAKoC,IAAIgV,EAAQvK,SAAS8c,YAAavS,EAAQ7K,MAAMmkB,WAAanL,EAAGwV,cAAgBxQ,GAAUjuB,GAAMA,EAAG8a,QAAQ/I,UAC5IkX,EAAGyV,cAAgBh7B,KAAKoC,IAAI,EAAGgV,EAAQ7K,MAAMmkB,WAAanL,EAAGwV,cAAgBvQ,GAAaluB,MAGxFipB,EAAGqV,gBAAkBrV,EAAGuU,oBAC1BvU,EAAG0V,kBAAoB7jB,EAAQzL,MAAMgmB,iBAAiBpM,EAAG6O,QAI7D,QAASkG,IAAgB/U,GACvB,GAAIjpB,GAAKipB,EAAGjpB,EAEY,OAApBipB,EAAGwV,gBACLz+B,EAAG8a,QAAQ7K,MAAM5F,MAAMu0B,SAAW3V,EAAGwV,cAAgB,KACjDxV,EAAGyV,cAAgB1+B,EAAGoP,IAAIwiB,YAC5ByI,GAAcr6B,EAAI0D,KAAKC,IAAI3D,EAAG8a,QAAQvK,SAASqhB,WAAY3I,EAAGyV,gBAAgB,GAEhF1+B,EAAG8a,QAAQpI,gBAAiB,EAG9B,IAAImsB,GAAY5V,EAAG6O,OAAS7O,EAAG6O,OAAS9sB,OAAiBzM,SAASugC,UAAYvgC,SAASugC,WACnF7V,GAAG0V,mBACL3+B,EAAG8a,QAAQzL,MAAM+lB,cAAcnM,EAAG0V,kBAAmBE,IAEnD5V,EAAGqV,gBAAkBrV,EAAGuT,aAAex8B,EAAGoP,IAAIuE,SAChD2oB,GAAiBt8B,EAAIipB,EAAGuV,YAEtBvV,EAAGqV,gBACLS,GAAkB/+B,EAAIipB,EAAGuV,YAGvBvV,EAAGuU,kBACLlG,GAAat3B,GAGXA,EAAGc,MAAMy2B,SAAWtO,EAAGoU,aACzBr9B,EAAG8a,QAAQzL,MAAM8oB,MAAMlP,EAAGqU,QAExBuB,GACFhH,GAAY5O,EAAGjpB,IAInB,QAASk+B,IAAoBjV,GAC3B,GAAIjpB,GAAKipB,EAAGjpB,GACR8a,EAAU9a,EAAG8a,QACb1L,EAAMpP,EAAGoP,GAoBb,IAlBI6Z,EAAGqV,gBACLU,GAAkBh/B,EAAIipB,EAAG0T,QAIA,MAAvB7hB,EAAQjI,aAAwC,MAAhBoW,EAAG+I,WAAsC,MAAjB/I,EAAG2I,aAAsB3I,EAAGiS,cACtFpgB,EAAQjI,YAAciI,EAAQhI,YAAc,MAI1B,MAAhBmW,EAAG+I,WACLyJ,GAAaz7B,EAAIipB,EAAG+I,UAAW/I,EAAG0S,aAGf,MAAjB1S,EAAG2I,YACLyI,GAAcr6B,EAAIipB,EAAG2I,YAAY,GAAM,GAGrC3I,EAAGiS,YAAa,CAElB7B,GAAkBr5B,EADP25B,GAAkB35B,EAAIiV,EAAS7F,EAAK6Z,EAAGiS,YAAYr1B,MAAOoP,EAAS7F,EAAK6Z,EAAGiS,YAAYh3B,IAAK+kB,EAAGiS,YAAYtB,SAMxH,GAAI/Q,GAASI,EAAGgW,mBACZC,EAAWjW,EAAGkW,oBAClB,IAAItW,EACF,IAAK,GAAI5rB,GAAI,EAAGA,EAAI4rB,EAAOrrB,SAAUP,EAC9B4rB,EAAO5rB,GAAG8S,MAAMvS,QACnB8f,GAAOuL,EAAO5rB,GAAI;mEAIxB,IAAIiiC,EACF,IAAK,GAAIhrB,GAAM,EAAGA,EAAMgrB,EAAS1hC,SAAU0W,EACrCgrB,EAAShrB,GAAKnE,MAAMvS,QACtB8f,GAAO4hB,EAAShrB,GAAM,SAKxB4G,GAAQtK,QAAQ4O,eAClBhQ,EAAI4iB,UAAYhyB,EAAG8a,QAAQvK,SAASyhB,WAIlC/I,EAAGsU,YACLjgB,GAAOtd,EAAI,UAAWA,EAAIipB,EAAGsU,YAE3BtU,EAAG0T,QACL1T,EAAG0T,OAAOyC,SAKd,QAASC,IAAQr/B,EAAI9C,GACnB,GAAI8C,EAAGge,MACL,MAAO9gB,IAETigC,IAAgBn9B,EAChB,KACE,MAAO9C,KACP,QACAygC,GAAc39B,IAIlB,QAASuF,IAAUvF,EAAI9C,GACrB,MAAO,YACL,GAAI8C,EAAGge,MACL,MAAO9gB,GAAE4O,MAAM9L,EAAI6L,UAErBsxB,IAAgBn9B,EAChB,KACE,MAAO9C,GAAE4O,MAAM9L,EAAI6L,WACnB,QACA8xB,GAAc39B,KAMpB,QAASs/B,IAASpiC,GAChB,MAAO,YACL,GAAIW,KAAKmgB,MACP,MAAO9gB,GAAE4O,MAAMjO,KAAMgO,UAEvBsxB,IAAgBt/B,KAChB,KACE,MAAOX,GAAE4O,MAAMjO,KAAMgO,WACrB,QACA8xB,GAAc9/B,QAIpB,QAAS0hC,IAAYriC,GACnB,MAAO,YACL,GAAI8C,GAAKnC,KAAKmC,EACd,KAAKA,GAAMA,EAAGge,MACZ,MAAO9gB,GAAE4O,MAAMjO,KAAMgO,UAEvBsxB,IAAgBn9B,EAChB,KACE,MAAO9C,GAAE4O,MAAMjO,KAAMgO,WACrB,QACA8xB,GAAc39B,KAWpB,QAASw/B,IAAUx/B,EAAI6F,EAAM3B,EAAIu7B,GACnB,MAAR55B,IACFA,EAAO7F,EAAGoP,IAAI+B,OAEN,MAANjN,IACFA,EAAKlE,EAAGoP,IAAI+B,MAAQnR,EAAGoP,IAAI+D,MAExBssB,IACHA,EAAU,EAGZ,IAAI3kB,GAAU9a,EAAG8a,OAOjB,IANI2kB,GAAWv7B,EAAK4W,EAAQ5J,SAAwC,MAA7B4J,EAAQlJ,mBAA6BkJ,EAAQlJ,kBAAoB/L,KACtGiV,EAAQlJ,kBAAoB/L,GAG9B7F,EAAGge,MAAMof,aAAc,EAEnBv3B,GAAQiV,EAAQ5J,OAEduE,IAAqByE,GAAala,EAAGoP,IAAKvJ,GAAQiV,EAAQ5J,QAC5DwuB,GAAU1/B,OAEP,IAAIkE,GAAM4W,EAAQ7J,SAEnBwE,IAAqB4E,GAAgBra,EAAGoP,IAAKlL,EAAKu7B,GAAW3kB,EAAQ7J,SACvEyuB,GAAU1/B,IAEV8a,EAAQ7J,UAAYwuB,EACpB3kB,EAAQ5J,QAAUuuB,OAEf,IAAI55B,GAAQiV,EAAQ7J,UAAY/M,GAAM4W,EAAQ5J,OAEnDwuB,GAAU1/B,OACL,IAAI6F,GAAQiV,EAAQ7J,SAAU,CAEnC,GAAI0uB,GAAMC,GAAiB5/B,EAAIkE,EAAIA,EAAKu7B,EAAS,EAC7CE,IACF7kB,EAAQxJ,KAAOwJ,EAAQxJ,KAAK5P,MAAMi+B,EAAIx3B,OACtC2S,EAAQ7J,SAAW0uB,EAAIxlB,MACvBW,EAAQ5J,QAAUuuB,GAElBC,GAAU1/B,OAEP,IAAIkE,GAAM4W,EAAQ5J,OAAQ,CAE/B,GAAI2uB,GAAQD,GAAiB5/B,EAAI6F,EAAMA,GAAO,EAC1Cg6B,IACF/kB,EAAQxJ,KAAOwJ,EAAQxJ,KAAK5P,MAAM,EAAGm+B,EAAM13B,OAC3C2S,EAAQ5J,OAAS2uB,EAAM1lB,OAEvBulB,GAAU1/B,OAEP,CAEL,GAAI8/B,GAASF,GAAiB5/B,EAAI6F,EAAMA,GAAO,GAC3Ck6B,EAASH,GAAiB5/B,EAAIkE,EAAIA,EAAKu7B,EAAS,EAChDK,IAAUC,GACZjlB,EAAQxJ,KAAOwJ,EAAQxJ,KAAK5P,MAAM,EAAGo+B,EAAO33B,OAAO+N,OAAO4S,GAAe9oB,EAAI8/B,EAAO3lB,MAAO4lB,EAAO5lB,QAAQjE,OAAO4E,EAAQxJ,KAAK5P,MAAMq+B,EAAO53B,QAC3I2S,EAAQ5J,QAAUuuB,GAElBC,GAAU1/B,GAId,GAAIgrB,GAAMlQ,EAAQtJ,gBACdwZ,KACE9mB,EAAK8mB,EAAI7Q,MACX6Q,EAAI7Q,OAASslB,EACJ55B,EAAOmlB,EAAI7Q,MAAQ6Q,EAAI7X,OAChC2H,EAAQtJ,iBAAmB,OAOjC,QAASwuB,IAAchgC,EAAIuC,EAAMV,GAC/B7B,EAAGge,MAAMof,aAAc,CACvB,IAAItiB,GAAU9a,EAAG8a,QACbkQ,EAAMhrB,EAAG8a,QAAQtJ,gBAKrB,IAJIwZ,GAAOzoB,GAAQyoB,EAAI7Q,OAAS5X,EAAOyoB,EAAI7Q,MAAQ6Q,EAAI7X,OACrD2H,EAAQtJ,iBAAmB,QAGzBjP,EAAOuY,EAAQ7J,UAAY1O,GAAQuY,EAAQ5J,QAA/C,CAGA,GAAI2U,GAAW/K,EAAQxJ,KAAK6d,GAAcnvB,EAAIuC,GAC9C,IAAqB,MAAjBsjB,EAASxa,KAAb,CAGA,GAAI6B,GAAM2Y,EAASuE,UAAYvE,EAASuE,aACb,GAAvBnoB,EAAQiL,EAAKrL,IACfqL,EAAIxE,KAAK7G,KAKb,QAAS69B,IAAU1/B,GACjBA,EAAG8a,QAAQ7J,SAAWjR,EAAG8a,QAAQ5J,OAASlR,EAAGoP,IAAI+B,MACjDnR,EAAG8a,QAAQxJ,QACXtR,EAAG8a,QAAQrJ,WAAa,EAG1B,QAASmuB,IAAiB5/B,EAAIigC,EAAMC,EAAMtxB,GACxC,GACIgF,GADAzL,EAAQgnB,GAAcnvB,EAAIigC,GAE1B3uB,EAAOtR,EAAG8a,QAAQxJ,IACtB,KAAKmE,IAAqByqB,GAAQlgC,EAAGoP,IAAI+B,MAAQnR,EAAGoP,IAAI+D,KACtD,OAAShL,MAAOA,EAAOgS,MAAO+lB,EAGhC,KAAK,GADDvjC,GAAIqD,EAAG8a,QAAQ7J,SACVhU,EAAI,EAAGA,EAAIkL,EAAOlL,IACzBN,GAAK2U,EAAKrU,GAAGkW,IAEf,IAAIxW,GAAKsjC,EAAM,CACb,GAAIrxB,EAAM,EAAG,CACX,GAAIzG,GAASmJ,EAAK9T,OAAS,EACzB,MAAO,KAEToW,GAAOjX,EAAI2U,EAAKnJ,GAAOgL,KAAO8sB,EAC9B93B,QAEAyL,GAAOjX,EAAIsjC,CAEbA,IAAQrsB,EAAKssB,GAAQtsB,EAEvB,KAAOsG,GAAala,EAAGoP,IAAK8wB,IAASA,GAAM,CACzC,GAAI/3B,IAAUyG,EAAM,EAAI,EAAI0C,EAAK9T,OAAS,GACxC,MAAO,KAET0iC,IAAQtxB,EAAM0C,EAAKnJ,GAASyG,EAAM,EAAI,EAAI,IAAIuE,KAC9ChL,GAASyG,EAEX,OAASzG,MAAOA,EAAOgS,MAAO+lB,GAKhC,QAASC,IAAWngC,EAAI6F,EAAM3B,GAC5B,GAAI4W,GAAU9a,EAAG8a,OAEE,IADRA,EAAQxJ,KACV9T,QAAeqI,GAAQiV,EAAQ5J,QAAUhN,GAAM4W,EAAQ7J,UAC9D6J,EAAQxJ,KAAOwX,GAAe9oB,EAAI6F,EAAM3B,GACxC4W,EAAQ7J,SAAWpL,IAEfiV,EAAQ7J,SAAWpL,EACrBiV,EAAQxJ,KAAOwX,GAAe9oB,EAAI6F,EAAMiV,EAAQ7J,UAAUiF,OAAO4E,EAAQxJ,MAChEwJ,EAAQ7J,SAAWpL,IAC5BiV,EAAQxJ,KAAOwJ,EAAQxJ,KAAK5P,MAAMytB,GAAcnvB,EAAI6F,KAEtDiV,EAAQ7J,SAAWpL,EACfiV,EAAQ5J,OAAShN,EACnB4W,EAAQxJ,KAAOwJ,EAAQxJ,KAAK4E,OAAO4S,GAAe9oB,EAAI8a,EAAQ5J,OAAQhN,IAC7D4W,EAAQ5J,OAAShN,IAC1B4W,EAAQxJ,KAAOwJ,EAAQxJ,KAAK5P,MAAM,EAAGytB,GAAcnvB,EAAIkE,MAG3D4W,EAAQ5J,OAAShN,EAKnB,QAASk8B,IAAepgC,GAGtB,IAAK,GAFDsR,GAAOtR,EAAG8a,QAAQxJ,KAClB+uB,EAAQ,EACHpjC,EAAI,EAAGA,EAAIqU,EAAK9T,OAAQP,IAAK,CACpC,GAAI4oB,GAAWvU,EAAKrU,EACf4oB,GAASgD,QAAYhD,EAASxa,OAAQwa,EAASuE,WAChDiW,EAGN,MAAOA,GAKT,QAAS3E,IAAY17B,EAAIsgC,GACnBtgC,EAAGoP,IAAI2T,kBAAoB/iB,EAAG8a,QAAQ5J,QACxClR,EAAGc,MAAMy/B,UAAUxiB,IAAIuiB,EAAM50B,EAAK80B,GAAiBxgC,IAIvD,QAASwgC,IAAgBxgC,GACvB,GAAIoP,GAAMpP,EAAGoP,GACb,MAAIA,EAAI2T,mBAAqB/iB,EAAG8a,QAAQ5J,QAAxC,CAGA,GAAI1P,IAAO,GAAIi/B,MAASzgC,EAAGsU,QAAQosB,SAC/Bx9B,EAAUsf,GAAiBxiB,EAAIoP,EAAI2T,mBACnC4d,IAEJvxB,GAAI/H,KAAKnE,EAAQX,KAAMmB,KAAKC,IAAIyL,EAAI+B,MAAQ/B,EAAI+D,KAAMnT,EAAG8a,QAAQ5J,OAAS,KAAM,SAAU3O,GACxF,GAAIW,EAAQX,MAAQvC,EAAG8a,QAAQ7J,SAAU,CAEvC,GAAI2vB,GAAYr+B,EAAK2f,OACjBO,EAAalgB,EAAKH,KAAK5E,OAASwC,EAAGsU,QAAQoO,mBAAqBvB,GAAU/R,EAAIvQ,KAAMqE,EAAQpC,OAAS,KACrG+/B,EAAcrf,GAAcxhB,EAAIuC,EAAMW,GAAS,EAC/Cuf,KACFvf,EAAQpC,MAAQ2hB,GAElBlgB,EAAK2f,OAAS2e,EAAY3e,MAC1B,IAAI4e,GAASv+B,EAAKugB,aACdie,EAASF,EAAY1e,OACrB4e,GACFx+B,EAAKugB,aAAeie,EACXD,IACTv+B,EAAKugB,aAAe,KAGtB,KAAK,GADDke,IAAYJ,GAAaA,EAAUpjC,QAAU+E,EAAK2f,OAAO1kB,QAAUsjC,GAAUC,KAAYD,IAAWC,GAAUD,EAAO1e,SAAW2e,EAAO3e,SAAW0e,EAAOze,WAAa0e,EAAO1e,WACxKplB,EAAI,GAAI+jC,GAAY/jC,EAAI2jC,EAAUpjC,SAAUP,EACnD+jC,EAAWJ,EAAU3jC,IAAMsF,EAAK2f,OAAOjlB,EAErC+jC,IACFL,EAAaj4B,KAAKxF,EAAQX,MAE5BA,EAAKqgB,WAAa1f,EAAQ2f,OAC1B3f,EAAQqE,eAEJhF,GAAKH,KAAK5E,QAAUwC,EAAGsU,QAAQoO,oBACjCY,GAAYtjB,EAAIuC,EAAKH,KAAMc,GAE7BX,EAAKqgB,WAAa1f,EAAQX,KAAO,GAAK,EAAIW,EAAQ2f,OAAS,KAC3D3f,EAAQqE,UAEV,KAAK,GAAIk5B,MAASj/B,EAEhB,MADAk6B,IAAY17B,EAAIA,EAAGsU,QAAQ2sB,YACpB,IAGX7xB,EAAI2T,kBAAoB7f,EAAQX,KAChC6M,EAAI4T,aAAetf,KAAKoC,IAAIsJ,EAAI4T,aAAc9f,EAAQX,MAClDo+B,EAAanjC,QACf6hC,GAAQr/B,EAAI,WACV,IAAK,GAAI/C,GAAI,EAAGA,EAAI0jC,EAAanjC,OAAQP,IACvC+iC,GAAchgC,EAAI2gC,EAAa1jC,GAAI,WAoC3C,QAASkhC,IAAoBn+B,GAC3B,GAAI8a,GAAU9a,EAAG8a,SACZA,EAAQ9I,mBAAqB8I,EAAQvK,SAAS8O,cACjDvE,EAAQjJ,eAAiBiJ,EAAQvK,SAAS8O,YAAcvE,EAAQvK,SAAS8c,YACzEvS,EAAQ3K,aAAa9F,MAAMsJ,OAASsa,GAAUjuB,GAAM,KACpD8a,EAAQ7K,MAAM5F,MAAM62B,cAAgBpmB,EAAQjJ,eAAiB,KAC7DiJ,EAAQ7K,MAAM5F,MAAM82B,iBAAmBlT,GAAUjuB,GAAM,KACvD8a,EAAQ9I,mBAAoB,GAIhC,QAASovB,IAAkBphC,GACzB,GAAIA,EAAG8+B,WACL,MAAO,KAET,IAAIuC,GAASr2B,GACb,KAAKq2B,IAAW12B,EAAS3K,EAAG8a,QAAQrL,QAAS4xB,GAC3C,MAAO,KAET,IAAI1e,IAAW3X,UAAWq2B,EAC1B,IAAI1T,OAAO2T,aAAc,CACvB,GAAI3+B,GAAMgrB,OAAO2T,cACb3+B,GAAI4+B,YAAc5+B,EAAI6+B,QAAU72B,EAAS3K,EAAG8a,QAAQrL,QAAS9M,EAAI4+B,cACnE5e,EAAO4e,WAAa5+B,EAAI4+B,WACxB5e,EAAO8e,aAAe9+B,EAAI8+B,aAC1B9e,EAAO+e,UAAY/+B,EAAI++B,UACvB/e,EAAOgf,YAAch/B,EAAIg/B,aAG7B,MAAOhf,GAGT,QAASif,IAAiBC,GACxB,GAAKA,GAAaA,EAAS72B,WAAa62B,EAAS72B,WAAaA,MAG9D62B,EAAS72B,UAAU8sB,QACf+J,EAASN,YAAc52B,EAASpM,SAAS2M,KAAM22B,EAASN,aAAe52B,EAASpM,SAAS2M,KAAM22B,EAASH,YAAY,CACtH,GAAI/+B,GAAMgrB,OAAO2T,eACb1L,EAAWr3B,SAASujC,aACxBlM,GAASmM,OAAOF,EAASN,WAAYM,EAASJ,cAC9C7L,EAAS7F,UAAS,GAClBptB,EAAIq/B,kBACJr/B,EAAIs/B,SAASrM,GACbjzB,EAAI6+B,OAAOK,EAASH,UAAWG,EAASF,cAO5C,QAASpD,IAAsBv+B,EAAI28B,GACjC,GAAI7hB,GAAU9a,EAAG8a,QACb1L,EAAMpP,EAAGoP,GAEb,IAAIutB,EAAOuF,eAET,MADAxC,IAAU1/B,IACH,CAIT,KAAK28B,EAAOwF,OAASxF,EAAOyF,QAAQv8B,MAAQiV,EAAQ7J,UAAY0rB,EAAOyF,QAAQl+B,IAAM4W,EAAQ5J,SAAwC,MAA7B4J,EAAQlJ,mBAA6BkJ,EAAQlJ,mBAAqBkJ,EAAQ5J,SAAW4J,EAAQvJ,cAAgBuJ,EAAQxJ,MAA8B,GAAtB8uB,GAAepgC,GAClP,OAAO,CAGLk5B,IAA2Bl5B,KAC7B0/B,GAAU1/B,GACV28B,EAAOxS,KAAOiF,GAAcpvB,GAI9B,IAAIwB,GAAM4N,EAAI+B,MAAQ/B,EAAI+D,KACtBtN,EAAOnC,KAAKoC,IAAI62B,EAAOyF,QAAQv8B,KAAO7F,EAAGsU,QAAQ+tB,eAAgBjzB,EAAI+B,OACrEjN,EAAKR,KAAKC,IAAInC,EAAKm7B,EAAOyF,QAAQl+B,GAAKlE,EAAGsU,QAAQ+tB,eAClDvnB,GAAQ7J,SAAWpL,GAAQA,EAAOiV,EAAQ7J,SAAW,KACvDpL,EAAOnC,KAAKoC,IAAIsJ,EAAI+B,MAAO2J,EAAQ7J,WAEjC6J,EAAQ5J,OAAShN,GAAM4W,EAAQ5J,OAAShN,EAAK,KAC/CA,EAAKR,KAAKC,IAAInC,EAAKsZ,EAAQ5J,SAEzBuE,KACF5P,EAAOqU,GAAala,EAAGoP,IAAKvJ,GAC5B3B,EAAKmW,GAAgBra,EAAGoP,IAAKlL,GAG/B,IAAIo+B,GAAYz8B,GAAQiV,EAAQ7J,UAAY/M,GAAM4W,EAAQ5J,QAAU4J,EAAQpJ,gBAAkBirB,EAAO4F,eAAiBznB,EAAQnJ,eAAiBgrB,EAAO7P,YACtJqT,IAAWngC,EAAI6F,EAAM3B,GAErB4W,EAAQrJ,WAAagJ,GAActX,EAAQnD,EAAGoP,IAAK0L,EAAQ7J,WAE3DjR,EAAG8a,QAAQ9K,MAAM3F,MAAM4R,IAAMnB,EAAQrJ,WAAa,IAElD,IAAI+wB,GAAWpC,GAAepgC,EAC9B,KAAKsiC,GAAyB,GAAZE,IAAkB7F,EAAOwF,OAASrnB,EAAQvJ,cAAgBuJ,EAAQxJ,OAAsC,MAA7BwJ,EAAQlJ,mBAA6BkJ,EAAQlJ,mBAAqBkJ,EAAQ5J,QACrK,OAAO,CAKT,IAAIuxB,GAAcrB,GAAkBphC,EA2BpC,OA1BIwiC,GAAW,IACb1nB,EAAQrL,QAAQpF,MAAMyQ,QAAU,QAElC4nB,GAAa1iC,EAAI8a,EAAQlJ,kBAAmB+qB,EAAOxS,MAC/CqY,EAAW,IACb1nB,EAAQrL,QAAQpF,MAAMyQ,QAAU,IAElCA,EAAQvJ,aAAeuJ,EAAQxJ,KAG/BswB,GAAiBa,GAIjB74B,EAAekR,EAAQnL,WACvB/F,EAAekR,EAAQpL,cACvBoL,EAAQzK,QAAQhG,MAAMsJ,OAASmH,EAAQ7K,MAAM5F,MAAMs4B,UAAY,EAE3DL,IACFxnB,EAAQpJ,eAAiBirB,EAAO4F,cAChCznB,EAAQnJ,cAAgBgrB,EAAO7P,aAC/B4O,GAAY17B,EAAI,MAGlB8a,EAAQlJ,kBAAoB,MAErB,EAGT,QAASotB,IAAkBh/B,EAAI28B,GAG7B,IAAK,GAFDjE,GAAWiE,EAAOjE,SAEbvnB,GAAQ,GACVA,GAAUnR,EAAGsU,QAAQiI,cAAgBogB,EAAOiG,iBAAmB1U,GAAaluB,KAE3E04B,GAA4B,MAAhBA,EAASzc,MACvByc,GAAazc,IAAKvY,KAAKC,IAAI3D,EAAGoP,IAAIuE,OAAS8Z,GAAYztB,EAAG8a,SAAWqT,GAAcnuB,GAAK04B,EAASzc,OAInG0gB,EAAOyF,QAAU3J,GAAaz4B,EAAG8a,QAAS9a,EAAGoP,IAAKspB,KAC9CiE,EAAOyF,QAAQv8B,MAAQ7F,EAAG8a,QAAQ7J,UAAY0rB,EAAOyF,QAAQl+B,IAAMlE,EAAG8a,QAAQ5J,WAI/EqtB,GAAsBv+B,EAAI28B,GAbTxrB,GAAQ,EAAO,CAgBrCmnB,GAAwBt4B,EACxB,IAAIw+B,GAAaxC,GAAqBh8B,EACtCm1B,IAAgBn1B,GAChBs8B,GAAiBt8B,EAAIw+B,GACrBO,GAAkB/+B,EAAIw+B,GACtB7B,EAAOwF,OAAQ,EAGjBxF,EAAOrf,OAAOtd,EAAI,SAAUA,GACxBA,EAAG8a,QAAQ7J,UAAYjR,EAAG8a,QAAQ1J,kBAAoBpR,EAAG8a,QAAQ5J,QAAUlR,EAAG8a,QAAQzJ,iBACxFsrB,EAAOrf,OAAOtd,EAAI,iBAAkBA,EAAIA,EAAG8a,QAAQ7J,SAAUjR,EAAG8a,QAAQ5J,QACxElR,EAAG8a,QAAQ1J,iBAAmBpR,EAAG8a,QAAQ7J,SAASjR,EAAG8a,QAAQzJ,eAAiBrR,EAAG8a,QAAQ5J,QAI7F,QAASsqB,IAAoBx7B,EAAI04B,GAC/B,GAAIiE,GAAS,GAAI0B,IAAcr+B,EAAI04B,EACnC,IAAI6F,GAAsBv+B,EAAI28B,GAAS,CACrCrE,GAAwBt4B,GACxBg/B,GAAkBh/B,EAAI28B,EACtB,IAAI6B,GAAaxC,GAAqBh8B,EACtCm1B,IAAgBn1B,GAChBs8B,GAAiBt8B,EAAIw+B,GACrBO,GAAkB/+B,EAAIw+B,GACtB7B,EAAOyC,UAQX,QAASsD,IAAa1iC,EAAI6iC,EAAmB1Y,GAM3C,QAAS2Y,GAAGz3B,GACV,GAAIlH,GAAOkH,EAAK6gB,WAOhB,OALIrb,KAAUmO,IAAOhf,EAAG8a,QAAQioB,oBAAsB13B,EACpDA,EAAKhB,MAAMyQ,QAAU,OAErBzP,EAAKP,WAAWf,YAAYsB,GAEvBlH,EAOT,IAAK,GApBD2W,GAAU9a,EAAG8a,QACb4Q,EAAc1rB,EAAGsU,QAAQoX,YACzBsX,EAAYloB,EAAQrL,QACpBhK,EAAMu9B,EAAUh5B,WAahBsH,EAAOwJ,EAAQxJ,KACf6I,EAAQW,EAAQ7J,SAGXhU,EAAI,EAAGA,EAAIqU,EAAK9T,OAAQP,IAAK,CACpC,GAAI4oB,GAAWvU,EAAKrU,EACpB,IAAI4oB,EAASgD,YAAgB,IAAKhD,EAASxa,MAAQwa,EAASxa,KAAKP,YAAck4B,EAIxE,CAEL,KAAOv9B,GAAOogB,EAASxa,MACrB5F,EAAMq9B,EAAGr9B,EAEX,IAAIw9B,GAAevX,GAAoC,MAArBmX,GAA6BA,GAAqB1oB,GAAS0L,EAASgG,UAClGhG,GAASuE,UACPnoB,EAAQ4jB,EAASuE,QAAS,WAAa,IACzC6Y,GAAe,GAEjB/Y,GAAqBlqB,EAAI6lB,EAAU1L,EAAOgQ,IAExC8Y,IACFr5B,EAAeic,EAASgG,YACxBhG,EAASgG,WAAW1hB,YAAY5L,SAASiM,eAAe6J,EAAcrU,EAAGsU,QAAS6F,MAEpF1U,EAAMogB,EAASxa,KAAK6gB,gBApBoE,CAExF,GAAI7gB,GAAO+gB,GAAiBpsB,EAAI6lB,EAAU1L,EAAOgQ,EACjD6Y,GAAUlY,aAAazf,EAAM5F,GAmB/B0U,GAAS0L,EAAS1S,KAEpB,KAAO1N,GACLA,EAAMq9B,EAAGr9B,GAIb,QAAS2zB,IAAkBp5B,GACzB,GAAI6sB,GAAQ7sB,EAAG8a,QAAQzK,QAAQgP,WAC/Brf,GAAG8a,QAAQ7K,MAAM5F,MAAM6iB,WAAaL,EAAQ,KAG9C,QAASkS,IAAkB/+B,EAAI4P,GAC7B5P,EAAG8a,QAAQ7K,MAAM5F,MAAMs4B,UAAY/yB,EAAQysB,UAAY,KACvDr8B,EAAG8a,QAAQ3K,aAAa9F,MAAM4R,IAAMrM,EAAQysB,UAAY,KACxDr8B,EAAG8a,QAAQzK,QAAQhG,MAAMsJ,OAAS/D,EAAQysB,UAAYr8B,EAAG8a,QAAQhJ,UAAYmc,GAAUjuB,GAAM,KAK/F,QAASkjC,IAAcljC,GACrB,GAAIqQ,GAAUrQ,EAAG8a,QAAQzK,QACrB8yB,EAAQnjC,EAAGsU,QAAQjE,OACvBzG,GAAeyG,EAEf,KADA,GAAIpT,GAAI,EACDA,EAAIkmC,EAAM3lC,SAAUP,EAAG,CAC5B,GAAIouB,GAAc8X,EAAMlmC,GACpBmmC,EAAO/yB,EAAQlG,YAAY5G,EAAI,MAAO,KAAM,qBAAuB8nB,GACpD,2BAAfA,IACFrrB,EAAG8a,QAAQxK,WAAa8yB,EACxBA,EAAK/4B,MAAMwiB,OAAS7sB,EAAG8a,QAAQ7I,cAAgB,GAAK,MAGxD5B,EAAQhG,MAAMyQ,QAAU7d,EAAI,GAAK,OACjCm8B,GAAkBp5B,GAKpB,QAASqjC,IAAyB/uB,GAChC,GAAIzN,GAAQ5E,EAAQqS,EAAQjE,QAAS,2BACvB,GAAVxJ,GAAeyN,EAAQoX,YACzBpX,EAAQjE,QAAUiE,EAAQjE,QAAQ6F,QAAQ,2BACjCrP,GAAS,IAAMyN,EAAQoX,cAChCpX,EAAQjE,QAAUiE,EAAQjE,QAAQ3O,MAAM,GACxC4S,EAAQjE,QAAQ7C,OAAO3G,EAAO,IA+BlC,QAASy8B,IAAgB7mC,GACvB,GAAI8mC,GAAK9mC,EAAE+mC,YACPC,EAAKhnC,EAAEinC,WASX,OARU,OAANH,GAAc9mC,EAAEknC,QAAUlnC,EAAEygC,MAAQzgC,EAAEmnC,kBACxCL,EAAK9mC,EAAEknC,QAEC,MAANF,GAAchnC,EAAEknC,QAAUlnC,EAAEygC,MAAQzgC,EAAEonC,cACxCJ,EAAKhnC,EAAEknC,OACQ,MAANF,IACTA,EAAKhnC,EAAEqnC,aAEAjvB,EAAG0uB,EAAIlQ,EAAGoQ,GAErB,QAASM,IAAiBtnC,GACxB,GAAIunC,GAAQV,GAAgB7mC,EAG5B,OAFAunC,GAAMnvB,GAAKovB,GACXD,EAAM3Q,GAAK4Q,GACJD,EAGT,QAASE,IAAclkC,EAAIvD,GACzB,GAAIunC,GAAQV,GAAgB7mC,GACxB8mC,EAAKS,EAAMnvB,EACX4uB,EAAKO,EAAM3Q,EAEXvY,EAAU9a,EAAG8a,QACbqpB,EAASrpB,EAAQvK,SAEjB6zB,EAAaD,EAAOpI,YAAcoI,EAAO9W,YACzCgX,EAAaF,EAAOvI,aAAeuI,EAAO/V,YAC9C,IAAMmV,GAAMa,GAAcX,GAAMY,EAAhC,CAQA,GAAIZ,GAAMzkB,IAAOnO,GACfoD,EAAO,IAAK,GAAIxO,GAAMhJ,EAAEuP,OAAQsF,EAAOwJ,EAAQxJ,KAAM7L,GAAO0+B,EAAQ1+B,EAAMA,EAAIqF,WAC5E,IAAK,GAAI7N,GAAI,EAAGA,EAAIqU,EAAK9T,OAAQP,IAC/B,GAAIqU,EAAKrU,GAAGoO,MAAQ5F,EAAK,CACvBzF,EAAG8a,QAAQioB,mBAAqBt9B,CAChC,MAAMwO,GAYd,GAAIsvB,IAAOzyB,KAAUwzB,IAAgC,MAAtBL,GAa7B,MAZIR,IAAMY,GACRjK,GAAgBp6B,EAAI0D,KAAKoC,IAAI,EAAGq+B,EAAOnS,UAAYyR,EAAKQ,KAE1D5J,GAAcr6B,EAAI0D,KAAKoC,IAAI,EAAGq+B,EAAOvS,WAAa2R,EAAKU,OAKlDR,GAAMA,GAAMY,IACfhmB,GAAiB5hB,QAEnBqe,EAAQjI,YAAc,KAMxB,IAAI4wB,GAA4B,MAAtBQ,GAA4B,CACpC,GAAIM,GAASd,EAAKQ,GACdhoB,EAAMjc,EAAGoP,IAAI4iB,UACbtB,EAAMzU,EAAMnB,EAAQtK,QAAQ4d,YAC5BmW,GAAS,EACXtoB,EAAMvY,KAAKoC,IAAI,EAAGmW,EAAMsoB,EAAS,IAEjC7T,EAAMhtB,KAAKC,IAAI3D,EAAGoP,IAAIuE,OAAQ+c,EAAM6T,EAAS,IAE/C/I,GAAoBx7B,GAAMic,IAAKA,EAAK2S,OAAQ8B,IAG1C8T,GAAe,KACU,MAAvB1pB,EAAQjI,aACViI,EAAQjI,YAAcsxB,EAAOvS,WAAW9W,EAAQhI,YAAcqxB,EAAOnS,UACrElX,EAAQnI,QAAU4wB,EAAGzoB,EAAQlI,QAAU6wB,EACvC1Z,WAAW,WACT,GAA2B,MAAvBjP,EAAQjI,YAAZ,CAGA,GAAI4xB,GAASN,EAAOvS,WAAa9W,EAAQjI,YACrC6xB,EAASP,EAAOnS,UAAYlX,EAAQhI,YACpC6xB,EAASD,GAAU5pB,EAAQlI,SAAW8xB,EAAS5pB,EAAQlI,SAAW6xB,GAAU3pB,EAAQnI,SAAW8xB,EAAS3pB,EAAQnI,OACpHmI,GAAQjI,YAAciI,EAAQhI,YAAc,KACvC6xB,IAGLV,IAAsBA,GAAqBO,GAAeG,IAAWH,GAAe,KAClFA,MACD,OAEH1pB,EAAQnI,SAAW4wB,EAAGzoB,EAAQlI,SAAW6wB,KA2F/C,QAASmB,IAAmBzkC,EAAQw1B,GAClC,GAAIkP,GAAO1kC,EAAOw1B,EAClBx1B,GAAO2kC,KAAK,SAAU9nC,EAAGiK,GACvB,MAAOD,GAAIhK,EAAE6I,OAAQoB,EAAEpB,UAEzB8vB,EAAY1zB,EAAQ9B,EAAQ0kC,EAC5B,KAAK,GAAI5nC,GAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,GAAIwI,GAAMtF,EAAOlD,GACbgH,EAAO9D,EAAOlD,EAAI,EACtB,IAAI+J,EAAI/C,EAAKC,KAAMuB,EAAII,SAAW,EAAG,CACnC,GAAIA,GAAOkP,EAAO9Q,EAAK4B,OAAQJ,EAAII,QAC/B3B,EAAK4Q,EAAO7Q,EAAKC,KAAMuB,EAAIvB,MAC3B6gC,EAAM9gC,EAAK3D,QAAUmF,EAAII,QAAUJ,EAAIjF,KAAOyD,EAAK4B,QAAU5B,EAAKzD,IAClEvD,IAAK04B,KACLA,EAEJx1B,EAAOqN,SAASvQ,EAAG,EAAG,GAAI+nC,IAAMD,EAAM7gC,EAAK2B,EAAMk/B,EAAMl/B,EAAO3B,KAGlE,MAAO,IAAI+gC,IAAU9kC,EAAQw1B,GAG/B,QAASuP,IAAgBxiC,EAAQlC,GAC/B,MAAO,IAAIykC,KAAW,GAAID,IAAMtiC,EAAQlC,GAAQkC,IAAU,GAK5D,QAASyiC,IAAUruB,GACjB,MAAKA,GAAO1U,KAGLE,EAAIwU,EAAOjR,KAAKtD,KAAOuU,EAAO1U,KAAK5E,OAAS,EAAGyP,EAAI6J,EAAO1U,MAAM5E,QAAgC,GAAtBsZ,EAAO1U,KAAK5E,OAAcsZ,EAAOjR,KAAKpE,GAAK,IAFnHqV,EAAO5S,GAOlB,QAASkhC,IAAgB7kC,EAAKuW,GAC5B,GAAI9P,EAAIzG,EAAKuW,EAAOjR,MAAQ,EAC1B,MAAOtF,EAET,IAAIyG,EAAIzG,EAAKuW,EAAO5S,KAAO,EACzB,MAAOihC,IAAUruB,EAGnB,IAAIvU,GAAOhC,EAAIgC,KAAOuU,EAAO1U,KAAK5E,QAAUsZ,EAAO5S,GAAG3B,KAAOuU,EAAOjR,KAAKtD,MAAQ,EAC7Ed,EAAKlB,EAAIkB,EAIb,OAHIlB,GAAIgC,MAAQuU,EAAO5S,GAAG3B,OACxBd,GAAM0jC,GAAUruB,GAAQrV,GAAKqV,EAAO5S,GAAGzC,IAElCa,EAAIC,EAAMd,GAGnB,QAAS4jC,IAAsBj2B,EAAK0H,GAElC,IAAK,GADD3J,MACKlQ,EAAI,EAAGA,EAAImS,EAAIzM,IAAIxC,OAAO3C,OAAQP,IAAK,CAC9C,GAAI0I,GAAQyJ,EAAIzM,IAAIxC,OAAOlD,EAC3BkQ,GAAIzE,KAAK,GAAIs8B,IAAMI,GAAgBz/B,EAAMjD,OAAQoU,GAASsuB,GAAgBz/B,EAAMnF,KAAMsW,KAExF,MAAO8tB,IAAmBz3B,EAAKiC,EAAIzM,IAAIgzB,WAGzC,QAAS2P,IAAU/kC,EAAK+D,EAAKgS,GAC3B,MAAI/V,GAAIgC,MAAQ+B,EAAI/B,KACXD,EAAIgU,EAAG/T,KAAMhC,EAAIkB,GAAK6C,EAAI7C,GAAK6U,EAAG7U,IAElCa,EAAIgU,EAAG/T,MAAQhC,EAAIgC,KAAO+B,EAAI/B,MAAOhC,EAAIkB,IAMpD,QAAS8jC,IAAmBn2B,EAAKgb,EAASob,GAIxC,IAAK,GAHDr4B,MACAs4B,EAAUnjC,EAAI8M,EAAI+B,MAAO,GACzBu0B,EAAUD,EACLxoC,EAAI,EAAGA,EAAImtB,EAAQ5sB,OAAQP,IAAK,CACvC,GAAI6Z,GAASsT,EAAQntB,GACjB4I,EAAOy/B,GAAUxuB,EAAOjR,KAAM4/B,EAASC,GACvCxhC,EAAKohC,GAAUH,GAAUruB,GAAS2uB,EAASC,EAG/C,IAFAD,EAAU3uB,EAAO5S,GACjBwhC,EAAUxhC,EACE,UAARshC,EAAkB,CACpB,GAAI7/B,GAAQyJ,EAAIzM,IAAIxC,OAAOlD,GACvB8nC,EAAM/9B,EAAIrB,EAAMnF,KAAMmF,EAAMjD,QAAU,CAC1CyK,GAAIlQ,GAAK,GAAI+nC,IAAMD,EAAM7gC,EAAK2B,EAAMk/B,EAAMl/B,EAAO3B,OAEjDiJ,GAAIlQ,GAAK,GAAI+nC,IAAMn/B,EAAMA,GAG7B,MAAO,IAAIo/B,IAAU93B,EAAKiC,EAAIzM,IAAIgzB,WAKpC,QAASgQ,IAAS3lC,GAChBA,EAAGoP,IAAIvQ,KAAOgC,GAAQb,EAAGsU,QAAStU,EAAGoP,IAAIw2B,YACzCC,GAAe7lC,GAGjB,QAAS6lC,IAAe7lC,GACtBA,EAAGoP,IAAI/H,KAAK,SAAU9E,GAChBA,EAAKqgB,aACPrgB,EAAKqgB,WAAa,MAEhBrgB,EAAK2f,SACP3f,EAAK2f,OAAS,QAGlBliB,EAAGoP,IAAI4T,aAAehjB,EAAGoP,IAAI2T,kBAAoB/iB,EAAGoP,IAAI+B,MACxDuqB,GAAY17B,EAAI,KAChBA,EAAGc,MAAM6gB,UACL3hB,EAAGge,OACLwhB,GAAUx/B,GASd,QAAS8lC,IAAkB12B,EAAK0H,GAC9B,MAAyB,IAAlBA,EAAOjR,KAAKpE,IAA2B,GAAhBqV,EAAO5S,GAAGzC,IAA+B,IAApBwL,EAAI6J,EAAO1U,SAAiBgN,EAAIpP,IAAMoP,EAAIpP,GAAGsU,QAAQyxB,uBAI1G,QAASC,IAAU52B,EAAK0H,EAAQb,EAAagwB,GAC3C,QAASC,GAASvpC,GAChB,MAAOsZ,GAAcA,EAAYtZ,GAAK,KAExC,QAASggC,GAAOp6B,EAAMH,EAAMyT,GAC1BsP,GAAW5iB,EAAMH,EAAMyT,EAAOowB,GAC9Brc,GAAYrnB,EAAM,SAAUA,EAAMuU,GAEpC,QAASqvB,GAASnjC,EAAOxB,GAEvB,IAAK,GADDmhB,MACK1lB,EAAI+F,EAAO/F,EAAIuE,IAAOvE,EAC7B0lB,EAAOja,KAAK,GAAI09B,IAAKhkC,EAAKnF,GAAIipC,EAASjpC,GAAIgpC,GAE7C,OAAOtjB,GAGT,GAAI9c,GAAOiR,EAAOjR,KACd3B,EAAK4S,EAAO5S,GACZ9B,EAAO0U,EAAO1U,KACd+E,EAAYhE,EAAQiM,EAAKvJ,EAAKtD,MAC9BqB,EAAWT,EAAQiM,EAAKlL,EAAG3B,MAC3B8jC,EAAWp5B,EAAI7K,GACfkkC,EAAYJ,EAAS9jC,EAAK5E,OAAS,GACnC+oC,EAASriC,EAAG3B,KAAOsD,EAAKtD,IAG5B,IAAIuU,EAAOC,KACT3H,EAAIo3B,OAAO,EAAGL,EAAS,EAAG/jC,EAAK5E,SAC/B4R,EAAIq3B,OAAOrkC,EAAK5E,OAAQ4R,EAAI+D,KAAO/Q,EAAK5E,YACnC,IAAIsoC,GAAkB12B,EAAK0H,GAAS,CAGzC,GAAI4vB,GAAQP,EAAS,EAAG/jC,EAAK5E,OAAS,EACtCm/B,GAAO/4B,EAAUA,EAASxB,KAAMkkC,GAC5BC,GACFn3B,EAAIq3B,OAAO5gC,EAAKtD,KAAMgkC,GAEpBG,EAAMlpC,QACR4R,EAAIo3B,OAAO3gC,EAAKtD,KAAMmkC,OAEnB,IAAIv/B,GAAavD,EACtB,GAAmB,GAAfxB,EAAK5E,OACPm/B,EAAOx1B,EAAWA,EAAU/E,KAAKV,MAAM,EAAGmE,EAAKpE,IAAM4kC,EAAWl/B,EAAU/E,KAAKV,MAAMwC,EAAGzC,IAAK6kC,OACxF,CACL,GAAIK,GAAUR,EAAS,EAAG/jC,EAAK5E,OAAS,EACxCmpC,GAAQj+B,KAAK,GAAI09B,IAAKC,EAAWl/B,EAAU/E,KAAKV,MAAMwC,EAAGzC,IAAK6kC,EAAWL,IACzEtJ,EAAOx1B,EAAWA,EAAU/E,KAAKV,MAAM,EAAGmE,EAAKpE,IAAMW,EAAK,GAAI8jC,EAAS,IACvE92B,EAAIo3B,OAAO3gC,EAAKtD,KAAO,EAAGokC,OAEvB,IAAmB,GAAfvkC,EAAK5E,OACdm/B,EAAOx1B,EAAWA,EAAU/E,KAAKV,MAAM,EAAGmE,EAAKpE,IAAMW,EAAK,GAAKwB,EAASxB,KAAKV,MAAMwC,EAAGzC,IAAKykC,EAAS,IACpG92B,EAAIq3B,OAAO5gC,EAAKtD,KAAO,EAAGgkC,OACrB,CACL5J,EAAOx1B,EAAWA,EAAU/E,KAAKV,MAAM,EAAGmE,EAAKpE,IAAMW,EAAK,GAAI8jC,EAAS,IACvEvJ,EAAO/4B,EAAUyiC,EAAWziC,EAASxB,KAAKV,MAAMwC,EAAGzC,IAAK6kC,EACxD,IAAIM,GAAUT,EAAS,EAAG/jC,EAAK5E,OAAS,EACpC+oC,GAAS,GACXn3B,EAAIq3B,OAAO5gC,EAAKtD,KAAO,EAAGgkC,EAAS,GAErCn3B,EAAIo3B,OAAO3gC,EAAKtD,KAAO,EAAGqkC,GAG5Bhd,GAAYxa,EAAK,SAAUA,EAAK0H,GAIlC,QAAS+vB,IAAWz3B,EAAKlS,EAAG4pC,GAC1B,QAASC,GAAU33B,EAAK43B,EAAMC,GAC5B,GAAI73B,EAAI83B,OACN,IAAK,GAAIjqC,GAAI,EAAGA,EAAImS,EAAI83B,OAAO1pC,SAAUP,EAAG,CAC1C,GAAIkqC,GAAM/3B,EAAI83B,OAAOjqC,EACrB,IAAIkqC,EAAI/3B,KAAO43B,EAAf,CAGA,GAAII,GAASH,GAAcE,EAAIF,UAC3BH,KAAmBM,IAGvBlqC,EAAEiqC,EAAI/3B,IAAKg4B,GACXL,EAAUI,EAAI/3B,IAAKA,EAAKg4B,MAI9BL,EAAU33B,EAAK,MAAM,GAIvB,QAASi4B,IAAUrnC,EAAIoP,GACrB,GAAIA,EAAIpP,GACN,KAAM,IAAI7C,OAAM,mCAElB6C,GAAGoP,IAAMA,EACTA,EAAIpP,GAAKA,EACTy0B,GAAoBz0B,GACpB2lC,GAAS3lC,GACTsnC,GAAkBtnC,GACbA,EAAGsU,QAAQiI,cACd1B,GAAY7a,GAEdA,EAAGsU,QAAQzV,KAAOuQ,EAAIw2B,WACtBpG,GAAUx/B,GAGZ,QAASsnC,IAAkBtnC,IACJ,OAApBA,EAAGoP,IAAIkM,UAAqBlQ,EAAWitB,IAASr4B,EAAG8a,QAAQrL,QAAS,kBAGvE,QAAS83B,IAAiBvnC,GACxBq/B,GAAQr/B,EAAI,WACVsnC,GAAkBtnC,GAClBw/B,GAAUx/B,KAId,QAASwnC,IAAQC,GAIf5pC,KAAK6pC,QAAU7pC,KAAK8pC,UACpB9pC,KAAK+pC,UAAYvf,EAAAA,EAGjBxqB,KAAKgqC,YAAchqC,KAAKiqC,YAAc,EACtCjqC,KAAKkqC,OAASlqC,KAAKmqC,UAAY,KAC/BnqC,KAAKoqC,WAAapqC,KAAKqqC,cAAgB,KAEvCrqC,KAAKsqC,WAAatqC,KAAKuqC,cAAgBX,GAAY,EAKrD,QAASY,IAAwBj5B,EAAK0H,GACpC,GAAIwxB,IAAeziC,KAAM+O,EAAQkC,EAAOjR,MAAO3B,GAAIihC,GAAUruB,GAAS1U,KAAMoR,EAAWpE,EAAK0H,EAAOjR,KAAMiR,EAAO5S,IAKhH,OAJAqkC,IAAiBn5B,EAAKk5B,EAAYxxB,EAAOjR,KAAKtD,KAAMuU,EAAO5S,GAAG3B,KAAO,GACrEskC,GAAWz3B,EAAK,SAAUA,GACxB,MAAOm5B,IAAiBn5B,EAAKk5B,EAAYxxB,EAAOjR,KAAKtD,KAAMuU,EAAO5S,GAAG3B,KAAO,KAC3E,GACI+lC,EAKT,QAASE,IAAqB97B,GAC5B,KAAOA,EAAMlP,QAAQ,CAEnB,IADWyP,EAAIP,GACNvM,OAGP,KAFAuM,GAAM+7B,OASZ,QAASC,IAAgBC,EAAMxG,GAC7B,MAAIA,IACFqG,GAAqBG,EAAKjB,MACnBz6B,EAAI07B,EAAKjB,OACPiB,EAAKjB,KAAKlqC,SAAWyP,EAAI07B,EAAKjB,MAAMvnC,OACtC8M,EAAI07B,EAAKjB,MACPiB,EAAKjB,KAAKlqC,OAAS,IAAMmrC,EAAKjB,KAAKiB,EAAKjB,KAAKlqC,OAAS,GAAG2C,QAClEwoC,EAAKjB,KAAKe,MACHx7B,EAAI07B,EAAKjB,WAFX,GAST,QAASkB,IAAmBx5B,EAAK0H,EAAQ+xB,EAAUC,GACjD,GAAIH,GAAOv5B,EAAI25B,OACfJ,GAAKhB,OAAOnqC,OAAS,CACrB,IACIiI,GACAyP,EAFAorB,GAAQ,GAAIG,KAIhB,KAAKkI,EAAKZ,QAAUe,GAAQH,EAAKV,YAAcnxB,EAAOkyB,QAAUlyB,EAAOkyB,SAAsC,KAA3BlyB,EAAOkyB,OAAOhnC,OAAO,IAAaoN,EAAIpP,IAAM2oC,EAAKd,YAAcvH,EAAOlxB,EAAIpP,GAAGsU,QAAQ20B,mBAAgD,KAA3BnyB,EAAOkyB,OAAOhnC,OAAO,OAAgByD,EAAMijC,GAAgBC,EAAMA,EAAKZ,QAAUe,IAE1Q5zB,EAAOjI,EAAIxH,EAAI2kB,SACoB,GAA/BpjB,EAAI8P,EAAOjR,KAAMiR,EAAO5S,KAAyC,GAA7B8C,EAAI8P,EAAOjR,KAAMqP,EAAKhR,IAG5DgR,EAAKhR,GAAKihC,GAAUruB,GAGpBrR,EAAI2kB,QAAQ1hB,KAAK2/B,GAAwBj5B,EAAK0H,QAE3C,CAEL,GAAIgY,GAAS7hB,EAAI07B,EAAKjB,KAOtB,KANK5Y,GAAWA,EAAO3uB,QACrB+oC,GAAuB95B,EAAIzM,IAAKgmC,EAAKjB,MAEvCjiC,GAAQ2kB,SAAUie,GAAwBj5B,EAAK0H,IAC7CqxB,WAAYQ,EAAKR,YACnBQ,EAAKjB,KAAKh/B,KAAKjD,GACRkjC,EAAKjB,KAAKlqC,OAASmrC,EAAKf,WAC7Be,EAAKjB,KAAK30B,QACL41B,EAAKjB,KAAK,GAAGvnC,QAChBwoC,EAAKjB,KAAK30B,QAIhB41B,EAAKjB,KAAKh/B,KAAKmgC,GACfF,EAAKR,aAAeQ,EAAKP,cACzBO,EAAKd,YAAcc,EAAKb,YAAcxH,EACtCqI,EAAKZ,OAASY,EAAKX,UAAYc,EAC/BH,EAAKV,WAAaU,EAAKT,cAAgBpxB,EAAOkyB,OAEzC9zB,GACHoI,GAAOlO,EAAK,gBAIhB,QAAS+5B,IAA0B/5B,EAAK45B,EAAQ/kC,EAAMtB,GACpD,GAAIlB,GAAKunC,EAAOhnC,OAAO,EACvB,OAAa,KAANP,GAAmB,KAANA,GAAawC,EAAK9D,OAAO3C,QAAUmF,EAAIxC,OAAO3C,QAAUyG,EAAKuB,qBAAuB7C,EAAI6C,qBAAuB,GAAIi7B,MAASrxB,EAAI25B,QAAQjB,cAAgB14B,EAAIpP,GAAKoP,EAAIpP,GAAGsU,QAAQ20B,kBAAoB,KAO1N,QAASG,IAAsBh6B,EAAKzM,EAAKmmC,EAAMx0B,GAC7C,GAAIq0B,GAAOv5B,EAAI25B,QACXC,EAAS10B,GAAWA,EAAQ00B,MAM5BF,IAAQH,EAAKX,WAAagB,GAAUL,EAAKT,eAAiBc,IAAWL,EAAKd,aAAec,EAAKb,aAAea,EAAKV,YAAce,GAAUG,GAA0B/5B,EAAK45B,EAAQ/7B,EAAI07B,EAAKjB,MAAO/kC,IACnMgmC,EAAKjB,KAAKiB,EAAKjB,KAAKlqC,OAAS,GAAKmF,EAElCumC,GAAuBvmC,EAAKgmC,EAAKjB,MAGnCiB,EAAKb,aAAe,GAAIrH,MACxBkI,EAAKT,cAAgBc,EACrBL,EAAKX,UAAYc,EACbx0B,IAAiC,IAAtBA,EAAQ+0B,WACrBb,GAAqBG,EAAKhB,QAI9B,QAASuB,IAAuBvmC,EAAK2mC,GACnC,GAAIrtB,GAAMhP,EAAIq8B,EACRrtB,IAAOA,EAAI9b,QAAU8b,EAAIstB,OAAO5mC,IACpC2mC,EAAK5gC,KAAK/F,GAKd,QAAS4lC,IAAiBn5B,EAAK0H,EAAQjR,EAAM3B,GAC3C,GAAIslC,GAAW1yB,EAAO,SAAW1H,EAAIiK,IACjC1c,EAAI,CACRyS,GAAI/H,KAAK3D,KAAKoC,IAAIsJ,EAAI+B,MAAOtL,GAAOnC,KAAKC,IAAIyL,EAAI+B,MAAQ/B,EAAI+D,KAAMjP,GAAK,SAAU3B,GAC5EA,EAAK0T,eACNuzB,IAAaA,EAAW1yB,EAAO,SAAW1H,EAAIiK,SAAW1c,GAAK4F,EAAK0T,eAEpEtZ,IAMN,QAAS8sC,IAAmB5zB,GAC1B,IAAKA,EACH,MAAO,KAGT,KAAK,GADD1I,GACKlQ,EAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAC9B4Y,EAAM5Y,GAAG0Y,OAAO+zB,kBACbv8B,IACHA,EAAM0I,EAAMnU,MAAM,EAAGzE,IAEdkQ,GACTA,EAAIzE,KAAKmN,EAAM5Y,GAGnB,OAAQkQ,GAAcA,EAAI3P,OAAS2P,EAAM,KAA3B0I,EAIhB,QAAS8zB,IAAYv6B,EAAK0H,GACxB,GAAIjQ,GAAQiQ,EAAO,SAAW1H,EAAIiK,GAClC,KAAKxS,EACH,MAAO,KAGT,KAAK,GADDyP,MACKrZ,EAAI,EAAGA,EAAI6Z,EAAO1U,KAAK5E,SAAUP,EACxCqZ,EAAG5N,KAAK+gC,GAAmB5iC,EAAM5J,IAEnC,OAAOqZ,GAOT,QAASszB,IAAcx6B,EAAK0H,GAC1B,GAAIxS,GAAMqlC,GAAYv6B,EAAK0H,GACvB+yB,EAAYhzB,EAAuBzH,EAAK0H,EAC5C,KAAKxS,EACH,MAAOulC,EAET,KAAKA,EACH,MAAOvlC,EAGT,KAAK,GAAIrH,GAAI,EAAGA,EAAIqH,EAAI9G,SAAUP,EAAG,CACnC,GAAI6sC,GAASxlC,EAAIrH,GACb8sC,EAAaF,EAAU5sC,EAC3B,IAAI6sC,GAAUC,EACZl0B,EAAO,IAAK,GAAIwC,GAAI,EAAGA,EAAI0xB,EAAWvsC,SAAU6a,EAAG,CAEjD,IAAK,GADDvC,GAAOi0B,EAAW1xB,GACb0T,EAAI,EAAGA,EAAI+d,EAAOtsC,SAAUuuB,EACnC,GAAI+d,EAAO/d,GAAGpW,QAAUG,EAAKH,OAC3B,QAASE,EAGbi0B,GAAOphC,KAAKoN,OAELi0B,KACTzlC,EAAIrH,GAAK8sC,GAGb,MAAOzlC,GAKT,QAAS0lC,IAAiBC,EAAQC,EAAUC,GAE1C,IAAK,GADDC,MACKntC,EAAI,EAAGA,EAAIgtC,EAAOzsC,SAAUP,EAAG,CACtC,GAAIotC,GAAQJ,EAAOhtC,EACnB,IAAIotC,EAAMlqC,OACRiqC,EAAK1hC,KAAKyhC,EAAiBlF,GAAU5oC,UAAUiuC,SAAS/sC,KAAK8sC,GAASA,OADxE,CAIA,GAAIjgB,GAAUigB,EAAMjgB,QAChBmgB,IACJH,GAAK1hC,MAAO0hB,QAASmgB,GACrB,KAAK,GAAIlyB,GAAI,EAAGA,EAAI+R,EAAQ5sB,SAAU6a,EAAG,CACvC,GAAIvB,GAASsT,EAAQ/R,GACjBF,MAAI,EAER,IADAoyB,EAAW7hC,MAAO7C,KAAMiR,EAAOjR,KAAM3B,GAAI4S,EAAO5S,GAAI9B,KAAM0U,EAAO1U,OAC7D8nC,EACF,IAAK,GAAIh+B,KAAQ4K,IACXqB,EAAIjM,EAAKnG,MAAM,mBACb9D,EAAQioC,EAAUM,OAAOryB,EAAE,MAAQ,IACrClL,EAAIs9B,GAAYr+B,GAAQ4K,EAAO5K,SACxB4K,GAAO5K,MAO1B,MAAOk+B,GAWT,QAASK,IAAY9kC,EAAOnF,EAAMgG,EAAOg7B,GACvC,GAAIA,EAAQ,CACV,GAAI9+B,GAASiD,EAAMjD,MACnB,IAAI8D,EAAO,CACT,GAAIkkC,GAAY1jC,EAAIxG,EAAMkC,GAAU,CAChCgoC,IAAa1jC,EAAIR,EAAO9D,GAAU,GACpCA,EAASlC,EACTA,EAAOgG,GACEkkC,GAAa1jC,EAAIxG,EAAMgG,GAAS,IACzChG,EAAOgG,GAGX,MAAO,IAAIw+B,IAAMtiC,EAAQlC,GAEzB,MAAO,IAAIwkC,IAAMx+B,GAAShG,EAAMA,GAKpC,QAASsG,IAAgBsI,EAAK5O,EAAMgG,EAAO8N,EAASktB,GACpC,MAAVA,IACFA,EAASpyB,EAAIpP,KAAOoP,EAAIpP,GAAG8a,QAAQ/H,OAAS3D,EAAIoyB,SAElDmJ,GAAav7B,EAAK,GAAI61B,KAAWwF,GAAYr7B,EAAIzM,IAAI2yB,UAAW90B,EAAMgG,EAAOg7B,IAAU,GAAIltB,GAK7F,QAASs2B,IAAiBx7B,EAAKy7B,EAAOv2B,GAGpC,IAAK,GAFDnH,MACAq0B,EAASpyB,EAAIpP,KAAOoP,EAAIpP,GAAG8a,QAAQ/H,OAAS3D,EAAIoyB,QAC3CvkC,EAAI,EAAGA,EAAImS,EAAIzM,IAAIxC,OAAO3C,OAAQP,IACzCkQ,EAAIlQ,GAAKwtC,GAAYr7B,EAAIzM,IAAIxC,OAAOlD,GAAI4tC,EAAM5tC,GAAI,KAAMukC,EAG1DmJ,IAAav7B,EADAw1B,GAAmBz3B,EAAKiC,EAAIzM,IAAIgzB,WACnBrhB,GAI5B,QAASw2B,IAAoB17B,EAAKnS,EAAG0I,EAAO2O,GAC1C,GAAInU,GAASiP,EAAIzM,IAAIxC,OAAOuB,MAAM,EAClCvB,GAAOlD,GAAK0I,EACZglC,GAAav7B,EAAKw1B,GAAmBzkC,EAAQiP,EAAIzM,IAAIgzB,WAAYrhB,GAInE,QAASy2B,IAAmB37B,EAAK1M,EAAQlC,EAAM8T,GAC7Cq2B,GAAav7B,EAAK81B,GAAgBxiC,EAAQlC,GAAO8T,GAKnD,QAAS02B,IAAsB57B,EAAKzM,EAAK2R,GACvC,GAAInY,IACFgE,OAAQwC,EAAIxC,OACZw8B,OAAQ,SAAgBx8B,GACtB,GAAI8qC,GAASptC,IAEbA,MAAKsC,SACL,KAAK,GAAIlD,GAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IACjCguC,EAAO9qC,OAAOlD,GAAK,GAAI+nC,IAAM/vB,EAAS7F,EAAKjP,EAAOlD,GAAGyF,QAASuS,EAAS7F,EAAKjP,EAAOlD,GAAGuD,QAG1FwoC,OAAQ10B,GAAWA,EAAQ00B,OAM7B,OAJA1rB,IAAOlO,EAAK,wBAAyBA,EAAKjT,GACtCiT,EAAIpP,IACNsd,GAAOlO,EAAIpP,GAAI,wBAAyBoP,EAAIpP,GAAI7D,GAE9CA,EAAIgE,QAAUwC,EAAIxC,OACbykC,GAAmBzoC,EAAIgE,OAAQhE,EAAIgE,OAAO3C,OAAS,GAEnDmF,EAIX,QAASuoC,IAA2B97B,EAAKzM,EAAK2R,GAC5C,GAAIozB,GAAOt4B,EAAI25B,QAAQrB,KACnBxyB,EAAOjI,EAAIy6B,EACXxyB,IAAQA,EAAK/U,QACfunC,EAAKA,EAAKlqC,OAAS,GAAKmF,EACxBwoC,GAAmB/7B,EAAKzM,EAAK2R,IAE7Bq2B,GAAav7B,EAAKzM,EAAK2R,GAK3B,QAASq2B,IAAav7B,EAAKzM,EAAK2R,GAC9B62B,GAAmB/7B,EAAKzM,EAAK2R,GAC7B80B,GAAsBh6B,EAAKA,EAAIzM,IAAKyM,EAAIpP,GAAKoP,EAAIpP,GAAGge,MAAM3E,GAAK+xB,IAAK92B,GAGtE,QAAS62B,IAAmB/7B,EAAKzM,EAAK2R,IAChC4J,GAAW9O,EAAK,0BAA4BA,EAAIpP,IAAMke,GAAW9O,EAAIpP,GAAI,4BAC3E2C,EAAMqoC,GAAsB57B,EAAKzM,EAAK2R,IAIxC+2B,GAAkBj8B,EAAKk8B,GAAsBl8B,EAAKzM,EADvC2R,GAAWA,EAAQ2a,OAASjoB,EAAIrE,EAAI2yB,UAAU90B,KAAM4O,EAAIzM,IAAI2yB,UAAU90B,MAAQ,GAAK,EAAI,IACrC,IAEvD8T,IAA8B,IAAnBA,EAAQ6vB,SAAqB/0B,EAAIpP,IAChDi7B,GAAoB7rB,EAAIpP,IAI5B,QAASqrC,IAAkBj8B,EAAKzM,GAC1BA,EAAI4mC,OAAOn6B,EAAIzM,OAInByM,EAAIzM,IAAMA,EAENyM,EAAIpP,KACNoP,EAAIpP,GAAGge,MAAMqf,YAAcjuB,EAAIpP,GAAGge,MAAMwf,kBAAmB,EAC3D3f,GAAqBzO,EAAIpP,KAE3B4pB,GAAYxa,EAAK,iBAAkBA,IAKrC,QAASm8B,IAAiBn8B,GACxBi8B,GAAkBj8B,EAAKk8B,GAAsBl8B,EAAKA,EAAIzM,IAAK,MAAM,IAKnE,QAAS2oC,IAAsBl8B,EAAKzM,EAAKssB,EAAMuc,GAE7C,IAAK,GADDr+B,GACKlQ,EAAI,EAAGA,EAAI0F,EAAIxC,OAAO3C,OAAQP,IAAK,CAC1C,GAAI0I,GAAQhD,EAAIxC,OAAOlD,GACnBqH,EAAM3B,EAAIxC,OAAO3C,QAAU4R,EAAIzM,IAAIxC,OAAO3C,QAAU4R,EAAIzM,IAAIxC,OAAOlD,GACnEwuC,EAAYC,GAAWt8B,EAAKzJ,EAAMjD,OAAQ4B,GAAOA,EAAI5B,OAAQusB,EAAMuc,GACnEG,EAAUD,GAAWt8B,EAAKzJ,EAAMnF,KAAM8D,GAAOA,EAAI9D,KAAMyuB,EAAMuc,IAC7Dr+B,GAAOs+B,GAAa9lC,EAAMjD,QAAUipC,GAAWhmC,EAAMnF,QAClD2M,IACHA,EAAMxK,EAAIxC,OAAOuB,MAAM,EAAGzE,IAE5BkQ,EAAIlQ,GAAK,GAAI+nC,IAAMyG,EAAWE,IAGlC,MAAOx+B,GAAMy3B,GAAmBz3B,EAAKxK,EAAIgzB,WAAahzB,EAGxD,QAASipC,IAAgBx8B,EAAK7O,EAAKsrC,EAAQj9B,EAAK48B,GAC9C,GAAIjpC,GAAOY,EAAQiM,EAAK7O,EAAIgC,KAC5B,IAAIA,EAAK0T,YACP,IAAK,GAAIhZ,GAAI,EAAGA,EAAIsF,EAAK0T,YAAYzY,SAAUP,EAAG,CAChD,GAAIuc,GAAKjX,EAAK0T,YAAYhZ,GACtBkb,EAAIqB,EAAG7D,MACX,KAAgB,MAAX6D,EAAG3T,OAAiBsS,EAAE3B,cAAgBgD,EAAG3T,MAAQtF,EAAIkB,GAAK+X,EAAG3T,KAAOtF,EAAIkB,OAAkB,MAAT+X,EAAGtV,KAAeiU,EAAExB,eAAiB6C,EAAGtV,IAAM3D,EAAIkB,GAAK+X,EAAGtV,GAAK3D,EAAIkB,KAAM,CAC7J,GAAI+pC,IACFluB,GAAOnF,EAAG,qBACNA,EAAEuxB,mBAAmB,CACvB,GAAKnnC,EAAK0T,YAEH,GACHhZ,CAAE,UAFJ,MAMN,IAAKkb,EAAE2zB,OACL,QAGF,IAAID,EAAQ,CACV,GAAIE,GAAO5zB,EAAEC,KAAKxJ,EAAM,EAAI,GAAK,GAC7BgF,MAAO,EAIX,KAHIhF,EAAM,EAAIuJ,EAAExB,eAAiBwB,EAAE3B,iBACjCu1B,EAAOC,GAAQ58B,EAAK28B,GAAOn9B,EAAKm9B,GAAQA,EAAKxpC,MAAQhC,EAAIgC,KAAOA,EAAO,OAErEwpC,GAAQA,EAAKxpC,MAAQhC,EAAIgC,OAASqR,EAAO5M,EAAI+kC,EAAMF,MAAaj9B,EAAM,EAAIgF,EAAO,EAAIA,EAAO,GAC9F,MAAOg4B,IAAgBx8B,EAAK28B,EAAMxrC,EAAKqO,EAAK48B,GAIhD,GAAIS,GAAM9zB,EAAEC,KAAKxJ,EAAM,GAAK,EAAI,EAIhC,QAHIA,EAAM,EAAIuJ,EAAE3B,cAAgB2B,EAAExB,kBAChCs1B,EAAMD,GAAQ58B,EAAK68B,EAAKr9B,EAAKq9B,EAAI1pC,MAAQhC,EAAIgC,KAAOA,EAAO,OAEtD0pC,EAAML,GAAgBx8B,EAAK68B,EAAK1rC,EAAKqO,EAAK48B,GAAY,MAInE,MAAOjrC,GAIT,QAASmrC,IAAWt8B,EAAK7O,EAAKsrC,EAAQ5c,EAAMuc,GAC1C,GAAI58B,GAAMqgB,GAAQ,EACdpoB,EAAQ+kC,GAAgBx8B,EAAK7O,EAAKsrC,EAAQj9B,EAAK48B,KAAcA,GAAYI,GAAgBx8B,EAAK7O,EAAKsrC,EAAQj9B,GAAK,IAASg9B,GAAgBx8B,EAAK7O,EAAKsrC,GAASj9B,EAAK48B,KAAcA,GAAYI,GAAgBx8B,EAAK7O,EAAKsrC,GAASj9B,GAAK,EACvO,OAAK/H,KACHuI,EAAI88B,UAAW,EACR5pC,EAAI8M,EAAI+B,MAAO,IAK1B,QAAS66B,IAAQ58B,EAAK7O,EAAKqO,EAAKrM,GAC9B,MAAIqM,GAAM,GAAe,GAAVrO,EAAIkB,GACblB,EAAIgC,KAAO6M,EAAI+B,MACV8D,EAAS7F,EAAK9M,EAAI/B,EAAIgC,KAAO,IAE7B,KAEAqM,EAAM,GAAKrO,EAAIkB,KAAOc,GAAQY,EAAQiM,EAAK7O,EAAIgC,OAAOH,KAAK5E,OAChE+C,EAAIgC,KAAO6M,EAAI+B,MAAQ/B,EAAI+D,KAAO,EAC7B7Q,EAAI/B,EAAIgC,KAAO,EAAG,GAElB,KAGF,GAAID,GAAI/B,EAAIgC,KAAMhC,EAAIkB,GAAKmN,GAItC,QAASu9B,IAAUnsC,GACjBA,EAAG2qC,aAAaroC,EAAItC,EAAGmH,YAAa,GAAI7E,EAAItC,EAAG4D,YAAawoC,IAM9D,QAASC,IAAaj9B,EAAK0H,EAAQ6lB,GACjC,GAAIxgC,IACFmwC,UAAU,EACVzmC,KAAMiR,EAAOjR,KACb3B,GAAI4S,EAAO5S,GACX9B,KAAM0U,EAAO1U,KACb4mC,OAAQlyB,EAAOkyB,OACfuD,OAAQ,WACN,MAAOpwC,GAAImwC,UAAW,GAwB1B,OArBI3P,KACFxgC,EAAIwgC,OAAS,SAAU92B,EAAM3B,EAAI9B,EAAM4mC,GACjCnjC,IACF1J,EAAI0J,KAAOoP,EAAS7F,EAAKvJ,IAEvB3B,IACF/H,EAAI+H,GAAK+Q,EAAS7F,EAAKlL,IAErB9B,IACFjG,EAAIiG,KAAOA,OAEE7F,KAAXysC,IACF7sC,EAAI6sC,OAASA,KAInB1rB,GAAOlO,EAAK,eAAgBA,EAAKjT,GAC7BiT,EAAIpP,IACNsd,GAAOlO,EAAIpP,GAAI,eAAgBoP,EAAIpP,GAAI7D,GAGrCA,EAAImwC,SACC,MAEAzmC,KAAM1J,EAAI0J,KAAM3B,GAAI/H,EAAI+H,GAAI9B,KAAMjG,EAAIiG,KAAM4mC,OAAQ7sC,EAAI6sC,QAKnE,QAASwD,IAAWp9B,EAAK0H,EAAQ21B,GAC/B,GAAIr9B,EAAIpP,GAAI,CACV,IAAKoP,EAAIpP,GAAGge,MACV,MAAOzY,IAAU6J,EAAIpP,GAAIwsC,IAAYp9B,EAAK0H,EAAQ21B,EAEpD,IAAIr9B,EAAIpP,GAAGc,MAAM4rC,cACf,OAIJ,KAAIxuB,GAAW9O,EAAK,iBAAmBA,EAAIpP,IAAMke,GAAW9O,EAAIpP,GAAI,mBAClE8W,EAASu1B,GAAaj9B,EAAK0H,GAAQ,IADrC,CASA,GAAIrL,GAAQ8J,KAAqBk3B,GAAkB50B,GAAqBzI,EAAK0H,EAAOjR,KAAMiR,EAAO5S,GACjG,IAAIuH,EACF,IAAK,GAAIxO,GAAIwO,EAAMjO,OAAS,EAAGP,GAAK,IAAKA,EACvC0vC,GAAgBv9B,GAAOvJ,KAAM4F,EAAMxO,GAAG4I,KAAM3B,GAAIuH,EAAMxO,GAAGiH,GAAI9B,KAAMnF,GAAK,IAAM6Z,EAAO1U,KAAM4mC,OAAQlyB,EAAOkyB,aAG5G2D,IAAgBv9B,EAAK0H,IAIzB,QAAS61B,IAAgBv9B,EAAK0H,GAC5B,GAA0B,GAAtBA,EAAO1U,KAAK5E,QAAiC,IAAlBsZ,EAAO1U,KAAK,IAA2C,GAA/B4E,EAAI8P,EAAOjR,KAAMiR,EAAO5S,IAA/E,CAGA,GAAI2kC,GAAWxD,GAAsBj2B,EAAK0H,EAC1C8xB,IAAmBx5B,EAAK0H,EAAQ+xB,EAAUz5B,EAAIpP,GAAKoP,EAAIpP,GAAGge,MAAM3E,GAAK+xB,KAErEwB,GAAoBx9B,EAAK0H,EAAQ+xB,EAAUhyB,EAAuBzH,EAAK0H,GACvE,IAAI+1B,KAEJhG,IAAWz3B,EAAK,SAAUA,EAAK63B,GACxBA,IAAgD,GAAlChlC,EAAQ4qC,EAASz9B,EAAI25B,WACtC+D,GAAW19B,EAAI25B,QAASjyB,GACxB+1B,EAAQnkC,KAAK0G,EAAI25B,UAEnB6D,GAAoBx9B,EAAK0H,EAAQ,KAAMD,EAAuBzH,EAAK0H,OAKvE,QAASi2B,IAAsB39B,EAAKvN,EAAMmrC,GACxC,IAAI59B,EAAIpP,KAAMoP,EAAIpP,GAAGc,MAAM4rC,eAAkBM,EAA7C,CAaA,IATA,GACI3C,GADA1B,EAAOv5B,EAAI25B,QAEXF,EAAWz5B,EAAIzM,IACf0L,EAAiB,QAARxM,EAAiB8mC,EAAKjB,KAAOiB,EAAKhB,OAC3C2B,EAAe,QAARznC,EAAiB8mC,EAAKhB,OAASgB,EAAKjB,KAI3CzqC,EAAI,EACDA,EAAIoR,EAAO7Q,SAChB6sC,EAAQh8B,EAAOpR,GACX+vC,GAAqB3C,EAAMlqC,QAAWkqC,EAAMd,OAAOn6B,EAAIzM,KAAQ0nC,EAAMlqC,QAFjDlD,KAM1B,GAAIA,GAAKoR,EAAO7Q,OAAhB,CAKA,IAFAmrC,EAAKV,WAAaU,EAAKT,cAAgB,KAGrCmC,EAAQh8B,EAAOo6B,MACX4B,EAAMlqC,QAFH,CAIL,GADA+oC,GAAuBmB,EAAOf,GAC1B0D,IAAuB3C,EAAMd,OAAOn6B,EAAIzM,KAE1C,WADAgoC,IAAav7B,EAAKi7B,GAAShB,WAAW,GAGxCR,GAAWwB,EAQf,GAAI4C,KACJ/D,IAAuBL,EAAUS,GACjCA,EAAK5gC,MAAO0hB,QAAS6iB,EAAa9E,WAAYQ,EAAKR,aACnDQ,EAAKR,WAAakC,EAAMlC,cAAgBQ,EAAKP,aA+B7C,KAAK,GA7BD8E,GAAShvB,GAAW9O,EAAK,iBAAmBA,EAAIpP,IAAMke,GAAW9O,EAAIpP,GAAI,gBA6BpEkU,EAAMm2B,EAAMjgB,QAAQ5sB,OAAS,EAAG0W,GAAO,IAAKA,EAAK,CACxD,GAAIi5B,GA5BK,SAAclwC,GACvB,GAAI6Z,GAASuzB,EAAMjgB,QAAQntB,EAE3B,IADA6Z,EAAOkyB,OAASnnC,EACZqrC,IAAWb,GAAaj9B,EAAK0H,GAAQ,GAEvC,MADAzI,GAAO7Q,OAAS,IAIlByvC,GAAYvkC,KAAK2/B,GAAwBj5B,EAAK0H,GAE9C,IAAIgO,GAAQ7nB,EAAIooC,GAAsBj2B,EAAK0H,GAAU7J,EAAIoB,EACzDu+B,IAAoBx9B,EAAK0H,EAAQgO,EAAO8kB,GAAcx6B,EAAK0H,KACtD7Z,GAAKmS,EAAIpP,IACZoP,EAAIpP,GAAG05B,gBAAiB7zB,KAAMiR,EAAOjR,KAAM3B,GAAIihC,GAAUruB,IAE3D,IAAI+1B,KAGJhG,IAAWz3B,EAAK,SAAUA,EAAK63B,GACxBA,IAAgD,GAAlChlC,EAAQ4qC,EAASz9B,EAAI25B,WACtC+D,GAAW19B,EAAI25B,QAASjyB,GACxB+1B,EAAQnkC,KAAK0G,EAAI25B,UAEnB6D,GAAoBx9B,EAAK0H,EAAQ,KAAM8yB,GAAcx6B,EAAK0H,OAKxC5C,EAEpB,IAAIi5B,EAAU,MAAOA,GAASC,KAMlC,QAASC,IAASj+B,EAAKk+B,GACrB,GAAgB,GAAZA,IAGJl+B,EAAI+B,OAASm8B,EACbl+B,EAAIzM,IAAM,GAAIsiC,IAAUxgC,EAAI2K,EAAIzM,IAAIxC,OAAQ,SAAUwF,GACpD,MAAO,IAAIq/B,IAAM1iC,EAAIqD,EAAMjD,OAAOH,KAAO+qC,EAAU3nC,EAAMjD,OAAOjB,IAAKa,EAAIqD,EAAMnF,KAAK+B,KAAO+qC,EAAU3nC,EAAMnF,KAAKiB,OAC9G2N,EAAIzM,IAAIgzB,WACRvmB,EAAIpP,IAAI,CACVw/B,GAAUpwB,EAAIpP,GAAIoP,EAAI+B,MAAO/B,EAAI+B,MAAQm8B,EAAUA,EACnD,KAAK,GAAIh+B,GAAIF,EAAIpP,GAAG8a,QAASzd,EAAIiS,EAAE2B,SAAU5T,EAAIiS,EAAE4B,OAAQ7T,IACzD2iC,GAAc5wB,EAAIpP,GAAI3C,EAAG,WAO/B,QAASuvC,IAAoBx9B,EAAK0H,EAAQ+xB,EAAUhzB,GAClD,GAAIzG,EAAIpP,KAAOoP,EAAIpP,GAAGge,MACpB,MAAOzY,IAAU6J,EAAIpP,GAAI4sC,IAAqBx9B,EAAK0H,EAAQ+xB,EAAUhzB,EAGvE,IAAIiB,EAAO5S,GAAG3B,KAAO6M,EAAI+B,MAEvB,WADAk8B,IAASj+B,EAAK0H,EAAO1U,KAAK5E,OAAS,GAAKsZ,EAAO5S,GAAG3B,KAAOuU,EAAOjR,KAAKtD,MAGvE,MAAIuU,EAAOjR,KAAKtD,KAAO6M,EAAIxL,YAA3B,CAKA,GAAIkT,EAAOjR,KAAKtD,KAAO6M,EAAI+B,MAAO,CAChC,GAAI4B,GAAQ+D,EAAO1U,KAAK5E,OAAS,GAAK4R,EAAI+B,MAAQ2F,EAAOjR,KAAKtD,KAC9D8qC,IAASj+B,EAAK2D,GACd+D,GAAWjR,KAAMvD,EAAI8M,EAAI+B,MAAO,GAAIjN,GAAI5B,EAAIwU,EAAO5S,GAAG3B,KAAOwQ,EAAO+D,EAAO5S,GAAGzC,IAC5EW,MAAO6K,EAAI6J,EAAO1U,OAAQ4mC,OAAQlyB,EAAOkyB,QAE7C,GAAI9zB,GAAO9F,EAAIxL,UACXkT,GAAO5S,GAAG3B,KAAO2S,IACnB4B,GAAWjR,KAAMiR,EAAOjR,KAAM3B,GAAI5B,EAAI4S,EAAM/R,EAAQiM,EAAK8F,GAAM9S,KAAK5E,QAClE4E,MAAO0U,EAAO1U,KAAK,IAAK4mC,OAAQlyB,EAAOkyB,SAG3ClyB,EAAOy2B,QAAU/5B,EAAWpE,EAAK0H,EAAOjR,KAAMiR,EAAO5S,IAEhD2kC,IACHA,EAAWxD,GAAsBj2B,EAAK0H,IAEpC1H,EAAIpP,GACNwtC,GAA4Bp+B,EAAIpP,GAAI8W,EAAQjB,GAE5CmwB,GAAU52B,EAAK0H,EAAQjB,GAEzBs1B,GAAmB/7B,EAAKy5B,EAAUuD,KAKpC,QAASoB,IAA4BxtC,EAAI8W,EAAQjB,GAC/C,GAAIzG,GAAMpP,EAAGoP,IACT0L,EAAU9a,EAAG8a,QACbjV,EAAOiR,EAAOjR,KACd3B,EAAK4S,EAAO5S,GAEZupC,GAAqB,EACrBC,EAAkB7nC,EAAKtD,IACtBvC,GAAGsU,QAAQiI,eACdmxB,EAAkB75B,EAAOiG,GAAW3W,EAAQiM,EAAKvJ,EAAKtD,QACtD6M,EAAI/H,KAAKqmC,EAAiBxpC,EAAG3B,KAAO,EAAG,SAAUA,GAC/C,GAAIA,GAAQuY,EAAQtI,QAElB,MADAi7B,IAAqB,GACd,KAKTr+B,EAAIzM,IAAIgI,SAASmM,EAAOjR,KAAMiR,EAAO5S,KAAO,GAC9C2Z,GAAqB7d,GAGvBgmC,GAAU52B,EAAK0H,EAAQjB,EAAOuP,GAAeplB,IAExCA,EAAGsU,QAAQiI,eACdnN,EAAI/H,KAAKqmC,EAAiB7nC,EAAKtD,KAAOuU,EAAO1U,KAAK5E,OAAQ,SAAU+E,GAClE,GAAIqY,GAAMD,GAAWpY,EACjBqY,GAAME,EAAQrI,gBAChBqI,EAAQtI,QAAUjQ,EAClBuY,EAAQrI,cAAgBmI,EACxBE,EAAQpI,gBAAiB,EACzB+6B,GAAqB,KAGrBA,IACFztC,EAAGge,MAAMyf,eAAgB,IAI7BvY,GAAgB9V,EAAKvJ,EAAKtD,MAC1Bm5B,GAAY17B,EAAI,IAEhB,IAAIy/B,GAAU3oB,EAAO1U,KAAK5E,QAAU0G,EAAG3B,KAAOsD,EAAKtD,MAAQ,CAEvDuU,GAAOC,KACTyoB,GAAUx/B,GACD6F,EAAKtD,MAAQ2B,EAAG3B,MAA8B,GAAtBuU,EAAO1U,KAAK5E,QAAgBsoC,GAAkB9lC,EAAGoP,IAAK0H,GAGvF0oB,GAAUx/B,EAAI6F,EAAKtD,KAAM2B,EAAG3B,KAAO,EAAGk9B,GAFtCO,GAAchgC,EAAI6F,EAAKtD,KAAM,OAK/B,IAAIorC,GAAiBzvB,GAAWle,EAAI,WAChC4tC,EAAgB1vB,GAAWle,EAAI,SACnC,IAAI4tC,GAAiBD,EAAgB,CACnC,GAAIxxC,IACF0J,KAAMA,EAAM3B,GAAIA,EAChB9B,KAAM0U,EAAO1U,KACbmrC,QAASz2B,EAAOy2B,QAChBvE,OAAQlyB,EAAOkyB,OAEb4E,IACFhkB,GAAY5pB,EAAI,SAAUA,EAAI7D,GAE5BwxC,IACD3tC,EAAGge,MAAMuf,aAAev9B,EAAGge,MAAMuf,gBAAkB70B,KAAKvM,GAG7D6D,EAAG8a,QAAQ9H,kBAAoB,KAGjC,QAAS66B,IAAcz+B,EAAKhS,EAAMyI,EAAM3B,EAAI8kC,GAI1C,GAHK9kC,IACHA,EAAK2B,GAEHmB,EAAI9C,EAAI2B,GAAQ,EAAG,CACrB,GAAI+wB,GAAM1yB,CAAGA,GAAK2B,EAAKA,EAAO+wB,EAEb,gBAARx5B,KACTA,EAAOgS,EAAI0+B,WAAW1wC,IAExBovC,GAAWp9B,GAAOvJ,KAAMA,EAAM3B,GAAIA,EAAI9B,KAAMhF,EAAM4rC,OAAQA,IAK5D,QAAS+E,IAAoBxtC,EAAKsF,EAAM3B,EAAI0P,GACtC1P,EAAK3D,EAAIgC,KACXhC,EAAIgC,MAAQqR,EACH/N,EAAOtF,EAAIgC,OACpBhC,EAAIgC,KAAOsD,EACXtF,EAAIkB,GAAK,GAWb,QAASusC,IAAgBthC,EAAO7G,EAAM3B,EAAI0P,GACxC,IAAK,GAAI3W,GAAI,EAAGA,EAAIyP,EAAMlP,SAAUP,EAAG,CACrC,GAAIgxC,GAAMvhC,EAAMzP,GACZixC,GAAK,CACT,IAAID,EAAI9tC,OAAR,CACO8tC,EAAIE,SACPF,EAAMvhC,EAAMzP,GAAKgxC,EAAI3D,WAAW2D,EAAIE,QAAS,EAE/C,KAAK,GAAI91B,GAAI,EAAGA,EAAI41B,EAAI9tC,OAAO3C,OAAQ6a,IACrC01B,GAAoBE,EAAI9tC,OAAOkY,GAAG3V,OAAQmD,EAAM3B,EAAI0P,GACpDm6B,GAAoBE,EAAI9tC,OAAOkY,GAAG7X,KAAMqF,EAAM3B,EAAI0P,OANtD,CAUA,IAAK,GAAI4U,GAAM,EAAGA,EAAMylB,EAAI7jB,QAAQ5sB,SAAUgrB,EAAK,CACjD,GAAI/iB,GAAMwoC,EAAI7jB,QAAQ5B,EACtB,IAAItkB,EAAKuB,EAAII,KAAKtD,KAChBkD,EAAII,KAAOvD,EAAImD,EAAII,KAAKtD,KAAOqR,EAAMnO,EAAII,KAAKpE,IAC9CgE,EAAIvB,GAAK5B,EAAImD,EAAIvB,GAAG3B,KAAOqR,EAAMnO,EAAIvB,GAAGzC,QACnC,IAAIoE,GAAQJ,EAAIvB,GAAG3B,KAAM,CAC9B2rC,GAAK,CACL,QAGCA,IACHxhC,EAAMc,OAAO,EAAGvQ,EAAI,GACpBA,EAAI,KAKV,QAAS6vC,IAAWnE,EAAM7xB,GACxB,GAAIjR,GAAOiR,EAAOjR,KAAKtD,KACnB2B,EAAK4S,EAAO5S,GAAG3B,KACfqR,EAAOkD,EAAO1U,KAAK5E,QAAU0G,EAAK2B,GAAQ,CAC9CmoC,IAAgBrF,EAAKjB,KAAM7hC,EAAM3B,EAAI0P,GACrCo6B,GAAgBrF,EAAKhB,OAAQ9hC,EAAM3B,EAAI0P,GAMzC,QAASw6B,IAAWh/B,EAAKi/B,EAAQC,EAAYrlB,GAC3C,GAAInV,GAAKu6B,EACL9rC,EAAO8rC,CAMX,OALqB,gBAAVA,GACT9rC,EAAOY,EAAQiM,EAAK4F,EAAS5F,EAAKi/B,IAElCv6B,EAAKD,EAAOw6B,GAEJ,MAANv6B,EACK,MAELmV,EAAG1mB,EAAMuR,IAAO1E,EAAIpP,IACtBggC,GAAc5wB,EAAIpP,GAAI8T,EAAIw6B,GAErB/rC,GAgBT,QAASgsC,IAAUx+B,GACjB,GAAIk7B,GAASptC,IAEbA,MAAKkS,MAAQA,EACblS,KAAKqM,OAAS,IAEd,KAAK,GADDyJ,GAAS,EACJ1W,EAAI,EAAGA,EAAI8S,EAAMvS,SAAUP,EAClC8S,EAAM9S,GAAGiN,OAAS+gC,EAClBt3B,GAAU5D,EAAM9S,GAAG0W,MAErB9V,MAAK8V,OAASA,EAkDhB,QAAS66B,IAAYn7B,GACnB,GAAI43B,GAASptC,IAEbA,MAAKwV,SAAWA,CAGhB,KAAK,GAFDF,GAAO,EACPQ,EAAS,EACJ1W,EAAI,EAAGA,EAAIoW,EAAS7V,SAAUP,EAAG,CACxC,GAAIwE,GAAK4R,EAASpW,EAClBkW,IAAQ1R,EAAG8R,YAAYI,GAAUlS,EAAGkS,OACpClS,EAAGyI,OAAS+gC,EAEdptC,KAAKsV,KAAOA,EACZtV,KAAK8V,OAASA,EACd9V,KAAKqM,OAAS,KAiMhB,QAASukC,IAA6BzuC,EAAIuC,EAAMqR,GAC1C6G,GAAclY,IAASvC,EAAGge,OAAShe,EAAGge,MAAMgU,WAAahyB,EAAGoP,IAAI4iB,YAClE+I,GAAe/6B,EAAI4T,GAIvB,QAAS86B,IAAct/B,EAAKi/B,EAAQhjC,EAAMiJ,GACxC,GAAIuT,GAAS,GAAI8mB,IAAWv/B,EAAK/D,EAAMiJ,GACnCtU,EAAKoP,EAAIpP,EAuBb,OAtBIA,IAAM6nB,EAAO+E,YACf5sB,EAAG8a,QAAQ1I,cAAe,GAE5Bg8B,GAAWh/B,EAAKi/B,EAAQ,SAAU,SAAU9rC,GAC1C,GAAIgqB,GAAUhqB,EAAKgqB,UAAYhqB,EAAKgqB,WAOpC,IANuB,MAAnB1E,EAAO+mB,SACTriB,EAAQ7jB,KAAKmf,GAEb0E,EAAQ/e,OAAO9J,KAAKC,IAAI4oB,EAAQ/uB,OAAS,EAAGkG,KAAKoC,IAAI,EAAG+hB,EAAO+mB,WAAY,EAAG/mB,GAEhFA,EAAOtlB,KAAOA,EACVvC,IAAOsa,GAAalL,EAAK7M,GAAO,CAClC,GAAIssC,GAAep0B,GAAclY,GAAQ6M,EAAI4iB,SAC7Cte,GAAiBnR,EAAMA,EAAKoR,OAASwZ,GAAatF,IAC9CgnB,GACF9T,GAAe/6B,EAAI6nB,EAAOlU,QAE5B3T,EAAGge,MAAMqR,aAAc,EAEzB,OAAO,IAETzF,GAAY5pB,EAAI,kBAAmBA,EAAI6nB,EAAyB,gBAAVwmB,GAAqBA,EAASx6B,EAAOw6B,IACpFxmB,EAqLT,QAASinB,IAAU1/B,EAAKvJ,EAAM3B,EAAIoQ,EAASzS,GAIzC,GAAIyS,GAAWA,EAAQ8yB,OACrB,MAAO2H,IAAe3/B,EAAKvJ,EAAM3B,EAAIoQ,EAASzS,EAGhD,IAAIuN,EAAIpP,KAAOoP,EAAIpP,GAAGge,MACpB,MAAOzY,IAAU6J,EAAIpP,GAAI8uC,IAAW1/B,EAAKvJ,EAAM3B,EAAIoQ,EAASzS,EAG9D,IAAI8T,GAAS,GAAIq5B,IAAW5/B,EAAKvN,GAC7B+R,EAAO5M,EAAInB,EAAM3B,EAKrB,IAJIoQ,GACFvI,EAAQuI,EAASqB,GAAQ,GAGvB/B,EAAO,GAAa,GAARA,IAAuC,IAA1B+B,EAAOiC,eAClC,MAAOjC,EAaT,IAXIA,EAAOs5B,eAETt5B,EAAO8D,WAAY,EACnB9D,EAAO4E,WAAa9P,EAAK,QAASkL,EAAOs5B,cAAe,qBACnD36B,EAAQmY,mBACX9W,EAAO4E,WAAW7P,aAAa,mBAAoB,QAEjD4J,EAAQmC,aACVd,EAAO4E,WAAW9D,YAAa,IAG/Bd,EAAO8D,UAAW,CACpB,GAAIG,GAA0BxK,EAAKvJ,EAAKtD,KAAMsD,EAAM3B,EAAIyR,IAAW9P,EAAKtD,MAAQ2B,EAAG3B,MAAQqX,GAA0BxK,EAAKlL,EAAG3B,KAAMsD,EAAM3B,EAAIyR,GAC3I,KAAM,IAAIxY,OAAM,mEAElBqY,KAGEG,EAAOu5B,cACTtG,GAAmBx5B,GAAOvJ,KAAMA,EAAM3B,GAAIA,EAAI8kC,OAAQ,YAAc55B,EAAIzM,IAAKyoC,IAG/E,IAEI3N,GAFA0R,EAAUtpC,EAAKtD,KACfvC,EAAKoP,EAAIpP,EAqCb,IAnCAoP,EAAI/H,KAAK8nC,EAASjrC,EAAG3B,KAAO,EAAG,SAAUA,GACnCvC,GAAM2V,EAAO8D,YAAczZ,EAAGsU,QAAQiI,cAAgBzC,GAAWvX,IAASvC,EAAG8a,QAAQtI,UACvFirB,GAAgB,GAEd9nB,EAAO8D,WAAa01B,GAAWtpC,EAAKtD,MACtCmR,EAAiBnR,EAAM,GAEzByT,EAAczT,EAAM,GAAImT,GAAWC,EAAQw5B,GAAWtpC,EAAKtD,KAAOsD,EAAKpE,GAAK,KAAM0tC,GAAWjrC,EAAG3B,KAAO2B,EAAGzC,GAAK,SAC7G0tC,IAGAx5B,EAAO8D,WACTrK,EAAI/H,KAAKxB,EAAKtD,KAAM2B,EAAG3B,KAAO,EAAG,SAAUA,GACrC+X,GAAalL,EAAK7M,IACpBmR,EAAiBnR,EAAM,KAKzBoT,EAAOy5B,cACTzoC,GAAGgP,EAAQ,oBAAqB,WAC9B,MAAOA,GAAOzQ,UAIdyQ,EAAOqC,WACT1C,KACIlG,EAAI25B,QAAQrB,KAAKlqC,QAAU4R,EAAI25B,QAAQpB,OAAOnqC,SAChD4R,EAAIigC,gBAGJ15B,EAAO8D,YACT9D,EAAO0D,KAAOi2B,GACd35B,EAAOm2B,QAAS,GAEd9rC,EAAI,CAKN,GAHIy9B,IACFz9B,EAAGge,MAAMyf,eAAgB,GAEvB9nB,EAAO8D,UACT+lB,GAAUx/B,EAAI6F,EAAKtD,KAAM2B,EAAG3B,KAAO,OAC9B,IAAIoT,EAAOpP,WAAaoP,EAAOgR,OAAShR,EAAOkR,YAAclR,EAAOmR,UAAYnR,EAAOoR,IAC5F,IAAK,GAAI9pB,GAAI4I,EAAKtD,KAAMtF,GAAKiH,EAAG3B,KAAMtF,IACpC+iC,GAAchgC,EAAI/C,EAAG,OAGrB0Y,GAAOm2B,QACTP,GAAiBvrC,EAAGoP,KAEtBwa,GAAY5pB,EAAI,cAAeA,EAAI2V,GAErC,MAAOA,GAoCT,QAASo5B,IAAe3/B,EAAKvJ,EAAM3B,EAAIoQ,EAASzS,GAC9CyS,EAAUvI,EAAQuI,GAClBA,EAAQ8yB,QAAS,CACjB,IAAItvB,IAAWg3B,GAAU1/B,EAAKvJ,EAAM3B,EAAIoQ,EAASzS,IAC7CyzB,EAAUxd,EAAQ,GAClB+P,EAASvT,EAAQiG,UAarB,OAZAssB,IAAWz3B,EAAK,SAAUA,GACpByY,IACFvT,EAAQiG,WAAasN,EAAO0nB,WAAU,IAExCz3B,EAAQpP,KAAKomC,GAAU1/B,EAAK6F,EAAS7F,EAAKvJ,GAAOoP,EAAS7F,EAAKlL,GAAKoQ,EAASzS,GAC7E,KAAK,GAAI5E,GAAI,EAAGA,EAAImS,EAAI83B,OAAO1pC,SAAUP,EACvC,GAAImS,EAAI83B,OAAOjqC,GAAGuyC,SAChB,MAGJla,GAAUroB,EAAI6K,KAET,GAAI23B,IAAiB33B,EAASwd,GAGvC,QAASoa,IAAkBtgC,GACzB,MAAOA,GAAIugC,UAAUrtC,EAAI8M,EAAI+B,MAAO,GAAI/B,EAAIwgC,QAAQttC,EAAI8M,EAAIxL,aAAc,SAAUuU,GAClF,MAAOA,GAAEjO,SAIb,QAAS2lC,IAAkBzgC,EAAK0I,GAC9B,IAAK,GAAI7a,GAAI,EAAGA,EAAI6a,EAAQta,OAAQP,IAAK,CACvC,GAAI0Y,GAASmC,EAAQ7a,GACjBsD,EAAMoV,EAAOyC,OACb03B,EAAQ1gC,EAAIwgC,QAAQrvC,EAAIsF,MACxBkqC,EAAM3gC,EAAIwgC,QAAQrvC,EAAI2D,GAC1B,IAAI8C,EAAI8oC,EAAOC,GAAM,CACnB,GAAIC,GAAUlB,GAAU1/B,EAAK0gC,EAAOC,EAAKp6B,EAAO2f,QAAS3f,EAAO2f,QAAQzzB,KACxE8T,GAAOmC,QAAQpP,KAAKsnC,GACpBA,EAAQ9lC,OAASyL,IAKvB,QAASs6B,IAAoBn4B,GAgB3B,IAAK,GAAI7a,GAAI,EAAGA,EAAI6a,EAAQta,OAAQP,KAfzB,SAAcA,GACvB,GAAI0Y,GAASmC,EAAQ7a,GACjBiqC,GAAUvxB,EAAO2f,QAAQlmB,IAC7By3B,IAAWlxB,EAAO2f,QAAQlmB,IAAK,SAAUE,GACvC,MAAO43B,GAAOx+B,KAAK4G,IAErB,KAAK,GAAI+I,GAAI,EAAGA,EAAI1C,EAAOmC,QAAQta,OAAQ6a,IAAK,CAC9C,GAAI63B,GAAYv6B,EAAOmC,QAAQO,IACQ,GAAnCpW,EAAQilC,EAAQgJ,EAAU9gC,OAC5B8gC,EAAUhmC,OAAS,KACnByL,EAAOmC,QAAQtK,OAAO6K,IAAK,MAM1Bpb,GAykBT,QAASkzC,IAAO1zC,GACd,GAAIuD,GAAKnC,IAET,IADAuyC,GAAgBpwC,IACZwd,GAAexd,EAAIvD,KAAM6wB,GAActtB,EAAG8a,QAASre,GAAvD,CAGA4hB,GAAiB5hB,GACbgU,KACF4/B,IAAY,GAAI5P,MAElB,IAAIlgC,GAAMo0B,GAAa30B,EAAIvD,GAAG,GAC1B6zC,EAAQ7zC,EAAE8zC,aAAaD,KAC3B,IAAK/vC,IAAOP,EAAGwwC,aAKf,GAAIF,GAASA,EAAM9yC,QAAUmwB,OAAO8iB,YAAc9iB,OAAO+iB,KA2BvD,IAAK,GA1BD/zC,GAAI2zC,EAAM9yC,OACV4E,EAAOwJ,MAAMjP,GACbg0C,EAAO,EAwBF1zC,EAAI,EAAGA,EAAIN,IAAKM,GAvBV,SAAkB2zC,EAAM3zC,GACrC,IAAI+C,EAAGsU,QAAQu8B,qBAA4E,GAAtD5uC,EAAQjC,EAAGsU,QAAQu8B,mBAAoBD,EAAK/uC,MAAjF,CAIA,GAAIivC,GAAS,GAAIL,WACjBK,GAAOC,OAASxrC,GAAUvF,EAAI,WAC5B,GAAIoK,GAAU0mC,EAAOnuB,MAKrB,IAJI,0BAA0B7gB,KAAKsI,KACjCA,EAAU,IAEZhI,EAAKnF,GAAKmN,IACJumC,GAAQh0C,EAAG,CACf4D,EAAM0U,EAASjV,EAAGoP,IAAK7O,EACvB,IAAIuW,IAAWjR,KAAMtF,EAAK2D,GAAI3D,EAC5B6B,KAAMpC,EAAGoP,IAAI0+B,WAAW1rC,EAAK4uC,KAAKhxC,EAAGoP,IAAI6hC,kBACzCjI,OAAQ,QACVwD,IAAWxsC,EAAGoP,IAAK0H,GACnBo0B,GAA2BlrC,EAAGoP,IAAK81B,GAAgB3kC,EAAK4kC,GAAUruB,QAGtEg6B,EAAOI,WAAWN,KAGTN,EAAMrzC,GAAIA,OAEhB,CAGL,GAAI+C,EAAGc,MAAMqwC,cAAgBnxC,EAAGoP,IAAIzM,IAAIgI,SAASpK,IAAQ,EAMvD,MALAP,GAAGc,MAAMqwC,aAAa10C,OAEtBstB,YAAW,WACT,MAAO/pB,GAAG8a,QAAQzL,MAAMyoB,SACvB,GAGL,KACE,GAAIsZ,GAAS30C,EAAE8zC,aAAac,QAAQ,OACpC,IAAID,EAAQ,CACV,GAAIE,EAKJ,IAJItxC,EAAGc,MAAMqwC,eAAiBnxC,EAAGc,MAAMqwC,aAAa/G,OAClDkH,EAAWtxC,EAAGI,kBAEhB+qC,GAAmBnrC,EAAGoP,IAAK81B,GAAgB3kC,EAAKA,IAC5C+wC,EACF,IAAK,GAAIp9B,GAAM,EAAGA,EAAMo9B,EAAS9zC,SAAU0W,EACzC25B,GAAc7tC,EAAGoP,IAAK,GAAIkiC,EAASp9B,GAAKxR,OAAQ4uC,EAASp9B,GAAK1T,KAAM,OAGxER,GAAGuxC,iBAAiBH,EAAQ,SAAU,SACtCpxC,EAAG8a,QAAQzL,MAAMyoB,SAEnB,MAAOr7B,OAIb,QAAS+0C,IAAYxxC,EAAIvD,GACvB,GAAIgU,MAAQzQ,EAAGc,MAAMqwC,eAAiB,GAAI1Q,MAAS4P,GAAW,KAClD,WAAV3xB,IAAOjiB,EAET,KAAI+gB,GAAexd,EAAIvD,KAAM6wB,GAActtB,EAAG8a,QAASre,KAIvDA,EAAE8zC,aAAakB,QAAQ,OAAQzxC,EAAGshC,gBAClC7kC,EAAE8zC,aAAamB,cAAgB,WAI3Bj1C,EAAE8zC,aAAaoB,eAAiBC,IAAQ,CAC1C,GAAIC,GAAMtuC,EAAI,MAAO,KAAM,KAAM,oCACjCsuC,GAAIC,IAAM,6EACNxN,KACFuN,EAAIhlB,MAAQglB,EAAIl+B,OAAS,EACzB3T,EAAG8a,QAAQtK,QAAQrG,YAAY0nC,GAE/BA,EAAIE,KAAOF,EAAIrkB,WAEjB/wB,EAAE8zC,aAAaoB,aAAaE,EAAK,EAAG,GAChCvN,IACFuN,EAAI/mC,WAAWf,YAAY8nC,IAKjC,QAASG,IAAWhyC,EAAIvD,GACtB,GAAI8D,GAAMo0B,GAAa30B,EAAIvD,EAC3B,IAAK8D,EAAL,CAGA,GAAI0xC,GAAO1zC,SAAS6oB,wBACpB0O,IAAoB91B,EAAIO,EAAK0xC,GACxBjyC,EAAG8a,QAAQo3B,aACdlyC,EAAG8a,QAAQo3B,WAAa3uC,EAAI,MAAO,KAAM,6CACzCvD,EAAG8a,QAAQhL,UAAUgb,aAAa9qB,EAAG8a,QAAQo3B,WAAYlyC,EAAG8a,QAAQnL,YAEtE1F,EAAqBjK,EAAG8a,QAAQo3B,WAAYD,IAG9C,QAAS7B,IAAgBpwC,GACnBA,EAAG8a,QAAQo3B,aACblyC,EAAG8a,QAAQhL,UAAU/F,YAAY/J,EAAG8a,QAAQo3B,YAC5ClyC,EAAG8a,QAAQo3B,WAAa,MAQ5B,QAASC,IAAkBj1C,GACzB,GAAKqB,SAAS6zC,uBAId,IAAK,GADDC,GAAU9zC,SAAS6zC,uBAAuB,cACrCn1C,EAAI,EAAGA,EAAIo1C,EAAQ70C,OAAQP,IAAK,CACvC,GAAI+C,GAAKqyC,EAAQp1C,GAAGoB,UAChB2B,IACF9C,EAAE8C,IAMR,QAASsyC,MACHC,KAGJC,KACAD,IAAoB,GAEtB,QAASC,MAEP,GAAIC,EACJ9rC,IAAGgnB,OAAQ,SAAU,WACA,MAAf8kB,IACFA,EAAc1oB,WAAW,WACvB0oB,EAAc,KACdN,GAAkBO,KACjB,QAIP/rC,GAAGgnB,OAAQ,OAAQ,WACjB,MAAOwkB,IAAkBja,MAI7B,QAASwa,IAAS1yC,GAChB,GAAIsP,GAAItP,EAAG8a,OACPxL,GAAEoC,gBAAkBpC,EAAEkB,QAAQ4d,cAAgB9e,EAAEqC,eAAiBrC,EAAEkB,QAAQ6c,cAI/E/d,EAAE+C,gBAAkB/C,EAAEgD,iBAAmBhD,EAAEiD,eAAiB,KAC5DjD,EAAE0C,mBAAoB,EACtBhS,EAAG2yC,WAwEL,QAASC,IAAiB7xC,GACxB,GAAIkX,GAAQlX,EAAK0K,MAAM,SACvB1K,GAAOkX,EAAMA,EAAMza,OAAS,EAE5B,KAAK,GADDq1C,GAAKC,EAAM//B,EAAOggC,EACb91C,EAAI,EAAGA,EAAIgb,EAAMza,OAAS,EAAGP,IAAK,CACzC,GAAI4C,GAAMoY,EAAMhb,EAChB,IAAI,kBAAkB6E,KAAKjC,GACzBkzC,GAAM,MACD,IAAI,YAAYjxC,KAAKjC,GAC1BgzC,GAAM,MACD,IAAI,sBAAsB/wC,KAAKjC,GACpCizC,GAAO,MACF,CAAA,IAAI,cAAchxC,KAAKjC,GAG5B,KAAM,IAAI1C,OAAM,+BAAiC0C,EAFjDkT,IAAQ,GAiBZ,MAZI8/B,KACF9xC,EAAO,OAASA,GAEd+xC,IACF/xC,EAAO,QAAUA,GAEfgyC,IACFhyC,EAAO,OAASA,GAEdgS,IACFhS,EAAO,SAAWA,GAEbA,EAQT,QAASiyC,IAAgBC,GACvB,GAAI7I,KACJ,KAAK,GAAI8I,KAAWD,GAClB,GAAIA,EAAO9mC,eAAe+mC,GAAU,CAClC,GAAI7lC,GAAQ4lC,EAAOC,EACnB,IAAI,mCAAmCpxC,KAAKoxC,GAC1C,QAEF,IAAa,OAAT7lC,EAAgB,OACX4lC,GAAOC,EAAS,UAIzB,IAAK,GADDC,GAAO1uC,EAAIyuC,EAAQznC,MAAM,KAAMmnC,IAC1B31C,EAAI,EAAGA,EAAIk2C,EAAK31C,OAAQP,IAAK,CACpC,GAAIoH,OAAM,GACNtD,MAAO,EACP9D,IAAKk2C,EAAK31C,OAAS,GACrBuD,EAAOoyC,EAAKnC,KAAK,KACjB3sC,EAAMgJ,IAENtM,EAAOoyC,EAAKzxC,MAAM,EAAGzE,EAAI,GAAG+zC,KAAK,KACjC3sC,EAAM,MAER,IAAIJ,GAAOmmC,EAAKrpC,EAChB,IAAKkD,GAEE,GAAIA,GAAQI,EACjB,KAAM,IAAIlH,OAAM,6BAA+B4D,OAF/CqpC,GAAKrpC,GAAQsD,QAKV4uC,GAAOC,GAGlB,IAAK,GAAIhnC,KAAQk+B,GACf6I,EAAO/mC,GAAQk+B,EAAKl+B,EAEtB,OAAO+mC,GAGT,QAASG,IAAU3jB,EAAKpS,EAAQgxB,EAAQnrC,GACtCma,EAASg2B,GAAUh2B,EACnB,IAAIxW,GAAQwW,EAAO9f,KAAO8f,EAAO9f,KAAKkyB,EAAKvsB,GAAWma,EAAOoS,EAC7D,KAAc,IAAV5oB,EACF,MAAO,SAET,IAAc,QAAVA,EACF,MAAO,OAET,IAAa,MAATA,GAAiBwnC,EAAOxnC,GAC1B,MAAO,SAGT,IAAIwW,EAAOi2B,YAAa,CACtB,GAA0D,kBAAtDxlC,OAAOzR,UAAUuqB,SAASrpB,KAAK8f,EAAOi2B,aACxC,MAAOF,IAAU3jB,EAAKpS,EAAOi2B,YAAajF,EAAQnrC,EAEpD,KAAK,GAAIjG,GAAI,EAAGA,EAAIogB,EAAOi2B,YAAY91C,OAAQP,IAAK,CAClD,GAAI0lB,GAASywB,GAAU3jB,EAAKpS,EAAOi2B,YAAYr2C,GAAIoxC,EAAQnrC,EAC3D,IAAIyf,EACF,MAAOA,KAQf,QAAS4wB,IAAclmC,GACrB,GAAItM,GAAuB,gBAATsM,GAAoBA,EAAQmmC,GAASnmC,EAAMomC,QAC7D,OAAe,QAAR1yC,GAA0B,OAARA,GAAyB,SAARA,GAA2B,OAARA,EAG/D,QAAS2yC,IAAiB3yC,EAAMspC,EAAOsJ,GACrC,GAAIhmC,GAAO5M,CAaX,OAZIspC,GAAMuJ,QAAkB,OAARjmC,IAClB5M,EAAO,OAASA,IAEb8yC,GAAcxJ,EAAMyJ,QAAUzJ,EAAMprB,UAAoB,QAARtR,IACnD5M,EAAO,QAAUA,IAEd8yC,GAAcxJ,EAAMprB,QAAUorB,EAAMyJ,UAAoB,OAARnmC,IACnD5M,EAAO,OAASA,IAEb4yC,GAAWtJ,EAAM0J,UAAoB,SAARpmC,IAChC5M,EAAO,SAAWA,GAEbA,EAIT,QAASizC,IAAQ3J,EAAOsJ,GACtB,GAAIrP,IAA2B,IAAjB+F,EAAMoJ,SAAiBpJ,EAAY,KAC/C,OAAO,CAET,IAAItpC,GAAOyyC,GAASnJ,EAAMoJ,QAC1B,OAAY,OAAR1yC,IAAgBspC,EAAM4J,aAGnBP,GAAiB3yC,EAAMspC,EAAOsJ,GAGvC,QAASN,IAAUhvC,GACjB,MAAqB,gBAAPA,GAAkB6vC,GAAO7vC,GAAOA,EAKhD,QAAS8vC,IAAoBn0C,EAAIo0C,GAK/B,IAAK,GAJDj0C,GAASH,EAAGoP,IAAIzM,IAAIxC,OACpBk0C,KAGKp3C,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CAEtC,IADA,GAAIq3C,GAASF,EAAQj0C,EAAOlD,IACrBo3C,EAAK72C,QAAUwJ,EAAIstC,EAAOzuC,KAAMoH,EAAIonC,GAAMnwC,KAAO,GAAG,CACzD,GAAIqwC,GAAWF,EAAK5L,KACpB,IAAIzhC,EAAIutC,EAAS1uC,KAAMyuC,EAAOzuC,MAAQ,EAAG,CACvCyuC,EAAOzuC,KAAO0uC,EAAS1uC,IACvB,QAGJwuC,EAAK3rC,KAAK4rC,GAGZjV,GAAQr/B,EAAI,WACV,IAAK,GAAI/C,GAAIo3C,EAAK72C,OAAS,EAAGP,GAAK,EAAGA,IACpC4wC,GAAc7tC,EAAGoP,IAAK,GAAIilC,EAAKp3C,GAAG4I,KAAMwuC,EAAKp3C,GAAGiH,GAAI,UAEtD+2B,IAAoBj7B,KA2PxB,QAASw0C,IAAUx0C,EAAIma,GACrB,GAAI5X,GAAOY,EAAQnD,EAAGoP,IAAK+K,GACvBs6B,EAAS36B,GAAWvX,EAIxB,OAHIkyC,IAAUlyC,IACZ4X,EAAQtG,EAAO4gC,IAEV/4B,IAAU,EAAM1b,EAAIy0C,EAAQt6B,EAAO,GAE5C,QAASu6B,IAAQ10C,EAAIma,GACnB,GAAI5X,GAAOY,EAAQnD,EAAGoP,IAAK+K,GACvBs6B,EAASz6B,GAAczX,EAI3B,OAHIkyC,IAAUlyC,IACZ4X,EAAQtG,EAAO4gC,IAEV/4B,IAAU,EAAM1b,EAAIuC,EAAM4X,GAAQ,GAE3C,QAASw6B,IAAe30C,EAAIO,GAC1B,GAAIyC,GAAQwxC,GAAUx0C,EAAIO,EAAIgC,MAC1BA,EAAOY,EAAQnD,EAAGoP,IAAKpM,EAAMT,MAC7ByY,EAAQK,GAAS9Y,EAAMvC,EAAGoP,IAAIkM,UAClC,KAAKN,GAA2B,GAAlBA,EAAM,GAAGE,MAAY,CACjC,GAAI05B,GAAalxC,KAAKoC,IAAI,EAAGvD,EAAKH,KAAKoK,OAAO,OAC1CqoC,EAAOt0C,EAAIgC,MAAQS,EAAMT,MAAQhC,EAAIkB,IAAMmzC,GAAcr0C,EAAIkB,EACjE,OAAOa,GAAIU,EAAMT,KAAMsyC,EAAO,EAAID,EAAY5xC,EAAM0R,QAEtD,MAAO1R,GAIT,QAAS8xC,IAAgB90C,EAAI+0C,EAAOC,GAClC,GAAoB,gBAATD,MACTA,EAAQlwC,GAASkwC,IAEf,OAAO,CAKX/0C,GAAG8a,QAAQzL,MAAM4lC,cACjB,IAAIC,GAAYl1C,EAAG8a,QAAQ/H,MACvB20B,GAAO,CACX,KACM1nC,EAAGwwC,eACLxwC,EAAGc,MAAM4rC,eAAgB,GAEvBsI,IACFh1C,EAAG8a,QAAQ/H,OAAQ,GAErB20B,EAAOqN,EAAM/0C,IAAOE,GACpB,QACAF,EAAG8a,QAAQ/H,MAAQmiC,EACnBl1C,EAAGc,MAAM4rC,eAAgB,EAE3B,MAAOhF,GAGT,QAASyN,IAAmBn1C,EAAIe,EAAMstC,GACpC,IAAK,GAAIpxC,GAAI,EAAGA,EAAI+C,EAAGc,MAAMs0C,QAAQ53C,OAAQP,IAAK,CAChD,GAAI0lB,GAASywB,GAAUryC,EAAMf,EAAGc,MAAMs0C,QAAQn4C,GAAIoxC,EAAQruC,EAC1D,IAAI2iB,EACF,MAAOA,GAGX,MAAO3iB,GAAGsU,QAAQ+gC,WAAajC,GAAUryC,EAAMf,EAAGsU,QAAQ+gC,UAAWhH,EAAQruC,IAAOozC,GAAUryC,EAAMf,EAAGsU,QAAQ4/B,OAAQ7F,EAAQruC,GAOjI,QAASs1C,IAAYt1C,EAAIe,EAAMtE,EAAG4xC,GAChC,GAAIkH,GAAMv1C,EAAGc,MAAM00C,MACnB,IAAID,EAAK,CACP,GAAIhC,GAAcxyC,GAChB,MAAO,SAET00C,IAAQ13B,IAAI,GAAI,WACV/d,EAAGc,MAAM00C,QAAUD,IACrBv1C,EAAGc,MAAM00C,OAAS,KAClBx1C,EAAG8a,QAAQzL,MAAM8oB,WAGrBp3B,EAAOw0C,EAAM,IAAMx0C,EAErB,GAAI4hB,GAASwyB,GAAmBn1C,EAAIe,EAAMstC,EAc1C,OAZc,SAAV1rB,IACF3iB,EAAGc,MAAM00C,OAASz0C,GAEN,WAAV4hB,GACFiH,GAAY5pB,EAAI,aAAcA,EAAIe,EAAMtE,GAG5B,WAAVkmB,GAAiC,SAAVA,IACzBtE,GAAiB5hB,GACjB66B,GAAat3B,IAGXu1C,IAAQ5yB,GAAU,MAAM7gB,KAAKf,IAC/Bsd,GAAiB5hB,IACV,KAEAkmB,EAIX,QAAS+yB,IAAiB11C,EAAIvD,GAC5B,GAAIsE,GAAOizC,GAAQv3C,GAAG,EACtB,SAAKsE,IAIDtE,EAAEs3C,WAAa/zC,EAAGc,MAAM00C,OAInBF,GAAYt1C,EAAI,SAAWe,EAAMtE,EAAG,SAAUwK,GACnD,MAAO6tC,IAAgB90C,EAAIiH,GAAG,MAC1BquC,GAAYt1C,EAAIe,EAAMtE,EAAG,SAAUwK,GACvC,GAAgB,gBAALA,GAAgB,WAAWnF,KAAKmF,GAAKA,EAAE0uC,OAChD,MAAOb,IAAgB90C,EAAIiH,KAIxBquC,GAAYt1C,EAAIe,EAAMtE,EAAG,SAAUwK,GACxC,MAAO6tC,IAAgB90C,EAAIiH,MAMjC,QAAS2uC,IAAkB51C,EAAIvD,EAAGgF,GAChC,MAAO6zC,IAAYt1C,EAAI,IAAMyB,EAAK,IAAKhF,EAAG,SAAUwK,GAClD,MAAO6tC,IAAgB90C,EAAIiH,GAAG,KAKlC,QAAS4uC,IAAUp5C,GACjB,GAAIuD,GAAKnC,IAET,IADAmC,EAAGge,MAAM8Z,MAAQ9sB,KACbwS,GAAexd,EAAIvD,GAAvB,CAIIgU,IAAMC,GAAa,IAAmB,IAAbjU,EAAEg3C,UAC7Bh3C,EAAE6hB,aAAc,EAElB,IAAIlhB,GAAOX,EAAEg3C,OACbzzC,GAAG8a,QAAQ/H,MAAgB,IAAR3V,GAAcX,EAAEs3C,QACnC,IAAI+B,GAAUJ,GAAiB11C,EAAIvD,EAC/B6nC,MACFyR,GAAiBD,EAAU14C,EAAO,MAE7B04C,GAAmB,IAAR14C,IAAe44C,KAAiBh3B,GAAMviB,EAAEq3C,QAAUr3C,EAAEwiB,UAClEjf,EAAGuxC,iBAAiB,GAAI,KAAM,QAKtB,IAARn0C,GAAe,2BAA2B0E,KAAK9B,EAAG8a,QAAQrL,QAAQlJ,YACpE0vC,GAAcj2C,IAIlB,QAASi2C,IAAcj2C,GAIrB,QAASk2C,GAAGz5C,GACO,IAAbA,EAAEg3C,SAAkBh3C,EAAEm3C,SACxBvb,GAAQ5oB,EAAS,wBACjB/I,GAAInI,SAAU,QAAS23C,GACvBxvC,GAAInI,SAAU,YAAa23C,IAP/B,GAAIzmC,GAAUzP,EAAG8a,QAAQrL,OACzBrE,GAASqE,EAAS,wBASlB9I,GAAGpI,SAAU,QAAS23C,GACtBvvC,GAAGpI,SAAU,YAAa23C,GAG5B,QAASC,IAAQ15C,GACE,IAAbA,EAAEg3C,UACJ51C,KAAKuR,IAAIzM,IAAIoQ,OAAQ,GAEvByK,GAAe3f,KAAMpB;WAGvB,QAAS25C,IAAW35C,GAClB,GAAIuD,GAAKnC,IACT,MAAIyvB,GAActtB,EAAG8a,QAASre,IAAM+gB,GAAexd,EAAIvD,IAAMA,EAAEwiB,UAAYxiB,EAAEm3C,QAAU50B,IAAOviB,EAAEq3C,SAAhG,CAGA,GAAIL,GAAUh3C,EAAEg3C,QACZ4C,EAAW55C,EAAE45C,QACjB,IAAI/R,IAAUmP,GAAWsC,GACmB,MAA1CA,IAAiB,SAAK13B,IAAiB5hB,EAEzC,KAAI6nC,IAAY7nC,EAAEqiB,SAASriB,EAAEqiB,MAAQ,MAAO42B,GAAiB11C,EAAIvD,GAAjE,CAGA,GAAIgF,GAAK8S,OAAO+hC,aAAyB,MAAZD,EAAmB5C,EAAU4C,EAEhD,OAAN50C,IAGAm0C,GAAkB51C,EAAIvD,EAAGgF,IAG7BzB,EAAG8a,QAAQzL,MAAM+mC,WAAW35C,MAiB9B,QAAS85C,IAAYh2C,EAAKwe,GACxB,GAAIy3B,IAAO,GAAI/V,KACf,OAAIgW,KAAmBA,GAAgBC,QAAQF,EAAKj2C,EAAKwe,IACvD43B,GAAYF,GAAkB,KACvB,UACEE,IAAaA,GAAUD,QAAQF,EAAKj2C,EAAKwe,IAClD03B,GAAkB,GAAIG,IAAUJ,EAAKj2C,EAAKwe,GAC1C43B,GAAY,KACL,WAEPA,GAAY,GAAIC,IAAUJ,EAAKj2C,EAAKwe,GACpC03B,GAAkB,KACX,UASX,QAASI,IAAYp6C,GACnB,GAAIuD,GAAKnC,KACLid,EAAU9a,EAAG8a,OACjB,MAAI0C,GAAexd,EAAIvD,IAAMqe,EAAQ7H,aAAe6H,EAAQzL,MAAMynC,iBAAlE,CAMA,GAHAh8B,EAAQzL,MAAM4lC,eACdn6B,EAAQ/H,MAAQtW,EAAEs3C,SAEdzmB,GAAcxS,EAASre,GASzB,YARKoU,KAGHiK,EAAQvK,SAASS,WAAY,EAC7B+Y,WAAW,WACT,MAAOjP,GAAQvK,SAASS,WAAY,GACnC,MAIP,KAAI+lC,GAAc/2C,EAAIvD,GAAtB,CAGA,GAAI8D,GAAMo0B,GAAa30B,EAAIvD,GACvBsiB,EAASF,GAASpiB,GAClBu6C,EAASz2C,EAAMg2C,GAAYh2C,EAAKwe,GAAU,QAC9C4O,QAAOmK,QAGO,GAAV/Y,GAAe/e,EAAGc,MAAMm2C,eAC1Bj3C,EAAGc,MAAMm2C,cAAcx6C,GAGrB8D,GAAO22C,GAAmBl3C,EAAI+e,EAAQxe,EAAKy2C,EAAQv6C,KAIzC,GAAVsiB,EACExe,EACF42C,GAAen3C,EAAIO,EAAKy2C,EAAQv6C,GACvBkiB,GAASliB,IAAMqe,EAAQvK,UAChC8N,GAAiB5hB,GAEA,GAAVsiB,GACLxe,GACFuG,GAAgB9G,EAAGoP,IAAK7O,GAE1BwpB,WAAW,WACT,MAAOjP,GAAQzL,MAAMyoB,SACpB,KACgB,GAAV/Y,IACLq4B,GACFC,GAAcr3C,EAAIvD,GAElBu7B,GAAeh4B,OAKrB,QAASk3C,IAAmBl3C,EAAI+e,EAAQxe,EAAKy2C,EAAQ3M,GACnD,GAAItpC,GAAO,OAQX,OAPc,UAAVi2C,EACFj2C,EAAO,SAAWA,EACC,UAAVi2C,IACTj2C,EAAO,SAAWA,GAEpBA,GAAkB,GAAVge,EAAc,OAAmB,GAAVA,EAAc,SAAW,SAAWhe,EAE5Du0C,GAAYt1C,EAAI0zC,GAAiB3yC,EAAMspC,GAAQA,EAAO,SAAU0K,GAIrE,GAHoB,gBAATA,KACTA,EAAQlwC,GAASkwC,KAEdA,EACH,OAAO,CAET,IAAIrN,IAAO,CACX,KACM1nC,EAAGwwC,eACLxwC,EAAGc,MAAM4rC,eAAgB,GAE3BhF,EAAOqN,EAAM/0C,EAAIO,IAAQL,GACzB,QACAF,EAAGc,MAAM4rC,eAAgB,EAE3B,MAAOhF,KAIX,QAAS4P,IAAet3C,EAAIg3C,EAAQ3M,GAClC,GAAIkN,GAASv3C,EAAGC,UAAU,kBACtBoN,EAAQkqC,EAASA,EAAOv3C,EAAIg3C,EAAQ3M,KACxC,IAAkB,MAAdh9B,EAAMmqC,KAAc,CACtB,GAAIlpB,GAAOmpB,GAAWpN,EAAM0J,UAAY1J,EAAMyJ,QAAUzJ,EAAMuJ,MAC9DvmC,GAAMmqC,KAAOlpB,EAAO,YAAwB,UAAV0oB,EAAqB,OAAmB,UAAVA,EAAqB,OAAS,OAWhG,OAToB,MAAhB3pC,EAAMm0B,QAAkBxhC,EAAGoP,IAAIoyB,UACjCn0B,EAAMm0B,OAASxhC,EAAGoP,IAAIoyB,QAAU6I,EAAM0J,UAEpB,MAAhB1mC,EAAMqqC,SACRrqC,EAAMqqC,OAAS14B,GAAMqrB,EAAMyJ,QAAUzJ,EAAMprB,SAErB,MAApB5R,EAAMsqC,aACRtqC,EAAMsqC,aAAe34B,GAAMqrB,EAAMuJ,OAASvJ,EAAMprB,UAE3C5R,EAGT,QAAS8pC,IAAen3C,EAAIO,EAAKy2C,EAAQ3M,GACnC55B,GACFsZ,WAAWre,EAAKmsB,GAAa73B,GAAK,GAElCA,EAAGge,MAAM8Z,MAAQ9sB,GAGnB,IAGI4sC,GAHAC,EAAWP,GAAet3C,EAAIg3C,EAAQ3M,GAEtC1nC,EAAM3C,EAAGoP,IAAIzM,GAEb3C,GAAGsU,QAAQwjC,UAAYC,KAAgB/3C,EAAGwwC,cAA0B,UAAVwG,IAAuBY,EAAYj1C,EAAIgI,SAASpK,KAAS,IAAMyG,GAAK4wC,EAAYj1C,EAAIxC,OAAOy3C,IAAY/xC,OAAQtF,GAAO,GAAKA,EAAI4yB,KAAO,KAAOnsB,EAAI4wC,EAAU1zC,KAAM3D,GAAO,GAAKA,EAAI4yB,KAAO,GACpP6kB,GAAoBh4C,EAAIqqC,EAAO9pC,EAAKs3C,GAEpCI,GAAiBj4C,EAAIqqC,EAAO9pC,EAAKs3C,GAMrC,QAASG,IAAoBh4C,EAAIqqC,EAAO9pC,EAAKs3C,GAC3C,GAAI/8B,GAAU9a,EAAG8a,QACbo9B,GAAQ,EACRC,EAAU5yC,GAAUvF,EAAI,SAAUvD,GAChCoU,KACFiK,EAAQvK,SAASS,WAAY,GAE/BhR,EAAGc,MAAMqwC,cAAe,EACxBzqC,GAAInI,SAAU,UAAW45C,GACzBzxC,GAAInI,SAAU,YAAa65C,GAC3B1xC,GAAIoU,EAAQvK,SAAU,YAAa8nC,GACnC3xC,GAAIoU,EAAQvK,SAAU,OAAQ4nC,GACzBD,IACH75B,GAAiB5hB,GACZo7C,EAASH,QACZ5wC,GAAgB9G,EAAGoP,IAAK7O,EAAK,KAAM,KAAMs3C,EAASrW,QAGhD3wB,IAAUJ,IAAoB,GAAdC,GAClBqZ,WAAW,WACTxrB,SAAS2M,KAAK4sB,QAAQhd,EAAQzL,MAAMyoB,SACnC,IAEHhd,EAAQzL,MAAMyoB,WAIhBsgB,EAAY,SAAmBE,GACjCJ,EAAQA,GAASx0C,KAAKqL,IAAIs7B,EAAMtV,QAAUujB,EAAGvjB,SAAWrxB,KAAKqL,IAAIs7B,EAAMrV,QAAUsjB,EAAGtjB,UAAY,IAE9FqjB,EAAY,WACd,MAAOH,IAAQ,EAGbrnC,MACFiK,EAAQvK,SAASS,WAAY,GAE/BhR,EAAGc,MAAMqwC,aAAegH,EACxBA,EAAQ/N,MAAQyN,EAASF,WAErB78B,EAAQvK,SAASunC,UACnBh9B,EAAQvK,SAASunC,WAEnBnxC,GAAGpI,SAAU,UAAW45C,GACxBxxC,GAAGpI,SAAU,YAAa65C,GAC1BzxC,GAAGmU,EAAQvK,SAAU,YAAa8nC,GAClC1xC,GAAGmU,EAAQvK,SAAU,OAAQ4nC,GAE7BngB,GAAeh4B,GACf+pB,WAAW,WACT,MAAOjP,GAAQzL,MAAMyoB,SACpB,IAGL,QAASygB,IAAav4C,EAAIO,EAAKi3C,GAC7B,GAAY,QAARA,EACF,MAAO,IAAIxS,IAAMzkC,EAAKA,EAExB,IAAY,QAARi3C,EACF,MAAOx3C,GAAGw4C,WAAWj4C,EAEvB,IAAY,QAARi3C,EACF,MAAO,IAAIxS,IAAM1iC,EAAI/B,EAAIgC,KAAM,GAAI0S,EAASjV,EAAGoP,IAAK9M,EAAI/B,EAAIgC,KAAO,EAAG,IAExE,IAAIogB,GAAS60B,EAAKx3C,EAAIO,EACtB,OAAO,IAAIykC,IAAMriB,EAAO9c,KAAM8c,EAAOze,IAIvC,QAAS+zC,IAAiBj4C,EAAIqqC,EAAOrnC,EAAO60C,GAmD1C,QAASY,GAASl4C,GAChB,GAAyB,GAArByG,EAAI0xC,EAASn4C,GAKjB,GAFAm4C,EAAUn4C,EAEW,aAAjBs3C,EAASL,KAAqB,CAOhC,IAAK,GANDr3C,MACAkM,EAAUrM,EAAGsU,QAAQjI,QACrBssC,EAAWvsC,EAAYjJ,EAAQiM,EAAKpM,EAAMT,MAAMH,KAAMY,EAAMvB,GAAI4K,GAChEusC,EAASxsC,EAAYjJ,EAAQiM,EAAK7O,EAAIgC,MAAMH,KAAM7B,EAAIkB,GAAI4K,GAC1DuT,EAAOlc,KAAKC,IAAIg1C,EAAUC,GAC1B/4B,EAAQnc,KAAKoC,IAAI6yC,EAAUC,GACtBr2C,EAAOmB,KAAKC,IAAIX,EAAMT,KAAMhC,EAAIgC,MAAOf,EAAMkC,KAAKC,IAAI3D,EAAG4D,WAAYF,KAAKoC,IAAI9C,EAAMT,KAAMhC,EAAIgC,OAAQA,GAAQf,EAAKe,IAAQ,CAClI,GAAIH,GAAOe,EAAQiM,EAAK7M,GAAMH,KAC1Bu0B,EAAUhqB,EAAWvK,EAAMwd,EAAMvT,EACjCuT,IAAQC,EACV1f,EAAOuI,KAAK,GAAIs8B,IAAM1iC,EAAIC,EAAMo0B,GAAUr0B,EAAIC,EAAMo0B,KAC3Cv0B,EAAK5E,OAASm5B,GACvBx2B,EAAOuI,KAAK,GAAIs8B,IAAM1iC,EAAIC,EAAMo0B,GAAUr0B,EAAIC,EAAMoK,EAAWvK,EAAMyd,EAAOxT,MAG3ElM,EAAO3C,QACV2C,EAAOuI,KAAK,GAAIs8B,IAAMhiC,EAAOA,IAE/B2nC,GAAav7B,EAAKw1B,GAAmBiU,EAAS14C,OAAOuB,MAAM,EAAGo3C,GAAU5iC,OAAO/V,GAAS24C,IAAa9P,OAAQ,SAAU7E,QAAQ,IAC/HnkC,EAAG05B,eAAen5B,OACb,CACL,GAGIC,GAHAu4C,EAAWC,EACXpjB,EAAW2iB,GAAav4C,EAAIO,EAAKs3C,EAASL,MAC1C90C,EAASq2C,EAASr2C,MAElBsE,GAAI4uB,EAASlzB,OAAQA,GAAU,GACjClC,EAAOo1B,EAASp1B,KAChBkC,EAASqS,EAAOgkC,EAASlzC,OAAQ+vB,EAASlzB,UAE1ClC,EAAOo1B,EAASlzB,OAChBA,EAASoS,EAAOikC,EAAS70C,KAAM0xB,EAASp1B,MAE1C,IAAIy4C,GAAWJ,EAAS14C,OAAOuB,MAAM,EACrCu3C,GAASH,GAAY,GAAI9T,IAAM/vB,EAAS7F,EAAK1M,GAASlC,GACtDmqC,GAAav7B,EAAKw1B,GAAmBqU,EAAUH,GAAWI,KAW9D,QAAS1X,GAAO/kC,GACd,GAAI08C,KAAaC,EACb3zC,EAAMkvB,GAAa30B,EAAIvD,GAAG,EAAuB,aAAjBo7C,EAASL,KAC7C,IAAK/xC,EAGL,GAAyB,GAArBuB,EAAIvB,EAAKizC,GAAe,CAC1B14C,EAAGge,MAAM8Z,MAAQ9sB,IACjBytC,EAAShzC,EACT,IAAI28B,GAAU3J,GAAa3d,EAAS1L,IAChC3J,EAAIlD,MAAQ6/B,EAAQl+B,IAAMuB,EAAIlD,KAAO6/B,EAAQv8B,OAC/CkkB,WAAWxkB,GAAUvF,EAAI,WACnBo5C,GAAWD,GACb3X,EAAO/kC,KAEP,SAED,CACL,GAAIy2B,GAAUz2B,EAAEu4B,QAAUqkB,EAAWp9B,KAAO,GAAKxf,EAAEu4B,QAAUqkB,EAAWzqB,OAAS,GAAK,CAClFsE,IACFnJ,WAAWxkB,GAAUvF,EAAI,WACnBo5C,GAAWD,IAGfr+B,EAAQvK,SAASyhB,WAAakB,EAC9BsO,EAAO/kC,MACL,KAKV,QAASirC,GAAKjrC,GACZuD,EAAGc,MAAMm2C,eAAgB,EACzBmC,EAAU/wB,EAAAA,EACVhK,GAAiB5hB,GACjBqe,EAAQzL,MAAMyoB,QACdpxB,GAAInI,SAAU,YAAa+6C,GAC3B5yC,GAAInI,SAAU,UAAW23C,GACzB9mC,EAAI25B,QAAQb,cAAgB,KA5I9B,GAAIptB,GAAU9a,EAAG8a,QACb1L,EAAMpP,EAAGoP,GACbiP,IAAiBgsB,EAEjB,IAAI2O,GACAF,EACAD,EAAWzpC,EAAIzM,IACfxC,EAAS04C,EAAS14C,MAatB,IAZI03C,EAASH,SAAWG,EAASrW,QAC/BsX,EAAW1pC,EAAIzM,IAAIgI,SAAS3H,GAE1Bg2C,EADEF,GAAY,EACH34C,EAAO24C,GAEP,GAAI9T,IAAMhiC,EAAOA,KAG9Bg2C,EAAW5pC,EAAIzM,IAAI2yB,UACnBwjB,EAAW1pC,EAAIzM,IAAIgzB,WAGA,aAAjBkiB,EAASL,KACNK,EAASH,SACZsB,EAAW,GAAIhU,IAAMhiC,EAAOA,IAE9BA,EAAQ2xB,GAAa30B,EAAIqqC,GAAO,GAAM,GACtCyO,GAAY,MACP,CACL,GAAIljB,GAAW2iB,GAAav4C,EAAIgD,EAAO60C,EAASL,KAE9CwB,GADEnB,EAASrW,OACAiJ,GAAYuO,EAAUpjB,EAASlzB,OAAQkzB,EAASp1B,KAAMq3C,EAASrW,QAE/D5L,EAIViiB,EAASH,QAIU,GAAboB,GACTA,EAAW34C,EAAO3C,OAClBmtC,GAAav7B,EAAKw1B,GAAmBzkC,EAAO+V,QAAQ8iC,IAAYF,IAAa3U,QAAQ,EAAO6E,OAAQ,YAC3F7oC,EAAO3C,OAAS,GAAK2C,EAAO24C,GAAUx4C,SAA4B,QAAjBu3C,EAASL,OAAmBK,EAASrW,QAC/FmJ,GAAav7B,EAAKw1B,GAAmBzkC,EAAOuB,MAAM,EAAGo3C,GAAU5iC,OAAO/V,EAAOuB,MAAMo3C,EAAW,IAAK,IAAM3U,QAAQ,EAAO6E,OAAQ,WAChI6P,EAAWzpC,EAAIzM,KAEfmoC,GAAoB17B,EAAK0pC,EAAUE,EAAUE,KAV7CJ,EAAW,EACXnO,GAAav7B,EAAK,GAAI61B,KAAW+T,GAAW,GAAIE,IAChDL,EAAWzpC,EAAIzM,IAWjB,IAAI+1C,GAAU11C,EA8CVq2C,EAAav+B,EAAQtK,QAAQkP,wBAK7B05B,EAAU,EA2CVE,EAAO/zC,GAAUvF,EAAI,SAAUvD,GAC5BoiB,GAASpiB,GAGZ+kC,EAAO/kC,GAFPirC,EAAKjrC,KAKLy5C,EAAK3wC,GAAUvF,EAAI0nC,EACvB1nC,GAAGc,MAAMm2C,cAAgBf,EACzBvvC,GAAGpI,SAAU,YAAa+6C,GAC1B3yC,GAAGpI,SAAU,UAAW23C,GAK1B,QAASqD,IAAYv5C,EAAIvD,EAAGoF,EAAM23C,GAChC,GAAIC,GAAIC,CACR,KACED,EAAKh9C,EAAEs4B,QAAQ2kB,EAAKj9C,EAAEu4B,QACtB,MAAOv4B,GACP,OAAO,EAET,GAAIg9C,GAAM/1C,KAAKuL,MAAMjP,EAAG8a,QAAQzK,QAAQqP,wBAAwBG,OAC9D,OAAO,CAEL25B,IACFn7B,GAAiB5hB,EAGnB,IAAIqe,GAAU9a,EAAG8a,QACb6+B,EAAU7+B,EAAQrL,QAAQiQ,uBAE9B,IAAIg6B,EAAKC,EAAQ/qB,SAAW1Q,GAAWle,EAAI6B,GACzC,MAAO8b,IAAmBlhB,EAE5Bi9C,IAAMC,EAAQ19B,IAAMnB,EAAQrJ,UAE5B,KAAK,GAAIxU,GAAI,EAAGA,EAAI+C,EAAGsU,QAAQjE,QAAQ7S,SAAUP,EAAG,CAClD,GAAI28C,GAAI9+B,EAAQzK,QAAQvG,WAAW7M,EACnC,IAAI28C,GAAKA,EAAEl6B,wBAAwBG,OAAS45B,EAAI,CAI9C,MADAn8B,IAAOtd,EAAI6B,EAAM7B,EAFN+T,EAAc/T,EAAGoP,IAAKsqC,GACpB15C,EAAGsU,QAAQjE,QAAQpT,GACGR,GAC5BkhB,GAAmBlhB,KAKhC,QAASs6C,IAAc/2C,EAAIvD,GACzB,MAAO88C,IAAYv5C,EAAIvD,EAAG,eAAe,GAQ3C,QAAS46C,IAAcr3C,EAAIvD,GACrB6wB,GAActtB,EAAG8a,QAASre,IAAMo9C,GAAoB75C,EAAIvD,IAGxD+gB,GAAexd,EAAIvD,EAAG,gBAG1BuD,EAAG8a,QAAQzL,MAAMgoC,cAAc56C,GAGjC,QAASo9C,IAAoB75C,EAAIvD,GAC/B,QAAKyhB,GAAWle,EAAI,sBAGbu5C,GAAYv5C,EAAIvD,EAAG,qBAAqB,GAGjD,QAASq9C,IAAa95C,GACpBA,EAAG8a,QAAQtK,QAAQjK,UAAYvG,EAAG8a,QAAQtK,QAAQjK,UAAUof,QAAQ,eAAgB,IAAM3lB,EAAGsU,QAAQylC,MAAMp0B,QAAQ,aAAc,UACjI2L,GAAYtxB,GAwLd,QAASg6C,IAAeh6C,GACtBkjC,GAAcljC,GACdw/B,GAAUx/B,GACV84B,GAAkB94B,GAGpB,QAASi6C,IAAgBj6C,EAAIqN,EAAO/I,GAElC,IAAK+I,KADO/I,GAAOA,GAAOC,IACJ,CACpB,GAAI21C,GAAQl6C,EAAG8a,QAAQq/B,cACnBh8C,EAASkP,EAAQ1G,GAAKD,EAC1BvI,GAAO6B,EAAG8a,QAAQvK,SAAU,YAAa2pC,EAAMl3C,OAC/C7E,EAAO6B,EAAG8a,QAAQvK,SAAU,YAAa2pC,EAAME,OAC/Cj8C,EAAO6B,EAAG8a,QAAQvK,SAAU,WAAY2pC,EAAMG,MAC9Cl8C,EAAO6B,EAAG8a,QAAQvK,SAAU,YAAa2pC,EAAMI,OAC/Cn8C,EAAO6B,EAAG8a,QAAQvK,SAAU,OAAQ2pC,EAAMK,OAI9C,QAASC,IAAgBx6C,GACnBA,EAAGsU,QAAQiI,cACbnR,EAASpL,EAAG8a,QAAQtK,QAAS,mBAC7BxQ,EAAG8a,QAAQ7K,MAAM5F,MAAMu0B,SAAW,GAClC5+B,EAAG8a,QAAQ5K,WAAa,OAExBmoB,GAAQr4B,EAAG8a,QAAQtK,QAAS,mBAC5BqK,GAAY7a,IAEdy0B,GAAoBz0B,GACpBw/B,GAAUx/B,GACVsxB,GAAYtxB,GACZ+pB,WAAW,WACT,MAAOuS,IAAiBt8B,IACvB,KAML,QAASy6C,IAAatrC,EAAOmF,GAC3B,GAAI22B,GAASptC,IAEb,MAAMA,eAAgB48C,KACpB,MAAO,IAAIA,IAAatrC,EAAOmF,EAGjCzW,MAAKyW,QAAUA,EAAUA,EAAUvI,EAAQuI,MAE3CvI,EAAQ2uC,GAAUpmC,GAAS,GAC3B+uB,GAAyB/uB,EAEzB,IAAIlF,GAAMkF,EAAQjH,KACA,iBAAP+B,KACTA,EAAM,GAAIurC,IAAIvrC,EAAKkF,EAAQzV,KAAM,KAAMyV,EAAQ28B,cAAe38B,EAAQgH,YAExEzd,KAAKuR,IAAMA,CAEX,IAAIC,GAAQ,GAAIorC,IAAaG,YAAYtmC,EAAQumC,YAAYh9C,MACzDid,EAAUjd,KAAKid,QAAU,GAAI5L,GAAQC,EAAOC,EAAKC,EACrDyL,GAAQtK,QAAQnS,WAAaR,KAC7BqlC,GAAcrlC,MACdi8C,GAAaj8C,MACTyW,EAAQiI,eACV1e,KAAKid,QAAQtK,QAAQjK,WAAa,oBAEpCw2B,GAAel/B,MAEfA,KAAKiD,OACHs0C,WACAtzB,YACAH,QAAS,EACT1V,WAAW,EACXgsB,mBAAmB,EACnBV,SAAS,EACTmV,eAAe,EACfoO,eAAe,EAAOC,aAAa,EACnC9D,eAAe,EACf9F,cAAc,EACd5Q,UAAW,GAAIya,IACfxF,OAAQ,KACRtuB,aAAc,MAGZ5S,EAAQ2mC,YAAclqC,IACxB+J,EAAQzL,MAAMyoB,QAKZrnB,IAAMC,GAAa,IACrBqZ,WAAW,WACT,MAAOkhB,GAAOnwB,QAAQzL,MAAM8oB,OAAM,IACjC,IAGL+iB,GAAsBr9C,MACtBy0C,KAEAnV,GAAgBt/B,MAChBA,KAAKmgB,MAAMqR,aAAc,EACzBgY,GAAUxpC,KAAMuR,GAEZkF,EAAQ2mC,YAAclqC,IAAUlT,KAAKihC,WACvC/U,WAAWre,EAAKqsB,GAASl6B,MAAO,IAEhCq6B,GAAOr6B,KAGT,KAAK,GAAIoD,KAAOk6C,IACVA,GAAehvC,eAAelL,IAChCk6C,GAAel6C,GAAKgqC,EAAQ32B,EAAQrT,GAAMsD,GAG9C20B,IAA2Br7B,MACvByW,EAAQ8mC,YACV9mC,EAAQ8mC,WAAWv9C,KAErB,KAAK,GAAIZ,GAAI,EAAGA,EAAIo+C,GAAU79C,SAAUP,EACtCo+C,GAAUp+C,GAAGguC,EAEftN,IAAc9/B,MAGVgT,IAAUyD,EAAQiI,cAAmE,sBAAnDqR,iBAAiB9S,EAAQrL,SAAS6rC,gBACtExgC,EAAQrL,QAAQpF,MAAMixC,cAAgB,QAU1C,QAASJ,IAAsBl7C,GAkC7B,QAASu7C,KACHjsC,EAAE2D,cACJuoC,EAAgBzxB,WAAW,WACzB,MAAOza,GAAE2D,YAAc,MACtB,KACHwoC,EAAYnsC,EAAE2D,YACdwoC,EAAUj6C,KAAO,GAAIi/B,OAGzB,QAASib,GAAsBj/C,GAC7B,GAAwB,GAApBA,EAAEk/C,QAAQn+C,OACZ,OAAO,CAET,IAAIo+C,GAAQn/C,EAAEk/C,QAAQ,EACtB,OAAOC,GAAMC,SAAW,GAAKD,EAAME,SAAW,EAEhD,QAASC,GAAQH,EAAOp1C,GACtB,GAAkB,MAAdA,EAAMoZ,KACR,OAAO,CAET,IAAI2jB,GAAK/8B,EAAMoZ,KAAOg8B,EAAMh8B,KACxB6jB,EAAKj9B,EAAMyV,IAAM2/B,EAAM3/B,GAC3B,OAAOsnB,GAAKA,EAAKE,EAAKA,EAAK,IAvD7B,GAAIn0B,GAAItP,EAAG8a,OACXnU,IAAG2I,EAAEiB,SAAU,YAAahL,GAAUvF,EAAI62C,KAEtCpmC,IAAMC,GAAa,GACrB/J,GAAG2I,EAAEiB,SAAU,WAAYhL,GAAUvF,EAAI,SAAUvD,GACjD,IAAI+gB,GAAexd,EAAIvD,GAAvB,CAGA,GAAI8D,GAAMo0B,GAAa30B,EAAIvD,EAC3B,IAAK8D,IAAOw2C,GAAc/2C,EAAIvD,KAAM6wB,GAActtB,EAAG8a,QAASre,GAA9D,CAGA4hB,GAAiB5hB,EACjB,IAAIu/C,GAAOh8C,EAAGw4C,WAAWj4C,EACzBuG,IAAgB9G,EAAGoP,IAAK4sC,EAAKt5C,OAAQs5C,EAAKx7C,WAG5CmG,GAAG2I,EAAEiB,SAAU,WAAY,SAAU9T,GACnC,MAAO+gB,IAAexd,EAAIvD,IAAM4hB,GAAiB5hB,KAMhD26C,IACHzwC,GAAG2I,EAAEiB,SAAU,cAAe,SAAU9T,GACtC,MAAO46C,IAAcr3C,EAAIvD,IAK7B,IAAI++C,GACAC,GAAcj6C,IAAK,EAyBvBmF,IAAG2I,EAAEiB,SAAU,aAAc,SAAU9T,GACrC,IAAK+gB,GAAexd,EAAIvD,KAAOi/C,EAAsBj/C,GAAI,CACvD6S,EAAED,MAAM4lC,eACRgH,aAAaT,EACb,IAAIhF,IAAO,GAAI/V,KACfnxB,GAAE2D,aAAgBjQ,MAAOwzC,EAAK0B,OAAO,EACnCj0C,KAAMuyC,EAAMiF,EAAUj6C,KAAO,IAAMi6C,EAAY,MACzB,GAApBh/C,EAAEk/C,QAAQn+C,SACZ8R,EAAE2D,YAAY2M,KAAOnjB,EAAEk/C,QAAQ,GAAGO,MAClC5sC,EAAE2D,YAAYgJ,IAAMxf,EAAEk/C,QAAQ,GAAGQ,UAIvCx1C,GAAG2I,EAAEiB,SAAU,YAAa,WACtBjB,EAAE2D,cACJ3D,EAAE2D,YAAYilC,OAAQ,KAG1BvxC,GAAG2I,EAAEiB,SAAU,WAAY,SAAU9T,GACnC,GAAIm/C,GAAQtsC,EAAE2D,WACd,IAAI2oC,IAAUtuB,GAAche,EAAG7S,IAAoB,MAAdm/C,EAAMh8B,OAAiBg8B,EAAM1D,OAAS,GAAIzX,MAASmb,EAAM54C,MAAQ,IAAK,CACzG,GACI2C,GADApF,EAAMP,EAAGo8C,WAAW9sC,EAAE2D,YAAa,OAInCtN,IAFCi2C,EAAM33C,MAAQ83C,EAAQH,EAAOA,EAAM33C,MAE5B,GAAI+gC,IAAMzkC,EAAKA,IACbq7C,EAAM33C,KAAKA,MAAQ83C,EAAQH,EAAOA,EAAM33C,KAAKA,MAE/CjE,EAAGw4C,WAAWj4C,GAGd,GAAIykC,IAAM1iC,EAAI/B,EAAIgC,KAAM,GAAI0S,EAASjV,EAAGoP,IAAK9M,EAAI/B,EAAIgC,KAAO,EAAG,KAE3EvC,EAAG2qC,aAAahlC,EAAMjD,OAAQiD,EAAMnF,MACpCR,EAAG83B,QACHzZ,GAAiB5hB,GAEnB8+C,MAEF50C,GAAG2I,EAAEiB,SAAU,cAAegrC,GAI9B50C,GAAG2I,EAAEiB,SAAU,SAAU,WACnBjB,EAAEiB,SAAS6d,eACbgM,GAAgBp6B,EAAIsP,EAAEiB,SAASyhB,WAC/BqI,GAAcr6B,EAAIsP,EAAEiB,SAASqhB,YAAY,GACzCtU,GAAOtd,EAAI,SAAUA,MAKzB2G,GAAG2I,EAAEiB,SAAU,aAAc,SAAU9T,GACrC,MAAOynC,IAAclkC,EAAIvD,KAE3BkK,GAAG2I,EAAEiB,SAAU,iBAAkB,SAAU9T,GACzC,MAAOynC,IAAclkC,EAAIvD,KAI3BkK,GAAG2I,EAAEkB,QAAS,SAAU,WACtB,MAAOlB,GAAEkB,QAAQwhB,UAAY1iB,EAAEkB,QAAQohB,WAAa,IAGtDtiB,EAAE6qC,eACAC,MAAO,SAAe39C,GACf+gB,GAAexd,EAAIvD,IACtBiiB,GAAOjiB,IAGX49C,KAAM,SAAc59C,GACb+gB,GAAexd,EAAIvD,KACtBu1C,GAAWhyC,EAAIvD,GAAGiiB,GAAOjiB,KAG7BuG,MAAO,SAAevG,GACpB,MAAO+0C,IAAYxxC,EAAIvD,IAEzB89C,KAAMh1C,GAAUvF,EAAImwC,IACpBmK,MAAO,SAAe79C,GACf+gB,GAAexd,EAAIvD,IACtB2zC,GAAgBpwC,IAKtB,IAAIq8C,GAAM/sC,EAAED,MAAMitC,UAClB31C,IAAG01C,EAAK,QAAS,SAAU5/C,GACzB,MAAO05C,IAAQ54C,KAAKyC,EAAIvD,KAE1BkK,GAAG01C,EAAK,UAAW92C,GAAUvF,EAAI61C,KACjClvC,GAAG01C,EAAK,WAAY92C,GAAUvF,EAAIo2C,KAClCzvC,GAAG01C,EAAK,QAAS,SAAU5/C,GACzB,MAAOs7B,IAAQ/3B,EAAIvD,KAErBkK,GAAG01C,EAAK,OAAQ,SAAU5/C,GACxB,MAAOy7B,IAAOl4B,EAAIvD,KActB,QAASoG,IAAW7C,EAAIrD,EAAG4/C,EAAKC,GAC9B,GACI17C,GADAsO,EAAMpP,EAAGoP,GAEF,OAAPmtC,IACFA,EAAM,OAEG,SAAPA,IAGGntC,EAAIvQ,KAAKsD,OAGZrB,EAAQ0hB,GAAiBxiB,EAAIrD,GAAGmE,MAFhCy7C,EAAM,OAMV,IAAIlwC,GAAUrM,EAAGsU,QAAQjI,QACrB9J,EAAOY,EAAQiM,EAAKzS,GACpB8/C,EAAWrwC,EAAY7J,EAAKH,KAAM,KAAMiK,EACxC9J,GAAKqgB,aACPrgB,EAAKqgB,WAAa,KAEpB,IACI85B,GADAC,EAAiBp6C,EAAKH,KAAK2D,MAAM,QAAQ,EAE7C,IAAKy2C,GAAe,KAAK16C,KAAKS,EAAKH,OAG5B,GAAW,SAAPm6C,KACTG,EAActtC,EAAIvQ,KAAKsD,OAAOrB,EAAOyB,EAAKH,KAAKV,MAAMi7C,EAAen/C,QAAS+E,EAAKH,QAC/DlC,IAAQw8C,EAAc,KAAK,CAC5C,IAAKF,EACH,MAEFD,GAAM,YARRG,GAAc,EACdH,EAAM,KAUG,SAAPA,EAEAG,EADE//C,EAAIyS,EAAI+B,MACI/E,EAAYjJ,EAAQiM,EAAKzS,EAAI,GAAGyF,KAAM,KAAMiK,GAE5C,EAEA,OAAPkwC,EACTG,EAAcD,EAAWz8C,EAAGsU,QAAQsoC,WACpB,YAAPL,EACTG,EAAcD,EAAWz8C,EAAGsU,QAAQsoC,WACb,gBAAPL,KAChBG,EAAcD,EAAWF,GAE3BG,EAAch5C,KAAKoC,IAAI,EAAG42C,EAE1B,IAAIG,GAAe,GACft8C,EAAM,CACV,IAAIP,EAAGsU,QAAQwoC,eACb,IAAK,GAAI7/C,GAAIyG,KAAKuL,MAAMytC,EAAcrwC,GAAUpP,IAAKA,EACnDsD,GAAO8L,EAAQwwC,GAAgB,IAOnC,IAJIt8C,EAAMm8C,IACRG,GAAgB9vC,EAAS2vC,EAAcn8C,IAGrCs8C,GAAgBF,EAGlB,MAFA9O,IAAcz+B,EAAKytC,EAAcv6C,EAAI3F,EAAG,GAAI2F,EAAI3F,EAAGggD,EAAen/C,QAAS,UAC3E+E,EAAKqgB,WAAa,MACX,CAIP,KAAK,GAAI1O,GAAM,EAAGA,EAAM9E,EAAIzM,IAAIxC,OAAO3C,OAAQ0W,IAAO,CACpD,GAAIvO,GAAQyJ,EAAIzM,IAAIxC,OAAO+T,EAC3B,IAAIvO,EAAMnF,KAAK+B,MAAQ5F,GAAKgJ,EAAMnF,KAAKiB,GAAKk7C,EAAen/C,OAAQ,CACjE,GAAIu/C,GAAQz6C,EAAI3F,EAAGggD,EAAen/C,OAClCstC,IAAoB17B,EAAK8E,EAAK,GAAI8wB,IAAM+X,EAAOA,GAC/C,SAWR,QAASC,IAAcC,GACrBC,GAAaD,EAGf,QAASE,IAAen9C,EAAIo9C,EAAUC,EAAS16C,EAAKqmC,GAClD,GAAI55B,GAAMpP,EAAGoP,GACbpP,GAAG8a,QAAQ/H,OAAQ,EACdpQ,IACHA,EAAMyM,EAAIzM,IAGZ,IAAI26C,GAAQt9C,EAAGc,MAAMg6C,eAA2B,SAAV9R,EAClCuU,EAAYC,GAAeJ,GAC3BK,EAAa,IAEjB,IAAIH,GAAS36C,EAAIxC,OAAO3C,OAAS,EAC/B,GAAI0/C,IAAcA,GAAW96C,KAAK4uC,KAAK,OAASoM,GAC9C,GAAIz6C,EAAIxC,OAAO3C,OAAS0/C,GAAW96C,KAAK5E,QAAU,EAAG,CACnDigD,IACA,KAAK,GAAIxgD,GAAI,EAAGA,EAAIigD,GAAW96C,KAAK5E,OAAQP,IAC1CwgD,EAAW/0C,KAAK0G,EAAI0+B,WAAWoP,GAAW96C,KAAKnF,UAG1CsgD,GAAU//C,QAAUmF,EAAIxC,OAAO3C,QAAUwC,EAAGsU,QAAQopC,yBAC7DD,EAAah5C,EAAI84C,EAAW,SAAUlgD,GACpC,OAAQA,KAOd,KAAK,GAFDggC,GAEKnpB,EAAMvR,EAAIxC,OAAO3C,OAAS,EAAG0W,GAAO,EAAGA,IAAO,CACrD,GAAI0hB,GAAWjzB,EAAIxC,OAAO+T,GACtBrO,EAAO+vB,EAAS/vB,OAChB3B,EAAK0xB,EAAS1xB,IACd0xB,GAASt1B,UACP+8C,GAAWA,EAAU,EAErBx3C,EAAOvD,EAAIuD,EAAKtD,KAAMsD,EAAKpE,GAAK47C,GACvBr9C,EAAGc,MAAMmL,YAAcqxC,EAEhCp5C,EAAK5B,EAAI4B,EAAG3B,KAAMmB,KAAKC,IAAIR,EAAQiM,EAAKlL,EAAG3B,MAAMH,KAAK5E,OAAQ0G,EAAGzC,GAAKwL,EAAIswC,GAAW//C,SAC5E0/C,IAAcA,GAAWS,UAAYT,GAAW96C,KAAK4uC,KAAK,OAASoM,IAC9Ev3C,EAAO3B,EAAK5B,EAAIuD,EAAKtD,KAAM,KAG/B86B,EAAcr9B,EAAGge,MAAMqf,WACvB,IAAIugB,IAAgB/3C,KAAMA,EAAM3B,GAAIA,EAAI9B,KAAMq7C,EAAaA,EAAWvpC,EAAMupC,EAAWjgD,QAAU+/C,EAC/FvU,OAAQA,IAAWsU,EAAQ,QAAUt9C,EAAGc,MAAMi6C,YAAc,MAAQ,UACtEvO,IAAWxsC,EAAGoP,IAAKwuC,GACnBh0B,GAAY5pB,EAAI,YAAaA,EAAI49C,GAE/BR,IAAaE,GACfO,GAAgB79C,EAAIo9C,GAGtBniB,GAAoBj7B,GACpBA,EAAGge,MAAMqf,YAAcA,EACvBr9B,EAAGge,MAAMsf,QAAS,EAClBt9B,EAAGc,MAAMg6C,cAAgB96C,EAAGc,MAAMi6C,aAAc,EAGlD,QAAS+C,IAAYrhD,EAAGuD,GACtB,GAAI+9C,GAASthD,EAAEuhD,eAAiBvhD,EAAEuhD,cAAc3M,QAAQ,OACxD,IAAI0M,EAOF,MANAthD,GAAE2B,iBACG4B,EAAGwwC,cAAiBxwC,EAAGsU,QAAQ2pC,cAClC5e,GAAQr/B,EAAI,WACV,MAAOm9C,IAAen9C,EAAI+9C,EAAQ,EAAG,KAAM,YAGxC,EAIX,QAASF,IAAgB79C,EAAIo9C,GAE3B,GAAKp9C,EAAGsU,QAAQ4pC,eAAkBl+C,EAAGsU,QAAQ6pC,YAK7C,IAAK,GAFDx7C,GAAM3C,EAAGoP,IAAIzM,IAER1F,EAAI0F,EAAIxC,OAAO3C,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC/C,GAAI24B,GAAWjzB,EAAIxC,OAAOlD,EAC1B,MAAI24B,EAASp1B,KAAKiB,GAAK,KAAOxE,GAAK0F,EAAIxC,OAAOlD,EAAI,GAAGuD,KAAK+B,MAAQqzB,EAASp1B,KAAK+B,MAAhF,CAGA,GAAI1D,GAAOmB,EAAGo+C,UAAUxoB,EAASp1B,MAC7BykB,GAAW,CACf,IAAIpmB,EAAKq/C,eACP,IAAK,GAAI7lC,GAAI,EAAGA,EAAIxZ,EAAKq/C,cAAc1gD,OAAQ6a,IAC7C,GAAI+kC,EAASn7C,QAAQpD,EAAKq/C,cAAcl8C,OAAOqW,KAAO,EAAG,CACvD4M,EAAWpiB,GAAW7C,EAAI41B,EAASp1B,KAAK+B,KAAM,QAC9C,YAGK1D,GAAKw/C,eACVx/C,EAAKw/C,cAAcv8C,KAAKqB,EAAQnD,EAAGoP,IAAKwmB,EAASp1B,KAAK+B,MAAMH,KAAKV,MAAM,EAAGk0B,EAASp1B,KAAKiB,OAC1FwjB,EAAWpiB,GAAW7C,EAAI41B,EAASp1B,KAAK+B,KAAM,SAG9C0iB,IACF2E,GAAY5pB,EAAI,gBAAiBA,EAAI41B,EAASp1B,KAAK+B,QAKzD,QAAS+7C,IAAet+C,GAGtB,IAAK,GAFDoC,MACAjC,KACKlD,EAAI,EAAGA,EAAI+C,EAAGoP,IAAIzM,IAAIxC,OAAO3C,OAAQP,IAAK,CACjD,GAAIsF,GAAOvC,EAAGoP,IAAIzM,IAAIxC,OAAOlD,GAAGuD,KAAK+B,KACjCg8C,GAAc77C,OAAQJ,EAAIC,EAAM,GAAI/B,KAAM8B,EAAIC,EAAO,EAAG,GAC5DpC,GAAOuI,KAAK61C,GACZn8C,EAAKsG,KAAK1I,EAAGw+C,SAASD,EAAU77C,OAAQ67C,EAAU/9C,OAEpD,OAAS4B,KAAMA,EAAMjC,OAAQA,GAG/B,QAASs+C,IAAoBC,EAAOC,GAClCD,EAAMh0C,aAAa,cAAe,OAClCg0C,EAAMh0C,aAAa,iBAAkB,OACrCg0C,EAAMh0C,aAAa,eAAgBi0C,GAGrC,QAASC,MACP,GAAIC,GAAKt7C,EAAI,WAAY,KAAM,KAAM,wFACjCu7C,EAAMv7C,EAAI,OAAQs7C,GAAK,KAAM,iEAejC,OAVIhuC,IACFguC,EAAGx0C,MAAMwiB,MAAQ,SAEjBgyB,EAAGn0C,aAAa,OAAQ,OAGtBq0C,KACFF,EAAGx0C,MAAM20C,OAAS,mBAEpBP,GAAoBI,GACbC,EAylBT,QAASG,IAAU7vC,EAAK7O,EAAKqO,EAAK4oC,EAAM77B,GAItC,QAASujC,KACP,GAAI7hD,GAAIkD,EAAIgC,KAAOqM,CACnB,SAAIvR,EAAI+R,EAAI+B,OAAS9T,GAAK+R,EAAI+B,MAAQ/B,EAAI+D,QAG1C5S,EAAM,GAAI+B,GAAIjF,EAAGkD,EAAIkB,GAAIlB,EAAImU,QACtBgG,EAAUvX,EAAQiM,EAAK/R,IAEhC,QAAS8hD,GAASC,GAChB,GAAIj7C,EAMJ,IAAY,OAJVA,EADEwX,EACKO,GAAa9M,EAAIpP,GAAI0a,EAASna,EAAKqO,GAEnC6M,GAAcf,EAASna,EAAKqO,IAEnB,CAChB,GAAKwwC,IAAeF,IAGlB,OAAO,CAFP3+C,GAAMmb,GAAUC,EAAUvM,EAAIpP,GAAI0a,EAASna,EAAIgC,KAAMqM,OAKvDrO,GAAM4D,CAER,QAAO,EA3BT,GAAI0nC,GAAStrC,EACT8+C,EAAUzwC,EACV8L,EAAUvX,EAAQiM,EAAK7O,EAAIgC,KA4B/B,IAAY,QAARi1C,EACF2H,QACK,IAAY,UAAR3H,EACT2H,GAAS,OACJ,IAAY,QAAR3H,GAA0B,SAARA,EAI3B,IAAK,GAHD8H,GAAU,KACV/1B,EAAgB,SAARiuB,EACRppC,EAASgB,EAAIpP,IAAMoP,EAAIpP,GAAGu/C,UAAUh/C,EAAK,aACpC4Q,GAAQ,IACXvC,EAAM,IAAMuwC,GAAUhuC,GADJA,GAAQ,EAAO,CAIrC,GAAI1L,GAAMiV,EAAQtY,KAAKJ,OAAOzB,EAAIkB,KAAO,KACrCI,EAAOsM,EAAW1I,EAAK2I,GAAU,IAAMmb,GAAgB,MAAP9jB,EAAc,KAAO8jB,GAAS,KAAKznB,KAAK2D,GAAO,KAAO,GAI1G,KAHI8jB,GAAUpY,GAAUtP,IACtBA,EAAO,KAELy9C,GAAWA,GAAWz9C,EAAM,CAC1B+M,EAAM,IACRA,EAAM,EAAEuwC,IAAW5+C,EAAImU,OAAS,QAElC,OAMF,GAHI7S,IACFy9C,EAAUz9C,GAER+M,EAAM,IAAMuwC,GAAUhuC,GACxB,MAIN,GAAIwR,GAAS+oB,GAAWt8B,EAAK7O,EAAKsrC,EAAQwT,GAAS,EAInD,OAHI1qC,GAAek3B,EAAQlpB,KACzBA,EAAO68B,SAAU,GAEZ78B,EAMT,QAAS88B,IAAUz/C,EAAIO,EAAKqO,EAAK4oC,GAC/B,GAEInkB,GAFAjkB,EAAMpP,EAAGoP,IACTyF,EAAItU,EAAIqf,IAEZ,IAAY,QAAR43B,EAAgB,CAClB,GAAIkI,GAAWh8C,KAAKC,IAAI3D,EAAG8a,QAAQtK,QAAQ4d,aAAcT,OAAO4L,aAAeh7B,SAASozB,gBAAgBvD,cACpGuxB,EAAaj8C,KAAKoC,IAAI45C,EAAW,GAAKzrB,GAAWj0B,EAAG8a,SAAU,EAClEuY,IAAKzkB,EAAM,EAAIrO,EAAIquB,OAASruB,EAAI0b,KAAOrN,EAAM+wC,MAC5B,QAARnI,IACTnkB,EAAIzkB,EAAM,EAAIrO,EAAIquB,OAAS,EAAIruB,EAAI0b,IAAM,EAG3C,KADA,GAAIjQ,GAEFA,EAASonB,GAAYpzB,EAAI6U,EAAGwe,GACvBrnB,EAAOknB,SAFL,CAKP,GAAItkB,EAAM,EAAIykB,GAAK,EAAIA,GAAKjkB,EAAIuE,OAAQ,CACtC3H,EAAOwzC,SAAU,CAAK,OAExBnsB,GAAW,EAANzkB,EAEP,MAAO5C,GAkcT,QAAS4zC,IAAS5/C,EAAIO,GACpB,GAAI+Q,GAAO4d,GAAgBlvB,EAAIO,EAAIgC,KACnC,KAAK+O,GAAQA,EAAKuX,OAChB,MAAO,KAET,IAAItmB,GAAOY,EAAQnD,EAAGoP,IAAK7O,EAAIgC,MAC3BC,EAAOqsB,GAAgBvd,EAAM/O,EAAMhC,EAAIgC,MAEvCyY,EAAQK,GAAS9Y,EAAMvC,EAAGoP,IAAIkM,WAC9BukC,EAAO,MACX,IAAI7kC,EAAO,CAET6kC,EADc1kC,GAAcH,EAAOza,EAAIkB,IACtB,EAAI,QAAU,OAEjC,GAAIkhB,GAASmN,GAAuBttB,EAAKiC,IAAKlE,EAAIkB,GAAIo+C,EAEtD,OADAl9B,GAAOxL,OAA4B,SAAnBwL,EAAOoN,SAAsBpN,EAAOnhB,IAAMmhB,EAAO3f,MAC1D2f,EAGT,QAASm9B,IAAWz0C,GAClB,IAAK,GAAI00C,GAAO10C,EAAM00C,EAAMA,EAAOA,EAAKj1C,WACtC,GAAI,4BAA4BhJ,KAAKi+C,EAAKx5C,WACxC,OAAO,CAGX,QAAO,EAGT,QAASy5C,IAAOz/C,EAAK0/C,GAGlB,MAFGA,KACF1/C,EAAI0/C,KAAM,GACJ1/C,EAGV,QAAS2/C,IAAelgD,EAAI6F,EAAM3B,EAAI+yB,EAAUC,GAI9C,QAASipB,GAAgB9mC,GACvB,MAAO,UAAU1D,GACf,MAAOA,GAAO0D,IAAMA,GAGxB,QAAShT,KACH+5C,IACFh+C,GAAQi+C,EACRD,GAAU,GAGd,QAASE,GAAQ3xC,GACXA,IACFtI,IACAjE,GAAQuM,GAGZ,QAAS4xC,GAAKl1C,GACZ,GAAqB,GAAjBA,EAAKR,SAAe,CACtB,GAAI21C,GAASn1C,EAAKvN,aAAa,UAC/B,IAAc,MAAV0iD,EAEF,WADAF,GAAQE,GAAUn1C,EAAKo1C,YAAY96B,QAAQ,UAAW,IAGxD,IACIiQ,GADA8qB,EAAWr1C,EAAKvN,aAAa,YAEjC,IAAI4iD,EAAU,CACZ,GAAI75C,GAAQ7G,EAAG2vC,UAAUrtC,EAAI20B,EAAU,GAAI30B,EAAI40B,EAAS,EAAG,GAAIipB,GAAiBO,GAIhF,aAHI75C,EAAMrJ,SAAWo4B,EAAW/uB,EAAM,GAAGuR,KAAK,KAC5CkoC,EAAQ9sC,EAAWxT,EAAGoP,IAAKwmB,EAAS/vB,KAAM+vB,EAAS1xB,IAAI8sC,KAAKqP,KAIhE,GAA4C,SAAxCh1C,EAAKvN,aAAa,mBACpB,MAEF,IAAI6iD,GAAU,iBAAiB7+C,KAAKuJ,EAAKu1C,SACrCD,IACFt6C,GAEF,KAAK,GAAIpJ,GAAI,EAAGA,EAAIoO,EAAKvB,WAAWtM,OAAQP,IAC1CsjD,EAAKl1C,EAAKvB,WAAW7M,GAEnB0jD,KACFP,GAAU,OAEc,IAAjB/0C,EAAKR,UACdy1C,EAAQj1C,EAAKw1C,WAGjB,IArDA,GAAIz+C,GAAO,GACPg+C,GAAU,EACVC,EAAUrgD,EAAGoP,IAAI6hC,gBAoDnBsP,EAAK16C,GACDA,GAAQ3B,GAGZ2B,EAAOA,EAAKqmB,WAEd,OAAO9pB,GAGT,QAAS0+C,IAAS9gD,EAAIqL,EAAM8L,GAC1B,GAAI4pC,EACJ,IAAI11C,GAAQrL,EAAG8a,QAAQrL,QAAS,CAE9B,KADAsxC,EAAW/gD,EAAG8a,QAAQrL,QAAQ3F,WAAWqN,IAEvC,MAAO6oC,IAAOhgD,EAAG4vC,QAAQttC,EAAItC,EAAG8a,QAAQ5J,OAAS,KAAK,EAExD7F,GAAO,KAAK8L,EAAS,MAErB,KAAK4pC,EAAW11C,GAAO01C,EAAWA,EAASj2C,WAAY,CACrD,IAAKi2C,GAAYA,GAAY/gD,EAAG8a,QAAQrL,QACtC,MAAO,KAET,IAAIsxC,EAASj2C,YAAci2C,EAASj2C,YAAc9K,EAAG8a,QAAQrL,QAC3D,MAIN,IAAK,GAAIxS,GAAI,EAAGA,EAAI+C,EAAG8a,QAAQxJ,KAAK9T,OAAQP,IAAK,CAC/C,GAAI4oB,GAAW7lB,EAAG8a,QAAQxJ,KAAKrU,EAC/B,IAAI4oB,EAASxa,MAAQ01C,EACnB,MAAOC,IAAqBn7B,EAAUxa,EAAM8L,IAKlD,QAAS6pC,IAAqBn7B,EAAUxa,EAAM8L,GA8B5C,QAASiB,GAAK6oC,EAAUC,EAAS/pC,GAC/B,IAAK,GAAIla,IAAK,EAAGA,GAAKspB,EAAOA,EAAK/oB,OAAS,GAAIP,IAE7C,IAAK,GADDogB,GAASpgB,EAAI,EAAI2S,EAAQnL,IAAM8hB,EAAKtpB,GAC/Bob,EAAI,EAAGA,EAAIgF,EAAO7f,OAAQ6a,GAAK,EAAG,CACzC,GAAI8oC,GAAU9jC,EAAOhF,EAAI,EACzB,IAAI8oC,GAAWF,GAAYE,GAAWD,EAAS,CAC7C,GAAI3+C,GAAOsR,EAAO5W,EAAI,EAAI4oB,EAAStjB,KAAOsjB,EAASK,KAAKjpB,IACpDwE,EAAK4b,EAAOhF,GAAKlB,CAIrB,QAHIA,EAAS,GAAKgqC,GAAWF,KAC3Bx/C,EAAK4b,EAAOhF,GAAKlB,EAAS,EAAI,KAEzB7U,EAAIC,EAAMd,KAxCzB,GAAI+O,GAAUqV,EAASzjB,KAAK4H,WACxBi2C,GAAM,CACV,KAAK50C,IAASV,EAAS6F,EAASnF,GAC9B,MAAO20C,IAAO19C,EAAIuR,EAAOgS,EAAStjB,MAAO,IAAI,EAE/C,IAAI8I,GAAQmF,IACVyvC,GAAM,EACN50C,EAAOmF,EAAQ1G,WAAWqN,GAC1BA,EAAS,GACJ9L,GAAM,CACT,GAAI9I,GAAOsjB,EAASK,KAAOjZ,EAAI4Y,EAASK,MAAQL,EAAStjB,IACzD,OAAOy9C,IAAO19C,EAAIuR,EAAOtR,GAAOA,EAAKH,KAAK5E,QAASyiD,GAIvD,GAAIgB,GAA4B,GAAjB51C,EAAKR,SAAgBQ,EAAO,KACvC61C,EAAU71C,CAOd,KANK41C,GAAsC,GAA1B51C,EAAKvB,WAAWtM,QAA2C,GAA5B6N,EAAKrB,WAAWa,WAC9Do2C,EAAW51C,EAAKrB,WACZmN,IACFA,EAAS8pC,EAASJ,UAAUrjD,SAGzB0jD,EAAQp2C,YAAc0F,GAC3B0wC,EAAUA,EAAQp2C,UAEpB,IAAI8E,GAAUiW,EAASjW,QACnB2W,EAAO3W,EAAQ2W,KAkBf1f,EAAQuR,EAAK6oC,EAAUC,EAAS/pC,EACpC,IAAItQ,EACF,MAAOm5C,IAAOn5C,EAAOo5C,EAIvB,KAAK,GAAIn7B,GAAQo8B,EAAQh1B,YAAak1B,EAAOH,EAAWA,EAASJ,UAAUrjD,OAAS2Z,EAAS,EAAG2N,EAAOA,EAAQA,EAAMoH,YAAa,CAEhI,GADArlB,EAAQuR,EAAK0M,EAAOA,EAAM9a,WAAY,GAEpC,MAAOg2C,IAAO19C,EAAIuE,EAAMtE,KAAMsE,EAAMpF,GAAK2/C,GAAOnB,EAEhDmB,IAAQt8B,EAAM27B,YAAYjjD,OAG9B,IAAK,GAAIsxB,GAASoyB,EAAQG,gBAAiBC,EAASnqC,EAAQ2X,EAAQA,EAASA,EAAOuyB,gBAAiB,CAEnG,GADAx6C,EAAQuR,EAAK0W,EAAQA,EAAO9kB,YAAa,GAEvC,MAAOg2C,IAAO19C,EAAIuE,EAAMtE,KAAMsE,EAAMpF,GAAK6/C,GAASrB,EAElDqB,IAAUxyB,EAAO2xB,YAAYjjD,QAwanC,QAASiB,IAAa8iD,EAAUjtC,GAgB9B,QAASuO,KACP0+B,EAASl0C,MAAQrN,EAAGwhD,WANtB,GAVAltC,EAAUA,EAAUvI,EAAQuI,MAC5BA,EAAQjH,MAAQk0C,EAASl0C,OACpBiH,EAAQmtC,UAAYF,EAASG,WAChCptC,EAAQmtC,SAAWF,EAASG,WAEzBptC,EAAQqtC,aAAeJ,EAASI,cACnCrtC,EAAQqtC,YAAcJ,EAASI,aAIR,MAArBrtC,EAAQ2mC,UAAmB,CAC7B,GAAInc,GAAW9zB,GACfsJ,GAAQ2mC,UAAYnc,GAAYyiB,GAAkD,MAAtCA,EAASzjD,aAAa,cAAwBghC,GAAYvgC,SAAS2M,KAOjH,GAAI02C,EACJ,IAAIL,EAASM,OACXl7C,GAAG46C,EAASM,KAAM,SAAUh/B,IAEvBvO,EAAQwtC,wBAAwB,CACnC,GAAID,GAAON,EAASM,IACpBD,GAAaC,EAAKE,MAClB,KACE,GAAIC,GAAgBH,EAAKE,OAAS,WAChCl/B,IACAg/B,EAAKE,OAASH,EACdC,EAAKE,SACLF,EAAKE,OAASC,GAEhB,MAAOvlD,KAIb6X,EAAQ8mC,WAAa,SAAUp7C,GAC7BA,EAAG6iB,KAAOA,EACV7iB,EAAGiiD,YAAc,WACf,MAAOV,IAETvhD,EAAGkiD,WAAa,WACdliD,EAAGkiD,WAAal0B,MAChBnL,IACA0+B,EAASz2C,WAAWf,YAAY/J,EAAGmiD,qBACnCZ,EAASl3C,MAAMyQ,QAAU,GACrBymC,EAASM,OACXn7C,GAAI66C,EAASM,KAAM,SAAUh/B,GACM,kBAAxB0+B,GAASM,KAAKE,SACvBR,EAASM,KAAKE,OAASH,MAM/BL,EAASl3C,MAAMyQ,QAAU,MACzB,IAAI9a,GAAKy6C,GAAa,SAAUpvC,GAC9B,MAAOk2C,GAASz2C,WAAWggB,aAAazf,EAAMk2C,EAASr1B,cACtD5X,EACH,OAAOtU,GA7qXT,GAAIoiD,IAAYC,UAAUD,UACtBE,GAAWD,UAAUC,SAErBxxC,GAAQ,aAAahP,KAAKsgD,IAC1BG,GAAY,UAAUzgD,KAAKsgD,IAC3BI,GAAU,wCAAwCt6C,KAAKk6C,IACvDK,GAAO,cAAcv6C,KAAKk6C,IAC1B3xC,GAAK8xC,IAAaC,IAAWC,GAC7B/xC,GAAaD,KAAO8xC,GAAYhkD,SAASmkD,cAAgB,IAAMD,IAAQD,IAAS,IAChF3xC,IAAU4xC,IAAQ,WAAW3gD,KAAKsgD,IAClCO,GAAW9xC,IAAU,eAAe/O,KAAKsgD,IACzC5wB,IAAUixB,IAAQ,WAAW3gD,KAAKsgD,IAClC9d,GAAS,UAAUxiC,KAAKsgD,IACxBxQ,GAAS,iBAAiB9vC,KAAKugD,UAAUO,QACzCC,GAAqB,+BAA+B/gD,KAAKsgD,IACzD5oB,GAAU,YAAY13B,KAAKsgD,IAE3BrD,IAAO0D,IAAQ,cAAc3gD,KAAKsgD,KAAc,cAActgD,KAAKsgD,IACnE3wB,GAAU,UAAU3vB,KAAKsgD,IAEzBrxC,GAASguC,IAAOttB,IAAW,mDAAmD3vB,KAAKsgD,IACnFpjC,GAAM+/B,IAAO,MAAMj9C,KAAKwgD,IACxB7K,GAAW,WAAW31C,KAAKsgD,IAC3BU,GAAU,OAAOhhD,KAAKwgD,IAEtBS,GAAiBze,IAAU8d,GAAUr8C,MAAM,sBAC3Cg9C,MACFA,GAAiBvY,OAAOuY,GAAe,KAErCA,IAAkBA,IAAkB,KACtCze,IAAS,EAAMzzB,IAAS,EAG1B,IAmDIlL,IAnDAkuC,GAAc70B,KAAQ2jC,IAAYre,KAA6B,MAAlBye,IAA0BA,GAAiB,QACxF3L,GAAoBtmC,IAASL,IAAMC,IAAc,EAMjD2nB,GAAU,SAAiBhtB,EAAM1B,GACnC,GAAI2B,GAAUD,EAAK9E,UACfR,EAAQ2D,EAAUC,GAAKzB,KAAKoD,EAChC,IAAIvF,EAAO,CACT,GAAI+e,GAAQxZ,EAAQ5J,MAAMqE,EAAMoC,MAAQpC,EAAM,GAAGvI,OACjD6N,GAAK9E,UAAY+E,EAAQ5J,MAAM,EAAGqE,EAAMoC,QAAU2c,EAAQ/e,EAAM,GAAK+e,EAAQ,KAyC/Enf,IADEpH,SAASujC,YACH,SAAez2B,EAAMrI,EAAOxB,EAAKwhD,GACvC,GAAIpmD,GAAI2B,SAASujC,aAGjB,OAFAllC,GAAEmlC,OAAOihB,GAAW33C,EAAM7J,GAC1B5E,EAAEqmD,SAAS53C,EAAMrI,GACVpG,GAGD,SAAeyO,EAAMrI,EAAOxB,GAClC,GAAI5E,GAAI2B,SAAS2M,KAAKg4C,iBACtB,KACEtmD,EAAEumD,kBAAkB93C,EAAKP,YACzB,MAAOrO,GACP,MAAOG,GAKT,MAHAA,GAAEmzB,UAAS,GACXnzB,EAAEwmD,QAAQ,YAAa5hD,GACvB5E,EAAEymD,UAAU,YAAargD,GAClBpG,EAsDX,IAAI0mD,IAAc,SAAqBj4C,GACrCA,EAAKk4C,SAEHxE,IAEAuE,GAAc,SAAqBj4C,GACjCA,EAAKm4C,eAAiB,EAAEn4C,EAAKo4C,aAAep4C,EAAKgC,MAAM7P,QAEhDiT,KAET6yC,GAAc,SAAqBj4C,GACjC,IACEA,EAAKk4C,SACL,MAAOG,MA2Cf,IAAI1I,IAAU,WACZn9C,KAAKwb,GAAK,KAEZ2hC,IAAQ3+C,UAAU0hB,IAAM,SAAU4lC,EAAIzmD,GACpC++C,aAAap+C,KAAKwb,IAClBxb,KAAKwb,GAAK0Q,WAAW7sB,EAAGymD,GAa1B,IA66CIxkC,IAeAI,GA57CAnP,GAAc,GAIdlQ,IAAS0mB,SAAU,WACnB,MAAO,oBAIPwlB,IAAmBjI,QAAQ,GAC3B+U,IAAclQ,OAAQ,UACtB4a,IAAa5a,OAAQ,SAuBrBh8B,IAAa,IA6CbkB,GAA6B,4GA6B7BO,GAAiB,64DA6TjB8G,IAAmB,EACnBE,IAAoB,EA2fpB2F,GAAY,KAkDZG,GAAe,WAKjB,QAASsoC,GAASzmD,GAChB,MAAIA,IAAQ,IACH0mD,EAAS9hD,OAAO5E,GACd,MAASA,GAAQA,GAAQ,KAC3B,IACE,MAASA,GAAQA,GAAQ,KAC3B2mD,EAAY/hD,OAAO5E,EAAO,MACxB,MAASA,GAAQA,GAAQ,KAC3B,IACE,MAAUA,GAAQA,GAAQ,KAC5B,IACU,MAARA,EACF,IAEA,IAUX,QAAS4mD,GAAS9oC,EAAOrV,EAAM3B,GAC7BrG,KAAKqd,MAAQA,EACbrd,KAAKgI,KAAOA,EAAKhI,KAAKqG,GAAKA,EA7B7B,GAAI4/C,GAAW,2PAEXC,EAAc,6PAmBdE,EAAS,4CACTC,EAAY,SACZC,EAAW,QACXC,EAAe,SACfC,EAAc,MAOlB,OAAO,UAAU11C,EAAK2M,GACpB,GAAIgpC,GAAyB,OAAbhpC,EAAqB,IAAM,GAE3C,IAAkB,GAAd3M,EAAInR,QAA4B,OAAb8d,IAAuB2oC,EAAOniD,KAAK6M,GACxD,OAAO,CAIT,KAAK,GAFDiM,GAAMjM,EAAInR,OACV+mD,KACKtnD,EAAI,EAAGA,EAAI2d,IAAO3d,EACzBsnD,EAAM77C,KAAKm7C,EAASl1C,EAAIH,WAAWvR,IAOrC,KAAK,GAAIiX,GAAM,EAAGjQ,EAAOqgD,EAAWpwC,EAAM0G,IAAO1G,EAAK,CACpD,GAAIrS,GAAO0iD,EAAMrwC,EACL,MAARrS,EACF0iD,EAAMrwC,GAAOjQ,EAEbA,EAAOpC,EASX,IAAK,GAAI6V,GAAM,EAAGjS,EAAM6+C,EAAW5sC,EAAMkD,IAAOlD,EAAK,CACnD,GAAI8sC,GAASD,EAAM7sC,EACL,MAAV8sC,GAAwB,KAAP/+C,EACnB8+C,EAAM7sC,GAAO,IACJysC,EAASriD,KAAK0iD,KACvB/+C,EAAM++C,EAAqB,KAAVA,IACfD,EAAM7sC,GAAO,MAQnB,IAAK,GAAIC,GAAM,EAAG8sC,EAASF,EAAM,GAAI5sC,EAAMiD,EAAM,IAAKjD,EAAK,CACzD,GAAI+sC,GAASH,EAAM5sC,EACL,MAAV+sC,GAA2B,KAAVD,GAAmC,KAAlBF,EAAM5sC,EAAM,GAChD4sC,EAAM5sC,GAAO,IACM,KAAV+sC,GAAiBD,GAAUF,EAAM5sC,EAAM,IAAiB,KAAV8sC,GAA2B,KAAVA,IACxEF,EAAM5sC,GAAO8sC,GAEfA,EAASC,EAOX,IAAK,GAAIzmB,GAAM,EAAGA,EAAMrjB,IAAOqjB,EAAK,CAClC,GAAI0mB,GAASJ,EAAMtmB,EACnB,IAAc,KAAV0mB,EACFJ,EAAMtmB,GAAO,QACR,IAAc,KAAV0mB,EAAe,CACxB,GAAInjD,OAAM,EACV,KAAKA,EAAMy8B,EAAM,EAAGz8B,EAAMoZ,GAAqB,KAAd2pC,EAAM/iD,KAAeA,GAEtD,IAAK,GADDmkB,GAAUsY,GAAyB,KAAlBsmB,EAAMtmB,EAAM,IAAaz8B,EAAMoZ,GAAqB,KAAd2pC,EAAM/iD,GAAc,IAAM,IAC5E6W,EAAI4lB,EAAK5lB,EAAI7W,IAAO6W,EAC3BksC,EAAMlsC,GAAKsN,CAEbsY,GAAMz8B,EAAM,GAOhB,IAAK,GAAIojD,GAAM,EAAGC,EAAQP,EAAWM,EAAMhqC,IAAOgqC,EAAK,CACrD,GAAIE,GAASP,EAAMK,EACN,MAATC,GAA0B,KAAVC,EAClBP,EAAMK,GAAO,IACJT,EAASriD,KAAKgjD,KACvBD,EAAQC,GAUZ,IAAK,GAAIC,GAAM,EAAGA,EAAMnqC,IAAOmqC,EAC7B,GAAIb,EAAUpiD,KAAKyiD,EAAMQ,IAAO,CAC9B,GAAIC,OAAQ,EACZ,KAAKA,EAAQD,EAAM,EAAGC,EAAQpqC,GAAOspC,EAAUpiD,KAAKyiD,EAAMS,MAAWA,GAIrE,IAAK,GAHDl2B,GAA+C,MAArCi2B,EAAMR,EAAMQ,EAAM,GAAKT,GACjCx/B,EAAoD,MAA3CkgC,EAAQpqC,EAAM2pC,EAAMS,GAASV,GACtCW,EAAYn2B,GAAUhK,EAAQgK,EAAS,IAAM,IAAMw1B,EAC9C97B,EAAMu8B,EAAKv8B,EAAMw8B,IAASx8B,EACjC+7B,EAAM/7B,GAAOy8B,CAEfF,GAAMC,EAAQ,EAWlB,IAAK,GADD7sC,GADA6C,KAEKkqC,EAAM,EAAGA,EAAMtqC,GACtB,GAAIwpC,EAAatiD,KAAKyiD,EAAMW,IAAO,CACjC,GAAIliD,GAAQkiD,CACZ,OAAOA,EAAKA,EAAMtqC,GAAOwpC,EAAatiD,KAAKyiD,EAAMW,MAASA,GAC1DlqC,EAAMtS,KAAK,GAAIs7C,GAAS,EAAGhhD,EAAOkiD,QAC7B,CACL,GAAI3kD,GAAM2kD,EACN/+C,EAAK6U,EAAMxd,MACf,OAAO0nD,EAAKA,EAAMtqC,GAAqB,KAAd2pC,EAAMW,KAAeA,GAC9C,IAAK,GAAIz8B,GAAMloB,EAAKkoB,EAAMy8B,GACxB,GAAIb,EAAYviD,KAAKyiD,EAAM97B,IAAO,CAC5BloB,EAAMkoB,GACRzN,EAAMxN,OAAOrH,EAAI,EAAG,GAAI69C,GAAS,EAAGzjD,EAAKkoB,GAE3C,IAAI08B,GAAS18B,CACb,OAAOA,EAAKA,EAAMy8B,GAAOb,EAAYviD,KAAKyiD,EAAM97B,MAASA,GACzDzN,EAAMxN,OAAOrH,EAAI,EAAG,GAAI69C,GAAS,EAAGmB,EAAQ18B,IAC5CloB,EAAMkoB,QAEJA,CAGFloB,GAAM2kD,GACRlqC,EAAMxN,OAAOrH,EAAI,EAAG,GAAI69C,GAAS,EAAGzjD,EAAK2kD,IAa/C,MATsB,IAAlBlqC,EAAM,GAAGE,QAAe/C,EAAIxJ,EAAI5I,MAAM,WACxCiV,EAAM,GAAGnV,KAAOsS,EAAE,GAAG3a,OACrBwd,EAAMoqC,QAAQ,GAAIpB,GAAS,EAAG,EAAG7rC,EAAE,GAAG3a,UAEhB,GAApByP,EAAI+N,GAAOE,QAAe/C,EAAIxJ,EAAI5I,MAAM,WAC1CkH,EAAI+N,GAAO9W,IAAMiU,EAAE,GAAG3a,OACtBwd,EAAMtS,KAAK,GAAIs7C,GAAS,EAAGppC,EAAMzC,EAAE,GAAG3a,OAAQod,KAG5B,OAAbU,EAAqBN,EAAMqqC,UAAYrqC,MAmJ9CkC,MAEAvW,GAAK,SAAYqW,EAASnb,EAAM3E,GAClC,GAAI8f,EAAQ7d,iBACV6d,EAAQ7d,iBAAiB0C,EAAM3E,GAAG,OAC7B,IAAI8f,EAAQsoC,YACjBtoC,EAAQsoC,YAAY,KAAOzjD,EAAM3E,OAC5B,CACL,GAAImgB,GAASL,EAAQC,YAAcD,EAAQC,aAC3CI,GAAOxb,IAASwb,EAAOxb,IAASqb,IAAYhH,OAAOhZ,KA0HnD66C,GAAc,WAGhB,GAAItnC,IAAMC,GAAa,EACrB,OAAO,CAET,IAAIouC,GAAMv7C,EAAI,MACd,OAAO,aAAeu7C,IAAO,YAAcA,MAmCzCtB,GAA+C,GAA9B,QAAQ/xC,MAAM,MAAMjO,OAAc,SAAUuE,GAI/D,IAHA,GAAIxB,GAAM,EACNoiB,KACAtlB,EAAI0E,EAAOvE,OACR+C,GAAOlD,GAAG,CACf,GAAIkoD,GAAKxjD,EAAOE,QAAQ,KAAM1B,IACnB,GAAPglD,IACFA,EAAKxjD,EAAOvE,OAEd,IAAI+E,GAAOR,EAAOL,MAAMnB,EAA8B,MAAzBwB,EAAOC,OAAOujD,EAAK,GAAaA,EAAK,EAAIA,GAClEC,EAAKjjD,EAAKN,QAAQ,OACX,GAAPujD,GACF7iC,EAAOja,KAAKnG,EAAKb,MAAM,EAAG8jD,IAC1BjlD,GAAOilD,EAAK,IAEZ7iC,EAAOja,KAAKnG,GACZhC,EAAMglD,EAAK,GAGf,MAAO5iC,IACL,SAAU5gB,GACZ,MAAOA,GAAO0J,MAAM,aAGlBg6C,GAAe93B,OAAO2T,aAAe,SAAUud,GACjD,IACE,MAAOA,GAAG2E,gBAAkB3E,EAAG4E,aAC/B,MAAOhnD,GACP,OAAO,IAEP,SAAUoiD,GACZ,GAAIjpB,EACJ,KACEA,EAAWipB,EAAG6G,cAAchwB,UAAUoM,cACtC,MAAOrlC,IACT,SAAKm5B,GAAYA,EAAS+vB,iBAAmB9G,IAGe,GAArDjpB,EAASgwB,iBAAiB,aAAchwB,IAG7CogB,GAAe,WACjB,GAAIv5C,GAAI8G,EAAI,MACZ,OAAI,UAAY9G,KAGhBA,EAAEiO,aAAa,SAAU,WACC,kBAAZjO,GAAEopD,WAGd9lC,GAAiB,KAYjBK,MACAI,MA4EAI,MAgDA6C,GAAe,SAAsB1hB,EAAQsK,EAASy5C,GACxDjoD,KAAK0C,IAAM1C,KAAKmF,MAAQ,EACxBnF,KAAKkE,OAASA,EACdlE,KAAKwO,QAAUA,GAAW,EAC1BxO,KAAKkoD,cAAgBloD,KAAKmoD,gBAAkB,EAC5CnoD,KAAK22C,UAAY,EACjB32C,KAAKioD,WAAaA,EAGpBriC,IAAapnB,UAAUsnB,IAAM,WAC3B,MAAO9lB,MAAK0C,KAAO1C,KAAKkE,OAAOvE,QAEjCimB,GAAapnB,UAAU4pD,IAAM,WAC3B,MAAOpoD,MAAK0C,KAAO1C,KAAK22C,WAE1B/wB,GAAapnB,UAAU6pD,KAAO,WAC5B,MAAOroD,MAAKkE,OAAOC,OAAOnE,KAAK0C,UAAQhE,IAEzCknB,GAAapnB,UAAU8H,KAAO,WAC5B,GAAItG,KAAK0C,IAAM1C,KAAKkE,OAAOvE,OACzB,MAAOK,MAAKkE,OAAOC,OAAOnE,KAAK0C,QAGnCkjB,GAAapnB,UAAU8pD,IAAM,SAAUpgD,GACrC,GAAItE,GAAK5D,KAAKkE,OAAOC,OAAOnE,KAAK0C,IAOjC,IALoB,gBAATwF,GACJtE,GAAMsE,EAENtE,IAAOsE,EAAMjE,KAAOiE,EAAMjE,KAAKL,GAAMsE,EAAMtE,IAGrC,QAAT5D,KAAK0C,IAAWkB,GAGtBgiB,GAAapnB,UAAU+pD,SAAW,SAAUrgD,GAE1C,IADA,GAAI/C,GAAQnF,KAAK0C,IACV1C,KAAKsoD,IAAIpgD,KAChB,MAAOlI,MAAK0C,IAAMyC,GAEpBygB,GAAapnB,UAAUgqD,SAAW,WAIhC,IAHA,GAAIpb,GAASptC,KAETmF,EAAQnF,KAAK0C,IACV,aAAauB,KAAKjE,KAAKkE,OAAOC,OAAOnE,KAAK0C,SAC7C0qC,EAAO1qC,GAEX,OAAO1C,MAAK0C,IAAMyC,GAEpBygB,GAAapnB,UAAUiqD,UAAY,WACjCzoD,KAAK0C,IAAM1C,KAAKkE,OAAOvE,QAEzBimB,GAAapnB,UAAUkqD,OAAS,SAAU9kD,GACxC,GAAIoF,GAAQhJ,KAAKkE,OAAOE,QAAQR,EAAI5D,KAAK0C,IACzC,IAAIsG,GAAS,EACM,MAAjBhJ,MAAK0C,IAAMsG,GAAa,GAG5B4c,GAAapnB,UAAUmqD,OAAS,SAAU7pD,GACxCkB,KAAK0C,KAAO5D,GAEd8mB,GAAapnB,UAAUoqD,OAAS,WAK9B,MAJI5oD,MAAKkoD,cAAgBloD,KAAKmF,QAC5BnF,KAAKmoD,gBAAkB55C,EAAYvO,KAAKkE,OAAQlE,KAAKmF,MAAOnF,KAAKwO,QAASxO,KAAKkoD,cAAeloD,KAAKmoD,iBACnGnoD,KAAKkoD,cAAgBloD,KAAKmF,OAErBnF,KAAKmoD,iBAAmBnoD,KAAK22C,UAAYpoC,EAAYvO,KAAKkE,OAAQlE,KAAK22C,UAAW32C,KAAKwO,SAAW,IAE3GoX,GAAapnB,UAAUqgD,YAAc,WACnC,MAAOtwC,GAAYvO,KAAKkE,OAAQ,KAAMlE,KAAKwO,UAAYxO,KAAK22C,UAAYpoC,EAAYvO,KAAKkE,OAAQlE,KAAK22C,UAAW32C,KAAKwO,SAAW,IAEnIoX,GAAapnB,UAAU0J,MAAQ,SAAU2gD,EAASC,EAASC,GACzD,GAAsB,gBAAXF,GAWJ,CACL,GAAI3gD,GAAQlI,KAAKkE,OAAOL,MAAM7D,KAAK0C,KAAKwF,MAAM2gD,EAC9C,OAAI3gD,IAASA,EAAMoC,MAAQ,EAClB,MAELpC,IAAqB,IAAZ4gD,IACX9oD,KAAK0C,KAAOwF,EAAM,GAAGvI,QAEhBuI,GAlBP,GAAI8gD,GAAQ,SAAel4C,GACzB,MAAOi4C,GAAkBj4C,EAAI/M,cAAgB+M,EAG/C,IAAIk4C,EADShpD,KAAKkE,OAAO+kD,OAAOjpD,KAAK0C,IAAKmmD,EAAQlpD,UAC7BqpD,EAAMH,GAIzB,OAHgB,IAAZC,IACF9oD,KAAK0C,KAAOmmD,EAAQlpD,SAEf,GAabimB,GAAapnB,UAAUiP,QAAU,WAC/B,MAAOzN,MAAKkE,OAAOL,MAAM7D,KAAKmF,MAAOnF,KAAK0C,MAE5CkjB,GAAapnB,UAAU0qD,eAAiB,SAAUpqD,EAAGgE,GACnD9C,KAAK22C,WAAa73C,CAClB,KACE,MAAOgE,KACP,QACA9C,KAAK22C,WAAa73C,IAGtB8mB,GAAapnB,UAAU2oB,UAAY,SAAUroB,GAC3C,GAAIqqD,GAASnpD,KAAKioD,UAClB,OAAOkB,IAAUA,EAAOhiC,UAAUroB,GAGpC,IAAIooB,IAAe,SAAsBjkB,EAAOkkB,GAC9CnnB,KAAKiD,MAAQA,EACbjD,KAAKmnB,UAAYA,GAGf9B,GAAU,SAAiB9T,EAAKtO,EAAOyB,EAAMyiB,GAC/CnnB,KAAKiD,MAAQA,EACbjD,KAAKuR,IAAMA,EACXvR,KAAK0E,KAAOA,EACZ1E,KAAKopD,aAAejiC,GAAa,EAGnC9B,IAAQ7mB,UAAU2oB,UAAY,SAAUroB,GACtC,GAAI4F,GAAO1E,KAAKuR,IAAIjM,QAAQtF,KAAK0E,KAAO5F,EAIxC,OAHY,OAAR4F,GAAgB5F,EAAIkB,KAAKopD,eAC3BppD,KAAKopD,aAAetqD,GAEf4F,GAGT2gB,GAAQ7mB,UAAUkL,SAAW,WAC3B1J,KAAK0E,OACD1E,KAAKopD,aAAe,GACtBppD,KAAKopD,gBAIT/jC,GAAQG,UAAY,SAAUjU,EAAKgU,EAAO7gB,GACxC,MAAI6gB,aAAiB2B,IACZ,GAAI7B,IAAQ9T,EAAK+R,GAAU/R,EAAIvQ,KAAMukB,EAAMtiB,OAAQyB,EAAM6gB,EAAM4B,WAE/D,GAAI9B,IAAQ9T,EAAK+R,GAAU/R,EAAIvQ,KAAMukB,GAAQ7gB,IAIxD2gB,GAAQ7mB,UAAUwmB,KAAO,SAAUunB,GACjC,GAAItpC,IAAiB,IAATspC,EAAiBjpB,GAAUtjB,KAAKuR,IAAIvQ,KAAMhB,KAAKiD,OAASjD,KAAKiD,KACzE,OAAOjD,MAAKopD,aAAe,EAAI,GAAIliC,IAAajkB,EAAOjD,KAAKopD,cAAgBnmD,EA+I9E,IAAIojB,IAAQ,SAAeV,EAAQ3hB,EAAMf,GACvCjD,KAAKmF,MAAQwgB,EAAOxgB,MAAMnF,KAAK2D,IAAMgiB,EAAOjjB,IAC5C1C,KAAKkE,OAASyhB,EAAOlY,UACrBzN,KAAKgE,KAAOA,GAAQ,KACpBhE,KAAKiD,MAAQA,GAkJXslC,GAAO,SAAchkC,EAAM6T,EAAamP,GAC1CvnB,KAAKuE,KAAOA,EACZwW,GAAkB/a,KAAMoY,GACxBpY,KAAK8V,OAASyR,EAAiBA,EAAevnB,MAAQ,EAGxDuoC,IAAK/pC,UAAUwX,OAAS,WACtB,MAAOA,GAAOhW,OAEhBsgB,GAAWioB,GAiCX,IAwzCIlS,IAxzCAxO,MACAD,MAiXAyD,GAAiB,KA+CjBY,GAAyB,KAiczBuG,IAAazQ,KAAM,EAAGC,MAAO,EAAG5D,IAAK,EAAG2S,OAAQ,GAysChDs4B,GAAmB,SAA0B/3C,EAAOg1B,EAAQnkC,GAC9DnC,KAAKmC,GAAKA,CACV,IAAImnD,GAAOtpD,KAAKspD,KAAO5jD,EAAI,OAAQA,EAAI,MAAO,KAAM,KAAM,mBAAoB,yBAC1E6jD,EAAQvpD,KAAKupD,MAAQ7jD,EAAI,OAAQA,EAAI,MAAO,KAAM,KAAM,kCAAmC,wBAC/F4L,GAAMg4C,GAAMh4C,EAAMi4C,GAElBzgD,GAAGwgD,EAAM,SAAU,WACbA,EAAK/4B,cACP+V,EAAOgjB,EAAKn1B,UAAW,cAG3BrrB,GAAGygD,EAAO,SAAU,WACdA,EAAM/5B,aACR8W,EAAOijB,EAAMx1B,WAAY,gBAI7B/zB,KAAKwpD,kBAAmB,EAEpB52C,IAAMC,GAAa,IACrB7S,KAAKupD,MAAM/8C,MAAMs4B,UAAY9kC,KAAKspD,KAAK98C,MAAMu0B,SAAW,QAI5DsoB,IAAiB7qD,UAAUsgC,OAAS,SAAU/sB,GAC5C,GAAI03C,GAAS13C,EAAQmsB,YAAcnsB,EAAQyd,YAAc,EACrDk6B,EAAS33C,EAAQgsB,aAAehsB,EAAQwe,aAAe,EACvDo5B,EAAS53C,EAAQiC,cAErB,IAAI01C,EAAQ,CACV1pD,KAAKspD,KAAK98C,MAAMyQ,QAAU,QAC1Bjd,KAAKspD,KAAK98C,MAAMukB,OAAS04B,EAASE,EAAS,KAAO,GAClD,IAAIC,GAAc73C,EAAQssB,YAAcorB,EAASE,EAAS,EAE1D3pD,MAAKspD,KAAKn9C,WAAWK,MAAMsJ,OAASjQ,KAAKoC,IAAI,EAAG8J,EAAQgsB,aAAehsB,EAAQwe,aAAeq5B,GAAe,SAE7G5pD,MAAKspD,KAAK98C,MAAMyQ,QAAU,GAC1Bjd,KAAKspD,KAAKn9C,WAAWK,MAAMsJ,OAAS,GAGtC,IAAI2zC,EAAQ,CACVzpD,KAAKupD,MAAM/8C,MAAMyQ,QAAU,QAC3Bjd,KAAKupD,MAAM/8C,MAAMwV,MAAQ0nC,EAASC,EAAS,KAAO,IAClD3pD,KAAKupD,MAAM/8C,MAAMuV,KAAOhQ,EAAQwsB,QAAU,IAC1C,IAAIsrB,GAAa93C,EAAQusB,UAAYvsB,EAAQwsB,SAAWmrB,EAASC,EAAS,EAC1E3pD,MAAKupD,MAAMp9C,WAAWK,MAAMwiB,MAAQnpB,KAAKoC,IAAI,EAAG8J,EAAQmsB,YAAcnsB,EAAQyd,YAAcq6B,GAAc,SAE1G7pD,MAAKupD,MAAM/8C,MAAMyQ,QAAU,GAC3Bjd,KAAKupD,MAAMp9C,WAAWK,MAAMwiB,MAAQ,GAUtC,QAPKhvB,KAAKwpD,kBAAoBz3C,EAAQwe,aAAe,IACrC,GAAVo5B,GACF3pD,KAAK8pD,gBAEP9pD,KAAKwpD,kBAAmB,IAGjBxnC,MAAO0nC,EAASC,EAAS,EAAG54B,OAAQ04B,EAASE,EAAS,IAGjEN,GAAiB7qD,UAAUg+B,cAAgB,SAAU95B,GAC/C1C,KAAKupD,MAAMx1B,YAAcrxB,IAC3B1C,KAAKupD,MAAMx1B,WAAarxB,GAEtB1C,KAAK+pD,cACP/pD,KAAKgqD,mBAAmBhqD,KAAKupD,MAAOvpD,KAAK+pD,aAAc,UAI3DV,GAAiB7qD,UAAUo/B,aAAe,SAAUl7B,GAC9C1C,KAAKspD,KAAKn1B,WAAazxB,IACzB1C,KAAKspD,KAAKn1B,UAAYzxB,GAEpB1C,KAAKiqD,aACPjqD,KAAKgqD,mBAAmBhqD,KAAKspD,KAAMtpD,KAAKiqD,YAAa,SAIzDZ,GAAiB7qD,UAAUsrD,cAAgB,WACzC,GAAII,GAAI/oC,KAAQ6jC,GAAqB,OAAS,MAC9ChlD,MAAKupD,MAAM/8C,MAAMsJ,OAAS9V,KAAKspD,KAAK98C,MAAMwiB,MAAQk7B,EAClDlqD,KAAKupD,MAAM/8C,MAAM29C,cAAgBnqD,KAAKspD,KAAK98C,MAAM29C,cAAgB,OACjEnqD,KAAK+pD,aAAe,GAAI5M,IACxBn9C,KAAKiqD,YAAc,GAAI9M,KAGzBkM,GAAiB7qD,UAAUwrD,mBAAqB,SAAUI,EAAKC,EAAOrmD,GAEpE,QAASsmD,KAOP,GAAIn0B,GAAMi0B,EAAIvoC,yBACO,QAAR7d,EAAiBtD,SAAS6pD,iBAAiBp0B,EAAInU,MAAQ,GAAImU,EAAI/X,IAAM+X,EAAIpF,QAAU,GAAKrwB,SAAS6pD,kBAAkBp0B,EAAInU,MAAQmU,EAAIpU,MAAQ,EAAGoU,EAAIpF,OAAS,KAC1Jq5B,EACZA,EAAI59C,MAAM29C,cAAgB,OAE1BE,EAAMnqC,IAAI,IAAMoqC,GAbpBF,EAAI59C,MAAM29C,cAAgB,OAgB1BE,EAAMnqC,IAAI,IAAMoqC,IAGlBjB,GAAiB7qD,UAAU6I,MAAQ,WACjC,GAAIgF,GAASrM,KAAKupD,MAAMt8C,UACxBZ,GAAOH,YAAYlM,KAAKupD,OACxBl9C,EAAOH,YAAYlM,KAAKspD,MAG1B,IAAIkB,IAAiB,YAErBA,IAAehsD,UAAUsgC,OAAS,WAChC,OAAS/N,OAAQ,EAAG/O,MAAO,IAE7BwoC,GAAehsD,UAAUg+B,cAAgB,aACzCguB,GAAehsD,UAAUo/B,aAAe,aACxC4sB,GAAehsD,UAAU6I,MAAQ,YA4CjC,IAAI83B,KAAmBsrB,OAAUpB,GAAkBqB,KAAQF,IAuCvD3qB,GAAW,EAofXW,GAAgB,SAAuBr+B,EAAI04B,EAAUyJ,GACvD,GAAIrnB,GAAU9a,EAAG8a,OAEjBjd,MAAK66B,SAAWA,EAEhB76B,KAAKukC,QAAU3J,GAAa3d,EAAS9a,EAAGoP,IAAKspB,GAC7C76B,KAAKqkC,gBAAkBpnB,EAAQtK,QAAQ6O,YACvCxhB,KAAK0kC,cAAgBznB,EAAQtK,QAAQ4d,aACrCvwB,KAAKivB,aAAehS,EAAQtK,QAAQ6c,YACpCxvB,KAAK+kC,gBAAkB1U,GAAaluB,GACpCnC,KAAKskC,MAAQA,EACbtkC,KAAKssB,KAAOiF,GAAcpvB,GAC1BnC,KAAKosC,UAGP5L,IAAchiC,UAAUihB,OAAS,SAAUN,EAASnb,GAC9Cqc,GAAWlB,EAASnb,IACtBhE,KAAKosC,OAAOvhC,KAAKmD,YAGrBwyB,GAAchiC,UAAU+iC,OAAS,WAG/B,IAAK,GAFD6L,GAASptC,KAEJZ,EAAI,EAAGA,EAAIY,KAAKosC,OAAOzsC,OAAQP,IACtCqgB,GAAOxR,MAAM,KAAMm/B,EAAOhB,OAAOhtC,IAiSrC,IAAIunC,IAAe,EACfP,GAAqB,IAKrBxzB,IACFwzB,IAAsB,IACbnzB,GACTmzB,GAAqB,GACZzS,GACTyS,IAAsB,GACb2N,KACT3N,IAAsB,EAAI,EAqH5B,IAAIgB,IAAY,SAAmB9kC,EAAQw1B,GACzC93B,KAAKsC,OAASA,EACdtC,KAAK83B,UAAYA,EAGnBsP,IAAU5oC,UAAUi5B,QAAU,WAC5B,MAAOz3B,MAAKsC,OAAOtC,KAAK83B,YAG1BsP,GAAU5oC,UAAUktC,OAAS,SAAU/iC,GACrC,GAAIykC,GAASptC,IAEb,IAAI2I,GAAS3I,KACX,OAAO,CAET,IAAI2I,EAAMmvB,WAAa93B,KAAK83B,WAAanvB,EAAMrG,OAAO3C,QAAUK,KAAKsC,OAAO3C,OAC1E,OAAO,CAET,KAAK,GAAIP,GAAI,EAAGA,EAAIY,KAAKsC,OAAO3C,OAAQP,IAAK,CAC3C,GAAImM,GAAO6hC,EAAO9qC,OAAOlD,GACrBurD,EAAQhiD,EAAMrG,OAAOlD,EACzB,KAAK0X,EAAevL,EAAK1G,OAAQ8lD,EAAM9lD,UAAYiS,EAAevL,EAAK5I,KAAMgoD,EAAMhoD,MACjF,OAAO,EAGX,OAAO,GAGTykC,GAAU5oC,UAAUiuC,SAAW,WAI7B,IAAK,GAHDW,GAASptC,KAETsP,KACKlQ,EAAI,EAAGA,EAAIY,KAAKsC,OAAO3C,OAAQP,IACtCkQ,EAAIlQ,GAAK,GAAI+nC,IAAMpwB,EAAQq2B,EAAO9qC,OAAOlD,GAAGyF,QAASkS,EAAQq2B,EAAO9qC,OAAOlD,GAAGuD,MAEhF,OAAO,IAAIykC,IAAU93B,EAAKtP,KAAK83B,YAGjCsP,GAAU5oC,UAAUmJ,kBAAoB,WAGtC,IAAK,GAFDylC,GAASptC,KAEJZ,EAAI,EAAGA,EAAIY,KAAKsC,OAAO3C,OAAQP,IACtC,IAAKguC,EAAO9qC,OAAOlD,GAAGqD,QACpB,OAAO,CAGX,QAAO,GAGT2kC,GAAU5oC,UAAUsO,SAAW,SAAUpK,EAAKiB,GAC5C,GAAIypC,GAASptC,IAER2D,KACHA,EAAMjB,EAER,KAAK,GAAItD,GAAI,EAAGA,EAAIY,KAAKsC,OAAO3C,OAAQP,IAAK,CAC3C,GAAI0I,GAAQslC,EAAO9qC,OAAOlD,EAC1B,IAAI+J,EAAIxF,EAAKmE,EAAME,SAAW,GAAKmB,EAAIzG,EAAKoF,EAAMzB,OAAS,EACzD,MAAOjH,GAGX,OAAQ,EAGV,IAAI+nC,IAAQ,SAAetiC,EAAQlC,GACjC3C,KAAK6E,OAASA,EAAO7E,KAAK2C,KAAOA,EAGnCwkC,IAAM3oC,UAAUwJ,KAAO,WACrB,MAAOkP,GAAOlX,KAAK6E,OAAQ7E,KAAK2C,OAElCwkC,GAAM3oC,UAAU6H,GAAK,WACnB,MAAO4Q,GAAOjX,KAAK6E,OAAQ7E,KAAK2C,OAElCwkC,GAAM3oC,UAAUiE,MAAQ,WACtB,MAAOzC,MAAK2C,KAAK+B,MAAQ1E,KAAK6E,OAAOH,MAAQ1E,KAAK2C,KAAKiB,IAAM5D,KAAK6E,OAAOjB,IA2nC3E8sC,GAAUlyC,WACRkX,UAAW,WACT,MAAO1V,MAAKkS,MAAMvS,QAIpBirD,YAAa,SAAqBtiD,EAAIxJ,GAGpC,IAAK,GAFDsuC,GAASptC,KAEJZ,EAAIkJ,EAAI1J,EAAI0J,EAAKxJ,EAAGM,EAAIR,IAAKQ,EAAG,CACvC,GAAIsF,GAAO0oC,EAAOl7B,MAAM9S,EACxBguC,GAAOt3B,QAAUpR,EAAKoR,OACtB2R,GAAY/iB,GACZqnB,GAAYrnB,EAAM,UAEpB1E,KAAKkS,MAAMvC,OAAOrH,EAAIxJ,IAIxBozB,SAAU,SAAkBhgB,GAC1BA,EAAMrH,KAAKoD,MAAMiE,EAAOlS,KAAKkS,QAK/B24C,YAAa,SAAqBviD,EAAI4J,EAAO4D,GAC3C,GAAIs3B,GAASptC,IAEbA,MAAK8V,QAAUA,EACf9V,KAAKkS,MAAQlS,KAAKkS,MAAMrO,MAAM,EAAGyE,GAAI+P,OAAOnG,GAAOmG,OAAOrY,KAAKkS,MAAMrO,MAAMyE,GAC3E,KAAK,GAAIlJ,GAAI,EAAGA,EAAI8S,EAAMvS,SAAUP,EAClC8S,EAAM9S,GAAGiN,OAAS+gC,GAKtB0d,MAAO,SAAexiD,EAAIxJ,EAAGssB,GAG3B,IAAK,GAFDgiB,GAASptC,KAEJpB,EAAI0J,EAAKxJ,EAAGwJ,EAAK1J,IAAK0J,EAC7B,GAAI8iB,EAAGgiB,EAAOl7B,MAAM5J,IAClB,OAAO,IAsBfqoC,GAAYnyC,WACVkX,UAAW,WACT,MAAO1V,MAAKsV,MAGds1C,YAAa,SAAqBtiD,EAAIxJ,GACpC,GAAIsuC,GAASptC,IAEbA,MAAKsV,MAAQxW,CACb,KAAK,GAAIM,GAAI,EAAGA,EAAIY,KAAKwV,SAAS7V,SAAUP,EAAG,CAC7C,GAAI2N,GAAQqgC,EAAO53B,SAASpW,GACxBqW,EAAK1I,EAAM2I,WACf,IAAIpN,EAAKmN,EAAI,CACX,GAAIwvB,GAAKp/B,KAAKC,IAAIhH,EAAG2W,EAAKnN,GACtByiD,EAAYh+C,EAAM+I,MAMtB,IALA/I,EAAM69C,YAAYtiD,EAAI28B,GACtBmI,EAAOt3B,QAAUi1C,EAAYh+C,EAAM+I,OAC/BL,GAAMwvB,IACRmI,EAAO53B,SAAS7F,OAAOvQ,IAAK,GAAG2N,EAAMV,OAAS,MAE/B,IAAZvN,GAAKmmC,GACR,KAEF38B,GAAK,MAELA,IAAMmN,EAKV,GAAIzV,KAAKsV,KAAOxW,EAAI,KAAOkB,KAAKwV,SAAS7V,OAAS,KAAOK,KAAKwV,SAAS,YAAck7B,MAAa,CAChG,GAAIx+B,KACJlS,MAAKkyB,SAAShgB,GACdlS,KAAKwV,UAAY,GAAIk7B,IAAUx+B,IAC/BlS,KAAKwV,SAAS,GAAGnJ,OAASrM,OAI9BkyB,SAAU,SAAkBhgB,GAG1B,IAAK,GAFDk7B,GAASptC,KAEJZ,EAAI,EAAGA,EAAIY,KAAKwV,SAAS7V,SAAUP,EAC1CguC,EAAO53B,SAASpW,GAAG8yB,SAAShgB,IAIhC24C,YAAa,SAAqBviD,EAAI4J,EAAO4D,GAC3C,GAAIs3B,GAASptC,IAEbA,MAAKsV,MAAQpD,EAAMvS;qBACnBK,KAAK8V,QAAUA,CACf,KAAK,GAAI1W,GAAI,EAAGA,EAAIY,KAAKwV,SAAS7V,SAAUP,EAAG,CAC7C,GAAI2N,GAAQqgC,EAAO53B,SAASpW,GACxBqW,EAAK1I,EAAM2I,WACf,IAAIpN,GAAMmN,EAAI,CAEZ,GADA1I,EAAM89C,YAAYviD,EAAI4J,EAAO4D,GACzB/I,EAAMmF,OAASnF,EAAMmF,MAAMvS,OAAS,GAAI,CAI1C,IAAK,GADDqrD,GAAYj+C,EAAMmF,MAAMvS,OAAS,GAAK,GACjC+C,EAAMsoD,EAAWtoD,EAAMqK,EAAMmF,MAAMvS,QAAS,CACnD,GAAIsrD,GAAO,GAAIva,IAAU3jC,EAAMmF,MAAMrO,MAAMnB,EAAKA,GAAO,IACvDqK,GAAM+I,QAAUm1C,EAAKn1C,OACrBs3B,EAAO53B,SAAS7F,SAASvQ,EAAG,EAAG6rD,GAC/BA,EAAK5+C,OAAS+gC,EAEhBrgC,EAAMmF,MAAQnF,EAAMmF,MAAMrO,MAAM,EAAGmnD,GACnC5d,EAAO8d,aAET,MAEF5iD,GAAMmN,IAKVy1C,WAAY,WACV,KAAIlrD,KAAKwV,SAAS7V,QAAU,IAA5B,CAGA,GAAIwrD,GAAKnrD,IACT,GAAG,CACD,GAAIorD,GAAUD,EAAG31C,SAAS7F,OAAOw7C,EAAG31C,SAAS7V,OAAS,EAAG,GACrD0rD,EAAU,GAAI1a,IAAYya,EAC9B,IAAKD,EAAG9+C,OAMD,CACL8+C,EAAG71C,MAAQ+1C,EAAQ/1C,KACnB61C,EAAGr1C,QAAUu1C,EAAQv1C,MACrB,IAAIw1C,GAAUlnD,EAAQ+mD,EAAG9+C,OAAOmJ,SAAU21C,EAC1CA,GAAG9+C,OAAOmJ,SAAS7F,OAAO27C,EAAU,EAAG,EAAGD,OAV5B,CAEd,GAAI9e,GAAO,GAAIoE,IAAYwa,EAAG31C,SAC9B+2B,GAAKlgC,OAAS8+C,EACdA,EAAG31C,UAAY+2B,EAAM8e,GACrBF,EAAK5e,EAOP8e,EAAQh/C,OAAS8+C,EAAG9+C,aACb8+C,EAAG31C,SAAS7V,OAAS,GAC9BwrD,GAAG9+C,OAAO6+C,eAGZJ,MAAO,SAAexiD,EAAIxJ,EAAGssB,GAG3B,IAAK,GAFDgiB,GAASptC,KAEJZ,EAAI,EAAGA,EAAIY,KAAKwV,SAAS7V,SAAUP,EAAG,CAC7C,GAAI2N,GAAQqgC,EAAO53B,SAASpW,GACxBqW,EAAK1I,EAAM2I,WACf,IAAIpN,EAAKmN,EAAI,CACX,GAAI81C,GAAO1lD,KAAKC,IAAIhH,EAAG2W,EAAKnN,EAC5B,IAAIyE,EAAM+9C,MAAMxiD,EAAIijD,EAAMngC,GACxB,OAAO,CAET,IAAmB,IAAdtsB,GAAKysD,GACR,KAEFjjD,GAAK,MAELA,IAAMmN,IAQd,IAAIq7B,IAAa,SAAoBv/B,EAAK/D,EAAMiJ,GAC9C,GAAI22B,GAASptC,IAEb,IAAIyW,EACF,IAAK,GAAIrT,KAAOqT,GACVA,EAAQnI,eAAelL,KACzBgqC,EAAOhqC,GAAOqT,EAAQrT,GAI5BpD,MAAKuR,IAAMA,EACXvR,KAAKwN,KAAOA,EAGdsjC,IAAWtyC,UAAU6I,MAAQ,WAC3B,GAAI+lC,GAASptC,KAETmC,EAAKnC,KAAKuR,IAAIpP,GACdwsB,EAAK3uB,KAAK0E,KAAKgqB,QACfhqB,EAAO1E,KAAK0E,KACZuR,EAAKD,EAAOtR,EAChB,IAAU,MAANuR,GAAe0Y,EAAnB,CAGA,IAAK,GAAIvvB,GAAI,EAAGA,EAAIuvB,EAAGhvB,SAAUP,EAC3BuvB,EAAGvvB,IAAMguC,GACXze,EAAGhf,OAAOvQ,IAAK,EAGduvB,GAAGhvB,SACN+E,EAAKgqB,QAAU,KAEjB,IAAI5Y,GAASwZ,GAAatvB,KAC1B6V,GAAiBnR,EAAMmB,KAAKoC,IAAI,EAAGvD,EAAKoR,OAASA,IAC7C3T,IACFq/B,GAAQr/B,EAAI,WACVyuC,GAA6BzuC,EAAIuC,GAAOoR,GACxCqsB,GAAchgC,EAAI8T,EAAI,YAExB8V,GAAY5pB,EAAI,oBAAqBA,EAAInC,KAAMiW,MAInD66B,GAAWtyC,UAAUy9B,QAAU,WAC7B,GAAImR,GAASptC,KAETwrD,EAAOxrD,KAAK8V,OACZ3T,EAAKnC,KAAKuR,IAAIpP,GACduC,EAAO1E,KAAK0E,IAChB1E,MAAK8V,OAAS,IACd,IAAIC,GAAOuZ,GAAatvB,MAAQwrD,CAC3Bz1C,KAGLF,EAAiBnR,EAAMA,EAAKoR,OAASC,GACjC5T,GACFq/B,GAAQr/B,EAAI,WACVA,EAAGge,MAAMqR,aAAc,EACvBof,GAA6BzuC,EAAIuC,EAAMqR,GACvCgW,GAAY5pB,EAAI,oBAAqBA,EAAIirC,EAAQp3B,EAAOtR,QAI9D4b,GAAWwwB,GAmDX,IAAIW,IAAe,EAEfN,GAAa,SAAoB5/B,EAAKvN,GACxChE,KAAKkS,SACLlS,KAAKgE,KAAOA,EACZhE,KAAKuR,IAAMA,EACXvR,KAAKwb,KAAOi2B,GAIdN,IAAW3yC,UAAU6I,MAAQ,WAC3B,GAAI+lC,GAASptC,IAEb,KAAIA,KAAK6rC,kBAAT,CAGA,GAAI1pC,GAAKnC,KAAKuR,IAAIpP,GACdspD,EAAStpD,IAAOA,EAAGge,KAIvB,IAHIsrC,GACFnsB,GAAgBn9B,GAEdke,GAAWrgB,KAAM,SAAU,CAC7B,GAAIgJ,GAAQhJ,KAAKua,MACbvR,IACF+iB,GAAY/rB,KAAM,QAASgJ,EAAMhB,KAAMgB,EAAM3C,IAKjD,IAAK,GAFDP,GAAM,KACNmC,EAAM,KACD7I,EAAI,EAAGA,EAAIY,KAAKkS,MAAMvS,SAAUP,EAAG,CAC1C,GAAIsF,GAAO0oC,EAAOl7B,MAAM9S,GACpB6Y,EAAOF,EAAiBrT,EAAK0T,YAAag1B,EAC1CjrC,KAAOirC,EAAOxxB,UAChBumB,GAAchgC,EAAI6T,EAAOtR,GAAO,QACvBvC,IACM,MAAX8V,EAAK5R,KACP4B,EAAM+N,EAAOtR,IAEE,MAAbuT,EAAKjQ,OACPlC,EAAMkQ,EAAOtR,KAGjBA,EAAK0T,YAAcF,EAAiBxT,EAAK0T,YAAaH,GACrC,MAAbA,EAAKjQ,MAAgBolC,EAAOxxB,YAAca,GAAa2wB,EAAO77B,IAAK7M,IAASvC,GAC9E0T,EAAiBnR,EAAM0xB,GAAWj0B,EAAG8a,UAGzC,GAAI9a,GAAMnC,KAAK4b,YAAczZ,EAAGsU,QAAQiI,aACtC,IAAK,GAAIrI,GAAM,EAAGA,EAAMrW,KAAKkS,MAAMvS,SAAU0W,EAAK,CAChD,GAAIugC,GAAS36B,GAAWmxB,EAAOl7B,MAAMmE,IACjC0G,EAAMD,GAAW85B,EACjB75B,GAAM5a,EAAG8a,QAAQrI,gBACnBzS,EAAG8a,QAAQtI,QAAUiiC,EACrBz0C,EAAG8a,QAAQrI,cAAgBmI,EAC3B5a,EAAG8a,QAAQpI,gBAAiB,GAKvB,MAAP/O,GAAe3D,GAAMnC,KAAK4b,WAC5B+lB,GAAUx/B,EAAI2D,EAAKmC,EAAM,GAE3BjI,KAAKkS,MAAMvS,OAAS,EACpBK,KAAK6rC,mBAAoB,EACrB7rC,KAAKiuC,QAAUjuC,KAAKuR,IAAI88B,WAC1BruC,KAAKuR,IAAI88B,UAAW,EAChBlsC,GACFurC,GAAiBvrC,EAAGoP,MAGpBpP,GACF4pB,GAAY5pB,EAAI,gBAAiBA,EAAInC,KAAM8F,EAAKmC,GAE9CwjD,GACF3rB,GAAc39B,GAEZnC,KAAKqM,QACPrM,KAAKqM,OAAOhF,UAShB8pC,GAAW3yC,UAAU+b,KAAO,SAAUynC,EAAMnlC,GAC1C,GAAIuwB,GAASptC,IAED,OAARgiD,GAA6B,YAAbhiD,KAAKgE,OACvBg+C,EAAO,EAGT,KAAK,GADDh6C,GAAM3B,EACDjH,EAAI,EAAGA,EAAIY,KAAKkS,MAAMvS,SAAUP,EAAG,CAC1C,GAAIsF,GAAO0oC,EAAOl7B,MAAM9S,GACpB6Y,EAAOF,EAAiBrT,EAAK0T,YAAag1B,EAC9C,IAAiB,MAAbn1B,EAAKjQ,OACPA,EAAOvD,EAAIoY,EAAUnY,EAAOsR,EAAOtR,GAAOuT,EAAKjQ,OAClC,GAATg6C,GACF,MAAOh6C,EAGX,IAAe,MAAXiQ,EAAK5R,KACPA,EAAK5B,EAAIoY,EAAUnY,EAAOsR,EAAOtR,GAAOuT,EAAK5R,IACjC,GAAR27C,GACF,MAAO37C,GAIb,MAAO2B,KAAUA,KAAMA,EAAM3B,GAAIA,IAKnC8qC,GAAW3yC,UAAUy9B,QAAU,WAC7B,GAAImR,GAASptC,KAET0C,EAAM1C,KAAKua,MAAM,GAAG,GACpByP,EAAShqB,KACTmC,EAAKnC,KAAKuR,IAAIpP,EACbO,IAAQP,GAGbq/B,GAAQr/B,EAAI,WACV,GAAIuC,GAAOhC,EAAIgC,KACX4X,EAAQtG,EAAOtT,EAAIgC,MACnB+O,EAAO4d,GAAgBlvB,EAAIma,EAM/B,IALI7I,IACF6f,GAA6B7f,GAC7BtR,EAAGge,MAAMwf,iBAAmBx9B,EAAGge,MAAMqR,aAAc,GAErDrvB,EAAGge,MAAMyf,eAAgB,GACpBnjB,GAAauN,EAAOzY,IAAK7M,IAA0B,MAAjBslB,EAAOlU,OAAgB,CAC5D,GAAIi1C,GAAY/gC,EAAOlU,MACvBkU,GAAOlU,OAAS,IAChB,IAAI41C,GAAUp8B,GAAatF,GAAU+gC,CACjCW,IACF71C,EAAiBnR,EAAMA,EAAKoR,OAAS41C,GAGzC3/B,GAAY5pB,EAAI,gBAAiBA,EAAIirC,MAIzC+D,GAAW3yC,UAAU8Z,WAAa,SAAU5T,GAC1C,IAAK1E,KAAKkS,MAAMvS,QAAUK,KAAKuR,IAAIpP,GAAI,CACrC,GAAIipB,GAAKprB,KAAKuR,IAAIpP,GAAGge,KAChBiL,GAAGgW,qBAA+D,GAAzCh9B,EAAQgnB,EAAGgW,mBAAoBphC,QAC1DorB,EAAGkW,uBAAyBlW,EAAGkW,0BAA4Bz2B,KAAK7K,MAGrEA,KAAKkS,MAAMrH,KAAKnG,IAGlBysC,GAAW3yC,UAAUsc,WAAa,SAAUpW,GAE1C,GADA1E,KAAKkS,MAAMvC,OAAOvL,EAAQpE,KAAKkS,MAAOxN,GAAO,IACxC1E,KAAKkS,MAAMvS,QAAUK,KAAKuR,IAAIpP,GAAI,CACrC,GAAIipB,GAAKprB,KAAKuR,IAAIpP,GAAGge,OAAOiL,EAAGgW,qBAAuBhW,EAAGgW,wBAA0Bv2B,KAAK7K,QAG5FsgB,GAAW6wB,GA6GX,IAAIS,IAAmB,SAA0B33B,EAASwd,GACxD,GAAI2V,GAASptC,IAEbA,MAAKia,QAAUA,EACfja,KAAKy3B,QAAUA,CACf,KAAK,GAAIr4B,GAAI,EAAGA,EAAI6a,EAAQta,SAAUP,EACpC6a,EAAQ7a,GAAGiN,OAAS+gC,EAIxBwE,IAAiBpzC,UAAU6I,MAAQ,WACjC,GAAI+lC,GAASptC,IAEb,KAAIA,KAAK6rC,kBAAT,CAGA7rC,KAAK6rC,mBAAoB,CACzB,KAAK,GAAIzsC,GAAI,EAAGA,EAAIY,KAAKia,QAAQta,SAAUP,EACzCguC,EAAOnzB,QAAQ7a,GAAGiI,OAEpB0kB,IAAY/rB,KAAM,WAGpB4xC,GAAiBpzC,UAAU+b,KAAO,SAAUynC,EAAMnlC,GAChD,MAAO7c,MAAKy3B,QAAQld,KAAKynC,EAAMnlC,IAEjCyD,GAAWsxB,GAgEX,IAAI+Z,IAAY,EACZ7O,GAAM,QAASA,GAAIv4C,EAAMvD,EAAMsI,EAAWk5C,EAAS/kC,GACrD,KAAMzd,eAAgB88C,IACpB,MAAO,IAAIA,GAAIv4C,EAAMvD,EAAMsI,EAAWk5C,EAAS/kC,EAEhC,OAAbnU,IACFA,EAAY,GAGdqnC,GAAYjxC,KAAKM,MAAO,GAAI0wC,KAAW,GAAInI,IAAK,GAAI,UACpDvoC,KAAKsT,MAAQhK,EACbtJ,KAAKm0B,UAAYn0B,KAAK+zB,WAAa,EACnC/zB,KAAKquC,UAAW,EAChBruC,KAAK4rD,gBAAkB,EACvB5rD,KAAKmlB,aAAenlB,KAAKklB,kBAAoB5b,CAC7C,IAAInE,GAAQV,EAAI6E,EAAW,EAC3BtJ,MAAK8E,IAAMuiC,GAAgBliC,GAC3BnF,KAAKkrC,QAAU,GAAIvB,IAAQ,MAC3B3pC,KAAKwb,KAAOmwC,GACZ3rD,KAAK+nC,WAAa/mC,EAClBhB,KAAKwiD,QAAUA,EACfxiD,KAAKyd,UAAyB,OAAbA,EAAqB,MAAQ,MAC9Czd,KAAK2jC,QAAS,EAEK,gBAARp/B,KACTA,EAAOvE,KAAKiwC,WAAW1rC,IAEzB4jC,GAAUnoC,MAAQgI,KAAM7C,EAAOkB,GAAIlB,EAAOZ,KAAMA,IAChDuoC,GAAa9sC,KAAMqnC,GAAgBliC,GAAQopC,IAG7CuO,IAAIt+C,UAAYqR,EAAU8gC,GAAYnyC,WACpCD,YAAau+C,GAKbtzC,KAAM,SAAcxB,EAAM3B,EAAI+kB,GACxBA,EACFprB,KAAK8qD,MAAM9iD,EAAOhI,KAAKsT,MAAOjN,EAAK2B,EAAMojB,GAEzCprB,KAAK8qD,MAAM9qD,KAAKsT,MAAOtT,KAAKsT,MAAQtT,KAAKsV,KAAMtN,IAKnD2gC,OAAQ,SAAgBrgC,EAAI4J,GAE1B,IAAK,GADD4D,GAAS,EACJ1W,EAAI,EAAGA,EAAI8S,EAAMvS,SAAUP,EAClC0W,GAAU5D,EAAM9S,GAAG0W,MAErB9V,MAAK6qD,YAAYviD,EAAKtI,KAAKsT,MAAOpB,EAAO4D,IAE3C8yB,OAAQ,SAAgBtgC,EAAIxJ,GAC1BkB,KAAK4qD,YAAYtiD,EAAKtI,KAAKsT,MAAOxU,IAMpC6kD,SAAU,SAAkBnB,GAC1B,GAAItwC,GAAQ0D,EAAS5V,KAAMA,KAAKsT,MAAOtT,KAAKsT,MAAQtT,KAAKsV,KACzD,QAAgB,IAAZktC,EACKtwC,EAEFA,EAAMihC,KAAKqP,GAAWxiD,KAAKozC,kBAEpCyY,SAAUnqB,GAAY,SAAUniC,GAC9B,GAAI6e,GAAM3Z,EAAIzE,KAAKsT,MAAO,GACtB+D,EAAOrX,KAAKsT,MAAQtT,KAAKsV,KAAO,CACpCq5B,IAAW3uC,MAAQgI,KAAMoW,EAAK/X,GAAI5B,EAAI4S,EAAM/R,EAAQtF,KAAMqX,GAAM9S,KAAK5E,QACnE4E,KAAMvE,KAAKiwC,WAAW1wC,GAAO4rC,OAAQ,WAAYjyB,MAAM,IAAQ,GAC7DlZ,KAAKmC,IACPo7B,GAAev9B,KAAKmC,GAAI,EAAG,GAE7B2qC,GAAa9sC,KAAMqnC,GAAgBjpB,GAAMmwB,MAE3C3pC,aAAc,SAAsBrF,EAAMyI,EAAM3B,EAAI8kC,GAClDnjC,EAAOoP,EAASpX,KAAMgI,GACtB3B,EAAKA,EAAK+Q,EAASpX,KAAMqG,GAAM2B,EAC/BgoC,GAAchwC,KAAMT,EAAMyI,EAAM3B,EAAI8kC,IAEtCwV,SAAU,SAAkB34C,EAAM3B,EAAIm8C,GACpC,GAAItwC,GAAQyD,EAAW3V,KAAMoX,EAASpX,KAAMgI,GAAOoP,EAASpX,KAAMqG,GAClE,QAAgB,IAAZm8C,EACKtwC,EAEFA,EAAMihC,KAAKqP,GAAWxiD,KAAKozC,kBAGpC9tC,QAAS,SAAiBZ,GACxB,GAAIlF,GAAIQ,KAAK8rD,cAAcpnD,EAAM,OAAOlF,IAAKA,EAAE+E,MAGjDunD,cAAe,SAAuBpnD,GACpC,GAAI6R,EAAOvW,KAAM0E,GACf,MAAOY,GAAQtF,KAAM0E,IAGzBqnD,cAAe,SAAuBrnD,GACpC,MAAOsR,GAAOtR,IAGhBsnD,yBAA0B,SAAkCtnD,GAI1D,MAHmB,gBAARA,KACTA,EAAOY,EAAQtF,KAAM0E,IAEhBuX,GAAWvX,IAGpBunD,UAAW,WACT,MAAOjsD,MAAKsV,MAEdhM,UAAW,WACT,MAAOtJ,MAAKsT,OAEdvN,SAAU,WACR,MAAO/F,MAAKsT,MAAQtT,KAAKsV,KAAO,GAGlCy8B,QAAS,SAAiBrvC,GACxB,MAAO0U,GAASpX,KAAM0C,IAGxBmF,UAAW,SAAmB1C,GAC5B,GAAI4yB,GAAW/3B,KAAK8E,IAAI2yB,SAWxB,OATa,OAATtyB,GAA0B,QAATA,EACb4yB,EAASp1B,KACG,UAATwC,EACH4yB,EAASlzB,OACG,OAATM,GAA2B,MAATA,IAA2B,IAAVA,EACtC4yB,EAAS1xB,KAET0xB,EAAS/vB,QAInBzF,eAAgB,WACd,MAAOvC,MAAK8E,IAAIxC,QAElBqF,kBAAmB,WACjB,MAAO3H,MAAK8E,IAAI6C,qBAGlBukD,UAAWxqB,GAAY,SAAUh9B,EAAMd,EAAI6S,GACzCy2B,GAAmBltC,KAAMoX,EAASpX,KAAqB,gBAAR0E,GAAmBD,EAAIC,EAAMd,GAAM,GAAKc,GAAO,KAAM+R,KAEtGq2B,aAAcpL,GAAY,SAAU78B,EAAQlC,EAAM8T,GAChDy2B,GAAmBltC,KAAMoX,EAASpX,KAAM6E,GAASuS,EAASpX,KAAM2C,GAAQkC,GAAS4R,KAEnFxN,gBAAiBy4B,GAAY,SAAU/+B,EAAMgG,EAAO8N,GAClDxN,GAAgBjJ,KAAMoX,EAASpX,KAAM2C,GAAOgG,GAASyO,EAASpX,KAAM2I,GAAQ8N,KAE9Es2B,iBAAkBrL,GAAY,SAAUsL,EAAOv2B,GAC7Cs2B,GAAiB/sC,KAAMwX,EAAaxX,KAAMgtC,GAAQv2B,KAEpD01C,mBAAoBzqB,GAAY,SAAUriC,EAAGoX,GAE3Cs2B,GAAiB/sC,KAAMwX,EAAaxX,KADxB4G,EAAI5G,KAAK8E,IAAIxC,OAAQjD,IACiBoX,KAEpD1R,cAAe28B,GAAY,SAAUp/B,EAAQm1B,EAAShhB,GACpD,GAAI22B,GAASptC,IAEb,IAAKsC,EAAO3C,OAAZ,CAIA,IAAK,GADD2P,MACKlQ,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IACjCkQ,EAAIlQ,GAAK,GAAI+nC,IAAM/vB,EAASg2B,EAAQ9qC,EAAOlD,GAAGyF,QAASuS,EAASg2B,EAAQ9qC,EAAOlD,GAAGuD,MAErE,OAAX80B,IACFA,EAAU5xB,KAAKC,IAAIxD,EAAO3C,OAAS,EAAGK,KAAK8E,IAAIgzB,YAEjDgV,GAAa9sC,KAAM+mC,GAAmBz3B,EAAKmoB,GAAUhhB,MAEvD21C,aAAc1qB,GAAY,SAAU78B,EAAQlC,EAAM8T,GAChD,GAAInU,GAAStC,KAAK8E,IAAIxC,OAAOuB,MAAM,EACnCvB,GAAOuI,KAAK,GAAIs8B,IAAM/vB,EAASpX,KAAM6E,GAASuS,EAASpX,KAAM2C,GAAQkC,KACrEioC,GAAa9sC,KAAM+mC,GAAmBzkC,EAAQA,EAAO3C,OAAS,GAAI8W,KAGpEgtB,aAAc,SAAsB+e,GAKlC,IAAK,GADDtwC,GAHAk7B,EAASptC,KAETsC,EAAStC,KAAK8E,IAAIxC,OAEblD,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,GAAI0F,GAAM6Q,EAAWy3B,EAAQ9qC,EAAOlD,GAAG4I,OAAQ1F,EAAOlD,GAAGiH,KACzD6L,GAAQA,EAAQA,EAAMmG,OAAOvT,GAAOA,EAEtC,OAAgB,IAAZ09C,EACKtwC,EAEAA,EAAMihC,KAAKqP,GAAWxiD,KAAKozC,kBAGtCiZ,cAAe,SAAuB7J,GAKpC,IAAK,GAJDpV,GAASptC,KAEToa,KACA9X,EAAStC,KAAK8E,IAAIxC,OACblD,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,GAAI0F,GAAM6Q,EAAWy3B,EAAQ9qC,EAAOlD,GAAG4I,OAAQ1F,EAAOlD,GAAGiH,OACzC,IAAZm8C,IACF19C,EAAMA,EAAIquC,KAAKqP,GAAWpV,EAAOgG,kBAEnCh5B,EAAMhb,GAAK0F,EAEb,MAAOsV,IAETs5B,iBAAkB,SAA0Bn0C,EAAM2yB,EAAUiZ,GAE1D,IAAK,GADDmhB,MACKltD,EAAI,EAAGA,EAAIY,KAAK8E,IAAIxC,OAAO3C,OAAQP,IAC1CktD,EAAIltD,GAAKG,CAEXS,MAAKuF,kBAAkB+mD,EAAKp6B,EAAUiZ,GAAU,WAElD5lC,kBAAmBm8B,GAAY,SAAUniC,EAAM2yB,EAAUiZ,GAKvD,IAAK,GAJDiC,GAASptC,KAETusB,KACAznB,EAAM9E,KAAK8E,IACN1F,EAAI,EAAGA,EAAI0F,EAAIxC,OAAO3C,OAAQP,IAAK,CAC1C,GAAI24B,GAAWjzB,EAAIxC,OAAOlD,EAC1BmtB,GAAQntB,IAAO4I,KAAM+vB,EAAS/vB,OAAQ3B,GAAI0xB,EAAS1xB,KAAM9B,KAAM6oC,EAAO6C,WAAW1wC,EAAKH,IAAK+rC,OAAQA,GAGrG,IAAK,GADDohB,GAASr6B,GAAwB,OAAZA,GAAqBwV,GAAmB1nC,KAAMusB,EAAS2F,GACvE7b,EAAMkW,EAAQ5sB,OAAS,EAAG0W,GAAO,EAAGA,IAC3Cs4B,GAAWvB,EAAQ7gB,EAAQlW,GAEzBk2C,GACFlf,GAA2BrtC,KAAMusD,GACxBvsD,KAAKmC,IACdi7B,GAAoBp9B,KAAKmC,MAG7BqqD,KAAM9qB,GAAY,WAChBwN,GAAsBlvC,KAAM,UAE9BysD,KAAM/qB,GAAY,WAChBwN,GAAsBlvC,KAAM,UAE9B0sD,cAAehrB,GAAY,WACzBwN,GAAsBlvC,KAAM,QAAQ,KAEtC2sD,cAAejrB,GAAY,WACzBwN,GAAsBlvC,KAAM,QAAQ,KAGtC4sD,aAAc,SAAsBpmD,GAClCxG,KAAK2jC,OAASn9B,GAEhBqmD,aAAc,WACZ,MAAO7sD,MAAK2jC,QAGdmpB,YAAa,WAIX,IAAK,GAHDhiB,GAAO9qC,KAAKkrC,QACZrB,EAAO,EACPC,EAAS,EACJ1qC,EAAI,EAAGA,EAAI0rC,EAAKjB,KAAKlqC,OAAQP,IAC/B0rC,EAAKjB,KAAKzqC,GAAGkD,UACdunC,CAGN,KAAK,GAAIxzB,GAAM,EAAGA,EAAMy0B,EAAKhB,OAAOnqC,OAAQ0W,IACrCy0B,EAAKhB,OAAOzzB,GAAK/T,UAClBwnC,CAGN,QAAS0iB,KAAM3iB,EAAM4iB,KAAM3iB,IAE7B0H,aAAc,WACZxxC,KAAKkrC,QAAU,GAAIvB,IAAQ3pC,KAAKkrC,QAAQX,gBAG1CwiB,UAAW,WACT/sD,KAAK4rD,gBAAkB5rD,KAAKgtD,kBAAiB,IAE/CA,iBAAkB,SAA0BC,GAI1C,MAHIA,KACFjtD,KAAKkrC,QAAQhB,OAASlqC,KAAKkrC,QAAQf,UAAYnqC,KAAKkrC,QAAQd,WAAa,MAEpEpqC,KAAKkrC,QAAQZ,YAEtB4iB,QAAS,SAAiBC,GACxB,MAAOntD,MAAKkrC,QAAQZ,aAAe6iB,GAAOntD,KAAK4rD,kBAGjDwB,WAAY,WACV,OAASvjB,KAAMsC,GAAiBnsC,KAAKkrC,QAAQrB,MAC3CC,OAAQqC,GAAiBnsC,KAAKkrC,QAAQpB,UAE1CujB,WAAY,SAAoBC,GAC9B,GAAIxiB,GAAO9qC,KAAKkrC,QAAU,GAAIvB,IAAQ3pC,KAAKkrC,QAAQX,cACnDO,GAAKjB,KAAOsC,GAAiBmhB,EAASzjB,KAAKhmC,MAAM,GAAI,MAAM,GAC3DinC,EAAKhB,OAASqC,GAAiBmhB,EAASxjB,OAAOjmC,MAAM,GAAI,MAAM,IAGjE0pD,gBAAiB7rB,GAAY,SAAUh9B,EAAM8oD,EAAUh+C,GACrD,MAAO+gC,IAAWvwC,KAAM0E,EAAM,SAAU,SAAUA,GAChD,GAAIuV,GAAUvV,EAAKkpB,gBAAkBlpB,EAAKkpB,iBAK1C,OAJA3T,GAAQuzC,GAAYh+C,GACfA,GAASiB,EAAQwJ,KACpBvV,EAAKkpB,cAAgB,OAEhB,MAIX6/B,YAAa/rB,GAAY,SAAU8rB,GACjC,GAAIpgB,GAASptC,IAEbA,MAAKwJ,KAAK,SAAU9E,GACdA,EAAKkpB,eAAiBlpB,EAAKkpB,cAAc4/B,IAC3Cjd,GAAWnD,EAAQ1oC,EAAM,SAAU,WAKjC,MAJAA,GAAKkpB,cAAc4/B,GAAY,KAC3B/8C,EAAQ/L,EAAKkpB,iBACflpB,EAAKkpB,cAAgB,OAEhB,QAMf8/B,SAAU,SAAkBhpD,GAC1B,GAAI5F,EACJ,IAAmB,gBAAR4F,GAAkB,CAC3B,IAAK6R,EAAOvW,KAAM0E,GAChB,MAAO,KAIT,IAFA5F,EAAI4F,IACJA,EAAOY,EAAQtF,KAAM0E,IAEnB,MAAO,UAIT,IAAS,OADT5F,EAAIkX,EAAOtR,IAET,MAAO,KAGX,QAASA,KAAM5F,EAAG0xC,OAAQ9rC,EAAMH,KAAMG,EAAKH,KAAMqpB,cAAelpB,EAAKkpB,cACnEpJ,UAAW9f,EAAK8f,UAAWD,QAAS7f,EAAK6f,QAAS8I,UAAW3oB,EAAK2oB,UAClEqB,QAAShqB,EAAKgqB,UAGlBi/B,aAAcjsB,GAAY,SAAU8O,EAAQod,EAAO9hD,GACjD,MAAOykC,IAAWvwC,KAAMwwC,EAAiB,UAATod,EAAoB,SAAW,QAAS,SAAUlpD,GAChF,GAAI2J,GAAgB,QAATu/C,EAAkB,YAAuB,cAATA,EAAwB,UAAqB,UAATA,EAAoB,cAAgB,WACnH,IAAKlpD,EAAK2J,GAEH,CAAA,GAAIxC,EAAUC,GAAK7H,KAAKS,EAAK2J,IAClC,OAAO,CAEP3J,GAAK2J,IAAS,IAAMvC,MAJpBpH,GAAK2J,GAAQvC,CAMf,QAAO,MAGX+hD,gBAAiBnsB,GAAY,SAAU8O,EAAQod,EAAO9hD,GACpD,MAAOykC,IAAWvwC,KAAMwwC,EAAiB,UAATod,EAAoB,SAAW,QAAS,SAAUlpD,GAChF,GAAI2J,GAAgB,QAATu/C,EAAkB,YAAuB,cAATA,EAAwB,UAAqB,UAATA,EAAoB,cAAgB,YAC/GhmD,EAAMlD,EAAK2J,EACf,KAAKzG,EACH,OAAO,CACF,IAAW,MAAPkE,EACTpH,EAAK2J,GAAQ,SACR,CACL,GAAIrF,GAAQpB,EAAIM,MAAM2D,EAAUC,GAChC,KAAK9C,EACH,OAAO,CAET,IAAIrF,GAAMqF,EAAMsB,MAAQtB,EAAM,GAAGrJ,MACjC+E,GAAK2J,GAAQzG,EAAI/D,MAAM,EAAGmF,EAAMsB,QAAWtB,EAAMsB,OAAS3G,GAAOiE,EAAIjI,OAAc,IAAL,IAAYiI,EAAI/D,MAAMF,IAAQ,KAE9G,OAAO,MAIXktC,cAAenP,GAAY,SAAU8O,EAAQhjC,EAAMiJ,GACjD,MAAOo6B,IAAc7wC,KAAMwwC,EAAQhjC,EAAMiJ,KAE3Cq3C,iBAAkB,SAA0B9jC,GAC1CA,EAAO3iB,SAGToB,SAAU,SAAkBT,EAAM3B,EAAIoQ,GACpC,MAAOw6B,IAAUjxC,KAAMoX,EAASpX,KAAMgI,GAAOoP,EAASpX,KAAMqG,GAAKoQ,EAASA,GAAWA,EAAQzS,MAAQ,UAEvG+pD,YAAa,SAAqBrrD,EAAK+T,GACrC,GAAIu3C,IAAa5c,aAAc36B,IAAgC,MAApBA,EAAQzJ,SAAmByJ,EAAQuT,OAASvT,GACrFmC,WAAYnC,GAAWA,EAAQmC,WAC/BmB,gBAAgB,EAAOwvB,OAAQ9yB,GAAWA,EAAQ8yB,OAClD3a,kBAAmBnY,GAAWA,EAAQmY,kBAExC,OADAlsB,GAAM0U,EAASpX,KAAM0C,GACduuC,GAAUjxC,KAAM0C,EAAKA,EAAKsrD,EAAU,aAE7CC,YAAa,SAAqBvrD,GAChCA,EAAM0U,EAASpX,KAAM0C,EACrB,IAAIuX,MACAjC,EAAQ1S,EAAQtF,KAAM0C,EAAIgC,MAAM0T,WACpC,IAAIJ,EACF,IAAK,GAAI5Y,GAAI,EAAGA,EAAI4Y,EAAMrY,SAAUP,EAAG,CACrC,GAAI6Y,GAAOD,EAAM5Y,IACC,MAAb6Y,EAAKjQ,MAAgBiQ,EAAKjQ,MAAQtF,EAAIkB,MAAmB,MAAXqU,EAAK5R,IAAc4R,EAAK5R,IAAM3D,EAAIkB,KACnFqW,EAAQpP,KAAKoN,EAAKH,OAAOzL,QAAU4L,EAAKH,QAI9C,MAAOmC,IAET63B,UAAW,SAAmB9pC,EAAM3B,EAAIgpC,GACtCrnC,EAAOoP,EAASpX,KAAMgI,GAAM3B,EAAK+Q,EAASpX,KAAMqG,EAChD,IAAI2C,MACAgT,EAAYhU,EAAKtD,IAarB,OAZA1E,MAAKwJ,KAAKxB,EAAKtD,KAAM2B,EAAG3B,KAAO,EAAG,SAAUA,GAC1C,GAAIsT,GAAQtT,EAAK0T,WACjB,IAAIJ,EACF,IAAK,GAAI5Y,GAAI,EAAGA,EAAI4Y,EAAMrY,OAAQP,IAAK,CACrC,GAAI6Y,GAAOD,EAAM5Y,EACA,OAAX6Y,EAAK5R,IAAc2V,GAAahU,EAAKtD,MAAQsD,EAAKpE,IAAMqU,EAAK5R,IAAmB,MAAb4R,EAAKjQ,MAAgBgU,GAAahU,EAAKtD,MAAqB,MAAbuT,EAAKjQ,MAAgBgU,GAAa3V,EAAG3B,MAAQuT,EAAKjQ,MAAQ3B,EAAGzC,IAASyrC,IAAUA,EAAOp3B,EAAKH,SAClN9O,EAAM6B,KAAKoN,EAAKH,OAAOzL,QAAU4L,EAAKH,UAI1CkE,IAEGhT,GAETklD,YAAa,WACX,GAAIj0C,KAWJ,OAVAja,MAAKwJ,KAAK,SAAU9E,GAClB,GAAIgX,GAAMhX,EAAK0T,WACf,IAAIsD,EACF,IAAK,GAAItc,GAAI,EAAGA,EAAIsc,EAAI/b,SAAUP,EACb,MAAfsc,EAAItc,GAAG4I,MACTiS,EAAQpP,KAAK6Q,EAAItc,GAAG0Y,UAKrBmC,GAGTk0C,aAAc,SAAsBtlD,GAClC,GAAIjF,GACAoY,EAAYhc,KAAKsT,MACjB86C,EAAUpuD,KAAKozC,gBAAgBzzC,MASnC,OARAK,MAAKwJ,KAAK,SAAU9E,GAClB,GAAI+Q,GAAK/Q,EAAKH,KAAK5E,OAASyuD,CAC5B,IAAI34C,EAAK5M,EACE,MAATjF,GAAKiF,GAAW,CAElBA,IAAO4M,IACLuG,IAEG5E,EAASpX,KAAMyE,EAAIuX,EAAWpY,KAEvCyqD,aAAc,SAAsB35B,GAClCA,EAAStd,EAASpX,KAAM00B,EACxB,IAAIpqB,GAAQoqB,EAAO9wB,EACnB,IAAI8wB,EAAOhwB,KAAO1E,KAAKsT,OAASohB,EAAO9wB,GAAK,EAC1C,MAAO,EAET,IAAIwqD,GAAUpuD,KAAKozC,gBAAgBzzC,MAKnC,OAJAK,MAAKwJ,KAAKxJ,KAAKsT,MAAOohB,EAAOhwB,KAAM,SAAUA,GAE3C4F,GAAS5F,EAAKH,KAAK5E,OAASyuD,IAEvB9jD,GAGTiiC,KAAM,SAAc+hB,GAClB,GAAI/8C,GAAM,GAAIurC,IAAIlnC,EAAS5V,KAAMA,KAAKsT,MAAOtT,KAAKsT,MAAQtT,KAAKsV,MAAOtV,KAAK+nC,WAAY/nC,KAAKsT,MAAOtT,KAAKwiD,QAASxiD,KAAKyd,UAQtH,OAPAlM,GAAI4iB,UAAYn0B,KAAKm0B,UAAU5iB,EAAIwiB,WAAa/zB,KAAK+zB,WACrDxiB,EAAIzM,IAAM9E,KAAK8E,IACfyM,EAAIoyB,QAAS,EACT2qB,IACF/8C,EAAI25B,QAAQnB,UAAY/pC,KAAKkrC,QAAQnB,UACrCx4B,EAAI87C,WAAWrtD,KAAKotD,eAEf77C,GAGTg9C,UAAW,SAAmB93C,GACvBA,IACHA,KAEF,IAAIzO,GAAOhI,KAAKsT,MACZjN,EAAKrG,KAAKsT,MAAQtT,KAAKsV,IACP,OAAhBmB,EAAQzO,MAAgByO,EAAQzO,KAAOA,IACzCA,EAAOyO,EAAQzO,MAEC,MAAdyO,EAAQpQ,IAAcoQ,EAAQpQ,GAAKA,IACrCA,EAAKoQ,EAAQpQ,GAEf,IAAIkmC,GAAO,GAAIuQ,IAAIlnC,EAAS5V,KAAMgI,EAAM3B,GAAKoQ,EAAQzV,MAAQhB,KAAK+nC,WAAY//B,EAAMhI,KAAKwiD,QAASxiD,KAAKyd,UAMvG,OALIhH,GAAQ2yB,aACVmD,EAAKrB,QAAUlrC,KAAKkrC,UACpBlrC,KAAKqpC,SAAWrpC,KAAKqpC,YAAcx+B,MAAO0G,IAAKg7B,EAAMnD,WAAY3yB,EAAQ2yB,aAC3EmD,EAAKlD,SAAY93B,IAAKvR,KAAM2xC,UAAU,EAAMvI,WAAY3yB,EAAQ2yB,aAChE4I,GAAkBzF,EAAMsF,GAAkB7xC,OACnCusC,GAETiiB,UAAW,SAAmB7lD,GAC5B,GAAIykC,GAASptC,IAKb,IAHI2I,YAAiBi0C,MACnBj0C,EAAQA,EAAM4I,KAEZvR,KAAKqpC,OACP,IAAK,GAAIjqC,GAAI,EAAGA,EAAIY,KAAKqpC,OAAO1pC,SAAUP,EAAG,CAC3C,GAAIqvD,GAAOrhB,EAAO/D,OAAOjqC,EACzB,IAAIqvD,EAAKl9C,KAAO5I,EAAhB,CAGAykC,EAAO/D,OAAO15B,OAAOvQ,EAAG,GACxBuJ,EAAM6lD,UAAUphB,GAChBgF,GAAoBP,GAAkBzE,GACtC,QAIJ,GAAIzkC,EAAMuiC,SAAWlrC,KAAKkrC,QAAS,CACjC,GAAIwjB,IAAY/lD,EAAM6S,GACtBwtB,IAAWrgC,EAAO,SAAU4I,GAC1B,MAAOm9C,GAAS7jD,KAAK0G,EAAIiK,MACxB,GACH7S,EAAMuiC,QAAU,GAAIvB,IAAQ,MAC5BhhC,EAAMuiC,QAAQrB,KAAOsC,GAAiBnsC,KAAKkrC,QAAQrB,KAAM6kB,GACzD/lD,EAAMuiC,QAAQpB,OAASqC,GAAiBnsC,KAAKkrC,QAAQpB,OAAQ4kB,KAGjEC,eAAgB,SAAwBtvD,GACtC2pC,GAAWhpC,KAAMX,IAGnB2D,QAAS,WACP,MAAOhD,MAAKgB,MAEd4tD,UAAW,WACT,MAAO5uD,MAAKmC,IAGd8tC,WAAY,SAAoBn/B,GAC9B,MAAI9Q,MAAKwiD,QACA1xC,EAAIlD,MAAM5N,KAAKwiD,SAEjB7C,GAAe7uC,IAExBsiC,cAAe,WACb,MAAOpzC,MAAKwiD,SAAW,MAGzBqM,aAAcntB,GAAY,SAAU3wB,GACvB,OAAPA,IACFA,EAAM,OAEJA,GAAO/Q,KAAKyd,YAGhBzd,KAAKyd,UAAY1M,EACjB/Q,KAAKwJ,KAAK,SAAU9E,GAClB,MAAOA,GAAKyY,MAAQ,OAElBnd,KAAKmC,IACPunC,GAAiB1pC,KAAKmC,SAM5B26C,GAAIt+C,UAAUswD,SAAWhS,GAAIt+C,UAAUgL,IAuMvC,KAAK,GAnMDgpC,IAAW,EAmJXkC,IAAoB,EAoCpBiB,IACFvuC,EAAG,QAAS2nD,EAAG,YAAaC,EAAG,MAAOC,GAAI,QAASC,GAAI,QAASC,GAAI,OAAQC,GAAI,MAChFC,GAAI,QAASC,GAAI,WAAYC,GAAI,MAAOC,GAAI,QAASC,GAAI,SAAUC,GAAI,WAAYC,GAAI,MACvFC,GAAI,OAAQC,GAAI,OAAQC,GAAI,KAAMC,GAAI,QAASC,GAAI,OAAQC,GAAI,YAAaC,GAAI,SAChFC,GAAI,SAAUC,GAAI,IAAKC,GAAI,IAAKC,GAAI,MAAOC,GAAI,MAAOC,GAAI,MAC1DC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,SACvDC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,KAC/FC,IAAK,IAAKC,IAAK,IAAKC,MAAO,KAAMC,MAAO,OAAQC,MAAO,OAAQC,MAAO,QAASC,MAAO,SACtFC,MAAO,OAAQC,MAAO,MAAOC,MAAO,SAAUC,MAAO,WAAYC,MAAO,UAIjEhzD,GAAI,EAAGA,GAAI,GAAIA,KACtBu2C,GAASv2C,GAAI,IAAMu2C,GAASv2C,GAAI,IAAMsX,OAAOtX,GAG/C,KAAK,GAAIiX,IAAM,GAAIA,IAAO,GAAIA,KAC5Bs/B,GAASt/B,IAAOK,OAAO+hC,aAAapiC,GAGtC,KAAK,GAAIwD,IAAM,EAAGA,IAAO,GAAIA,KAC3B87B,GAAS97B,GAAM,KAAO87B,GAAS97B,GAAM,OAAS,IAAMA,EAGtD,IAAIw8B,MAEJA,IAAOgc,OACLC,KAAQ,aAAcC,MAAS,cAAeC,GAAM,WAAYC,KAAQ,aACxEC,IAAO,YAAaC,KAAQ,mBAAoBC,OAAU,WAAYC,SAAY,aAClFC,OAAU,eAAgBC,UAAa,gBAAiBC,kBAAmB,gBAC3EC,IAAO,aAAcC,YAAa,aAClCC,MAAS,mBAAoBC,OAAU,kBACvCC,IAAO,mBAKThd,GAAOid,WACLC,SAAU,YAAaC,SAAU,aAAcC,SAAU,OAAQC,eAAgB,OAAQC,SAAU,OACnGC,YAAa,aAAcC,WAAY,WAAYC,UAAW,WAAYC,YAAa,aACvFC,YAAa,cAAeC,aAAc,eAAgBC,WAAY,cAAeC,YAAa,YAClGC,iBAAkB,iBAAkBC,cAAe,gBAAiBC,SAAU,OAAQC,SAAU,OAChGC,SAAU,WAAYC,eAAgB,WAAYC,eAAgB,UAAWC,eAAgB,aAC7FC,SAAU,aAAcC,SAAU,aAClCC,SAAU,gBAAiBC,eAAgB,gBAAiBC,QAAS,gBACrEvf,YAAa,SAGfY,GAAO4e,QACLV,SAAU,cAAeW,SAAU,aAAcC,SAAU,WAAYC,SAAU,aACjFC,QAAS,cAAeC,QAAS,aAAc/B,SAAU,cAAegC,SAAU,YAClFC,SAAU,aAAcC,eAAgB,WAAYjC,SAAU,eAAgBkC,SAAU,gBACxFC,QAAS,eAAgBC,gBAAiB,gBAAiBC,SAAU,WAAYC,SAAU,iBAC3FC,SAAU,YAEZ1f,GAAO2f,YACLC,QAAS,YAAaC,QAAS,aAAcC,QAAS,OAAQC,cAAe,OAAQC,QAAS,OAC9FC,WAAY,aAAcC,SAAU,aAAcC,UAAW,WAAYC,WAAY,WAAYvC,WAAY,cAC7GC,YAAa,eAAgBuC,WAAY,aAAcC,YAAa,cAAef,gBAAiB,iBACpGgB,qBAAsB,gBAAiBC,aAAc,gBAAiBC,QAAS,OAAQC,QAAS,OAChGC,QAAS,WAAYC,cAAe,WAAYC,YAAa,UAAWC,kBAAmB,aAC3FC,QAAS,aAAcC,QAAS,aAAcC,gBAAiB,qBAAsBC,aAAc,sBACnGC,QAAS,gBAAiBC,cAAe,gBAAiB3D,UAAW,aAAcC,YAAa,WAChGte,aAAc,QAAS,WAEzBY,GAAgB,QAAIl1B,GAAMk1B,GAAO2f,WAAa3f,GAAOid,SAgLrD,IAAItsD,KACFsnC,UAAWA,GACXopB,gBAAiB,SAAyBv1D,GACxC,MAAOA,GAAG2qC,aAAa3qC,EAAG0F,UAAU,UAAW1F,EAAG0F,UAAU,QAAS0mC,KAEvEopB,SAAU,SAAkBx1D,GAC1B,MAAOm0C,IAAoBn0C,EAAI,SAAU2F,GACvC,GAAIA,EAAMrF,QAAS,CACjB,GAAIsa,GAAMzX,EAAQnD,EAAGoP,IAAKzJ,EAAMnF,KAAK+B,MAAMH,KAAK5E,MAChD,OAAImI,GAAMnF,KAAKiB,IAAMmZ,GAAOjV,EAAMnF,KAAK+B,KAAOvC,EAAG4D,YACtCiC,KAAMF,EAAMnF,KAAM0D,GAAI5B,EAAIqD,EAAMnF,KAAK+B,KAAO,EAAG,KAE/CsD,KAAMF,EAAMnF,KAAM0D,GAAI5B,EAAIqD,EAAMnF,KAAK+B,KAAMqY,IAGtD,OAAS/U,KAAMF,EAAME,OAAQ3B,GAAIyB,EAAMzB,SAI7CuxD,WAAY,SAAoBz1D,GAC9B,MAAOm0C,IAAoBn0C,EAAI,SAAU2F,GACvC,OACEE,KAAMvD,EAAIqD,EAAME,OAAOtD,KAAM,GAC7B2B,GAAI+Q,EAASjV,EAAGoP,IAAK9M,EAAIqD,EAAMzB,KAAK3B,KAAO,EAAG,QAIpDmzD,YAAa,SAAqB11D,GAChC,MAAOm0C,IAAoBn0C,EAAI,SAAU2F,GACvC,OACEE,KAAMvD,EAAIqD,EAAME,OAAOtD,KAAM,GAAI2B,GAAIyB,EAAME,WAIjD8vD,mBAAoB,SAA4B31D,GAC9C,MAAOm0C,IAAoBn0C,EAAI,SAAU2F,GACvC,GAAIsW,GAAMjc,EAAG41D,WAAWjwD,EAAMnF,KAAM,OAAOyb,IAAM,CAEjD,QAASpW,KADK7F,EAAGo8C,YAAax8B,KAAM,EAAG3D,IAAKA,GAAO,OAC3B/X,GAAIyB,EAAME,WAGtCgwD,oBAAqB,SAA6B71D,GAChD,MAAOm0C,IAAoBn0C,EAAI,SAAU2F,GACvC,GAAIsW,GAAMjc,EAAG41D,WAAWjwD,EAAMnF,KAAM,OAAOyb,IAAM,EAC7Cya,EAAW12B,EAAGo8C,YAAax8B,KAAM5f,EAAG8a,QAAQrL,QAAQ4P,YAAc,IAAKpD,IAAKA,GAAO,MACvF,QAASpW,KAAMF,EAAME,OAAQ3B,GAAIwyB,MAGrC2zB,KAAM,SAAcrqD,GAClB,MAAOA,GAAGqqD,QAEZC,KAAM,SAActqD,GAClB,MAAOA,GAAGsqD,QAEZC,cAAe,SAAuBvqD,GACpC,MAAOA,GAAGuqD,iBAEZC,cAAe,SAAuBxqD,GACpC,MAAOA,GAAGwqD,iBAEZsL,WAAY,SAAoB91D,GAC9B,MAAOA,GAAG8G,gBAAgBxE,EAAItC,EAAGmH,YAAa,KAEhD4uD,SAAU,SAAkB/1D,GAC1B,MAAOA,GAAG8G,gBAAgBxE,EAAItC,EAAG4D,cAEnCoyD,YAAa,SAAqBh2D,GAChC,MAAOA,GAAGgqD,mBAAmB,SAAUrkD,GACrC,MAAO6uC,IAAUx0C,EAAI2F,EAAMnF,KAAK+B,QAC7BymC,OAAQ,QAAS/Z,KAAM,KAE9BgnC,iBAAkB,SAA0Bj2D,GAC1C,MAAOA,GAAGgqD,mBAAmB,SAAUrkD,GACrC,MAAOgvC,IAAe30C,EAAI2F,EAAMnF,QAC7BwoC,OAAQ,QAAS/Z,KAAM,KAE9BinC,UAAW,SAAmBl2D,GAC5B,MAAOA,GAAGgqD,mBAAmB,SAAUrkD,GACrC,MAAO+uC,IAAQ10C,EAAI2F,EAAMnF,KAAK+B,QAC3BymC,OAAQ,QAAS/Z,MAAO,KAE/BknC,YAAa,SAAqBn2D,GAChC,MAAOA,GAAGgqD,mBAAmB,SAAUrkD,GACrC,GAAIsW,GAAMjc,EAAGo2D,aAAazwD,EAAMnF,KAAM,OAAOyb,IAAM,CACnD,OAAOjc,GAAGo8C,YAAax8B,KAAM5f,EAAG8a,QAAQrL,QAAQ4P,YAAc,IAAKpD,IAAKA,GAAO,QAC9E2nC,KAELyS,WAAY,SAAoBr2D,GAC9B,MAAOA,GAAGgqD,mBAAmB,SAAUrkD,GACrC,GAAIsW,GAAMjc,EAAGo2D,aAAazwD,EAAMnF,KAAM,OAAOyb,IAAM,CACnD,OAAOjc,GAAGo8C,YAAax8B,KAAM,EAAG3D,IAAKA,GAAO,QAC3C2nC,KAEL0S,gBAAiB,SAAyBt2D,GACxC,MAAOA,GAAGgqD,mBAAmB,SAAUrkD,GACrC,GAAIsW,GAAMjc,EAAGo2D,aAAazwD,EAAMnF,KAAM,OAAOyb,IAAM,EAC/C1b,EAAMP,EAAGo8C,YAAax8B,KAAM,EAAG3D,IAAKA,GAAO,MAC/C,OAAI1b,GAAIkB,GAAKzB,EAAGmD,QAAQ5C,EAAIgC,MAAMiK,OAAO,MAChCmoC,GAAe30C,EAAI2F,EAAMnF,MAE3BD,GACNqjD,KAEL2S,SAAU,SAAkBv2D,GAC1B,MAAOA,GAAGw2D,OAAO,EAAG,SAEtBC,WAAY,SAAoBz2D,GAC9B,MAAOA,GAAGw2D,MAAM,EAAG,SAErBE,SAAU,SAAkB12D,GAC1B,MAAOA,GAAGw2D,OAAO,EAAG,SAEtBG,WAAY,SAAoB32D,GAC9B,MAAOA,GAAGw2D,MAAM,EAAG,SAErBI,WAAY,SAAoB52D,GAC9B,MAAOA,GAAG62D,OAAO,EAAG,SAEtBC,YAAa,SAAqB92D,GAChC,MAAOA,GAAG62D,MAAM,EAAG,SAErBE,aAAc,SAAsB/2D,GAClC,MAAOA,GAAG62D,OAAO,EAAG,WAEtBG,cAAe,SAAuBh3D,GACpC,MAAOA,GAAG62D,MAAM,EAAG,WAErBI,WAAY,SAAoBj3D,GAC9B,MAAOA,GAAG62D,OAAO,EAAG,SAEtBK,aAAc,SAAsBl3D,GAClC,MAAOA,GAAG62D,MAAM,EAAG,UAErBM,YAAa,SAAqBn3D,GAChC,MAAOA,GAAG62D,OAAO,EAAG,UAEtBO,YAAa,SAAqBp3D,GAChC,MAAOA,GAAG62D,MAAM,EAAG,SAErBQ,cAAe,SAAuBr3D,GACpC,MAAOA,GAAGs3D,SAAS,EAAG,SAExBC,aAAc,SAAsBv3D,GAClC,MAAOA,GAAGs3D,QAAQ,EAAG,SAEvBE,cAAe,SAAuBx3D,GACpC,MAAOA,GAAGs3D,SAAS,EAAG,SAExBG,aAAc,SAAsBz3D,GAClC,MAAOA,GAAGs3D,QAAQ,EAAG,SAEvBI,eAAgB,SAAwB13D,GACtC,MAAOA,GAAGs3D,SAAS,EAAG,UAExBK,cAAe,SAAuB33D,GACpC,MAAOA,GAAGs3D,QAAQ,EAAG,UAEvBM,WAAY,SAAoB53D,GAC9B,MAAOA,GAAG63D,gBAAgB,UAE5BC,WAAY,SAAoB93D,GAC9B,MAAOA,GAAG63D,gBAAgB,QAE5BE,WAAY,SAAoB/3D,GAC9B,MAAOA,GAAG63D,gBAAgB,aAE5BG,UAAW,SAAmBh4D,GAC5B,MAAOA,GAAGuxC,iBAAiB,OAE7B0mB,cAAe,SAAuBj4D,GAIpC,IAAK,GAHDk4D,MACA/3D,EAASH,EAAGI,iBACZiM,EAAUrM,EAAGsU,QAAQjI,QAChBpP,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,GAAIsD,GAAMJ,EAAOlD,GAAG4I,OAChBgH,EAAMT,EAAYpM,EAAGmD,QAAQ5C,EAAIgC,MAAOhC,EAAIkB,GAAI4K,EACpD6rD,GAAOxvD,KAAKqE,EAASV,EAAUQ,EAAMR,IAEvCrM,EAAGoD,kBAAkB80D,IAEvBC,WAAY,SAAoBn4D,GAC1BA,EAAGwF,oBACLxF,EAAG63D,gBAAgB,OAEnB73D,EAAGo4D,YAAY,cAUnBC,eAAgB,SAAwBr4D,GACtC,MAAOq/B,IAAQr/B,EAAI,WAGjB,IAAK,GAFDG,GAASH,EAAGI,iBACZgqD,KACKntD,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IACjC,GAAKkD,EAAOlD,GAAGqD,QAAf,CAGA,GAAImF,GAAMtF,EAAOlD,GAAGuD,KAChB+B,EAAOY,EAAQnD,EAAGoP,IAAK3J,EAAIlD,MAAMH,IACrC,IAAIG,EAIF,GAHIkD,EAAIhE,IAAMc,EAAK/E,SACjBiI,EAAM,GAAInD,GAAImD,EAAIlD,KAAMkD,EAAIhE,GAAK,IAE/BgE,EAAIhE,GAAK,EACXgE,EAAM,GAAInD,GAAImD,EAAIlD,KAAMkD,EAAIhE,GAAK,GACjCzB,EAAGyC,aAAaF,EAAKP,OAAOyD,EAAIhE,GAAK,GAAKc,EAAKP,OAAOyD,EAAIhE,GAAK,GAAIa,EAAImD,EAAIlD,KAAMkD,EAAIhE,GAAK,GAAIgE,EAAK,kBAC9F,IAAIA,EAAIlD,KAAOvC,EAAGoP,IAAI+B,MAAO,CAClC,GAAIlN,GAAOd,EAAQnD,EAAGoP,IAAK3J,EAAIlD,KAAO,GAAGH,IACrC6B,KACFwB,EAAM,GAAInD,GAAImD,EAAIlD,KAAM,GACxBvC,EAAGyC,aAAaF,EAAKP,OAAO,GAAKhC,EAAGoP,IAAI6hC,gBAAkBhtC,EAAKjC,OAAOiC,EAAKzG,OAAS,GAAI8E,EAAImD,EAAIlD,KAAO,EAAG0B,EAAKzG,OAAS,GAAIiI,EAAK,eAIvI2kD,EAAO1hD,KAAK,GAAIs8B,IAAMv/B,EAAKA,IAE7BzF,EAAG4C,cAAcwnD,MAGrBkO,iBAAkB,SAA0Bt4D,GAC1C,MAAOq/B,IAAQr/B,EAAI,WAEjB,IAAK,GADDu4D,GAAOv4D,EAAGI,iBACLnD,EAAIs7D,EAAK/6D,OAAS,EAAGP,GAAK,EAAGA,IACpC+C,EAAGyC,aAAazC,EAAGoP,IAAI6hC,gBAAiBsnB,EAAKt7D,GAAGyF,OAAQ61D,EAAKt7D,GAAGuD,KAAM,SAExE+3D,GAAOv4D,EAAGI,gBACV,KAAK,GAAI8T,GAAM,EAAGA,EAAMqkD,EAAK/6D,OAAQ0W,IACnClU,EAAG6C,WAAW01D,EAAKrkD,GAAKrO,OAAOtD,KAAM,MAAM,EAE7C04B,IAAoBj7B,MAGxBw4D,SAAU,SAAkBx4D,GAC1B,MAAOA,GAAGuxC,iBAAiB,KAAM,UAEnCknB,gBAAiB,SAAyBz4D,GACxC,MAAOA,GAAGy4D,oBAyEVhjB,GAAU,GAAIuF,IAoEdjF,GAAiB,KA4EjBa,GAAY,SAAmBtW,EAAM//B,EAAKwe,GAC5ClhB,KAAKyiC,KAAOA,EACZziC,KAAK0C,IAAMA,EACX1C,KAAKkhB,OAASA,EAGhB63B,IAAUv6C,UAAUq6C,QAAU,SAAUpW,EAAM//B,EAAKwe,GACjD,MAAOlhB,MAAKyiC,KATU,IASiBA,GAA8B,GAAtBt5B,EAAIzG,EAAK1C,KAAK0C,MAAawe,GAAUlhB,KAAKkhB,OAG3F,IAAI43B,IACAF,GAybAlyC,IAASqiB,SAAU,WACnB,MAAO,oBAGP8zB,MACAS,KAiTJV,IAAaC,SAAWA,GAExBD,GAAaU,eAAiBA,EAiK9B,IAAIE,MACJZ,IAAaie,eAAiB,SAAUx7D,GACtC,MAAOm+C,IAAU3yC,KAAKxL,GA2FxB,IAAIggD,IAAa,KA80Bbyb,GAAuB,SAA8B34D,GACvDnC,KAAKmC,GAAKA,EACVnC,KAAK+6D,eAAiB/6D,KAAKg7D,iBAAmBh7D,KAAKi7D,cAAgBj7D,KAAKk7D,gBAAkB,KAC1Fl7D,KAAKm7D,QAAU,GAAIhe,IACnBn9C,KAAKo7D,UAAY,KACjBp7D,KAAKq7D,aAAc,EACnBr7D,KAAKs7D,eAAiB,KAGxBR,IAAqBt8D,UAAU6W,KAAO,SAAU4H,GA+C9C,QAASs+C,GAAU38D,GACjB,IAAI+gB,GAAexd,EAAIvD,GAAvB,CAGA,GAAIuD,EAAGwF,oBACLw3C,IAAgBW,UAAU,EAAOv7C,KAAMpC,EAAGkqD,kBAC5B,OAAVztD,EAAEoF,MACJ7B,EAAGuxC,iBAAiB,GAAI,KAAM,WAE3B,CAAA,IAAKvxC,EAAGsU,QAAQ+kD,gBACrB,MAEA,IAAIl5D,GAASm+C,GAAet+C,EAC5Bg9C,KAAgBW,UAAU,EAAMv7C,KAAMjC,EAAOiC,OAC/B,OAAV3F,EAAEoF,MACJ7B,EAAGuF,UAAU,WACXvF,EAAG4C,cAAczC,EAAOA,OAAQ,EAAGisC,IACnCpsC,EAAGuxC,iBAAiB,GAAI,KAAM,SAIpC,GAAI90C,EAAEuhD,cAAe,CACnBvhD,EAAEuhD,cAAcsb,WAChB,IAAIlvD,GAAU8yC,GAAW96C,KAAK4uC,KAAK,KAGnC,IADAv0C,EAAEuhD,cAAcvM,QAAQ,OAAQrnC,GAC5B3N,EAAEuhD,cAAc3M,QAAQ,SAAWjnC,EAErC,WADA3N,GAAE2B,iBAKN,GAAIm7D,GAAS3a,KACTC,EAAK0a,EAAOvvD,UAChBhK,GAAG8a,QAAQhL,UAAUgb,aAAayuC,EAAQv5D,EAAG8a,QAAQhL,UAAU9F,YAC/D60C,EAAGxxC,MAAQ6vC,GAAW96C,KAAK4uC,KAAK,KAChC,IAAIwoB,GAAWj7D,SAAS0M,aACxBq4C,IAAYzE,GACZ90B,WAAW,WACT/pB,EAAG8a,QAAQhL,UAAU/F,YAAYwvD,GACjCC,EAAS1hC,QACL0hC,GAAY1a,GACdzvC,EAAMoqD,wBAEP,KA1FL,GAAIxuB,GAASptC,KAETwR,EAAQxR,KACRmC,EAAKqP,EAAMrP,GACX8+C,EAAMzvC,EAAMyvC,IAAMhkC,EAAQrL,OAC9BgvC,IAAoBK,EAAK9+C,EAAGsU,QAAQqqC,YAEpCh4C,GAAGm4C,EAAK,QAAS,SAAUriD,GACrB+gB,GAAexd,EAAIvD,IAAMqhD,GAAYrhD,EAAGuD,IAIxC0Q,IAAc,IAChBqZ,WAAWxkB,GAAUvF,EAAI,WACvB,MAAOirC,GAAOyuB,kBACZ,MAIR/yD,GAAGm4C,EAAK,mBAAoB,SAAUriD,GACpCwuC,EAAOguB,WAAcnrC,KAAMrxB,EAAEqxB,KAAM4Z,MAAM,KAE3C/gC,GAAGm4C,EAAK,oBAAqB,SAAUriD,GAChCwuC,EAAOguB,YACVhuB,EAAOguB,WAAcnrC,KAAMrxB,EAAEqxB,KAAM4Z,MAAM,MAG7C/gC,GAAGm4C,EAAK,iBAAkB,SAAUriD,GAC9BwuC,EAAOguB,YACLx8D,EAAEqxB,MAAQmd,EAAOguB,UAAUnrC,MAC7Bmd,EAAO0uB,kBAET1uB,EAAOguB,UAAUvxB,MAAO,KAI5B/gC,GAAGm4C,EAAK,aAAc,WACpB,MAAOzvC,GAAMuqD,wBAGfjzD,GAAGm4C,EAAK,QAAS,WACV7T,EAAOguB,WACVhuB,EAAO0uB,oBAkDXhzD,GAAGm4C,EAAK,OAAQsa,GAChBzyD,GAAGm4C,EAAK,MAAOsa,IAGjBT,GAAqBt8D,UAAUg5B,iBAAmB,WAChD,GAAI1S,GAAS0S,GAAiBx3B,KAAKmC,IAAI,EAEvC,OADA2iB,GAAOmV,MAAQj6B,KAAKmC,GAAGc,MAAMy2B,QACtB5U,GAGTg2C,GAAqBt8D,UAAU+4B,cAAgB,SAAU5yB,EAAMq8B,GACxDr8B,GAAS3E,KAAKmC,GAAG8a,QAAQxJ,KAAK9T,UAG/BgF,EAAKs1B,OAAS+G,IAChBhhC,KAAK47D,uBAEP57D,KAAKg8D,uBAAuBr3D,KAG9Bm2D,GAAqBt8D,UAAUo9D,qBAAuB,WACpD,GAAI92D,GAAMgrB,OAAO2T,eACbthC,EAAKnC,KAAKmC,GACV6kC,EAAO7kC,EAAGoP,IAAIzM,IAAI2yB,UAClBzvB,EAAOg/B,EAAKh/B,OACZ3B,EAAK2gC,EAAK3gC,IAEd,IAAIlE,EAAG8a,QAAQ5J,QAAUlR,EAAG8a,QAAQ7J,UAAYpL,EAAKtD,MAAQvC,EAAG8a,QAAQ5J,QAAUhN,EAAG3B,KAAOvC,EAAG8a,QAAQ7J,SAErG,WADAtO,GAAIq/B,iBAIN,IAAI83B,GAAYhZ,GAAS9gD,EAAI2C,EAAI4+B,WAAY5+B,EAAI8+B,cAC7Cs4B,EAAWjZ,GAAS9gD,EAAI2C,EAAI++B,UAAW/+B,EAAIg/B,YAC/C,KAAIm4B,GAAcA,EAAU7Z,MAAO8Z,GAAaA,EAAS9Z,KAAiD,GAA1Cj5C,EAAI+N,EAAO+kD,EAAWC,GAAWl0D,IAAsD,GAAxCmB,EAAI8N,EAAOglD,EAAWC,GAAW71D,GAAhJ,CAIA,GAAIoN,GAAOtR,EAAG8a,QAAQxJ,KAClBtO,EAAQ6C,EAAKtD,MAAQvC,EAAG8a,QAAQ7J,UAAY2uC,GAAS5/C,EAAI6F,KAAWwF,KAAMiG,EAAK,GAAG1B,QAAQnL,IAAI,GAAI0S,OAAQ,GAC1G3V,EAAM0C,EAAG3B,KAAOvC,EAAG8a,QAAQ5J,QAAU0uC,GAAS5/C,EAAIkE,EACtD,KAAK1C,EAAK,CACR,GAAIoO,GAAU0B,EAAKA,EAAK9T,OAAS,GAAGoS,QAChCyN,EAASzN,EAAQ2W,KAAO3W,EAAQ2W,KAAK3W,EAAQ2W,KAAK/oB,OAAS,GAAKoS,EAAQnL,GAC5EjD,IAAQ6J,KAAMgS,EAAOA,EAAO7f,OAAS,GAAI2Z,OAAQkG,EAAOA,EAAO7f,OAAS,GAAK6f,EAAOA,EAAO7f,OAAS,IAGtG,IAAKwF,IAAUxB,EAEb,WADAmB,GAAIq/B,iBAIN,IACIg4B,GADA11D,EAAM3B,EAAIs3D,YAAct3D,EAAIu3D,WAAW,EAE3C,KACEF,EAAMr0D,GAAM3C,EAAMqI,KAAMrI,EAAMmU,OAAQ3V,EAAI2V,OAAQ3V,EAAI6J,MACtD,MAAO5O,IACLu9D,KACGlpD,IAAS9Q,EAAGc,MAAMy2B,SACrB50B,EAAIotB,SAAS/sB,EAAMqI,KAAMrI,EAAMmU,QAC1B6iD,EAAIvgD,YACP9W,EAAIq/B,kBACJr/B,EAAIs/B,SAAS+3B,MAGfr3D,EAAIq/B,kBACJr/B,EAAIs/B,SAAS+3B,IAEX11D,GAAyB,MAAlB3B,EAAI4+B,WACb5+B,EAAIs/B,SAAS39B,GACJwM,IACTjT,KAAKs8D,oBAGTt8D,KAAKu8D,sBAGPzB,GAAqBt8D,UAAU89D,iBAAmB,WAChD,GAAIlvB,GAASptC,IAEbo+C,cAAap+C,KAAKq7D,aAClBr7D,KAAKq7D,YAAcnvC,WAAW,WAC5BkhB,EAAOiuB,aAAc,EACjBjuB,EAAOzN,oBACTyN,EAAOjrC,GAAGuF,UAAU,WAClB,MAAO0lC,GAAOjrC,GAAGge,MAAMwf,kBAAmB,KAG7C,KAGLm7B,GAAqBt8D,UAAUw9D,uBAAyB,SAAUr3D,GAChEyH,EAAqBpM,KAAKmC,GAAG8a,QAAQnL,UAAWnN,EAAKgzB,SACrDvrB,EAAqBpM,KAAKmC,GAAG8a,QAAQpL,aAAclN,EAAKkzB,YAG1DijC,GAAqBt8D,UAAU+9D,kBAAoB,WACjD,GAAIz3D,GAAMgrB,OAAO2T,cACjBzjC,MAAK+6D,eAAiBj2D,EAAI4+B,WAAW1jC,KAAKg7D,iBAAmBl2D,EAAI8+B,aACjE5jC,KAAKi7D,cAAgBn2D,EAAI++B,UAAU7jC,KAAKk7D,gBAAkBp2D,EAAIg/B,aAGhEg3B,GAAqBt8D,UAAUg+D,kBAAoB,WACjD,GAAI13D,GAAMgrB,OAAO2T,cACjB,KAAK3+B,EAAIs3D,WACP,OAAO,CAET,IAAI5uD,GAAO1I,EAAIu3D,WAAW,GAAGI,uBAC7B,OAAO3vD,GAAS9M,KAAKihD,IAAKzzC,IAG5BstD,GAAqBt8D,UAAUy7B,MAAQ,WACL,YAA5Bj6B,KAAKmC,GAAGsU,QAAQ0D,WACbna,KAAKw8D,qBACRx8D,KAAKu3B,cAAcv3B,KAAKw3B,oBAAoB,GAE9Cx3B,KAAKihD,IAAIhnB,UAGb6gC,GAAqBt8D,UAAUk+D,KAAO,WACpC18D,KAAKihD,IAAIyb,QAEX5B,GAAqBt8D,UAAUigD,SAAW,WACxC,MAAOz+C,MAAKihD,KAGd6Z,GAAqBt8D,UAAUy6C,cAAgB,WAC7C,OAAO,GAGT6hB,GAAqBt8D,UAAU+7B,cAAgB,WAU7C,QAASoiC,KACHnrD,EAAMrP,GAAGc,MAAMy2B,UACjBloB,EAAMorD,gBACNprD,EAAM2pD,QAAQj7C,IAAI1O,EAAMrP,GAAGsU,QAAQomD,aAAcF,IAZrD,GAAInrD,GAAQxR,IACRA,MAAKw8D,oBACPx8D,KAAK48D,gBAELp7B,GAAQxhC,KAAKmC,GAAI,WACf,MAAOqP,GAAMrP,GAAGge,MAAMwf,kBAAmB,IAU7C3/B,KAAKm7D,QAAQj7C,IAAIlgB,KAAKmC,GAAGsU,QAAQomD,aAAcF,IAGjD7B,GAAqBt8D,UAAUmhC,iBAAmB,WAChD,GAAI76B,GAAMgrB,OAAO2T,cACjB,OAAO3+B,GAAI4+B,YAAc1jC,KAAK+6D,gBAAkBj2D,EAAI8+B,cAAgB5jC,KAAKg7D,kBAAoBl2D,EAAI++B,WAAa7jC,KAAKi7D,eAAiBn2D,EAAIg/B,aAAe9jC,KAAKk7D,iBAG9JJ,GAAqBt8D,UAAUo+D,cAAgB,WAC7C,GAA2B,MAAvB58D,KAAKs7D,iBAA0Bt7D,KAAKq7D,aAAgBr7D,KAAK2/B,mBAA7D,CAGA,GAAI76B,GAAMgrB,OAAO2T,eACbthC,EAAKnC,KAAKmC,EAOd,IAAIyxB,IAAWD,IAAU3zB,KAAKmC,GAAGsU,QAAQjE,QAAQ7S,QAAUsiD,GAAWn9C,EAAI4+B,YAIxE,MAHA1jC,MAAKmC,GAAG26D,kBAAmB94D,KAAM,UAAW4xC,QAAS,EAAGr1C,eAAgBsF,KAAKqL,MAC7ElR,KAAK08D,WACL18D,MAAKi6B,OAGP,KAAIj6B,KAAKo7D,UAAT,CAGAp7D,KAAKu8D,mBACL,IAAI13D,GAASo+C,GAAS9gD,EAAI2C,EAAI4+B,WAAY5+B,EAAI8+B,cAC1CjhC,EAAOsgD,GAAS9gD,EAAI2C,EAAI++B,UAAW/+B,EAAIg/B,YACvCj/B,IAAUlC,GACZ6+B,GAAQr/B,EAAI,WACV2qC,GAAa3qC,EAAGoP,IAAK81B,GAAgBxiC,EAAQlC,GAAO4rC,KAChD1pC,EAAOu9C,KAAOz/C,EAAKy/C,OACrBjgD,EAAGge,MAAMwf,kBAAmB,QAMpCm7B,GAAqBt8D,UAAUu+D,YAAc,WAChB,MAAvB/8D,KAAKs7D,iBACPld,aAAap+C,KAAKs7D,gBAClBt7D,KAAKs7D,eAAiB,KAGxB,IAAIn5D,GAAKnC,KAAKmC,GACV8a,EAAU9a,EAAG8a,QACbnY,EAAM3C,EAAGoP,IAAIzM,IAAI2yB,UACjBzvB,EAAOlD,EAAIkD,OACX3B,EAAKvB,EAAIuB,IAOb,IANe,GAAX2B,EAAKpE,IAAWoE,EAAKtD,KAAOvC,EAAGmH,cACjCtB,EAAOvD,EAAIuD,EAAKtD,KAAO,EAAGY,EAAQnD,EAAGoP,IAAKvJ,EAAKtD,KAAO,GAAG/E,SAEvD0G,EAAGzC,IAAM0B,EAAQnD,EAAGoP,IAAKlL,EAAG3B,MAAMH,KAAK5E,QAAU0G,EAAG3B,KAAOvC,EAAG4D,aAChEM,EAAK5B,EAAI4B,EAAG3B,KAAO,EAAG,IAEpBsD,EAAKtD,KAAOuY,EAAQ7J,UAAY/M,EAAG3B,KAAOuY,EAAQ5J,OAAS,EAC7D,OAAO,CAGT,IAAI2pD,GAAW5jC,EAAU6jC,CACrBj1D,GAAKtD,MAAQuY,EAAQ7J,UAA0D,IAA7C4pD,EAAY1rC,GAAcnvB,EAAI6F,EAAKtD,QACvE00B,EAAWpjB,EAAOiH,EAAQxJ,KAAK,GAAG/O,MAClCu4D,EAAWhgD,EAAQxJ,KAAK,GAAGjG,OAE3B4rB,EAAWpjB,EAAOiH,EAAQxJ,KAAKupD,GAAWt4D,MAC1Cu4D,EAAWhgD,EAAQxJ,KAAKupD,EAAY,GAAGxvD,KAAK6gB,YAE9C,IACIgL,GAAQ6jC,EADRC,EAAU7rC,GAAcnvB,EAAIkE,EAAG3B,KAUnC,IARIy4D,GAAWlgD,EAAQxJ,KAAK9T,OAAS,GACnC05B,EAASpc,EAAQ5J,OAAS,EAC1B6pD,EAASjgD,EAAQrL,QAAQgX,YAEzByQ,EAASrjB,EAAOiH,EAAQxJ,KAAK0pD,EAAU,GAAGz4D,MAAQ,EAClDw4D,EAASjgD,EAAQxJ,KAAK0pD,EAAU,GAAG3vD,KAAKg2C,kBAGrCyZ,EACH,OAAO,CAIT,KAFA,GAAIG,GAAUj7D,EAAGoP,IAAI0+B,WAAWoS,GAAelgD,EAAI86D,EAAUC,EAAQ9jC,EAAUC,IAC3EgkC,EAAU1nD,EAAWxT,EAAGoP,IAAK9M,EAAI20B,EAAU,GAAI30B,EAAI40B,EAAQ/zB,EAAQnD,EAAGoP,IAAK8nB,GAAQ90B,KAAK5E,SACrFy9D,EAAQz9D,OAAS,GAAK09D,EAAQ19D,OAAS,GAC5C,GAAIyP,EAAIguD,IAAYhuD,EAAIiuD,GACtBD,EAAQxyB,MAAMyyB,EAAQzyB,MAAMvR,QACvB,CAAA,GAAI+jC,EAAQ,IAAMC,EAAQ,GAG/B,KAFAD,GAAQloD,QAAQmoD,EAAQnoD,QAAQkkB,IAWpC,IALA,GAAIkkC,GAAW,EACXC,EAAS,EACTzgC,EAASsgC,EAAQ,GACjBI,EAASH,EAAQ,GACjBI,EAAc53D,KAAKC,IAAIg3B,EAAOn9B,OAAQ69D,EAAO79D,QAC1C29D,EAAWG,GAAe3gC,EAAOnsB,WAAW2sD,IAAaE,EAAO7sD,WAAW2sD,MAC9EA,CAKJ,KAHA,GAAII,GAAStuD,EAAIguD,GACbO,EAASvuD,EAAIiuD,GACbO,EAAY/3D,KAAKC,IAAI43D,EAAO/9D,QAA4B,GAAlBy9D,EAAQz9D,OAAc29D,EAAW,GAAIK,EAAOh+D,QAA4B,GAAlB09D,EAAQ19D,OAAc29D,EAAW,IAC1HC,EAASK,GAAaF,EAAO/sD,WAAW+sD,EAAO/9D,OAAS49D,EAAS,IAAMI,EAAOhtD,WAAWgtD,EAAOh+D,OAAS49D,EAAS,MACrHA,CAGJ,IAAsB,GAAlBH,EAAQz9D,QAAiC,GAAlB09D,EAAQ19D,QAAey5B,GAAYpxB,EAAKtD,KACjE,KAAO44D,GAAYA,EAAWt1D,EAAKpE,IAAM85D,EAAO/sD,WAAW+sD,EAAO/9D,OAAS49D,EAAS,IAAMI,EAAOhtD,WAAWgtD,EAAOh+D,OAAS49D,EAAS,IACnID,IACAC,GAIJH,GAAQA,EAAQz9D,OAAS,GAAK+9D,EAAO75D,MAAM,EAAG65D,EAAO/9D,OAAS49D,GAAQz1C,QAAQ,WAAY,IAC1Fs1C,EAAQ,GAAKA,EAAQ,GAAGv5D,MAAMy5D,GAAUx1C,QAAQ,WAAY,GAE5D,IAAI+1C,GAASp5D,EAAI20B,EAAUkkC,GACvBQ,EAAOr5D,EAAI40B,EAAQgkC,EAAQ19D,OAASyP,EAAIiuD,GAAS19D,OAAS49D,EAAS,EACvE,OAAIH,GAAQz9D,OAAS,GAAKy9D,EAAQ,IAAMj0D,EAAI00D,EAAQC,IAClD9tB,GAAc7tC,EAAGoP,IAAK6rD,EAASS,EAAQC,EAAM,WACtC,OAFT,IAMFhD,GAAqBt8D,UAAU44C,aAAe,WAC5Cp3C,KAAK+7D,uBAEPjB,GAAqBt8D,UAAU87B,MAAQ,WACrCt6B,KAAK+7D,uBAEPjB,GAAqBt8D,UAAUu9D,oBAAsB,WAC9C/7D,KAAKo7D,YAGVhd,aAAap+C,KAAKs7D,gBAClBt7D,KAAKo7D,UAAY,KACjBp7D,KAAK67D,gBACL77D,KAAKihD,IAAIyb,OACT18D,KAAKihD,IAAIhnB,UAEX6gC,GAAqBt8D,UAAUs9D,gBAAkB,WAC/C,GAAI1uB,GAASptC,IAEc,OAAvBA,KAAKs7D,iBAGTt7D,KAAKs7D,eAAiBpvC,WAAW,WAE/B,GADAkhB,EAAOkuB,eAAiB,KACpBluB,EAAOguB,UAAW,CACpB,IAAIhuB,EAAOguB,UAAUvxB,KAGnB,MAFAuD,GAAOguB,UAAY,KAKvBhuB,EAAOyuB,iBACN,MAGLf,GAAqBt8D,UAAUq9D,cAAgB,WAC7C,GAAIzuB,GAASptC,MAETA,KAAKmC,GAAGwwC,cAAiB3yC,KAAK+8D,eAChCv7B,GAAQxhC,KAAKmC,GAAI,WACf,MAAOw/B,IAAUyL,EAAOjrC,OAK9B24D,GAAqBt8D,UAAU0rB,cAAgB,SAAU1c,GACvDA,EAAKuwD,gBAAkB,SAGzBjD,GAAqBt8D,UAAU+5C,WAAa,SAAU35C,GAClC,GAAdA,EAAE45C,WAGN55C,EAAE2B,iBACGP,KAAKmC,GAAGwwC,cACXjrC,GAAU1H,KAAKmC,GAAIm9C,IAAgBt/C,KAAKmC,GAAIuU,OAAO+hC,aAA2B,MAAd75C,EAAE45C,SAAmB55C,EAAEg3C,QAAUh3C,EAAE45C,UAAW,KAIlHsiB,GAAqBt8D,UAAUw/D,gBAAkB,SAAUx3D,GACzDxG,KAAKihD,IAAI8c,gBAAkBrnD,OAAc,YAAPlQ,IAGpCs0D,GAAqBt8D,UAAUg7C,cAAgB,aAC/CshB,GAAqBt8D,UAAUy/D,cAAgB,aAE/CnD,GAAqBt8D,UAAUyrB,uBAAwB,CAsMvD,IAAIi0C,IAAgB,SAAuB/7D,GACzCnC,KAAKmC,GAAKA,EAEVnC,KAAKm+D,UAAY,GAKjBn+D,KAAKo+D,aAAc,EAEnBp+D,KAAKm7D,QAAU,GAAIhe,IAEnBn9C,KAAK4nD,cAAe,EACpB5nD,KAAKo7D,UAAY,KAGnB8C,IAAc1/D,UAAU6W,KAAO,SAAU4H,GAkCvC,QAASohD,GAAez/D,GACtB,IAAI+gB,GAAexd,EAAIvD,GAAvB,CAGA,GAAIuD,EAAGwF,oBACLw3C,IAAgBW,UAAU,EAAOv7C,KAAMpC,EAAGkqD,sBACrC,CAAA,IAAKlqD,EAAGsU,QAAQ+kD,gBACrB,MAEA,IAAIl5D,GAASm+C,GAAet+C,EAC5Bg9C,KAAgBW,UAAU,EAAMv7C,KAAMjC,EAAOiC,OAC/B,OAAV3F,EAAEoF,KACJ7B,EAAG4C,cAAczC,EAAOA,OAAQ,KAAMisC,KAEtC/8B,EAAM2sD,UAAY,GAClBnd,EAAGxxC,MAAQlN,EAAOiC,KAAK4uC,KAAK,MAC5BsS,GAAYzE,IAGF,OAAVpiD,EAAEoF,OACJ7B,EAAGc,MAAMi6C,aAAc,IArD3B,GAAI9P,GAASptC,KAETwR,EAAQxR,KACRmC,EAAKnC,KAAKmC,GAGV8+C,EAAMjhD,KAAK2S,QAAUouC,KAGrBC,EAAKhhD,KAAK0jD,SAAWzC,EAAI90C,UAC7B8Q,GAAQtK,QAAQsa,aAAag0B,EAAKhkC,EAAQtK,QAAQxG,YAG9C+0C,KACFF,EAAGx0C,MAAMwiB,MAAQ,OAGnBlmB,GAAGk4C,EAAI,QAAS,WACVpuC,IAAMC,IAAc,GAAKu6B,EAAOwa,eAClCxa,EAAOwa,aAAe,MAExBp2C,EAAMmrD,SAGR7zD,GAAGk4C,EAAI,QAAS,SAAUpiD,GACpB+gB,GAAexd,EAAIvD,IAAMqhD,GAAYrhD,EAAGuD,KAI5CA,EAAGc,MAAMg6C,eAAgB,EACzBzrC,EAAM8sD,cA0BRx1D,GAAGk4C,EAAI,MAAOqd,GACdv1D,GAAGk4C,EAAI,OAAQqd,GAEfv1D,GAAGmU,EAAQvK,SAAU,QAAS,SAAU9T,GAClC6wB,GAAcxS,EAASre,IAAM+gB,GAAexd,EAAIvD,KAGpDuD,EAAGc,MAAMg6C,eAAgB,EACzBzrC,EAAMyoB,WAIRnxB,GAAGmU,EAAQhL,UAAW,cAAe,SAAUrT,GACxC6wB,GAAcxS,EAASre,IAC1B4hB,GAAiB5hB,KAIrBkK,GAAGk4C,EAAI,mBAAoB,WACzB,GAAI77C,GAAQhD,EAAG0F,UAAU,OACrB2J,GAAM4pD,WACR5pD,EAAM4pD,UAAUtzD,MAAMT,QAExBmK,EAAM4pD,WACJj2D,MAAOA,EACP2C,MAAO3F,EAAGsG,SAAStD,EAAOhD,EAAG0F,UAAU,OAASa,UAAW,4BAG/DI,GAAGk4C,EAAI,iBAAkB,WACnBxvC,EAAM4pD,YACR5pD,EAAMmrD,OACNnrD,EAAM4pD,UAAUtzD,MAAMT,QACtBmK,EAAM4pD,UAAY,SAKxB8C,GAAc1/D,UAAUg5B,iBAAmB,WAEzC,GAAIr1B,GAAKnC,KAAKmC,GACV8a,EAAU9a,EAAG8a,QACb1L,EAAMpP,EAAGoP,IACTuT,EAAS0S,GAAiBr1B,EAG9B,IAAIA,EAAGsU,QAAQ8nD,oBAAqB,CAClC,GAAIC,GAAU1pC,GAAc3yB,EAAIoP,EAAIzM,IAAI2yB,UAAU90B,KAAM,OACpD87D,EAAUxhD,EAAQtK,QAAQkP,wBAC1B68C,EAAUzhD,EAAQrL,QAAQiQ,uBAC9BiD,GAAO65C,MAAQ94D,KAAKoC,IAAI,EAAGpC,KAAKC,IAAImX,EAAQtK,QAAQ4d,aAAe,GAAIiuC,EAAQpgD,IAAMsgD,EAAQtgD,IAAMqgD,EAAQrgD,MAC3G0G,EAAO85C,OAAS/4D,KAAKoC,IAAI,EAAGpC,KAAKC,IAAImX,EAAQtK,QAAQ6c,YAAc,GAAIgvC,EAAQz8C,KAAO28C,EAAQ38C,KAAO08C,EAAQ18C,OAG/G,MAAO+C,IAGTo5C,GAAc1/D,UAAU+4B,cAAgB,SAAUsnC,GAChD,GAAI18D,GAAKnC,KAAKmC,GACV8a,EAAU9a,EAAG8a,OACjB7Q,GAAqB6Q,EAAQnL,UAAW+sD,EAAMlnC,SAC9CvrB,EAAqB6Q,EAAQpL,aAAcgtD,EAAMhnC,WAC9B,MAAfgnC,EAAMF,QACR3+D,KAAK2S,QAAQnG,MAAM4R,IAAMygD,EAAMF,MAAQ,KACvC3+D,KAAK2S,QAAQnG,MAAMuV,KAAO88C,EAAMD,OAAS,OAM7CV,GAAc1/D,UAAU87B,MAAQ,SAAUmF,GACxC,IAAIz/B,KAAK8+D,qBAAsB9+D,KAAKo7D,UAApC,CAGA,GAAIj5D,GAAKnC,KAAKmC,EACd,IAAIA,EAAGwF,oBAAqB,CAC1B3H,KAAKm+D,UAAY,EACjB,IAAI5xD,GAAUpK,EAAGshC,cACjBzjC,MAAK0jD,SAASl0C,MAAQjD,EAClBpK,EAAGc,MAAMy2B,SACX+rB,GAAYzlD,KAAK0jD,UAEf9wC,IAAMC,IAAc,IACtB7S,KAAK4nD,aAAer7C,OAEZkzB,KACVz/B,KAAKm+D,UAAYn+D,KAAK0jD,SAASl0C,MAAQ,GACnCoD,IAAMC,IAAc,IACtB7S,KAAK4nD,aAAe,SAK1BsW,GAAc1/D,UAAUigD,SAAW,WACjC,MAAOz+C,MAAK0jD,UAGdwa,GAAc1/D,UAAUy6C,cAAgB,WACtC,OAAO,GAGTilB,GAAc1/D,UAAUy7B,MAAQ,WAC9B,GAAgC,YAA5Bj6B,KAAKmC,GAAGsU,QAAQ0D,YAA4BjH,IAAU/F,KAAenN,KAAK0jD,UAC5E,IACE1jD,KAAK0jD,SAASzpB,QACd,MAAOr7B,MAIbs/D,GAAc1/D,UAAUk+D,KAAO,WAC7B18D,KAAK0jD,SAASgZ,QAGhBwB,GAAc1/D,UAAUy/D,cAAgB,WACtCj+D,KAAK2S,QAAQnG,MAAM4R,IAAMpe,KAAK2S,QAAQnG,MAAMuV,KAAO,GAGrDm8C,GAAc1/D,UAAU+7B,cAAgB,WACtCv6B,KAAK++D,YAKPb,GAAc1/D,UAAUugE,SAAW,WACjC,GAAI3xB,GAASptC,IAETA,MAAKo+D,aAGTp+D,KAAKm7D,QAAQj7C,IAAIlgB,KAAKmC,GAAGsU,QAAQomD,aAAc,WAC7CzvB,EAAOuvB,OACHvvB,EAAOjrC,GAAGc,MAAMy2B,SAClB0T,EAAO2xB,cAQbb,GAAc1/D,UAAU8/D,SAAW,WAIjC,QAAS7jD,KACOjJ,EAAMmrD,QACHqC,GAGfxtD,EAAM4sD,aAAc,EAAM5sD,EAAMutD,aAFhCC,GAAS,EAAKxtD,EAAM2pD,QAAQj7C,IAAI,GAAIzF,IANxC,GAAIukD,IAAS,EACTxtD,EAAQxR,IACZwR,GAAM4sD,aAAc,EASpB5sD,EAAM2pD,QAAQj7C,IAAI,GAAIzF,IASxByjD,GAAc1/D,UAAUm+D,KAAO,WAC7B,GAAIvvB,GAASptC,KAETmC,EAAKnC,KAAKmC,GACVqP,EAAQxR,KAAK0jD,SACbya,EAAYn+D,KAAKm+D,SAKrB,IAAIn+D,KAAK8+D,qBAAuB38D,EAAGc,MAAMy2B,SAAWkuB,GAAap2C,KAAW2sD,IAAcn+D,KAAKo7D,WAAaj5D,EAAGwwC,cAAgBxwC,EAAGsU,QAAQ2pC,cAAgBj+C,EAAGc,MAAM00C,OACjK,OAAO,CAGT,IAAIpzC,GAAOiN,EAAMhC,KAEjB,IAAIjL,GAAQ45D,IAAch8D,EAAGwF,oBAC3B,OAAO,CAKT,IAAIiL,IAAMC,IAAc,GAAK7S,KAAK4nD,eAAiBrjD,GAAQ4c,IAAO,kBAAkBld,KAAKM,GAEvF,MADApC,GAAG8a,QAAQzL,MAAM8oB,SACV,CAGT,IAAIn4B,EAAGoP,IAAIzM,KAAO3C,EAAG8a,QAAQ9H,kBAAmB,CAC9C,GAAI7B,GAAQ/O,EAAKoM,WAAW,EAI5B,IAHa,MAAT2C,GAAoB6qD,IACtBA,EAAY,KAED,MAAT7qD,EACW,MAAbtT,MAAKs6B,QAAet6B,KAAKmC,GAAGo4D,YAAY,QAM5C,IAFA,GAAI0E,GAAO,EACPz/D,EAAIqG,KAAKC,IAAIq4D,EAAUx+D,OAAQ4E,EAAK5E,QACjCs/D,EAAOz/D,GAAK2+D,EAAUxtD,WAAWsuD,IAAS16D,EAAKoM,WAAWsuD,MAC7DA,CAkBJ,OAfAz9B,IAAQr/B,EAAI,WACVm9C,GAAen9C,EAAIoC,EAAKV,MAAMo7D,GAAOd,EAAUx+D,OAASs/D,EAAM,KAAM7xB,EAAOguB,UAAY,WAAa,MAGhG72D,EAAK5E,OAAS,KAAQ4E,EAAKH,QAAQ,OAAS,EAC9CoN,EAAMhC,MAAQ49B,EAAO+wB,UAAY,GAEjC/wB,EAAO+wB,UAAY55D,EAGjB6oC,EAAOguB,YACThuB,EAAOguB,UAAUtzD,MAAMT,QACvB+lC,EAAOguB,UAAUtzD,MAAQ3F,EAAGsG,SAAS2kC,EAAOguB,UAAUj2D,MAAOhD,EAAG0F,UAAU;kEAASa,UAAW,6BAG3F,GAGTw1D,GAAc1/D,UAAU44C,aAAe,WACjCp3C,KAAKo+D,aAAep+D,KAAK28D,SAC3B38D,KAAKo+D,aAAc,IAIvBF,GAAc1/D,UAAU+5C,WAAa,WAC/B3lC,IAAMC,IAAc,IACtB7S,KAAK4nD,aAAe,MAEtB5nD,KAAKs+D,YAGPJ,GAAc1/D,UAAUg7C,cAAgB,SAAU56C,GA2ChD,QAASsgE,KACP,GAAyB,MAArBle,EAAG2E,eAAwB,CAC7B,GAAIlS,GAAWtxC,EAAGwF,oBACdw3D,EAAS,KAAY1rB,EAAWuN,EAAGxxC,MAAQ,GAC/CwxC,GAAGxxC,MAAQ,IACXwxC,EAAGxxC,MAAQ2vD,EACX3tD,EAAM2sD,UAAY1qB,EAAW,GAAK,IAClCuN,EAAG2E,eAAiB,EAAE3E,EAAG4E,aAAeuZ,EAAOx/D,OAG/Csd,EAAQ9H,kBAAoBhT,EAAGoP,IAAIzM,KAGvC,QAASs6D,KASP,GARA5tD,EAAMstD,oBAAqB,EAC3BttD,EAAMmB,QAAQnG,MAAME,QAAU2yD,EAC9Bre,EAAGx0C,MAAME,QAAU4yD,EACf1sD,IAAMC,GAAa,GACrBoK,EAAQ+gB,WAAWJ,aAAa3gB,EAAQvK,SAASyhB,UAAYgI,GAItC,MAArB6kB,EAAG2E,eAAwB,GACxB/yC,IAAMA,IAAMC,GAAa,IAC5BqsD,GAEF,IAAI9/D,GAAI,EACJu9D,EAAO,QAASA,KACd1/C,EAAQ9H,mBAAqBhT,EAAGoP,IAAIzM,KAA4B,GAArBk8C,EAAG2E,gBAAuB3E,EAAG4E,aAAe,GAAwB,KAAnBp0C,EAAM2sD,UACpGz2D,GAAUvF,EAAImsC,IAAWnsC,GAChB/C,IAAM,GACf6d,EAAQsiD,mBAAqBrzC,WAAWywC,EAAM,MAE9C1/C,EAAQ9H,kBAAoB,KAC5B8H,EAAQzL,MAAM8oB,SAGlBrd,GAAQsiD,mBAAqBrzC,WAAWywC,EAAM,MA/ElD,GAAInrD,GAAQxR,KACRmC,EAAKqP,EAAMrP,GACX8a,EAAU9a,EAAG8a,QACb+jC,EAAKxvC,EAAMkyC,SACXhhD,EAAMo0B,GAAa30B,EAAIvD,GACvBu9B,EAAYlf,EAAQvK,SAASyhB,SACjC,IAAKzxB,IAAO+jC,GAAZ,CAMYtkC,EAAGsU,QAAQ+oD,8BACmB,GAA7Br9D,EAAGoP,IAAIzM,IAAIgI,SAASpK,IAC/BgF,GAAUvF,EAAI2qC,IAAc3qC,EAAGoP,IAAK81B,GAAgB3kC,GAAM6rC,GAG5D,IAAI+wB,GAASte,EAAGx0C,MAAME,QAClB2yD,EAAgB7tD,EAAMmB,QAAQnG,MAAME,OACxC8E,GAAMmB,QAAQnG,MAAME,QAAU,oBAC9B,IAAI+yD,GAAajuD,EAAMmB,QAAQkP,uBAC/Bm/B,GAAGx0C,MAAME,QAAU,+DAAiE9N,EAAEu4B,QAAUsoC,EAAWrhD,IAAM,GAAK,cAAgBxf,EAAEs4B,QAAUuoC,EAAW19C,KAAO,GAAK,0CAA4CnP,GAAK,2BAA6B,eAAiB,mHACxQ,IAAI8sD,EAgEJ,IA/DI1sD,KACF0sD,EAAa5vC,OAAO6vC,SAEtB1iD,EAAQzL,MAAMyoB,QACVjnB,IACF8c,OAAO8vC,SAAS,KAAMF,GAExBziD,EAAQzL,MAAM8oB,QAETn4B,EAAGwF,sBACNq5C,EAAGxxC,MAAQgC,EAAM2sD,UAAY,KAE/B3sD,EAAMstD,oBAAqB,EAC3B7hD,EAAQ9H,kBAAoBhT,EAAGoP,IAAIzM,IACnCs5C,aAAanhC,EAAQsiD,oBA8CjB3sD,IAAMC,IAAc,GACtBqsD,IAEE3lB,GAAmB,CACrB14B,GAAOjiB,EACP,IAAIihE,GAAU,QAASA,KACrBh3D,GAAIinB,OAAQ,UAAW+vC,GACvB3zC,WAAWkzC,EAAQ,IAErBt2D,IAAGgnB,OAAQ,UAAW+vC,OAEtB3zC,YAAWkzC,EAAQ,MAIvBlB,GAAc1/D,UAAUw/D,gBAAkB,SAAUx3D,GAC7CA,GACHxG,KAAKs6B,QAEPt6B,KAAK0jD,SAASoc,SAAkB,YAAPt5D,GAG3B03D,GAAc1/D,UAAU0rB,cAAgB,aAExCg0C,GAAc1/D,UAAUyrB,uBAAwB,EA75EhD,SAAuBzpB,GAGrB,QAASk5C,GAAOx2C,EAAM68D,EAAOvvB,EAAQwvB,GACnCx/D,EAAWq8C,SAAS35C,GAAQ68D,EACxBvvB,IACF8M,EAAep6C,GAAQ88D,EAAY,SAAU79D,EAAIqE,EAAKC,GAChDA,GAAOC,IACT8pC,EAAOruC,EAAIqE,EAAKC,IAEhB+pC,GATR,GAAI8M,GAAiB98C,EAAW88C,cAahC98C,GAAW+F,aAAemzC,EAG1Bl5C,EAAWkG,KAAOA,GAIlBgzC,EAAO,QAAS,GAAI,SAAUv3C,EAAIqE,GAChC,MAAOrE,GAAG0pD,SAASrlD,KAClB,GACHkzC,EAAO,OAAQ,KAAM,SAAUv3C,EAAIqE,GACjCrE,EAAGoP,IAAIw2B,WAAavhC,EACpBshC,GAAS3lC,KACR,GAEHu3C,EAAO,aAAc,EAAG5R,IAAU,GAClC4R,EAAO,kBAAkB,GACzBA,EAAO,eAAe,GACtBA,EAAO,UAAW,EAAG,SAAUv3C,GAC7B6lC,GAAe7lC,GACfsxB,GAAYtxB,GACZw/B,GAAUx/B,KACT,GACHu3C,EAAO,gBAAiB,KAAM,SAAUv3C,EAAIqE,GAE1C,GADArE,EAAGoP,IAAIixC,QAAUh8C,EACZA,EAAL,CAGA,GAAIy5D,MACAjqD,EAAS7T,EAAGoP,IAAI+B,KACpBnR,GAAGoP,IAAI/H,KAAK,SAAU9E,GACpB,IAAK,GAAIhC,GAAM,IAAK,CAClB,GAAIsG,GAAQtE,EAAKH,KAAKH,QAAQoC,EAAK9D,EACnC,KAAc,GAAVsG,EACF,KAEFtG,GAAMsG,EAAQxC,EAAI7G,OAClBsgE,EAAUp1D,KAAKpG,EAAIuR,EAAQhN,IAE7BgN,KAEF,KAAK,GAAI5W,GAAI6gE,EAAUtgE,OAAS,EAAGP,GAAK,EAAGA,IACzC4wC,GAAc7tC,EAAGoP,IAAK/K,EAAKy5D,EAAU7gE,GAAIqF,EAAIw7D,EAAU7gE,GAAGsF,KAAMu7D,EAAU7gE,GAAGwE,GAAK4C,EAAI7G,YAG1F+5C,EAAO,eAAgB,2EAA4E,SAAUv3C,EAAIqE,EAAKC,GACpHtE,EAAGc,MAAMomB,aAAe,GAAIne,QAAO1E,EAAIgK,QAAUhK,EAAIvC,KAAK,MAAQ,GAAK,OAAQ,KAC3EwC,GAAOC,IACTvE,EAAG+9D,YAGPxmB,EAAO,yBAA0B7wB,GAA+B,SAAU1mB,GACxE,MAAOA,GAAG+9D,YACT,GACHxmB,EAAO,iBAAiB,GACxBA,EAAO,aAAcxmC,GAAS,kBAAoB,WAAY,WAC5D,KAAM,IAAI5T,OAAM,6DACf,GACHo6C,EAAO,cAAc,EAAO,SAAUv3C,EAAIqE,GACxC,MAAOrE,GAAGg+D,gBAAgBrf,WAAat6C,IACtC,GACHkzC,EAAO,mBAAoBuL,IAC3BvL,EAAO,yBAAyB,GAEhCA,EAAO,QAAS,UAAW,SAAUv3C,GACnC85C,GAAa95C,GACbg6C,GAAeh6C,KACd,GACHu3C,EAAO,SAAU,UAAW,SAAUv3C,EAAIqE,EAAKC,GAC7C,GAAIH,GAAOkvC,GAAUhvC,GACjBJ,EAAOK,GAAOC,IAAQ8uC,GAAU/uC,EAChCL,IAAQA,EAAKg6D,QACfh6D,EAAKg6D,OAAOj+D,EAAImE,GAEdA,EAAK+5D,QACP/5D,EAAK+5D,OAAOl+D,EAAIiE,GAAQ,QAG5BszC,EAAO,YAAa,MACpBA,EAAO,iBAAkB,MAEzBA,EAAO,gBAAgB,EAAOiD,IAAiB,GAC/CjD,EAAO,aAAe,SAAUv3C,GAC9BqjC,GAAyBrjC,EAAGsU,SAC5B0lC,GAAeh6C,KACd,GACHu3C,EAAO,eAAe,EAAM,SAAUv3C,EAAIqE,GACxCrE,EAAG8a,QAAQzK,QAAQhG,MAAMuV,KAAOvb,EAAMgwB,GAAqBr0B,EAAG8a,SAAW,KAAO,IAChF9a,EAAG+9D,YACF,GACHxmB,EAAO,8BAA8B,EAAO,SAAUv3C,GACpD,MAAOs8B,IAAiBt8B,KACvB,GACHu3C,EAAO,iBAAkB,SAAU,SAAUv3C,GAC3C+8B,GAAe/8B,GACfs8B,GAAiBt8B,GACjBA,EAAG8a,QAAQ+gB,WAAWJ,aAAaz7B,EAAGoP,IAAI4iB,WAC1ChyB,EAAG8a,QAAQ+gB,WAAWxB,cAAcr6B,EAAGoP,IAAIwiB,cAC1C,GACH2lB,EAAO,eAAe,EAAO,SAAUv3C,GACrCqjC,GAAyBrjC,EAAGsU,SAC5B0lC,GAAeh6C,KACd,GACHu3C,EAAO,kBAAmB,EAAGyC,IAAgB,GAC7CzC,EAAO,sBAAuB,SAAU4mB,GACtC,MAAOA,IACNnkB,IAAgB,GACnBzC,EAAO,2BAA2B,EAAOpiB,IAAiB,GAE1DoiB,EAAO,+BAA+B,GACtCA,EAAO,mBAAmB,GAC1BA,EAAO,0BAA0B,GAEjCA,EAAO,YAAY,EAAO,SAAUv3C,EAAIqE,GAC3B,YAAPA,IACF6zB,GAAOl4B,GACPA,EAAG8a,QAAQzL,MAAMkrD,QAEnBv6D,EAAG8a,QAAQzL,MAAMwsD,gBAAgBx3D,KAEnCkzC,EAAO,gBAAgB,EAAO,SAAUv3C,EAAIqE,GACrCA,GACHrE,EAAG8a,QAAQzL,MAAM8oB,UAElB,GACHof,EAAO,YAAY,EAAM0C,IACzB1C,EAAO,qBAAsB,MAE7BA,EAAO,kBAAmB,KAC1BA,EAAO,qBAAsB,GAC7BA,EAAO,eAAgB,EAAGpiB,IAAiB,GAC3CoiB,EAAO,6BAA6B,EAAMpiB,IAAiB,GAC3DoiB,EAAO,WAAY,KACnBA,EAAO,YAAa,KACpBA,EAAO,gBAAgB,EAAM1R,IAAgB,GAC7C0R,EAAO,gBAAgB,EAAO1R,IAAgB,GAC9C0R,EAAO,eAAgB,KACvBA,EAAO,YAAa,IAAK,SAAUv3C,EAAIqE,GACrC,MAAOrE,GAAGoP,IAAI25B,QAAQnB,UAAYvjC,IAEpCkzC,EAAO,oBAAqB,MAC5BA,EAAO,iBAAkB,GAAI,SAAUv3C,GACrC,MAAOA,GAAG+9D,YACT,GACHxmB,EAAO,qBAAsB,IAAO1R,IAAgB,GACpD0R,EAAO,uBAAuB,EAAM,SAAUv3C,EAAIqE,GAC3CA,GACHrE,EAAG8a,QAAQzL,MAAMysD,kBAIrBvkB,EAAO,WAAY,KAAM,SAAUv3C,EAAIqE,GACrC,MAAOrE,GAAG8a,QAAQzL,MAAMitC,WAAWoF,SAAWr9C,GAAO,KAEvDkzC,EAAO,YAAa,MACpBA,EAAO,YAAa,MAAO,SAAUv3C,EAAIqE,GACvC,MAAOrE,GAAGoP,IAAIs9C,aAAaroD,KAC1B,IAk2ESo2C,IAl0DS,SAA0Bp8C,GAC/C,GAAI88C,GAAiB98C,EAAW88C,eAE5BijB,EAAU//D,EAAW+/D,UAEzB//D,GAAWhC,WACTD,YAAaiC,EACby5B,MAAO,WACLnK,OAAOmK,QAAQj6B,KAAKid,QAAQzL,MAAMyoB,SAGpCumC,UAAW,SAAmB9mB,EAAQlqC,GACpC,GAAIiH,GAAUzW,KAAKyW,QACfhQ,EAAMgQ,EAAQijC,EACdjjC,GAAQijC,IAAWlqC,GAAmB,QAAVkqC,IAGhCjjC,EAAQijC,GAAUlqC,EACd8tC,EAAehvC,eAAeorC,IAChChyC,GAAU1H,KAAMs9C,EAAe5D,IAAS15C,KAAMwP,EAAO/I,GAEvDgZ,GAAOzf,KAAM,eAAgBA,KAAM05C,KAGrCt3C,UAAW,SAAmBs3C,GAC5B,MAAO15C,MAAKyW,QAAQijC,IAEtB+mB,OAAQ,WACN,MAAOzgE,MAAKuR,KAGdxK,UAAW,SAAmByY,EAAQuR,GACpC/wB,KAAKiD,MAAMs0C,QAAQxmB,EAAS,OAAS,WAAWykB,GAAUh2B,KAE5D7Y,aAAc,SAAsB6Y,GAElC,IAAK,GADDkJ,GAAO1oB,KAAKiD,MAAMs0C,QACbn4C,EAAI,EAAGA,EAAIspB,EAAK/oB,SAAUP,EACjC,GAAIspB,EAAKtpB,IAAMogB,GAAUkJ,EAAKtpB,GAAG8D,MAAQsc,EAEvC,MADAkJ,GAAK/Y,OAAOvQ,EAAG,IACR,GAKbshE,WAAYj/B,GAAS,SAAU/e,EAAMjM,GACnC,GAAIzV,GAAO0hB,EAAKuD,MAAQvD,EAAOliB,EAAWwC,QAAQhD,KAAKyW,QAASiM,EAChE,IAAI1hB,EAAKwiB,WACP,KAAM,IAAIlkB,OAAM,gCAElBiQ,GAAavP,KAAKiD,MAAMghB,UAAYjjB,KAAMA,EAAM2/D,SAAUj+C,EAAM0B,OAAQ3N,GAAWA,EAAQ2N,OACzF1U,SAAU+G,GAAWA,EAAQ/G,UAAY,GAAK,SAAUwU,GACxD,MAAOA,GAAQxU,WAEjB1P,KAAKiD,MAAM6gB,UACX6d,GAAU3hC,QAEZ4gE,cAAen/B,GAAS,SAAU/e,GAIhC,IAAK,GAHD0qB,GAASptC,KAETikB,EAAWjkB,KAAKiD,MAAMghB,SACjB7kB,EAAI,EAAGA,EAAI6kB,EAAStkB,SAAUP,EAAG,CACxC,GAAIwI,GAAMqc,EAAS7kB,GAAGuhE,QACtB,IAAI/4D,GAAO8a,GAAuB,gBAARA,IAAoB9a,EAAI1E,MAAQwf,EAIxD,MAHAuB,GAAStU,OAAOvQ,EAAG,GACnBguC,EAAOnqC,MAAM6gB,cACb6d,IAAUyL,MAMhBpoC,WAAYy8B,GAAS,SAAU3iC,EAAGiS,EAAK4tC,GACnB,gBAAP5tC,IAAiC,gBAAPA,KAEjCA,EADS,MAAPA,EACI/Q,KAAKyW,QAAQ6pC,YAAc,QAAU,OAErCvvC,EAAM,MAAQ,YAGpBwF,EAAOvW,KAAKuR,IAAKzS,IACnBkG,GAAWhF,KAAMlB,EAAGiS,EAAK4tC,KAG7Bqb,gBAAiBv4B,GAAS,SAAUid,GAKlC,IAAK,GAJDtR,GAASptC,KAETsC,EAAStC,KAAKuR,IAAIzM,IAAIxC,OACtBqB,GAAO,EACFvE,EAAI,EAAGA,EAAIkD,EAAO3C,OAAQP,IAAK,CACtC,GAAI24B,GAAWz1B,EAAOlD,EACtB,IAAK24B,EAASt1B,QAYHs1B,EAASp1B,KAAK+B,KAAOf,IAC9BqB,GAAWooC,EAAQrV,EAASp1B,KAAK+B,KAAMg6C,GAAK,GAC5C/6C,EAAMo0B,EAASp1B,KAAK+B,KAChBtF,GAAKguC,EAAO77B,IAAIzM,IAAIgzB,WACtBsF,GAAoBgQ,QAhBD,CACrB,GAAIplC,GAAO+vB,EAAS/vB,OAChB3B,EAAK0xB,EAAS1xB,KACdlB,EAAQU,KAAKoC,IAAItE,EAAKqE,EAAKtD,KAC/Bf,GAAMkC,KAAKC,IAAIsnC,EAAOrnC,WAAYM,EAAG3B,MAAQ2B,EAAGzC,GAAK,EAAI,IAAM,CAC/D,KAAK,GAAI4W,GAAIrV,EAAOqV,EAAI7W,IAAO6W,EAC7BxV,GAAWooC,EAAQ5yB,EAAGkkC,EAExB,IAAImiB,GAAYzzB,EAAO77B,IAAIzM,IAAIxC,MAChB,IAAX0F,EAAKpE,IAAWtB,EAAO3C,QAAUkhE,EAAUlhE,QAAUkhE,EAAUzhE,GAAG4I,OAAOpE,GAAK,GAChFqpC,GAAoBG,EAAO77B,IAAKnS,EAAG,GAAI+nC,IAAMn/B,EAAM64D,EAAUzhE,GAAGiH,MAAOkoC,QAc/E1rC,WAAY,SAAoBH,EAAK0iB,GACnC,MAAOc,IAAUlmB,KAAM0C,EAAK0iB,IAG9B07C,cAAe,SAAuBp8D,EAAM0gB,GAC1C,MAAOc,IAAUlmB,KAAMyE,EAAIC,GAAO0gB,GAAS,IAG7C3b,eAAgB,SAAwB/G,GACtCA,EAAM0U,EAASpX,KAAKuR,IAAK7O,EACzB,IAIIsB,GAJAqgB,EAASI,GAAczkB,KAAMsF,EAAQtF,KAAKuR,IAAK7O,EAAIgC,OACnDusB,EAAS,EACThK,GAAS5C,EAAO1kB,OAAS,GAAK,EAC9BiE,EAAKlB,EAAIkB,EAEb,IAAU,GAANA,EACFI,EAAOqgB,EAAO,OAEd,QAAS,CACP,GAAIlT,GAAM8f,EAAShK,GAAS,CAC5B,KAAK9V,EAAMkT,EAAa,EAANlT,EAAU,GAAK,IAAMvN,EACrCqjB,EAAQ9V,MACH,CAAA,KAAIkT,EAAa,EAANlT,EAAU,GAAKvN,GAE1B,CACLI,EAAOqgB,EAAa,EAANlT,EAAU,EAAG,OAF3B8f,EAAS9f,EAAM,GAMrB,GAAI2wB,GAAM99B,EAAOA,EAAKI,QAAQ,aAAe,CAC7C,OAAO09B,GAAM,EAAI99B,EAAc,GAAP89B,EAAW,KAAO99B,EAAKH,MAAM,EAAGi+B,EAAM,IAGhEye,UAAW,SAAmB79C,GAC5B,GAAI1B,GAAOhB,KAAKuR,IAAIvQ,IACpB,OAAKA,GAAK+B,UAGHvC,EAAWuC,UAAU/B,EAAMhB,KAAK6C,WAAWH,GAAKO,OAAOjC,KAFrDA,GAKX0gD,UAAW,SAAmBh/C,EAAKsB,GACjC,MAAOhE,MAAK+gE,WAAWr+D,EAAKsB,GAAM,IAGpC+8D,WAAY,SAAoBr+D,EAAKsB,GACnC,GAAIopC,GAASptC,KAETgJ,IACJ,KAAKu3D,EAAQjyD,eAAetK,GAC1B,MAAOgF,EAET,IAAIg4D,GAAOT,EAAQv8D,GACfhD,EAAOhB,KAAKugD,UAAU79C,EAC1B,IAAyB,gBAAd1B,GAAKgD,GACVg9D,EAAKhgE,EAAKgD,KACZgF,EAAM6B,KAAKm2D,EAAKhgE,EAAKgD,SAElB,IAAIhD,EAAKgD,GACd,IAAK,GAAI5E,GAAI,EAAGA,EAAI4B,EAAKgD,GAAMrE,OAAQP,IAAK,CAC1C,GAAIoH,GAAMw6D,EAAKhgE,EAAKgD,GAAM5E,GACtBoH,IACFwC,EAAM6B,KAAKrE,OAGNxF,GAAKiiB,YAAc+9C,EAAKhgE,EAAKiiB,YACtCja,EAAM6B,KAAKm2D,EAAKhgE,EAAKiiB,aACZ+9C,EAAKhgE,EAAKkC,OACnB8F,EAAM6B,KAAKm2D,EAAKhgE,EAAKkC,MAEvB,KAAK,GAAImT,GAAM,EAAGA,EAAM2qD,EAAKC,QAAQthE,OAAQ0W,IAAO,CAClD,GAAIzO,GAAMo5D,EAAKC,QAAQ5qD,EACnBzO,GAAIqJ,KAAKjQ,EAAMosC,KAAuC,GAA5BhpC,EAAQ4E,EAAOpB,EAAIpB,MAC/CwC,EAAM6B,KAAKjD,EAAIpB,KAGnB,MAAOwC,IAGTk4D,cAAe,SAAuBx8D,EAAM0gB,GAC1C,GAAI7T,GAAMvR,KAAKuR,GAEf,OADA7M,GAAOyS,EAAS5F,EAAa,MAAR7M,EAAe6M,EAAI+B,MAAQ/B,EAAI+D,KAAO,EAAI5Q,GACxDigB,GAAiB3kB,KAAM0E,EAAO,EAAG0gB,GAASniB,OAGnDs1D,aAAc,SAAsBpzD,EAAOnE,GACzC,GAAI0B,GACAq1B,EAAW/3B,KAAKuR,IAAIzM,IAAI2yB,SAQ5B,OANE/0B,GADW,MAATyC,EACI4yB,EAASp1B,KAC2D,eAA/C,KAAVwC,EAAwB,YAAchH,QAAQgH,IACzDiS,EAASpX,KAAKuR,IAAKpM,GAEnBA,EAAQ4yB,EAAS/vB,OAAS+vB,EAAS1xB,KAEpCyuB,GAAc90B,KAAM0C,EAAK1B,GAAQ,SAG1C+2D,WAAY,SAAoBr1D,EAAK1B,GACnC,MAAO6zB,IAAY70B,KAAMoX,EAASpX,KAAKuR,IAAK7O,GAAM1B,GAAQ,SAG5Du9C,WAAY,SAAoB7pB,EAAQ1zB,GAEtC,MADA0zB,GAASD,GAAgBz0B,KAAM00B,EAAQ1zB,GAAQ,QACxCu0B,GAAYv1B,KAAM00B,EAAO3S,KAAM2S,EAAOtW,MAG/C+iD,aAAc,SAAsBrrD,EAAQ9U,GAE1C,MADA8U,GAAS2e,GAAgBz0B,MAAQoe,IAAKtI,EAAQiM,KAAM,GAAK/gB,GAAQ,QAAQod,IAClElI,EAAclW,KAAKuR,IAAKuE,EAAS9V,KAAKid,QAAQrJ,aAEvDwtD,aAAc,SAAsB18D,EAAM1D,EAAMqzB,GAC9C,GACIxX,GADAlZ,GAAM,CAEV,IAAmB,gBAARe,GAAkB,CAC3B,GAAI2S,GAAOrX,KAAKuR,IAAI+B,MAAQtT,KAAKuR,IAAI+D,KAAO,CACxC5Q,GAAO1E,KAAKuR,IAAI+B,MAClB5O,EAAO1E,KAAKuR,IAAI+B,MACP5O,EAAO2S,IAChB3S,EAAO2S,EAAK1T,GAAM,GAEpBkZ,EAAUvX,EAAQtF,KAAKuR,IAAK7M,OAE5BmY,GAAUnY,CAEZ,OAAO0vB,IAAgBp0B,KAAM6c,GAAWuB,IAAK,EAAG2D,KAAM,GAAK/gB,GAAQ,OAAQqzB,GAAkB1wB,GAAKya,KAAOza,EAAM3D,KAAKuR,IAAIuE,OAAS8G,GAAcC,GAAW,IAG5JwkD,kBAAmB,WACjB,MAAOjrC,IAAWp2B,KAAKid,UAEzBqkD,iBAAkB,WAChB,MAAO3uC,IAAU3yB,KAAKid,UAGxBlV,YAAa,WACX,OAASC,KAAMhI,KAAKid,QAAQ7J,SAAU/M,GAAIrG,KAAKid,QAAQ5J,SAGzDkuD,UAAW,SAAmB7+D,EAAK8K,EAAM84B,EAAQgjB,EAAMC,GACrD,GAAItsC,GAAUjd,KAAKid,OACnBva,GAAMoyB,GAAc90B,KAAMoX,EAASpX,KAAKuR,IAAK7O,GAC7C,IAAI0b,GAAM1b,EAAIquB,OACVhP,EAAOrf,EAAIqf,IAKf,IAJAvU,EAAKhB,MAAM4iB,SAAW,WACtB5hB,EAAKX,aAAa,mBAAoB,QACtC7M,KAAKid,QAAQzL,MAAM0Y,cAAc1c,GACjCyP,EAAQ7K,MAAM9F,YAAYkB,GACd,QAAR87C,EACFlrC,EAAM1b,EAAI0b,QACL,IAAY,SAARkrC,GAA2B,QAARA,EAAgB,CAC5C,GAAIkY,GAAS37D,KAAKoC,IAAIgV,EAAQtK,QAAQ4d,aAAcvwB,KAAKuR,IAAIuE,QACzD2rD,EAAS57D,KAAKoC,IAAIgV,EAAQ7K,MAAMod,YAAavS,EAAQhL,UAAUud,cAEtD,SAAR85B,GAAmB5mD,EAAIquB,OAASvjB,EAAK+T,aAAeigD,IAAW9+D,EAAI0b,IAAM5Q,EAAK+T,aACjFnD,EAAM1b,EAAI0b,IAAM5Q,EAAK+T,aACZ7e,EAAIquB,OAASvjB,EAAK+T,cAAgBigD,IAC3CpjD,EAAM1b,EAAIquB,QAERhP,EAAOvU,EAAKgU,YAAcigD,IAC5B1/C,EAAO0/C,EAASj0D,EAAKgU,aAGzBhU,EAAKhB,MAAM4R,IAAMA,EAAM,KACvB5Q,EAAKhB,MAAMuV,KAAOvU,EAAKhB,MAAMwV,MAAQ,GACxB,SAATunC,GACFxnC,EAAO9E,EAAQ7K,MAAMod,YAAchiB,EAAKgU,YACxChU,EAAKhB,MAAMwV,MAAQ,QAEN,QAATunC,EACFxnC,EAAO,EACW,UAATwnC,IACTxnC,GAAQ9E,EAAQ7K,MAAMod,YAAchiB,EAAKgU,aAAe,GAE1DhU,EAAKhB,MAAMuV,KAAOA,EAAO,MAEvBukB,GACFzK,GAAe77B,MAAQ+hB,KAAMA,EAAM3D,IAAKA,EAAK4D,MAAOD,EAAOvU,EAAKgU,YAAauP,OAAQ3S,EAAM5Q,EAAK+T,gBAIpGu7C,iBAAkBr7B,GAASuW,IAC3B0pB,kBAAmBjgC,GAAS8W,IAC5BopB,eAAgBrpB,GAChBspB,mBAAoBngC,GAASuX,IAE7BuhB,YAAa,SAAqBrlB,GAChC,GAAIluC,GAASsH,eAAe4mC,GAC1B,MAAOluC,IAASkuC,GAAKx1C,KAAK,KAAMM,OAIpCggD,gBAAiBve,GAAS,SAAUl9B,GAClCy7C,GAAgBhgD,KAAMuE,KAGxBs9D,SAAU,SAAkB75D,EAAM85D,EAAQnoB,EAAM77B,GAC9C,GAAIsvB,GAASptC,KAET+Q,EAAM,CACN+wD,GAAS,IACX/wD,GAAO,EAAE+wD,GAAUA,EAGrB,KAAK,GADDl6D,GAAMwP,EAASpX,KAAKuR,IAAKvJ,GACpB5I,EAAI,EAAGA,EAAI0iE,IAClBl6D,EAAMw5C,GAAUhU,EAAO77B,IAAK3J,EAAKmJ,EAAK4oC,EAAM77B,IACxClW,EAAI+5C,WAFoBviD,GAM9B,MAAOwI,IAGToxD,MAAOv3B,GAAS,SAAU1wB,EAAK4oC,GAC7B,GAAIvM,GAASptC,IAEbA,MAAKmsD,mBAAmB,SAAUp0B,GAChC,MAAIqV,GAAOnwB,QAAQ/H,OAASk4B,EAAO77B,IAAIoyB,QAAU5L,EAASt1B,QACjD2+C,GAAUhU,EAAO77B,IAAKwmB,EAASp1B,KAAMoO,EAAK4oC,EAAMvM,EAAO32B,QAAQsrD,iBAE/DhxD,EAAM,EAAIgnB,EAAS/vB,OAAS+vB,EAAS1xB,MAE7C0/C,MAGL0T,QAASh4B,GAAS,SAAU1wB,EAAK4oC,GAC/B,GAAI70C,GAAM9E,KAAKuR,IAAIzM,IACfyM,EAAMvR,KAAKuR,GACXzM,GAAI6C,oBACN4J,EAAImiC,iBAAiB,GAAI,KAAM,WAE/B4C,GAAoBt2C,KAAM,SAAU+3B,GAClC,GAAIpvB,GAAQy4C,GAAU7vC,EAAKwmB,EAASp1B,KAAMoO,EAAK4oC,GAAM,EACrD,OAAO5oC,GAAM,GAAM/I,KAAMW,EAAOtC,GAAI0xB,EAASp1B,OAAWqF,KAAM+vB,EAASp1B,KAAM0D,GAAIsC,OAKvFq5D,SAAU,SAAkBh6D,EAAM85D,EAAQnoB,EAAMsoB,GAC9C,GAAI70B,GAASptC,KAET+Q,EAAM,EACNiG,EAAIirD,CACJH,GAAS,IACX/wD,GAAO,EAAE+wD,GAAUA,EAGrB,KAAK,GADDl6D,GAAMwP,EAASpX,KAAKuR,IAAKvJ,GACpB5I,EAAI,EAAGA,EAAI0iE,IAAU1iE,EAAG,CAC/B,GAAIs1B,GAASI,GAAcsY,EAAQxlC,EAAK,MAOxC,IANS,MAALoP,EACFA,EAAI0d,EAAO3S,KAEX2S,EAAO3S,KAAO/K,EAEhBpP,EAAMg6C,GAAUxU,EAAQ1Y,EAAQ3jB,EAAK4oC,GACjC/xC,EAAI+5C,QACN,MAGJ,MAAO/5C,IAGT+wD,MAAOl3B,GAAS,SAAU1wB,EAAK4oC,GAC7B,GAAIvM,GAASptC,KAETuR,EAAMvR,KAAKuR,IACX2wD,KACAhwC,GAAYlyB,KAAKid,QAAQ/H,QAAU3D,EAAIoyB,QAAUpyB,EAAIzM,IAAI6C,mBAgB7D,IAfA4J,EAAI46C,mBAAmB,SAAUp0B,GAC/B,GAAI7F,EACF,MAAOnhB,GAAM,EAAIgnB,EAAS/vB,OAAS+vB,EAAS1xB,IAE9C,IAAIm4D,GAAU1pC,GAAcsY,EAAQrV,EAASp1B,KAAM,MACxB,OAAvBo1B,EAASkqC,aACXzD,EAAQz8C,KAAOgW,EAASkqC,YAE1BC,EAAMr3D,KAAK2zD,EAAQz8C,KACnB,IAAIrf,GAAMk/C,GAAUxU,EAAQoxB,EAASztD,EAAK4oC,EAI1C,OAHY,QAARA,GAAkB5hB,GAAYxmB,EAAIzM,IAAI2yB,WACxCyF,GAAekQ,EAAQvY,GAAYuY,EAAQ1qC,EAAK,OAAO0b,IAAMogD,EAAQpgD,KAEhE1b,GACNqjD,IACCmc,EAAMviE,OACR,IAAK,GAAIP,GAAI,EAAGA,EAAImS,EAAIzM,IAAIxC,OAAO3C,OAAQP,IACzCmS,EAAIzM,IAAIxC,OAAOlD,GAAG6iE,WAAaC,EAAM9iE,KAM3Cu7C,WAAY,SAAoBj4C,GAC9B,GAAI6O,GAAMvR,KAAKuR,IACX7M,EAAOY,EAAQiM,EAAK7O,EAAIgC,MAAMH,KAC9BY,EAAQzC,EAAIkB,GACZD,EAAMjB,EAAIkB,EACd,IAAIc,EAAM,CACR,GAAI6L,GAASvQ,KAAK0hD,UAAUh/C,EAAK,YACd,WAAdA,EAAImU,QAAsBlT,GAAOe,EAAK/E,SAAWwF,IAGlDxB,IAFAwB,CAaJ,KATA,GAAIg9D,GAAYz9D,EAAKP,OAAOgB,GACxBi9D,EAAQ9xD,EAAW6xD,EAAW5xD,GAAU,SAAU3M,GACpD,MAAO0M,GAAW1M,EAAI2M,IACpB,KAAKtM,KAAKk+D,GAAa,SAAUv+D,GACnC,MAAQ,KAAKK,KAAKL,IAEhB,SAAUA,GACZ,OAAQ,KAAKK,KAAKL,KAAQ0M,EAAW1M,IAEhCuB,EAAQ,GAAKi9D,EAAM19D,EAAKP,OAAOgB,EAAQ,OAC1CA,CAEJ,MAAOxB,EAAMe,EAAK/E,QAAUyiE,EAAM19D,EAAKP,OAAOR,OAC1CA,EAGN,MAAO,IAAIwjC,IAAM1iC,EAAI/B,EAAIgC,KAAMS,GAAQV,EAAI/B,EAAIgC,KAAMf,KAGvDi3D,gBAAiB,SAAyBprD,GAC3B,MAATA,GAAiBA,GAASxP,KAAKiD,MAAMmL,aAGrCpO,KAAKiD,MAAMmL,WAAapO,KAAKiD,MAAMmL,WACrCb,EAASvN,KAAKid,QAAQnL,UAAW,wBAEjC0oB,GAAQx6B,KAAKid,QAAQnL,UAAW,wBAGlC2N,GAAOzf,KAAM,kBAAmBA,KAAMA,KAAKiD,MAAMmL,aAEnD6yB,SAAU,WACR,MAAOjhC,MAAKid,QAAQzL,MAAMitC,YAActxC,KAE1CwlC,WAAY,WACV,SAAU3yC,KAAKyW,QAAQ0D,WAAYna,KAAKuR,IAAI88B,WAG9CuxB,SAAUn+B,GAAS,SAAUzqB,EAAGwe,GAC9B+H,GAAev9B,KAAMgX,EAAGwe,KAE1B6sC,cAAe,WACb,GAAI3vD,GAAW1S,KAAKid,QAAQvK,QAC5B,QAASqP,KAAMrP,EAASqhB,WAAY3V,IAAK1L,EAASyhB,UAChDre,OAAQpD,EAASqrB,aAAe3N,GAAUpwB,MAAQA,KAAKid,QAAQhJ,UAC/D+a,MAAOtc,EAASwrB,YAAc9N,GAAUpwB,MAAQA,KAAKid,QAAQ/I,SAC7Dqc,aAAcD,GAActwB,MAAOwvB,YAAaa,GAAarwB,QAGjE67B,eAAgB4F,GAAS,SAAU1J,EAAUgE,GAC3B,MAAZhE,GACFA,GAAa/vB,KAAMhI,KAAKuR,IAAIzM,IAAI2yB,UAAU90B,KAAM0D,GAAI,MACtC,MAAV01B,IACFA,EAAS/7B,KAAKyW,QAAQ6mB,qBAEI,gBAAZvF,GAChBA,GAAa/vB,KAAMvD,EAAIszB,EAAU,GAAI1xB,GAAI,MACf,MAAjB0xB,EAAS/vB,OAClB+vB,GAAa/vB,KAAM+vB,EAAU1xB,GAAI,OAE9B0xB,EAAS1xB,KACZ0xB,EAAS1xB,GAAK0xB,EAAS/vB,MAEzB+vB,EAASgE,OAASA,GAAU,EAEF,MAAtBhE,EAAS/vB,KAAKtD,KAChB84B,GAAcx9B,KAAM+3B,GAEpB0F,GAAoBz9B,KAAM+3B,EAAS/vB,KAAM+vB,EAAS1xB,GAAI0xB,EAASgE,UAInE+Y,QAASrT,GAAS,SAAUzS,EAAOlZ,GACjC,GAAIs3B,GAASptC,KAETsiE,EAAY,SAAmB97D,GACjC,MAAqB,gBAAPA,IAAmB,QAAQvC,KAAKyS,OAAOlQ,IAAQA,EAAM,KAAOA,EAE/D,OAATwoB,IACFhvB,KAAKid,QAAQtK,QAAQnG,MAAMwiB,MAAQszC,EAAUtzC,IAEjC,MAAVlZ,IACF9V,KAAKid,QAAQtK,QAAQnG,MAAMsJ,OAASwsD,EAAUxsD,IAE5C9V,KAAKyW,QAAQiI,cACf6U,GAA0BvzB,KAE5B,IAAIgc,GAAYhc,KAAKid,QAAQ7J,QAC7BpT,MAAKuR,IAAI/H,KAAKwS,EAAWhc,KAAKid,QAAQ5J,OAAQ,SAAU3O,GACtD,GAAIA,EAAKgqB,QACP,IAAK,GAAItvB,GAAI,EAAGA,EAAIsF,EAAKgqB,QAAQ/uB,OAAQP,IACvC,GAAIsF,EAAKgqB,QAAQtvB,GAAG2vB,UAAW,CAC7BoT,GAAciL,EAAQpxB,EAAW,SAAU,SAI/CA,IAEJhc,KAAKmgB,MAAMqR,aAAc,EACzB/R,GAAOzf,KAAM,UAAWA,QAG1B0H,UAAW,SAAmBrI,GAC5B,MAAOmiC,IAAQxhC,KAAMX,IAEvBkjE,eAAgB,WACd,MAAOjjC,IAAgBt/B,OAEzBwiE,aAAc,WACZ,MAAO1iC,IAAc9/B,OAGvBkgE,QAASz+B,GAAS,WAChB,GAAIspB,GAAY/qD,KAAKid,QAAQxI,gBAC7BktB,IAAU3hC,MACVA,KAAKmgB,MAAMqR,aAAc,EACzBiC,GAAYzzB,MACZu9B,GAAev9B,KAAMA,KAAKuR,IAAIwiB,WAAY/zB,KAAKuR,IAAI4iB,WACnDoH,GAAkBv7B,OACD,MAAb+qD,GAAqBllD,KAAKqL,IAAI65C,EAAY30B,GAAWp2B,KAAKid,UAAY,KACxE2Z,GAAoB52B,MAEtByf,GAAOzf,KAAM,UAAWA,QAG1ByiE,QAAShhC,GAAS,SAAUlwB,GAC1B,GAAI9K,GAAMzG,KAAKuR,GAQf,OAPA9K,GAAItE,GAAK,KACTqnC,GAAUxpC,KAAMuR,GAChBkiB,GAAYzzB,MACZA,KAAKid,QAAQzL,MAAM8oB,QACnBiD,GAAev9B,KAAMuR,EAAIwiB,WAAYxiB,EAAI4iB,WACzCn0B,KAAKmgB,MAAM2d,aAAc,EACzB/R,GAAY/rB,KAAM,UAAWA,KAAMyG,GAC5BA,IAGT05D,cAAe,WACb,MAAOngE,MAAKid,QAAQzL,MAAMitC,YAE5B6F,kBAAmB,WACjB,MAAOtkD,MAAKid,QAAQtK,SAEtB+vD,mBAAoB,WAClB,MAAO1iE,MAAKid,QAAQvK,UAEtBiwD,iBAAkB,WAChB,MAAO3iE,MAAKid,QAAQzK,UAGxB8N,GAAW9f,GAEXA,EAAW2K,eAAiB,SAAUnH,EAAMd,EAAMsM,GAC3C+wD,EAAQjyD,eAAetK,KAC1Bu8D,EAAQv8D,GAAQxD,EAAWwD,IAAUi9D,aAEvCV,EAAQv8D,GAAMd,GAAQsM,GAExBhP,EAAWoiE,qBAAuB,SAAU5+D,EAAMd,EAAM2/D,EAAWrzD,GACjEhP,EAAW2K,eAAenH,EAAMd,EAAMsM,GACtC+wD,EAAQv8D,GAAMi9D,QAAQp2D,MAAOoG,KAAM4xD,EAAWr8D,IAAKgJ,MAmwCtCotC,GAGjB,IAAIkmB,IAAe,gDAAgDl1D,MAAM,IACzE,KAAK,GAAIS,MAAQyuC,IAAIt+C,UACfs+C,GAAIt+C,UAAU8P,eAAeD,KAASjK,EAAQ0+D,GAAcz0D,IAAQ,IACtEuuC,GAAap+C,UAAU6P,IAAQ,SAAU00D,GACvC,MAAO,YACL,MAAOA,GAAO90D,MAAMjO,KAAKuR,IAAKvD,aAEhC8uC,GAAIt+C,UAAU6P,KA+CpB,OA3CAiS,IAAWw8B,IAIXF,GAAaG,aAAgB2G,SAAYwa,GAAe8E,gBAAmBlI,IAO3Ele,GAAav6B,WAAa,SAAUnf,GAC7B05C,GAAaC,SAAS77C,MAAgB,QAARkC,IACjC05C,GAAaC,SAAS77C,KAAOkC,GAE/Bmf,GAAWpU,MAAMjO,KAAMgO,YAGzB4uC,GAAap6B,WAAaA,GAG1Bo6B,GAAav6B,WAAW,OAAQ,WAC9B,OAAS4D,MAAO,SAAeN,GAC3B,MAAOA,GAAO8iC,gBAGpB7L,GAAap6B,WAAW,aAAc,QAItCo6B,GAAaqmB,gBAAkB,SAAU//D,EAAMggE,GAC7CtmB,GAAap+C,UAAU0E,GAAQggE,GAEjCtmB,GAAaumB,mBAAqB,SAAUjgE,EAAMggE,GAChDpmB,GAAIt+C,UAAU0E,GAAQggE,GAGxBtmB,GAAah8C,aAAeA,GAnG5B,SAAwBJ,GACtBA,EAAWqI,IAAMA,GACjBrI,EAAWsI,GAAKA,GAChBtI,EAAW0lC,iBAAmBA,GAC9B1lC,EAAWs8C,IAAMA,GACjBt8C,EAAWyvC,WAAa0P,GACxBn/C,EAAW+N,YAAcA,EACzB/N,EAAWsO,WAAaA,EACxBtO,EAAW8P,WAAaH,EACxB3P,EAAW6B,KAAOA,GAClB7B,EAAWif,OAASA,GACpBjf,EAAW+nC,KAAOA,GAClB/nC,EAAW8mC,UAAYA,GACvB9mC,EAAW2+B,eAAiBA,GAC5B3+B,EAAWiE,IAAMA,EACjBjE,EAAW4iE,OAASj6D,EACpB3I,EAAW+hB,MAAQA,GACnB/hB,EAAWmiB,UAAYA,GACvBniB,EAAWoiB,YAAcA,GACzBpiB,EAAWwC,QAAUA,GACrBxC,EAAWuiB,eAAiBA,GAC5BviB,EAAW4iB,WAAaA,GACxB5iB,EAAW8iB,UAAYA,GACvB9iB,EAAWgjB,WAAaA,GACxBhjB,EAAWuC,UAAYA,GACvBvC,EAAWwG,SAAWA,GACtBxG,EAAW61C,OAASA,GACpB71C,EAAW21C,QAAUA,GACrB31C,EAAWk1C,cAAgBA,GAC3Bl1C,EAAW+0C,UAAYA,GACvB/0C,EAAW20C,gBAAkBA,GAC7B30C,EAAWolB,aAAeA,GAC1BplB,EAAWoxC,iBAAmBA,GAC9BpxC,EAAW2wC,WAAaA,GACxB3wC,EAAWswC,WAAaA,GACxBtwC,EAAWggB,iBAAmBA,GAC9BhgB,EAAWkgB,kBAAoBA,GAC/BlgB,EAAWqgB,OAASA,GACpBrgB,EAAW+M,SAAWA,EACtB/M,EAAWsM,SAAWA,EACtBtM,EAAWg6B,QAAUA,GACrBh6B,EAAWm1C,SAAWA,IA4DTiH,IAEfA,GAAaymB,QAAU,SAEhBzmB,UAEH0mB,GAAI,SAAU7kE,EAASoB,EAAQJ,IAIrC,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,yBAAmD,kBAAVE,IAAwBA,EAAOsD,IACpFtD,GAAQ,wBAAyBqD,GACjCA,EAAIxB,aACL,SAAUA,GAqXX,QAAS+iE,GAAO10D,GAEd,IAAK,GADDymC,MACKl2C,EAAI,EAAGA,EAAIyP,EAAMlP,SAAUP,EAClCk2C,EAAKzmC,EAAMzP,GAAG2E,gBAAiB,CAEjC,OAAOuxC,GAsCT,QAASkuB,GAAc79C,EAAQ1iB,GAG7B,IAFA,GACIW,GADA6/D,GAAW,EAEgB,OAAvB7/D,EAAK+hB,EAAOrf,SAAiB,CACnC,GAAIm9D,GAAkB,KAAN7/D,EAAW,CACzBX,EAAMygE,SAAW,IACjB,OAEFD,EAAiB,KAAN7/D,EAEb,OAAQ,UAAW,WAvarBpD,EAAW6hB,WAAW,MAAO,SAAUshD,EAAQC,GAqB7C,QAASC,GAAIr3D,EAAOs3D,GACR,MAAV9/D,GAAO8/D,EAAUt3D,EAKnB,QAASu3D,GAAUp+C,EAAQ1iB,GACzB,GAAIW,GAAK+hB,EAAOrf,MAChB,IAAI09D,EAAWpgE,GAAK,CAClB,GAAIkhB,GAASk/C,EAAWpgE,GAAI+hB,EAAQ1iB,EACpC,KAAe,IAAX6hB,EAAkB,MAAOA,GAE/B,MAAU,KAANlhB,GACF+hB,EAAO4iC,SAAS,YACTsb,EAAI,MAAOl+C,EAAOlY,YACV,KAAN7J,IAAoB,KAANA,GAAmB,KAANA,IAAc+hB,EAAO2iC,IAAI,KACtDub,EAAI,KAAM,WACF,KAANjgE,GAAoB,KAANA,GACvBX,EAAMygE,SAAWO,EAAYrgE,GACtBX,EAAMygE,SAAS/9C,EAAQ1iB,IACf,KAANW,GACT+hB,EAAO4iC,SAAS,YACTsb,EAAI,OAAQ,SACJ,KAANjgE,GACT+hB,EAAOzd,MAAM,WACN27D,EAAI,UAAW,cACb,KAAK5/D,KAAKL,IAAa,KAANA,GAAa+hB,EAAO2iC,IAAI,OAClD3iC,EAAO4iC,SAAS,UACTsb,EAAI,SAAU,SACL,MAAPjgE,EAWA,WAAWK,KAAKL,GAClBigE,EAAI,KAAM,aACF,KAANjgE,GAAa+hB,EAAOzd,MAAM,yBAC5B27D,EAAI,YAAa,aACf,iBAAiB5/D,KAAKL,GACxBigE,EAAI,KAAMjgE,GACF,KAANA,GAAa+hB,EAAOzd,MAAM,mBAA2B,KAANtE,GAAa+hB,EAAOzd,MAAM,WAAmB,KAANtE,GAAa+hB,EAAOzd,MAAM,WACzHyd,EAAOgjC,OAAO,GACd1lD,EAAMygE,SAAWQ,EACVL,EAAI,WAAY,SACd,WAAW5/D,KAAKL,IACzB+hB,EAAO4iC,SAAS,YACTsb,EAAI,WAAY,SAEhBA,EAAI,KAAM,MAxBb,QAAQ5/D,KAAK0hB,EAAO0iC,SACtB1iC,EAAO4iC,SAAS,UACTsb,EAAI,SAAU,SACZl+C,EAAOzd,MAAM,gBACtByd,EAAO4iC,SAAS,YACZ5iC,EAAOzd,MAAM,SAAS,GAAe27D,EAAI,aAAc,uBACpDA,EAAI,aAAc,aAChBl+C,EAAOzd,MAAM,SACf27D,EAAI,OAAQ,YADd,GAqBX,QAASI,GAAYE,GACnB,MAAO,UAAUx+C,EAAQ1iB,GAGvB,IAFA,GACIW,GADAwgE,GAAU,EAEiB,OAAvBxgE,EAAK+hB,EAAOrf,SAAiB,CACnC,GAAI1C,GAAMugE,IAAUC,EAAS,CACd,KAATD,GAAcx+C,EAAOgjC,OAAO,EAChC,OAEFyb,GAAWA,GAAiB,MAANxgE,EAGxB,OADIA,GAAMugE,IAAUC,GAAoB,KAATD,KAAclhE,EAAMygE,SAAW,MACvDG,EAAI,SAAU,WAIzB,QAASK,GAAmBv+C,EAAQ1iB,GAGlC,MAFA0iB,GAAOrf,OACFqf,EAAOzd,MAAM,cAAc,GAA+CjF,EAAMygE,SAAW,KAAxDzgE,EAAMygE,SAAWO,EAAY,KAC9DJ,EAAI,KAAM,KAKnB,QAASx+C,GAAQrhB,EAAMM,EAAQ8B,GAC7BpG,KAAKgE,KAAOA,EACZhE,KAAKsE,OAASA,EACdtE,KAAKoG,KAAOA,EAGd,QAASi+D,GAAYphE,EAAO0iB,EAAQ3hB,EAAMM,GAExC,MADArB,GAAMoC,QAAU,GAAIggB,GAAQrhB,EAAM2hB,EAAOk5B,gBAA4B,IAAXv6C,EAAmB,EAAIy6C,GAAa97C,EAAMoC,SAC7FrB,EAGT,QAASsgE,GAAWrhE,GAElB,MADIA,GAAMoC,QAAQe,OAAMnD,EAAMoC,QAAUpC,EAAMoC,QAAQe,MAC/CnD,EAAMoC,QAAQrB,KAGvB,QAASugE,GAAKvgE,EAAM2hB,EAAQ1iB,GAC1B,MAAOuhE,GAAOvhE,EAAMoC,QAAQrB,MAAMA,EAAM2hB,EAAQ1iB,GAElD,QAASwhE,GAAWzgE,EAAM2hB,EAAQ1iB,EAAOnE,GACvC,IAAK,GAAIM,GAAIN,GAAK,EAAGM,EAAI,EAAGA,IAC1B6D,EAAMoC,QAAUpC,EAAMoC,QAAQe,IAC/B,OAAOm+D,GAAKvgE,EAAM2hB,EAAQ1iB,GAK7B,QAASyhE,GAAY/+C,GACnB,GAAIw4B,GAAOx4B,EAAOlY,UAAU1J,aACY6b,GAApC+kD,EAAcr2D,eAAe6vC,GAAkB,OAAgBymB,EAAct2D,eAAe6vC,GAAkB,UAA0B,WAnI9I,GAAI0mB,GAASjB,EAAaiB,MACrBjB,GAAakB,mBAAkBlB,EAAepjE,EAAWoiB,YAAY,YAE1E,IAgBI5e,GAAM4b,EAhBNm/B,EAAa4kB,EAAO5kB,WACpBilB,EAAaJ,EAAaI,WAC1Be,EAAgBnB,EAAamB,kBAC7BC,EAAapB,EAAaoB,eAC1BC,EAAgBrB,EAAaqB,kBAC7BC,EAAqBtB,EAAasB,uBAClCJ,EAAmBlB,EAAakB,qBAChCK,EAA8BvB,EAAauB,gCAC3CC,EAAiBxB,EAAawB,mBAC9BC,EAAqBzB,EAAayB,uBAClCT,EAAgBhB,EAAagB,kBAC7BD,EAAgBf,EAAae,kBAC7BW,EAAc1B,EAAa0B,YAC3BC,EAAc3B,EAAa2B,YAC3BC,GAA2D,IAArC5B,EAAa4B,oBAqHnChB,IA6LJ,OA3LAA,GAAOpmD,IAAM,SAAUpa,EAAM2hB,EAAQ1iB,GACnC,GAAY,KAARe,EACF,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,QAC7B,IAAY,KAAR3hB,GAAef,EAAMoC,QAAQe,KACtC,MAAOk+D,GAAWrhE,EACb,IAAIuiE,GAAuB,aAAavhE,KAAKD,GAClD,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,mBAC7B,IAAI,sBAAsB1hB,KAAKD,GACpC,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,gBAC7B,IAAI,8CAA8C1hB,KAAKD,GAC5D,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,UAC7B,IAAI,8BAA8B1hB,KAAKD,GAE5C,MADAf,GAAMwiE,SAAWzhE,EACV,2BACF,IAAI,qCAAqCC,KAAKD,GACnD,MAAO,WACF,IAAIA,GAA0B,KAAlBA,EAAKG,OAAO,GAC7B,MAAOkgE,GAAYphE,EAAO0iB,EAAQ,KAC7B,IAAY,QAAR3hB,EACT4b,EAAW,cACN,IAAY,QAAR5b,EACT4b,EAAW,UACN,CAAA,GAAY,uBAAR5b,EACT,MAAO,WACF,IAAY,iBAARA,EACT,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,gBAC7B,IAAY,KAAR3hB,EACT,MAAO,QACF,IAAIshE,GAAuB,KAARthE,EACxB,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,UAEpC,MAAO1iB,GAAMoC,QAAQrB,MAGvBwgE,EAAOkB,MAAQ,SAAU1hE,EAAM2hB,EAAQ1iB,GACrC,GAAY,QAARe,EAAgB,CAClB,GAAIm6C,GAAOx4B,EAAOlY,UAAU1J,aAC5B,OAAI+gE,GAAiBx2D,eAAe6vC,IAClCv+B,EAAW,WACJ,aACEulD,EAA4B72D,eAAe6vC,IACpDv+B,EAAW,WACJ,aACE0lD,GACT1lD,EAAW+F,EAAOzd,MAAM,iBAAiB,GAAS,WAAa,MACxD,UAEP0X,GAAY,SACL,aAEJ,MAAY,QAAR5b,EACF,QACGshE,GAAwB,QAARthE,GAA0B,aAARA,EAIrCwgE,EAAOpmD,IAAIpa,EAAM2hB,EAAQ1iB,IAHhC2c,EAAW,QACJ,UAMX4kD,EAAOmB,UAAY,SAAU3hE,EAAM2hB,EAAQ1iB,GACzC,MAAY,KAARe,EAAoBqgE,EAAYphE,EAAO0iB,EAAQ,QAC5C4+C,EAAKvgE,EAAM2hB,EAAQ1iB,IAG5BuhE,EAAOn2D,KAAO,SAAUrK,EAAM2hB,EAAQ1iB,GACpC,GAAY,KAARe,EAAa,MAAOsgE,GAAWrhE,EACnC,IAAY,KAARe,GAAeshE,EAAa,MAAOjB,GAAYphE,EAAO0iB,EAAQ,YAClE,IAAY,KAAR3hB,GAAuB,KAARA,EAAa,MAAOygE,GAAWzgE,EAAM2hB,EAAQ1iB,EAChE,IAAY,KAARe,EAAa,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,SAEnD,IAAY,QAAR3hB,GAAmB,sDAAsDC,KAAK0hB,EAAOlY,YAElF,GAAY,QAARzJ,EACT0gE,EAAY/+C,OACP,IAAY,iBAAR3hB,EACT,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,qBAJlC/F,IAAY,QAMd,OAAO,QAGT4kD,EAAOoB,UAAY,SAAU5hE,EAAM6hE,EAAS5iE,GAC1C,MAAY,KAARe,EAAoBsgE,EAAWrhE,GACvB,QAARe,GACF4b,EAAW,WAAkB,aAExB3c,EAAMoC,QAAQrB,MAGvBwgE,EAAOsB,OAAS,SAAU9hE,EAAM2hB,EAAQ1iB,GACtC,MAAY,KAARe,GAAuB,KAARA,EAAoBygE,EAAWzgE,EAAM2hB,EAAQ1iB,GACpD,KAARe,EAAoBsgE,EAAWrhE,GACvB,KAARe,EAAoBqgE,EAAYphE,EAAO0iB,EAAQ,UACvC,iBAAR3hB,EAAgCqgE,EAAYphE,EAAO0iB,EAAQ,kBACnD,QAAR3hB,GAAgB0gE,EAAY/+C,GACzB,WAGT6+C,EAAOuB,OAAS,SAAU/hE,EAAM2hB,EAAQ1iB,GACtC,MAAY,QAARe,EAAuB,SAEf,QAARA,GACF4b,EAAW,aACJ3c,EAAMoC,QAAQrB,MAEhBugE,EAAKvgE,EAAM2hB,EAAQ1iB,IAG5BuhE,EAAOO,cAAgB,SAAU/gE,EAAM2hB,EAAQ1iB,GAC7C,MAAY,QAARe,GAAkB+gE,EAAcz2D,eAAeqX,EAAOlY,YACxDmS,EAAW,MACJ3c,EAAMoC,QAAQrB,MAEdwgE,EAAOwB,QAAQhiE,EAAM2hB,EAAQ1iB,IAIxCuhE,EAAOwB,QAAU,SAAUhiE,EAAM2hB,EAAQ1iB,GACvC,GAAY,KAARe,EAAa,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,iBACnD,IAAY,KAAR3hB,GAAuB,KAARA,EAAa,MAAOygE,GAAWzgE,EAAM2hB,EAAQ1iB,EAChE,IAAY,KAARe,EAAa,MAAOsgE,GAAWrhE,IAAUohE,EAAYphE,EAAO0iB,EAAQ2/C,EAAc,QAAU,MAEhG,IAAY,iBAARthE,EAAyB,MAAOqgE,GAAYphE,EAAO0iB,EAAQ,gBAE/D,IAAY,QAAR3hB,EAAgB,CAClB,GAAIm6C,GAAOx4B,EAAOlY,UAAU1J,aAC0C6b,GAA1D,QAARu+B,GAA0B,OAARA,GAAyB,OAARA,GAAyB,MAARA,EAAyB,UAAmB6mB,EAAW12D,eAAe6vC,GAAkB,YAAqB8mB,EAAc32D,eAAe6vC,GAAkB,WAAoB+mB,EAAmB52D,eAAe6vC,GAAkB,UAAmB2mB,EAAiBx2D,eAAe6vC,GAAkB,WAAoBgnB,EAA4B72D,eAAe6vC,GAAkB,WAAoBwmB,EAAcr2D,eAAe6vC,GAAkB,OAAgBymB,EAAct2D,eAAe6vC,GAAkB,UAA0B,QAEhlB,MAAOl7C,GAAMoC,QAAQrB,MAGvBwgE,EAAOyB,iBAAmB,SAAUjiE,EAAM2hB,EAAQ1iB,GAChD,MAAY,KAARe,EAAoBygE,EAAWzgE,EAAM2hB,EAAQ1iB,GACrC,KAARe,EAAoBsgE,EAAWrhE,IAAUohE,EAAYphE,EAAO0iB,EAAQ2/C,EAAc,QAAU,OAAO,IAC3F,QAARthE,IAAgB4b,EAAW,SACxB3c,EAAMoC,QAAQrB,OAGvBwgE,EAAO0B,eAAiB,SAAUliE,EAAM2hB,EAAQ1iB,GAC9C,MAAY,KAARe,EAAoBsgE,EAAWrhE,GACvB,KAARe,GAAuB,KAARA,EAAoBygE,EAAWzgE,EAAM2hB,EAAQ1iB,EAAO,GAChEuhE,EAAOwB,QAAQhiE,EAAM2hB,EAAQ1iB,IAGtCuhE,EAAO2B,0BAA4B,SAAUniE,EAAM2hB,EAAQ1iB,GACzD,MAAY,KAARe,EAAoBqgE,EAAYphE,EAAO0iB,EAAQ,sBACvC,QAAR3hB,GAAoC,kBAAlBf,EAAMwiE,UAC1B7lD,EAAW,WACJ,6BAEF2kD,EAAKvgE,EAAM2hB,EAAQ1iB,IAG5BuhE,EAAO4B,mBAAqB,SAAUpiE,EAAM2hB,EAAQ1iB,GAClD,MAAY,KAARe,GACFf,EAAMwiE,SAAW,KACVnB,EAAWrhE,IAER,QAARe,GACgN4b,EAA5L,cAAlB3c,EAAMwiE,WAA6BL,EAAe92D,eAAeqX,EAAOlY,UAAU1J,gBAAoC,kBAAlBd,EAAMwiE,WAAiCJ,EAAmB/2D,eAAeqX,EAAOlY,UAAU1J,eAA2B,QAAwB,WAC9O,aAEF,sBAGTygE,EAAO6B,UAAY,SAAUriE,EAAM2hB,EAAQ1iB,GACzC,MAAY,QAARe,GACF4b,EAAW,WAAkB,aAEnB,KAAR5b,EAAoBqgE,EAAYphE,EAAO0iB,EAAQ,OAC5C4+C,EAAKvgE,EAAM2hB,EAAQ1iB,IAG5BuhE,EAAOl8D,GAAK,SAAUtE,EAAM2hB,EAAQ1iB,GAClC,MAAY,KAARe,EAAoBsgE,EAAWrhE,GACvB,KAARe,GAAuB,KAARA,EAAoBygE,EAAWzgE,EAAM2hB,EAAQ1iB,IACpD,QAARe,EAAgB4b,EAAW,MAAuB,QAAR5b,IAAgB4b,EAAW,WAClE,OAGT4kD,EAAO8B,cAAgB,SAAUtiE,EAAM2hB,EAAQ1iB,GAC7C,MAAY,KAARe,EAAoBsgE,EAAWrhE,GACvB,KAARe,GAAuB,KAARA,EAAoBygE,EAAWzgE,EAAM2hB,EAAQ1iB,IACpD,QAARe,EAAgB4b,EAAW,WAA4B,YAAR5b,GAA8B,KAARA,GAAuB,KAARA,IAAa4b,EAAW,SACzG,mBAIP4D,WAAY,SAAoB1T,GAC9B,OAAS4zD,SAAU,KACjBzgE,MAAO4hE,EAAS,QAAU,MAC1BY,SAAU,KACVpgE,QAAS,GAAIggB,GAAQw/C,EAAS,QAAU,MAAO/0D,GAAQ,EAAG,QAG9DmW,MAAO,SAAeN,EAAQ1iB,GAC5B,IAAKA,EAAMygE,UAAY/9C,EAAO6iC,WAAY,MAAO,KACjD,IAAIh8C,IAASvJ,EAAMygE,UAAYK,GAAWp+C,EAAQ1iB,EAOlD,OANIuJ,IAA0E,eAA/C,KAAVA,EAAwB,YAAcrO,QAAQqO,MACjExI,EAAOwI,EAAM,GACbA,EAAQA,EAAM,IAEhBoT,EAAWpT,EACC,WAARxI,IAAmBf,EAAMA,MAAQuhE,EAAOvhE,EAAMA,OAAOe,EAAM2hB,EAAQ1iB,IAChE2c,GAGTtb,OAAQ,SAAgBrB,EAAOsjE,GAC7B,GAAIrgE,GAAKjD,EAAMoC,QACXzB,EAAK2iE,GAAaA,EAAUpiE,OAAO,GACnCG,EAAS4B,EAAG5B,MAYhB,OAXe,QAAX4B,EAAGlC,MAAyB,KAANJ,GAAmB,KAANA,IAAYsC,EAAKA,EAAGE,MACvDF,EAAGE,OACK,KAANxC,GAAyB,SAAXsC,EAAGlC,MAA8B,OAAXkC,EAAGlC,MAA4B,iBAAXkC,EAAGlC,MAAsC,sBAAXkC,EAAGlC,MAI5E,KAANJ,GAAyB,UAAXsC,EAAGlC,MAA+B,kBAAXkC,EAAGlC,QAAmC,KAANJ,GAAyB,MAAXsC,EAAGlC,MAA2B,WAAXkC,EAAGlC,QAElHM,EAASuB,KAAKoC,IAAI,EAAG/B,EAAG5B,OAASy6C,KAJjC74C,EAAKA,EAAGE,KACR9B,EAAS4B,EAAG5B,SAMTA,GAGT+7C,cAAe,IACfmmB,kBAAmB,KACnBC,gBAAiB,KACjBlB,YAAaA,EACbmB,KAAM,UAYV,IAAIC,IAAkB,SAAU,SAAU,MAAO,cAC7C5B,EAAgBxB,EAAOoD,GAEvBC,GAAe,MAAO,QAAS,UAAW,WAAY,QAAS,aAAc,SAAU,MAAO,KAAM,YACpG5B,EAAazB,EAAOqD,GAEpBC,GAAkB,QAAS,YAAa,YAAa,SAAU,aAAc,aAAc,eAAgB,mBAAoB,mBAAoB,gBAAiB,oBAAqB,oBAAqB,eAAgB,mBAAoB,mBAAoB,sBAAuB,0BAA2B,0BAA2B,QAAS,YAAa,YAAa,cAAe,kBAAmB,kBAAmB,aAAc,iBAAkB,iBAAkB,aAAc,iBAAkB,iBAAkB,OAAQ,OAAQ,cAAe,qBAAsB,yBAA0B,yBAA0B,UAAW,cAAe,QAAS,aAC3pB5B,EAAgB1B,EAAOsD,GAEvBC,GAAuB,YAAa,WAAY,OAAQ,SAAU,OAAQ,YAAa,QAAS,YAAa,eAC7G5B,EAAqB3B,EAAOuD,GAE5BC,GAAqB,gBAAiB,cAAe,aAAc,mBAAoB,qBAAsB,eAAgB,YAAa,kBAAmB,sBAAuB,qBAAsB,sBAAuB,4BAA6B,iBAAkB,uBAAwB,4BAA6B,aAAc,UAAW,sBAAuB,aAAc,wBAAyB,wBAAyB,kBAAmB,mBAAoB,mBAAoB,oBAAqB,sBAAuB,oBAAqB,kBAAmB,iBAAkB,UAAW,QAAS,iBAAkB,iBAAkB,iBAAkB,kBAAmB,SAAU,gBAAiB,sBAAuB,4BAA6B,6BAA8B,sBAAuB,sBAAuB,kBAAmB,eAAgB,eAAgB,sBAAuB,sBAAuB,qBAAsB,sBAAuB,qBAAsB,cAAe,oBAAqB,oBAAqB,oBAAqB,gBAAiB,eAAgB,qBAAsB,qBAAsB,qBAAsB,iBAAkB,eAAgB,aAAc,mBAAoB,yBAA0B,0BAA2B,mBAAoB,mBAAoB,eAAgB,SAAU,uBAAwB,aAAc,aAAc,cAAe,eAAgB,eAAgB,eAAgB,cAAe,QAAS,OAAQ,QAAS,gBAAiB,eAAgB,cAAe,aAAc,cAAe,oBAAqB,oBAAqB,oBAAqB,cAAe,eAAgB,UAAW,UAAW,oBAAqB,gBAAiB,OAAQ,MAAO,YAAa,aAAc,SAAU,YAAa,UAAW,oBAAqB,4BAA6B,2BAA4B,6BAA8B,4BAA6B,oBAAqB,qBAAsB,YAAa,cAAe,MAAO,eAAgB,OAAQ,aAAc,iBAAkB,YAAa,YAAa,cAAe,YAAa,QAAS,eAAgB,YAAa,YAAa,OAAQ,wBAAyB,cAAe,eAAgB,yBAA0B,YAAa,mBAAoB,eAAgB,aAAc,iBAAkB,eAAgB,0BAA2B,oBAAqB,0BAA2B,yBAA0B,uBAAwB,wBAAyB,cAAe,OAAQ,YAAa,oBAAqB,iBAAkB,iBAAkB,cAAe,kBAAmB,kBAAmB,oBAAqB,WAAY,WAAY,eAAgB,eAAgB,iBAAkB,gBAAiB,sBAAuB,wBAAyB,qBAAsB,sBAAuB,SAAU,UAAW,OAAQ,oBAAqB,kBAAmB,mBAAoB,mBAAoB,kBAAmB,gBAAiB,eAAgB,OAAQ,iBAAkB,aAAc,cAAe,gBAAiB,qBAAsB,sBAAuB,yBAA0B,aAAc,mBAAoB,sBAAuB,kBAAmB,SAAU,gBAAiB,cAAe,eAAgB,aAAc,QAAS,oBAAqB,eAAgB,qBAAsB,gBAAiB,gBAAiB,aAAc,YAAa,aAAc,YAAa,UAAW,WAAY,YAAa,WAAY,YAAa,SAAU,aAAc,kBAAmB,UAAW,QAAS,UAAW,UAAW,gBAAiB,iBAAkB,gBAAiB,gBAAiB,WAAY,iBAAkB,gBAAiB,aAAc,aAAc,UAAW,iBAAkB,eAAgB,gBAAiB,cAAe,OAAQ,mBAAoB,oBAAqB,oBAAqB,cAAe,QAAS,cAAe,eAAgB,cAAe,qBAAsB,QAAS,cAAe,gBAAiB,cAAe,aAAc,cAAe,WAAY,qBAAsB,mBAAoB,SAAU,qBAAsB,sBAAuB,sBAAuB,kBAAmB,mBAAoB,SAAU,OAAQ,aAAc,cAAe,WAAY,QAAS,WAAY,iBAAkB,aAAc,gBAAiB,gBAAiB,YAAa,wBAAyB,eAAgB,eAAgB,gBAAiB,OAAQ,QAAS,WAAY,eAAgB,gBAAiB,oBAAqB,cAAe,SAAU,aAAc,WAAY,eAAgB,SAAU,cAAe,aAAc,kBAAmB,aAAc,kBAAmB,kBAAmB,wBAAyB,uBAAwB,uBAAwB,wBAAyB,gBAAiB,sBAAuB,yBAA0B,sBAAuB,cAAe,cAAe,eAAgB,eAAgB,gBAAiB,cAAe,mBAAoB,sBAAuB,iBAAkB,0BAA2B,YAAa,MAAO,YAAa,mBAAoB,kBAAmB,aAAc,mBAAoB,sBAAuB,sBAAuB,6BAA8B,eAAgB,cAAe,iBAAkB,aAAc,gBAAiB,iBAAkB,eAAgB,cAAe,cAAe,aAAc,eAAgB,eAAgB,SAAU,cAAe,SAAU,QAAS,cAAe,aAAc,eAAgB,YAAa,UAElgL,YAAa,YAAa,OAAQ,oBAAqB,SAAU,cAAe,gBAAiB,iBAAkB,aAAc,eAAgB,iBAAkB,sBAAuB,8BAA+B,kBAAmB,OAAQ,eAAgB,YAAa,kBAAmB,SAAU,aAAc,aAAc,eAAgB,kBAAmB,SAAU,mBAAoB,oBAAqB,iBAAkB,kBAAmB,oBAAqB,iBAAkB,eAAgB,iBAAkB,iBAAkB,oBAAqB,+BAAgC,6BAA8B,cAAe,gBAC9nBjC,EAAmBvB,EAAOwD,GAE1BC,GAAgC,wBAAyB,uBAAwB,8BAA+B,uBAAwB,4BAA6B,yBAA0B,2BAA4B,wBAAyB,eAAgB,4BAA6B,yBAA0B,6BAA8B,iCAAkC,QAC3X7B,EAA8B5B,EAAOyD,GAErCC,GAAmB,cAAe,MAAO,gBAAiB,eAAgB,wBAAyB,eAAgB,cAAe,cAClI7B,EAAiB7B,EAAO0D,GAExBC,GAAuB,mBAAoB,WAAY,WAAY,MAAO,SAAU,QAAS,WAAY,SAAU,UAAW,UAC9H7B,EAAqB9B,EAAO2D,GAE5BC,GAAkB,YAAa,eAAgB,OAAQ,aAAc,QAAS,QAAS,SAAU,QAAS,iBAAkB,OAAQ,aAAc,QAAS,YAAa,YAAa,aAAc,YAAa,QAAS,iBAAkB,WAAY,UAAW,OAAQ,WAAY,WAAY,gBAAiB,WAAY,YAAa,YAAa,cAAe,iBAAkB,aAAc,aAAc,UAAW,aAAc,eAAgB,gBAAiB,gBAAiB,gBAAiB,aAAc,WAAY,cAAe,UAAW,aAAc,YAAa,cAAe,cAAe,UAAW,YAAa,aAAc,OAAQ,YAAa,OAAQ,OAAQ,QAAS,cAAe,WAAY,UAAW,YAAa,SAAU,QAAS,QAAS,WAAY,gBAAiB,YAAa,eAAgB,YAAa,aAAc,YAAa,uBAAwB,YAAa,aAAc,YAAa,cAAe,gBAAiB,eAAgB,iBAAkB,iBAAkB,cAAe,OAAQ,YAAa,QAAS,UAAW,SAAU,mBAAoB,aAAc,eAAgB,eAAgB,iBAAkB,kBAAmB,oBAAqB,kBAAmB,kBAAmB,eAAgB,YAAa,YAAa,WAAY,cAAe,OAAQ,UAAW,QAAS,YAAa,SAAU,YAAa,SAAU,gBAAiB,YAAa,gBAAiB,gBAAiB,aAAc,YAAa,OAAQ,OAAQ,OAAQ,aAAc,SAAU,gBAAiB,MAAO,YAAa,YAAa,cAAe,SAAU,aAAc,WAAY,WAAY,SAAU,SAAU,UAAW,YAAa,YAAa,OAAQ,cAAe,YAAa,MAAO,OAAQ,UAAW,SAAU,YAAa,SAAU,QAAS,QAAS,aAAc,SAAU,eACzyDvC,EAAgBrB,EAAO4D,GAEvBC,GAAkB,QAAS,WAAY,eAAgB,WAAY,gBAAiB,OAAQ,oBAAqB,QAAS,QAAS,MAAO,aAAc,aAAc,YAAa,SAAU,UAAW,kBAAmB,cAAe,eAAgB,eAAgB,WAAY,YAAa,OAAQ,OAAQ,YAAa,QAAS,eAAgB,aAAc,eAAgB,aAAc,YAAa,WAAY,QAAS,gBAAiB,SAAU,UAAW,QAAS,QAAS,aAAc,OAAQ,SAAU,SAAU,aAAc,OAAQ,SAAU,QAAS,YAAa,aAAc,UAAW,SAAU,eAAgB,aAAc,kBAAmB,eAAgB,aAAc,OAAQ,YAAa,aAAc,sBAAuB,UAAW,cAAe,QAAS,OAAQ,SAAU,WAAY,SAAU,cAAe,qBAAsB,oBAAqB,kBAAmB,QAAS,OAAQ,cAAe,aAAc,WAAY,QAAS,aAAc,cAAe,SAAU,iBAAkB,UAAW,YAAa,UAAW,UAAW,WAAY,cAAe,eAAgB,aAAc,OAAQ,UAAW,WAAY,QAAS,OAAQ,QAAS,YAAa,eAAgB,UAAW,SAAU,SAAU,SAAU,UAAW,uBAAwB,UAAW,iBAAkB,QAAS,mBAAoB,iBAAkB,kBAAmB,mBAAoB,aAAc,aAAc,OAAQ,UAAW,oBAAqB,kBAAmB,WAAY,WAAY,eAAgB,SAAU,SAAU,OAAQ,WAAY,OAAQ,UAAW,cAAe,WAAY,UAAW,UAAW,WAAY,QAAS,MAAO,WAAY,mBAAoB,yBAA0B,uBAAwB,yBAA0B,yBAA0B,0BAA2B,0BAA2B,0BAA2B,wBAAyB,0BAA2B,2BAA4B,0BAA2B,0BAA2B,0BAA2B,wBAAyB,mBAAoB,YAAa,YAAa,WAAY,UAAW,kBAAmB,iBAAkB,UAAW,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,WAAY,aAAc,YAAa,WAAY,OAAQ,qBAAsB,WAAY,WAAY,OAAQ,SAAU,WAAY,WAAY,OAAQ,SAAU,mBAAoB,aAAc,SAAU,OAAQ,SAAU,OAAQ,SAAU,YAAa,gBAAiB,WAAY,iBAAkB,aAAc,MAAO,OAAQ,MAAO,OAAQ,SAAU,iBAAkB,kBAAmB,sBAAuB,WAAY,iBAAkB,WAAY,UAAW,UAAW,SAAU,cAAe,eAAgB,cAAe,cAAe,eAAgB,QAAS,SAAU,YAAa,SAAU,SAAU,kBAAmB,oBAAqB,UAAW,UAAW,WAAY,iBAAkB,WAAY,QAAS,uBAAwB,sBAAuB,wBAAyB,YAAa,MAAO,QAAS,SAAU,OAAQ,QAAS,UAAW,UAAW,eAAgB,SAAU,kBAAmB,QAAS,YAAa,UAAW,WAAY,QAAS,UAAW,OAAQ,QAAS,cAAe,iBAAkB,cAAe,oBAAqB,cAAe,kBAAmB,cAAe,YAAa,MAAO,aAAc,YAAa,QAAS,SAAU,WAAY,4BAA6B,6BAA8B,0BAA2B,oBAAqB,oBAAqB,kCAAmC,sBAAuB,yBAA0B,4BAA6B,eAAgB,oBAAqB,+BAAgC,sBAAuB,gCAAiC,2BAA4B,SAAU,OAAQ,WAAY,kBAAmB,gBAAiB,qBAAsB,WAAY,cAAe,SAAU,gBAAiB,MAAO,YAAa,YAAa,OAAQ,WAAY,WAAY,UAAW,WAAY,WAAY,YAAa,cAAe,iBAAkB,UAAW,gBAAiB,YAAa,OAAQ,SAAU,cAAe,SAAU,YAAa,UAAW,UAAW,YAAa,cAAe,UAAW,QAAS,UAAW,aAAc,qBAAsB,gBAAiB,QAAS,QAAS,SAAU,UAAW,gBAAiB,UAAW,WAAY,UAAW,cAAe,UAAW,OAAQ,SAAU,UAAW,cAAe,cAAe,eAAgB,UAAW,UAAW,WAAY,MAAO,WAAY,WAAY,cAAe,WAAY,cAAe,kBAAmB,QAAS,YAAa,aAAc,4BAA6B,YAAa,SAAU,WAAY,SAAU,4BAA6B,4BAA6B,WAAY,WAAY,QAAS,UAAW,MAAO,OAAQ,QAAS,QAAS,SAAU,WAAY,UAAW,UAAW,UAAW,QAAS,MAAO,aAAc,cAAe,MAAO,SAAU,UAAW,WAAY,aAAc,aAAc,QAAS,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,YAAa,kBAAmB,YAAa,cAAe,4BAA6B,yBAA0B,6BAA8B,iCAAkC,aAAc,WAAY,iBAAkB,gBAAiB,WAAY,QAAS,OAAQ,SAAU,sBAAuB,wBAAyB,SAAU,OAAQ,QAAS,QAAS,mBAAoB,QAAS,oBAAqB,kBAAmB,yBAA0B,uBAAwB,OAAQ,QAAS,aAAc,gBAAiB,UAAW,aAAc,QAAS,SAAU,cAAe,YAAa,aAAc,cAAe,QAAS,eAAgB,gBAAiB,eAAgB,YAAa,SAAU,gBAAiB,QAAS,SAAU,aAAc,UAAW,SAAU,MAAO,uBAAwB,QAAS,YAAa,WAAY,UAAW,YAAa,QAAS,gBAAiB,aAAc,eAAgB,qBAAsB,qBAAsB,qBAAsB,YAAa,kBAAmB,QAAS,SAAU,OAAQ,cAAe,WAAY,WAAY,YAAa,OAAQ,QAAS,OAAQ,mBAAoB,aAAc,kBAAmB,oBAAqB,eAAgB,UAAW,QAAS,cAAe,sBAAuB,cAAe,sBAAuB,KAAM,MAAO,sBAAuB,wBAAyB,YAAa,YAAa,cAAe,aAAc,aAAc,aAAc,cAAe,kBAAmB,iBAAkB,YAAa,QAAS,KAAM,cAAe,iBAAkB,cAAe,oBAAqB,cAAe,kBAAmB,cAAe,YAAa,OAAQ,MAAO,MAAO,WAAY,gBAAiB,UAAW,cAAe,iBAAkB,gBAAiB,SAAU,WAAY,OAAQ,OAAQ,QAAS,SAAU,cAAe,aAAc,QAAS,OAAQ,eAAgB,UAAW,UAAW,MAAO,WAAY,YACj7NzC,EAAgBpB,EAAO6D,GAEvBC,EAAWV,EAAetuD,OAAOuuD,GAAavuD,OAAOwuD,GAAgBxuD,OAAOyuD,GAAqBzuD,OAAO0uD,GAAmB1uD,OAAO2uD,GAA8B3uD,OAAO8uD,GAAgB9uD,OAAO+uD;24eAClM5mE,GAAW2K,eAAe,YAAa,MAAOk8D,GAe9C7mE,EAAWgiB,WAAW,YACpBuiD,cAAeA,EACfC,WAAYA,EACZC,cAAeA,EACfC,mBAAoBA,EACpBJ,iBAAkBA,EAClBK,4BAA6BA,EAC7BC,eAAgBA,EAChBC,mBAAoBA,EACpBT,cAAeA,EACfD,cAAeA,EACfX,YACEsD,IAAK,SAAW3hD,EAAQ1iB,GACtB,QAAK0iB,EAAO2iC,IAAI,OAChBrlD,EAAMygE,SAAWF,EACVA,EAAc79C,EAAQ1iB,MAGjCC,KAAM,QAGR1C,EAAWgiB,WAAW,eACpBwiD,WAAYA,EACZC,cAAeA,EACfC,mBAAoBA,EACpBJ,iBAAkBA,EAClBK,4BAA6BA,EAC7BP,cAAeA,EACfD,cAAeA,EACfS,eAAgBA,EAChBE,aAAa,EACbC,YAAa,KACbvB,YACEsD,IAAK,SAAW3hD,EAAQ1iB,GACtB,MAAI0iB,GAAO2iC,IAAI,MACb3iC,EAAO8iC,aACC,UAAW,YACV9iC,EAAO2iC,IAAI,MACpBrlD,EAAMygE,SAAWF,EACVA,EAAc79C,EAAQ1iB,KAErB,WAAY,aAGxBskE,IAAK,SAAW5hD,GACd,QAAIA,EAAOzd,MAAM,SAAS,KAAgB,KAAM,OAGlDs/D,EAAK,SAAW7hD,GAEd,MADAA,GAAOzd,MAAM,WACTyd,EAAOzd,MAAM,SAAS,IAAgB,aAAc,wBAChD,aAAc,aAExBu/D,IAAK,SAAW9hD,GACd,QAAKA,EAAO2iC,IAAI,OACR,KAAM,mBAGlBplD,KAAM,MACN+f,WAAY,SAGdziB,EAAWgiB,WAAW,eACpBwiD,WAAYA,EACZC,cAAeA,EACfC,mBAAoBA,EACpBJ,iBAAkBA,EAClBK,4BAA6BA,EAC7BP,cAAeA,EACfD,cAAeA,EACfS,eAAgBA,EAChBE,aAAa,EACbC,YAAa,KACbvB,YACEsD,IAAK,SAAW3hD,EAAQ1iB,GACtB,MAAI0iB,GAAO2iC,IAAI,MACb3iC,EAAO8iC,aACC,UAAW,YACV9iC,EAAO2iC,IAAI,MACpBrlD,EAAMygE,SAAWF,EACVA,EAAc79C,EAAQ1iB,KAErB,WAAY,aAGxBykE,IAAK,SAAW/hD,GACd,MAAIA,GAAO2iC,IAAI,MAAc,KAAM,kBAC/B3iC,EAAOzd,MAAM,wGAAwG,KACzHyd,EAAO4iC,SAAS,YACZ5iC,EAAOzd,MAAM,SAAS,IAAgB,aAAc,wBAChD,aAAc,cAExBy/D,IAAK,WACH,OAAQ,OAAQ,UAGpBzkE,KAAM,MACN+f,WAAY,SAGdziB,EAAWgiB,WAAW,cACpBuiD,cAAeA,EACfC,WAAYA,EACZC,cAAeA,EACfH,iBAAkBA,EAClBK,4BAA6BA,EAC7BC,eAAgBA,EAChBC,mBAAoBA,EACpBT,cAAeA,EACfD,cAAeA,EACfa,qBAAqB,EACrBxB,YACEsD,IAAK,SAAW3hD,EAAQ1iB,GACtB,QAAK0iB,EAAO2iC,IAAI,OAChBrlD,EAAMygE,SAAWF,EACVA,EAAc79C,EAAQ1iB,MAGjCC,KAAM,MACN+f,WAAY,YAGb/b,uBAAwB,IAAM0gE,GAAI,SAAUnpE,EAASoB,EAAQJ,IAIhE,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,wBAAyBA,EAAQ,cAAeA,EAAQ,4BAA6BA,EAAQ,eAAyC,kBAAVE,IAAwBA,EAAOsD,IACvKtD,GAAQ,uBAAwB,aAAc,2BAA4B,cAAeqD,GACzFA,EAAIxB,aACL,SAAUA,GAQX,QAASqnE,GAAYliD,EAAQmiD,EAAKt7D,GAChC,GAAI5E,GAAM+d,EAAOlY,UACbjF,EAAQZ,EAAI+G,OAAOm5D,EAOvB,OANIt/D,IAAS,EACXmd,EAAOgjC,OAAO/gD,EAAIjI,OAAS6I,GAClBZ,EAAIM,MAAM,WACnByd,EAAOgjC,OAAO/gD,EAAIjI,QACbgmB,EAAOzd,MAAM4/D,GAAK,IAAQniD,EAAOzd,MAAMN,IAEvC4E,EAIT,QAASu7D,GAAcC,GACrB,GAAIC,GAASC,EAAgBF,EAC7B,OAAIC,KACGC,EAAgBF,GAAQ,GAAI98D,QAAO,OAAS88D,EAAO,yCAG5D,QAASG,GAAa5jE,EAAMyjE,GAC1B,GAAI9/D,GAAQ3D,EAAK2D,MAAM6/D,EAAcC,GACrC,OAAO9/D,GAAQ,gBAAgBmC,KAAKnC,EAAM,IAAI,GAAK,GAGrD,QAASkgE,GAAajlE,EAASklE,GAC7B,MAAO,IAAIn9D,SAAQm9D,EAAW,IAAM,IAAM,OAAWllE,EAAU,MAAQ,KAGzE,QAASmlE,GAAQtgE,EAAM3B,GACrB,IAAK,GAAIJ,KAAO+B,GAGd,IAAK,GAFDyjC,GAAOplC,EAAGJ,KAASI,EAAGJ,OACtBuK,EAASxI,EAAK/B,GACT7G,EAAIoR,EAAO7Q,OAAS,EAAGP,GAAK,EAAGA,IACtCqsC,EAAK8b,QAAQ/2C,EAAOpR,IAK1B,QAASmpE,GAAiBC,EAASC,GACjC,IAAK,GAAIrpE,GAAI,EAAGA,EAAIopE,EAAQ7oE,OAAQP,IAAK,CACvC,GAAIsjB,GAAO8lD,EAAQppE,EACnB,KAAKsjB,EAAK,IAAMA,EAAK,GAAGze,KAAKkkE,EAAaM,EAAS/lD,EAAK,KAAM,MAAOA,GAAK,IA9C9E,GAAIgmD,IACFC,SAAU,OAAQ,sBAAuB,eAAgB,OAAQ,kEAAmE,eAAgB,OAAQ,IAAK,eAAgB,KAAM,KAAM,eAC7Ln8D,QAAS,OAAQ,SAAU,QAAS,OAAQ,oCAAqC,QAAS,OAAQ,IAAK,eAAgB,KAAM,KAAM,SAejI07D,IAiCJ1nE,GAAW6hB,WAAW,YAAa,SAAUshD,EAAQC,GAelD,QAASvgE,GAAKsiB,EAAQ1iB,GACrB,GAEIE,GAFAqJ,EAAQvL,EAASglB,MAAMN,EAAQ1iB,EAAM2lE,WACrC3iE,EAAM,UAAUhC,KAAKuI,EAEzB,IAAIvG,IAAQ,WAAWhC,KAAK0hB,EAAOlY,aAAetK,EAAUF,EAAM2lE,UAAUzlE,SAAWF,EAAM2lE,UAAUzlE,QAAQY,gBAAkB8kE,EAAKv6D,eAAenL,GACnJF,EAAM6lE,MAAQ3lE,EAAU,QACnB,IAAIF,EAAM6lE,OAAS7iE,GAAO,KAAKhC,KAAK0hB,EAAOlY,WAAY,CAC5D,GAAIq7D,GAAQ,gBAAgBz+D,KAAKpH,EAAM6lE,MACvC7lE,GAAM6lE,MAAQ,IACd,IAAInI,GAA+B,KAApBh7C,EAAOlY,WAAoB86D,EAAiBM,EAAKC,EAAM,IAAKA,EAAM,IAC7E9nE,EAAOR,EAAWwC,QAAQ2gE,EAAQhD,GAClCoI,EAAUX,EAAaU,EAAM,IAAI,GACjCE,EAASZ,EAAaU,EAAM,IAAI,EACpC7lE,GAAMgjB,MAAQ,SAAUN,EAAQ1iB,GAC9B,MAAI0iB,GAAOzd,MAAM6gE,GAAS,IACxB9lE,EAAMgjB,MAAQ5iB,EACdJ,EAAMgmE,WAAahmE,EAAMimE,UAAY,KAC9B,MAEFrB,EAAYliD,EAAQqjD,EAAQ/lE,EAAMimE,UAAUjjD,MAAMN,EAAQ1iB,EAAMgmE,cAEzEhmE,EAAMimE,UAAYloE,EAClBiC,EAAMgmE,WAAazoE,EAAWgjB,WAAWxiB,EAAMC,EAASqD,OAAOrB,EAAM2lE,UAAW,SACvE3lE,GAAM6lE,QACf7lE,EAAM6lE,OAASnjD,EAAOlY,UAClBkY,EAAOG,QAAO7iB,EAAM6lE,OAAS,KAEnC,OAAOt8D,GAzCT,GAAIvL,GAAWT,EAAWwC,QAAQ2gE,GAChCzgE,KAAM,MACNjC,UAAU,EACVkoE,yBAA0BvF,EAAauF,yBACvCC,0BAA2BxF,EAAawF,4BAGtCP,KACAQ,EAAazF,GAAgBA,EAAaiF,KAC1CS,EAAe1F,GAAgBA,EAAa2F,WAGhD,IAFAjB,EAAQI,EAAaG,GACjBQ,GAAYf,EAAQe,EAAYR,GAChCS,EAAc,IAAK,GAAIlqE,GAAIkqE,EAAa3pE,OAAS,EAAGP,GAAK,EAAGA,IAC9DypE,EAAKF,OAAOphB,SAAS,OAAQ+hB,EAAalqE,GAAGoqE,QAASF,EAAalqE,GAAG4B,MA+BxE,QACEwiB,WAAY,WAEV,OAASyC,MAAO5iB,EAAMylE,MAAO,KAAMI,UAAW,KAAMD,WAAY,KAAML,UAD1DpoE,EAAWgjB,WAAWviB,KAIpCqiB,UAAW,SAAmBrgB,GAC5B,GAAIwmE,EAIJ,OAHIxmE,GAAMgmE,aACRQ,EAAQjpE,EAAW8iB,UAAUrgB,EAAMimE,UAAWjmE,EAAMgmE,cAE7ChjD,MAAOhjB,EAAMgjB,MAAO6iD,MAAO7lE,EAAM6lE,MACxCI,UAAWjmE,EAAMimE,UAAWD,WAAYQ,EACxCb,UAAWpoE,EAAW8iB,UAAUriB,EAAUgC,EAAM2lE,aAGpD3iD,MAAO,SAAeN,EAAQ1iB,GAC5B,MAAOA,GAAMgjB,MAAMN,EAAQ1iB,IAG7BqB,OAAQ,SAAgBrB,EAAOsjE,EAAW7hE,GACxC,OAAKzB,EAAMimE,WAAa,UAAUjlE,KAAKsiE,GAAmBtlE,EAASqD,OAAOrB,EAAM2lE,UAAWrC,GAAoBtjE,EAAMimE,UAAU5kE,OAAerB,EAAMimE,UAAU5kE,OAAOrB,EAAMgmE,WAAY1C,EAAW7hE,GAAkBlE,EAAW6B,MAGjOU,UAAW,SAAmBE,GAC5B,OAASA,MAAOA,EAAMgmE,YAAchmE,EAAM2lE,UAAW5nE,KAAMiC,EAAMimE,WAAajoE,MAGjF,MAAO,aAAc,OAExBT,EAAWgiB,WAAW,YAAa,iBAElCtb,uBAAwB,EAAGwiE,aAAc,EAAGC,2BAA4B,EAAGC,aAAc,IAAM7a,GAAI,SAAUtwD,EAASoB,EAAQJ,IAIjI,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,yBAAmD,kBAAVE,IAAwBA,EAAOsD,IACpFtD,GAAQ,wBAAyBqD,GACjCA,EAAIxB,aACL,SAAUA,GAGXA,EAAW6hB,WAAW,aAAc,SAAUshD,EAAQC,GAkEpD,QAASiG,GAAWlkD,GAIlB,IAHA,GACIrf,GADA89D,GAAU,EAEV0F,GAAQ,EACqB,OAAzBxjE,EAAOqf,EAAOrf,SAAiB,CACrC,IAAK89D,EAAS,CACZ,GAAY,KAAR99D,IAAgBwjE,EAAO,MACf,MAARxjE,EAAawjE,GAAQ,EAAcA,GAAiB,KAARxjE,IAAawjE,GAAQ,GAEvE1F,GAAWA,GAAmB,MAAR99D,GAO1B,QAASu9D,GAAIC,EAAIt3D,EAAOu9D,GAEtB,MADA/lE,IAAO8/D,EAAGv3D,GAAUw9D,EACbv9D,EAET,QAASu3D,GAAUp+C,EAAQ1iB,GACzB,GAAIW,GAAK+hB,EAAOrf,MAChB,IAAU,KAAN1C,GAAmB,KAANA,EAEf,MADAX,GAAMygE,SAAWO,EAAYrgE,GACtBX,EAAMygE,SAAS/9C,EAAQ1iB,EACzB,IAAU,KAANW,GAAa+hB,EAAOzd,MAAM,0BACnC,MAAO27D,GAAI,SAAU,SAChB,IAAU,KAANjgE,GAAa+hB,EAAOzd,MAAM,MACnC,MAAO27D,GAAI,SAAU,OAChB,IAAI,qBAAqB5/D,KAAKL,GACnC,MAAOigE,GAAIjgE,EACN,IAAU,KAANA,GAAa+hB,EAAO2iC,IAAI,KACjC,MAAOub,GAAI,KAAM,WACZ,IAAU,KAANjgE,GAAa+hB,EAAO2iC,IAAI,MAEjC,MADA3iC,GAAO4iC,SAAS,YACTsb,EAAI,SAAU,SAChB,IAAU,KAANjgE,GAAa+hB,EAAO2iC,IAAI,MAEjC,MADA3iC,GAAO4iC,SAAS,UACTsb,EAAI,SAAU,SAChB,IAAU,KAANjgE,GAAa+hB,EAAO2iC,IAAI,MAEjC,MADA3iC,GAAO4iC,SAAS,SACTsb,EAAI,SAAU,SAChB,IAAI,KAAK5/D,KAAKL,GAEnB,MADA+hB,GAAOzd,MAAM,oCACN27D,EAAI,SAAU,SAChB,IAAU,KAANjgE,EACT,MAAI+hB,GAAO2iC,IAAI,MACbrlD,EAAMygE,SAAWsG,EACVA,EAAarkD,EAAQ1iB,IACnB0iB,EAAO2iC,IAAI,MACpB3iC,EAAO8iC,YACAob,EAAI,UAAW,YACboG,GAAkBtkD,EAAQ1iB,EAAO,IAC1C4mE,EAAWlkD,GACXA,EAAOzd,MAAM,mCACN27D,EAAI,SAAU,cAErBl+C,EAAO4iC,SAAS2hB,IACTrG,EAAI,WAAY,WAAYl+C,EAAOlY,WAEvC,IAAU,KAAN7J,EAET,MADAX,GAAMygE,SAAWyG,EACVA,EAAWxkD,EAAQ1iB,EACrB,IAAU,KAANW,EAET,MADA+hB,GAAO8iC,YACAob,EAAI,QAAS,QACf,IAAIqG,GAAejmE,KAAKL,GAE7B,MADU,KAANA,GAAcX,EAAMmnE,SAAiC,KAAtBnnE,EAAMmnE,QAAQpmE,MAAa2hB,EAAO4iC,SAAS2hB,IACvErG,EAAI,WAAY,WAAYl+C,EAAOlY,UACrC,IAAI48D,GAAOpmE,KAAKL,GAAK,CAC1B+hB,EAAO4iC,SAAS8hB,GAChB,IAAIlsB,GAAOx4B,EAAOlY,SAClB,IAAsB,KAAlBxK,EAAMqnE,SAAiB,CACzB,GAAIC,GAASC,qBAAqBrsB,GAAO,CACvC,GAAIssB,GAAKF,GAASpsB,EAClB,OAAO0lB,GAAI4G,EAAGzmE,KAAMymE,EAAGj+D,MAAO2xC,GAEhC,GAAY,SAARA,GAAmBx4B,EAAOzd,MAAM,cAAc,GAAQ,MAAO27D,GAAI,QAAS,UAAW1lB,GAE3F,MAAO0lB,GAAI,WAAY,WAAY1lB,IAIvC,QAAS8lB,GAAYE,GACnB,MAAO,UAAUx+C,EAAQ1iB,GACvB,GACIqD,GADA89D,GAAU,CAEd,IAAIsG,IAA+B,KAAjB/kD,EAAO0iC,QAAiB1iC,EAAOzd,MAAMyiE,IAErD,MADA1nE,GAAMygE,SAAWK,EACVF,EAAI,iBAAkB,OAE/B,MAAiC,OAAzBv9D,EAAOqf,EAAOrf,UAChBA,GAAQ69D,GAAUC,IACtBA,GAAWA,GAAmB,MAAR99D,CAGxB,OADK89D,KAASnhE,EAAMygE,SAAWK,GACxBF,EAAI,SAAU,WAIzB,QAASmG,GAAarkD,EAAQ1iB,GAG5B,IAFA,GACIW,GADA6/D,GAAW,EAER7/D,EAAK+hB,EAAOrf,QAAQ,CACzB,GAAU,KAAN1C,GAAa6/D,EAAU,CACzBxgE,EAAMygE,SAAWK,CACjB,OAEFN,EAAiB,KAAN7/D,EAEb,MAAOigE,GAAI,UAAW,WAGxB,QAASsG,GAAWxkD,EAAQ1iB,GAG1B,IAFA,GACIqD,GADA89D,GAAU,EAEmB,OAAzB99D,EAAOqf,EAAOrf,SAAiB,CACrC,IAAK89D,IAAoB,KAAR99D,GAAuB,KAARA,GAAeqf,EAAO2iC,IAAI,MAAO,CAC/DrlD,EAAMygE,SAAWK,CACjB,OAEFK,GAAWA,GAAmB,MAAR99D,EAExB,MAAOu9D,GAAI,QAAS,WAAYl+C,EAAOlY,WAWzC,QAASm9D,GAAajlD,EAAQ1iB,GACxBA,EAAM4nE,aAAY5nE,EAAM4nE,WAAa,KACzC,IAAIC,GAAQnlD,EAAOzhB,OAAOE,QAAQ,KAAMuhB,EAAOxgB,MAC/C,MAAI2lE,EAAQ,GAAZ,CAEA,GAAIC,GAAM,CAER,GAAIzwD,GAAI,6CAA6CjQ,KAAKsb,EAAOzhB,OAAOL,MAAM8hB,EAAOxgB,MAAO2lE,GACxFxwD,KAAGwwD,EAAQxwD,EAAEhQ,OAKnB,IAAK,GAFD0gE,GAAQ,EACRC,GAAe,EACVvoE,EAAMooE,EAAQ,EAAGpoE,GAAO,IAAKA,EAAK,CACzC,GAAIkB,GAAK+hB,EAAOzhB,OAAOC,OAAOzB,GAC1BwoE,EAAUC,GAAS/mE,QAAQR,EAC/B,IAAIsnE,GAAW,GAAKA,EAAU,EAAG,CAC/B,IAAKF,EAAO,GACRtoE,CAAI,OAER,GAAe,KAATsoE,EAAY,CACN,KAANpnE,IAAWqnE,GAAe,EAAK,YAEhC,IAAIC,GAAW,GAAKA,EAAU,IACjCF,MACG,IAAIX,GAAOpmE,KAAKL,GACrBqnE,GAAe,MACV,CAAA,GAAI,SAAShnE,KAAKL,GACvB,MACK,IAAIqnE,IAAiBD,EAAO,GAC/BtoE,CACF,SAGAuoE,IAAiBD,IAAO/nE,EAAM4nE,WAAanoE,IAOjD,QAAS0oE,GAAUhkD,EAAUwhC,EAAQ5kD,EAAMo3B,EAAOh1B,EAAMzB,GACtD3E,KAAKonB,SAAWA,EAChBpnB,KAAK4oD,OAASA,EACd5oD,KAAKgE,KAAOA,EACZhE,KAAKoG,KAAOA,EACZpG,KAAK2E,KAAOA,EACC,MAATy2B,IAAep7B,KAAKo7B,MAAQA,GAGlC,QAASiwC,GAAQpoE,EAAOqoE,GACtB,IAAK,GAAI/7B,GAAItsC,EAAMsoE,UAAWh8B,EAAGA,EAAIA,EAAEjpC,KACrC,GAAIipC,EAAErsC,MAAQooE,EAAS,OAAO,CAC/B,KAAK,GAAIplE,GAAKjD,EAAMoC,QAASa,EAAIA,EAAKA,EAAGE,KACxC,IAAK,GAAImpC,GAAIrpC,EAAGslE,KAAMj8B,EAAGA,EAAIA,EAAEjpC,KAC7B,GAAIipC,EAAErsC,MAAQooE,EAAS,OAAO,EAKpC,QAASG,GAAQxoE,EAAOuJ,EAAOxI,EAAMuI,EAASoZ,GAC5C,GAAI+lD,GAAKzoE,EAAMyoE,EAOf,KAJAxlE,GAAGjD,MAAQA,EAAMiD,GAAGyf,OAASA,EAAOzf,GAAGylE,OAAS,KAAMzlE,GAAGwlE,GAAKA,EAAGxlE,GAAGsG,MAAQA,EAEvEvJ,EAAMmnE,QAAQ97D,eAAe,WAAUrL,EAAMmnE,QAAQhvC,OAAQ,KAErD,CAEX,IADiBswC,EAAG/rE,OAAS+rE,EAAG9gC,MAAQghC,GAAWC,EAAaC,GACjD9nE,EAAMuI,GAAU,CAC7B,KAAOm/D,EAAG/rE,QAAU+rE,EAAGA,EAAG/rE,OAAS,GAAGosE,KACpCL,EAAG9gC,OACJ,OAAI1kC,IAAGylE,OAAezlE,GAAGylE,OACd,YAAR3nE,GAAsBqnE,EAAQpoE,EAAOsJ,GAAiB,aACnDC,IAQb,QAAS+3D,KACP,IAAK,GAAInlE,GAAI4O,UAAUrO,OAAS,EAAGP,GAAK,EAAGA,IACzC8G,GAAGwlE,GAAG7gE,KAAKmD,UAAU5O,IAGzB,QAAS2qE,KAEP,MADAxF,GAAKt2D,MAAM,KAAMD,YACV,EAET,QAASg+D,GAASV,GAChB,QAASW,GAAOjgD,GACd,IAAK,GAAIujB,GAAIvjB,EAAMujB,EAAGA,EAAIA,EAAEjpC,KAC1B,GAAIipC,EAAErsC,MAAQooE,EAAS,OAAO,CAC/B,QAAO,EAEV,GAAIroE,GAAQiD,GAAGjD,KAEf,IADAiD,GAAGylE,OAAS,MACR1oE,EAAMoC,QAAS,CACjB,GAAI4mE,EAAOhpE,EAAMsoE,WAAY,MAC7BtoE,GAAMsoE,WAAcroE,KAAMooE,EAAShlE,KAAMrD,EAAMsoE,eAC1C,CACL,GAAIU,EAAOhpE,EAAMipE,YAAa,MAC1BtI,GAAasI,aAAYjpE,EAAMipE,YAAehpE,KAAMooE,EAAShlE,KAAMrD,EAAMipE,cAOjF,QAASC,KACPjmE,GAAGjD,MAAMoC,SAAYe,KAAMF,GAAGjD,MAAMoC,QAASmmE,KAAMtlE,GAAGjD,MAAMsoE,WAC5DrlE,GAAGjD,MAAMsoE,UAAYa,GAEvB,QAASC,KACPnmE,GAAGjD,MAAMsoE,UAAYrlE,GAAGjD,MAAMoC,QAAQmmE,KACtCtlE,GAAGjD,MAAMoC,QAAUa,GAAGjD,MAAMoC,QAAQe,KAEtC,QAASkmE,GAAQtoE,EAAMW,GACrB,GAAImgB,GAAS,WACX,GAAI7hB,GAAQiD,GAAGjD,MACXqB,EAASrB,EAAMmkB,QACnB,IAA0B,QAAtBnkB,EAAMmnE,QAAQpmE,KAAgBM,EAASrB,EAAMmnE,QAAQhjD,aAAc,KAAK,GAAIhR,GAAQnT,EAAMmnE,QAASh0D,GAAuB,KAAdA,EAAMpS,MAAeoS,EAAMglB,MAAOhlB,EAAQA,EAAMhQ,KAC9J9B,EAAS8R,EAAMgR,QAChBnkB,GAAMmnE,QAAU,GAAIgB,GAAU9mE,EAAQ4B,GAAGyf,OAAOijC,SAAU5kD,EAAM,KAAMf,EAAMmnE,QAASzlE,GAGxF,OADAmgB,GAAOinD,KAAM,EACNjnD,EAET,QAASynD,KACP,GAAItpE,GAAQiD,GAAGjD,KACXA,GAAMmnE,QAAQhkE,OACU,KAAtBnD,EAAMmnE,QAAQpmE,OAAaf,EAAMmkB,SAAWnkB,EAAMmnE,QAAQhjD,UAC9DnkB,EAAMmnE,QAAUnnE,EAAMmnE,QAAQhkE,MAKlC,QAASomE,GAAOC,GACd,QAASC,GAAI1oE,GACX,MAAIA,IAAQyoE,EAAe1C,IAA0B,KAAV0C,EAAsBlI,IAAmBwF,EAAK2C,GAE3F,MAAOA,GAGT,QAASZ,GAAU9nE,EAAMwL,GACvB,MAAY,OAARxL,EAAsB+lE,EAAKuC,EAAQ,SAAU98D,EAAM7P,QAASgtE,EAAQH,EAAO,KAAMD,GACzE,aAARvoE,EAA4B+lE,EAAKuC,EAAQ,QAASM,EAAWd,EAAWS,GAChE,aAARvoE,EAA4B+lE,EAAKuC,EAAQ,QAASR,EAAWS,GACrD,KAARvoE,EAAoB+lE,EAAKuC,EAAQ,KAAM5G,EAAO6G,GACtC,KAARvoE,EAAoB+lE,IACZ,MAAR/lE,GAC2B,QAAzBkC,GAAGjD,MAAMmnE,QAAQzlE,MAAkBuB,GAAGjD,MAAMyoE,GAAGxlE,GAAGjD,MAAMyoE,GAAG/rE,OAAS,IAAM4sE,GAAQrmE,GAAGjD,MAAMyoE,GAAG9gC,QAC3Fm/B,EAAKuC,EAAQ,QAASM,EAAWd,EAAWS,EAAQM,KAEjD,YAAR7oE,EAA2B+lE,EAAK+C,IACxB,OAAR9oE,EAAsB+lE,EAAKuC,EAAQ,QAASS,GAASjB,EAAWS,GACxD,YAARvoE,EACE+mE,IAAiB,QAATv7D,GACVtJ,GAAGylE,OAAS,UACL5B,EAAKiD,EAAUR,EAAO,YAAaQ,EAAUR,EAAO,OACxDzB,IAAiB,WAATv7D,GACXtJ,GAAGylE,OAAS,UACL5B,EAAK+B,IAEL/B,EAAKuC,EAAQ,QAASW,GAGrB,UAARjpE,EAAyB+lE,EAAKuC,EAAQ,QAASM,EAAWJ,EAAO,KAAMF,EAAQ,IAAK,UAAW5G,EAAO6G,EAAQA,GACtG,QAARvoE,EAAuB+lE,EAAK8B,EAAYW,EAAO,MACvC,WAARxoE,EAA0B+lE,EAAKyC,EAAO,MAC9B,SAARxoE,EAAwB+lE,EAAKuC,EAAQ,QAASH,EAAaK,EAAO,KAAMU,GAAQV,EAAO,KAAMV,EAAWS,EAAQF,GACxG,SAARroE,EAAwB+lE,EAAKuC,EAAQ,QAAS5jE,GAAW6jE,GACjD,UAARvoE,EAAyB+lE,EAAKuC,EAAQ,QAASa,GAAaZ,GACpD,UAARvoE,EAAyB+lE,EAAKuC,EAAQ,QAASc,GAAab,GACpD,UAARvoE,EAAyB+lE,EAAKuC,EAAQ,QAASzjB,EAAS2jB,EAAO,KAAMF,EAAQ,KAAM5G,EAAO6G,EAAQA,GAC1F,SAARvoE,EAAwB+lE,EAAK+B,GACpB,KAATt8D,EAAqBu6D,EAAK8B,EAAYC,GACnCvH,EAAK+H,EAAQ,QAAST,EAAYW,EAAO,KAAMD,GAExD,QAASV,GAAW7nE,GAClB,MAAOqpE,GAAgBrpE,GAAM,GAE/B,QAASspE,GAAkBtpE,GACzB,MAAOqpE,GAAgBrpE,GAAM,GAE/B,QAAS4oE,GAAU5oE,GACjB,MAAY,KAARA,EAAoBugE,IACjBwF,EAAKuC,EAAQ,KAAMT,EAAYW,EAAO,KAAMD,GAErD,QAASc,GAAgBrpE,EAAMupE,GAC7B,GAAIrnE,GAAGjD,MAAM4nE,YAAc3kE,GAAGyf,OAAOxgB,MAAO,CAC1C,GAAIkI,GAAOkgE,EAAUC,EAAmBC,CACxC,IAAY,KAARzpE,EAAa,MAAO+lE,GAAKoC,EAAaG,EAAQ,KAAMoB,EAAS7kB,EAAS,KAAM0jB,EAAQC,EAAO,MAAOn/D,EAAMg/D,EAAiB,IAAY,YAARroE,EAAoB,MAAOugE,GAAK4H,EAAatjB,EAAS2jB,EAAO,MAAOn/D,EAAMg/D,GAG7M,GAAIsB,GAAUJ,EAAUK,EAAuBC,CAC/C,OAAIC,IAAYx/D,eAAetK,GAAc+lE,EAAK4D,GACtC,YAAR3pE,EAA2B+lE,EAAK+C,GAAaa,GACrC,SAAR3pE,EAAwB+lE,EAAKuC,EAAQ,QAASyB,GAAiBxB,GACvD,aAARvoE,GAA+B,SAARA,EAAwB+lE,EAAKwD,EAAUS,EAAyBC,GAC/E,KAARjqE,EAAoB+lE,EAAKuC,EAAQ,KAAM2B,EAAiBzB,EAAO,KAAMD,EAAQoB,GACrE,YAAR3pE,GAA8B,UAARA,EAAyB+lE,EAAKwD,EAAUD,EAAoBzB,GAC1E,KAAR7nE,EAAoB+lE,EAAKuC,EAAQ,KAAM4B,GAAc3B,EAAQoB,GACrD,KAAR3pE,EAAoBmqE,EAAaC,EAAS,IAAK,KAAMT,GAC7C,SAAR3pE,EAAwBugE,EAAK8J,EAAOV,GAC5B,OAAR3pE,EAAsB+lE,EAAKuE,EAAYf,IACpCxD,IAET,QAASkE,GAAgBjqE,GACvB,MAAIA,GAAKkE,MAAM,cAAsBq8D,IAC9BA,EAAKsH,GAEd,QAASmC,GAAuBhqE,GAC9B,MAAIA,GAAKkE,MAAM,cAAsBq8D,IAC9BA,EAAK+I,GAGd,QAASO,GAAmB7pE,EAAMwL,GAChC,MAAY,KAARxL,EAAoB+lE,EAAK8B,GACtB+B,EAAqB5pE,EAAMwL,GAAO,GAE3C,QAASo+D,GAAqB5pE,EAAMwL,EAAO+9D,GACzC,GAAIpiB,GAAgB,GAAXoiB,EAAmBM,EAAqBD,EAC7CW,EAAkB,GAAXhB,EAAmB1B,EAAayB,CAC3C,OAAY,MAARtpE,EAAqB+lE,EAAKoC,EAAaoB,EAAUC,EAAmBC,EAAWpB,GACvE,YAARroE,EACE,UAAUC,KAAKuL,IAAUu7D,IAAiB,KAATv7D,EAAqBu6D,EAAK5e,GAClD,KAAT37C,EAAqBu6D,EAAK8B,EAAYW,EAAO,KAAM+B,GAChDxE,EAAKwE,GAEF,SAARvqE,EACKugE,EAAK8J,EAAOljB,GAET,KAARnnD,EACQ,KAARA,EAAoBmqE,EAAab,EAAmB,IAAK,OAAQniB,GACzD,KAARnnD,EAAoB+lE,EAAKyE,EAAUrjB,GAC3B,KAARnnD,EAAoB+lE,EAAKuC,EAAQ,KAAM2B,EAAiBzB,EAAO,KAAMD,EAAQphB,GAC7E4f,IAAiB,MAATv7D,GACVtJ,GAAGylE,OAAS,UAAiB5B,EAAKiD,EAAU7hB,QAD9C,OAJA,GAQF,QAASkjB,GAAMrqE,EAAMwL,GACnB,MAAY,SAARxL,EAAwBugE,IACS,MAAjC/0D,EAAM3L,MAAM2L,EAAM7P,OAAS,GAAmBoqE,EAAKsE,GAChDtE,EAAK8B,EAAY4C,GAE1B,QAASA,GAAczqE,GACrB,GAAY,KAARA,EAGF,MAFAkC,IAAGylE,OAAS,WACZzlE,GAAGjD,MAAMygE,SAAWyG,EACbJ,EAAKsE,GAGhB,QAASZ,GAAUzpE,GAEjB,MADA4mE,GAAa1kE,GAAGyf,OAAQzf,GAAGjD,OACpBshE,EAAa,KAARvgE,EAAc8nE,EAAYD,GAExC,QAAS2B,GAAiBxpE,GAExB,MADA4mE,GAAa1kE,GAAGyf,OAAQzf,GAAGjD,OACpBshE,EAAa,KAARvgE,EAAc8nE,EAAYwB,GAExC,QAASgB,GAAYf,GACnB,MAAO,UAAUvpE,GACf,MAAY,KAARA,EAAoB+lE,EAAKwD,EAAUmB,EAAgBvgE,GAAyB,YAARnK,GAAsB+mE,GAAahB,EAAK4E,EAAepB,EAAUK,EAAuBC,GAAgCtJ,EAAKgJ,EAAUD,EAAoBzB,IAGvO,QAAS19D,GAAOygE,EAAGp/D,GACjB,GAAa,UAATA,EACoB,MAAtBtJ,IAAGylE,OAAS,UAAiB5B,EAAK8D,GAGtC,QAASa,GAAcE,EAAGp/D,GACxB,GAAa,UAATA,EACoB,MAAtBtJ,IAAGylE,OAAS,UAAiB5B,EAAK6D,GAGtC,QAASX,GAAWjpE,GAClB,MAAY,KAARA,EAAoB+lE,EAAKwC,EAAQT,GAC9BvH,EAAKsJ,EAAoBrB,EAAO,KAAMD,GAE/C,QAASiC,GAASxqE,GAChB,GAAY,YAARA,EACqB,MAAvBkC,IAAGylE,OAAS,WAAkB5B,IAGlC,QAASqE,GAAQpqE,EAAMwL,GACrB,MAAY,SAARxL,GACFkC,GAAGylE,OAAS,WACL5B,EAAKqE,IACK,YAARpqE,GAAkC,WAAZkC,GAAGsG,OAClCtG,GAAGylE,OAAS,WACiC5B,EAAhC,OAATv6D,GAA2B,OAATA,EAA4Bq/D,EACtCC,IACK,UAAR9qE,GAA4B,UAARA,GAC7BkC,GAAGylE,OAASjB,GAAa,WAAaxkE,GAAGsG,MAAQ,YAC1Cu9D,EAAK+E,IACK,kBAAR9qE,EACF+lE,EAAK+E,GACK,YAAR9qE,EACF+lE,EAAKqE,GACK,KAARpqE,EACF+lE,EAAK8B,EAAYW,EAAO,KAAMsC,GACpB,UAAR9qE,EACF+lE,EAAK8B,EAAYiD,GACP,KAAR9qE,EACFugE,EAAKuK,OADP,GAIT,QAASD,GAAa7qE,GACpB,MAAY,YAARA,EAA2BugE,EAAKuK,IACpC5oE,GAAGylE,OAAS,WACL5B,EAAK+C,KAEd,QAASgC,GAAU9qE,GACjB,MAAY,KAARA,EAAoB+lE,EAAKuD,GACjB,KAARtpE,EAAoBugE,EAAKuI,QAA7B,GAEF,QAASY,GAASqB,EAAMprE,EAAKqrE,GAC3B,QAASC,GAAQjrE,EAAMwL,GACrB,GAAIw/D,EAAMA,EAAI5qE,QAAQJ,IAAS,EAAY,KAARA,EAAa,CAC9C,GAAI+nE,GAAM7lE,GAAGjD,MAAMmnE,OAEnB,OADgB,QAAZ2B,EAAIpnE,OAAgBonE,EAAIrpE,KAAOqpE,EAAIrpE,KAAO,GAAK,GAC5CqnE,EAAK,SAAU/lE,EAAMwL,GAC1B,MAAIxL,IAAQL,GAAO6L,GAAS7L,EAAY4gE,IACjCA,EAAKwK,IACXE,GAEL,MAAIjrE,IAAQL,GAAO6L,GAAS7L,EAAYomE,IACjCA,EAAKyC,EAAO7oE,IAErB,MAAO,UAAUK,EAAMwL,GACrB,MAAIxL,IAAQL,GAAO6L,GAAS7L,EAAYomE,IACjCxF,EAAKwK,EAAME,IAGtB,QAASd,GAAaY,EAAMprE,EAAKgB,GAC/B,IAAK,GAAIvF,GAAI,EAAGA,EAAI4O,UAAUrO,OAAQP,IACpC8G,GAAGwlE,GAAG7gE,KAAKmD,UAAU5O,GACtB,OAAO2qE,GAAKuC,EAAQ3oE,EAAKgB,GAAO+oE,EAASqB,EAAMprE,GAAM4oE,GAExD,QAAS7G,GAAM1hE,GACb,MAAY,KAARA,EAAoB+lE,IACjBxF,EAAKuH,EAAWpG,GAEzB,QAASwJ,GAAUlrE,EAAMwL,GACvB,GAAIu7D,GAAM,CACR,GAAY,KAAR/mE,EAAa,MAAO+lE,GAAKiD,EAC7B,IAAa,KAATx9D,EAAc,MAAOu6D,GAAKmF,IAGlC,QAASlC,GAAShpE,EAAMwL,GACtB,MAAY,YAARxL,EACW,SAATwL,GACFtJ,GAAGylE,OAAS,UACL5B,EAAKiD,KAEZ9mE,GAAGylE,OAAS,OACL5B,EAAKoF,IAGJ,UAARnrE,GAA4B,UAARA,GAA4B,QAARA,EAAuB+lE,EAAKoF,GAC5D,KAARnrE,EAAoB+lE,EAAKuC,EAAQ,KAAMoB,EAASV,EAAU,IAAK,KAAMT,EAAQ4C,GACrE,KAARnrE,EAAoB+lE,EAAKuC,EAAQ,KAAMoB,EAAS0B,EAAU,IAAK,MAAO7C,EAAQ4C,GACtE,KAARnrE,EAAoB+lE,EAAK2D,EAAS2B,EAAS,KAAMC,OAArD,GAEF,QAASA,GAAgBtrE,GACvB,GAAY,MAARA,EAAc,MAAO+lE,GAAKiD,GAEhC,QAASoC,GAASprE,EAAMwL,GACtB,MAAY,YAARxL,GAAkC,WAAZkC,GAAGsG,OAC3BtG,GAAGylE,OAAS,WACL5B,EAAKqF,IACM,KAAT5/D,EACFu6D,EAAKqF,GACK,KAARprE,EACF+lE,EAAKiD,GACK,KAARhpE,EACF+lE,EAAK8B,EAAYqD,EAAW1C,EAAO,KAAM4C,OAD3C,GAIT,QAASC,GAAQrrE,GACf,MAAY,YAARA,EAA2B+lE,EAAKsF,GAA0B,KAARrrE,EAAoB+lE,EAAKiD,OAA7B,GAEpD,QAASmC,GAAUnrE,EAAMwL,GACvB,MAAa,KAATA,EAAqBu6D,EAAKuC,EAAQ,KAAMoB,EAASV,EAAU,KAAMT,EAAQ4C,GAChE,KAAT3/D,GAAwB,KAARxL,EAAoB+lE,EAAKiD,GACjC,KAARhpE,EAAoB+lE,EAAKyC,EAAO,KAAM2C,GAC7B,WAAT3/D,EAA2Bu6D,EAAKiD,OAApC,GAEF,QAAS2B,GAAcC,EAAGp/D,GACxB,GAAa,KAATA,EAAc,MAAOu6D,GAAKuC,EAAQ,KAAMoB,EAASV,EAAU,KAAMT,EAAQ4C,GAE/E,QAASxC,KACP,MAAOpI,GAAK1b,EAASqmB,EAAWK,GAAaC,IAE/C,QAAS3mB,GAAQ7kD,EAAMwL,GACrB,MAAY,YAARxL,EAA2B+lE,EAAKlhB,GACxB,YAAR7kD,GACFgoE,EAASx8D,GAAcu6D,KAEb,UAAR/lE,EAAyB+lE,EAAKlhB,GACtB,KAAR7kD,EAAoBmqE,EAAatlB,EAAS,KAClC,KAAR7kD,EAAoBmqE,EAAasB,GAAa,SAAlD,GAEF,QAASA,IAAYzrE,EAAMwL,GACzB,MAAY,YAARxL,GAAuBkC,GAAGyf,OAAOzd,MAAM,SAAS,IAIxC,YAARlE,IAAoBkC,GAAGylE,OAAS,YACxB,UAAR3nE,EAAyB+lE,EAAKlhB,GACtB,KAAR7kD,EAAoBugE,IACjBwF,EAAKyC,EAAO,KAAM3jB,EAAS0mB,MANhCvD,EAASx8D,GACFu6D,EAAKwF,KAOhB,QAASA,IAAYG,EAAOlgE,GAC1B,GAAa,KAATA,EAAc,MAAOu6D,GAAKuD,GAEhC,QAASkC,IAAWxrE,GAClB,GAAY,KAARA,EAAa,MAAO+lE,GAAK4C,GAE/B,QAASE,IAAU7oE,EAAMwL,GACvB,GAAY,aAARxL,GAAgC,QAATwL,EAAiB,MAAOu6D,GAAKuC,EAAQ,OAAQ,QAASR,EAAWS,GAE9F,QAASQ,IAAQ/oE,GACf,GAAY,KAARA,EAAa,MAAO+lE,GAAKuC,EAAQ,KAAMqD,GAAUnD,EAAO,KAAMD,GAEpE,QAASoD,IAAS3rE,GAChB,MAAY,OAARA,EAAsB+lE,EAAK4C,EAAQH,EAAO,KAAMoD,IACxC,KAAR5rE,EAAoB+lE,EAAK6F,IACjB,YAAR5rE,EAA2B+lE,EAAK8F,IAC7BtL,EAAKsH,EAAYW,EAAO,KAAMoD,IAEvC,QAASC,IAAaH,EAAOlgE,GAC3B,MAAa,MAATA,GAA0B,MAATA,GACnBtJ,GAAGylE,OAAS,UAAiB5B,EAAK8B,IAE7B9B,EAAK8D,EAAoB+B,IAElC,QAASA,IAAS5rE,EAAMwL,GACtB,MAAY,KAARxL,EAAoB+lE,EAAK+F,IAChB,MAATtgE,GAA0B,MAATA,GACnBtJ,GAAGylE,OAAS,UAAiB5B,EAAK8B,IAE7BtH,EAAKsH,EAAYW,EAAO,KAAMsD,IAEvC,QAASA,IAAS9rE,GACJ,KAARA,GAAa+lE,EAAK8B,GAExB,QAASiB,IAAY9oE,EAAMwL,GACzB,MAAa,KAATA,GACFtJ,GAAGylE,OAAS,UAAiB5B,EAAK+C,KAExB,YAAR9oE,GACFgoE,EAASx8D,GAAcu6D,EAAK+C,KAElB,KAAR9oE,EAAoB+lE,EAAKoC,EAAaG,EAAQ,KAAMoB,EAASR,GAAQ,KAAMX,EAAQ2C,EAAWpD,EAAWO,GACzGtB,IAAiB,KAATv7D,EAAqBu6D,EAAKuC,EAAQ,KAAMoB,EAASV,EAAU,KAAMT,EAAQO,QAArF,GAEF,QAASI,IAAOlpE,GACd,MAAY,UAARA,GAA4B,YAARA,EAA2B+lE,EAAKmD,IACjD3I,EAAK1b,EAASqmB,EAAWK,IAElC,QAASxB,IAAgB/pE,EAAMwL,GAE7B,MAAY,YAARxL,EAA2B0E,GAAU1E,EAAMwL,GACxCugE,GAAe/rE,EAAMwL,GAE9B,QAAS9G,IAAU1E,EAAMwL,GACvB,GAAY,YAARxL,EACc,MAAhBgoE,GAASx8D,GAAcu6D,EAAKgG,IAGhC,QAASA,IAAe/rE,EAAMwL,GAC5B,MAAa,KAATA,EAAqBu6D,EAAKuC,EAAQ,KAAMoB,EAASV,EAAU,KAAMT,EAAQwD,IAChE,WAATvgE,GAA+B,cAATA,GAAyBu7D,IAAgB,KAAR/mE,EAAoB+lE,EAAKgB,GAAOiC,EAAWnB,EAAYkE,IACtG,KAAR/rE,EAAoB+lE,EAAKuC,EAAQ,KAAM0D,GAAWzD,OAAtD,GAEF,QAASyD,IAAUhsE,EAAMwL,GACvB,MAAY,YAARxL,GAA8B,SAARA,GAA2B,YAARA,IAAgC,UAATwL,GAA8B,OAATA,GAA2B,OAATA,IAAmBtJ,GAAGyf,OAAOzd,MAAM,wBAAwB,IACpKhC,GAAGylE,OAAS,UACL5B,EAAKiG,KAEF,YAARhsE,GACFkC,GAAGylE,OAAS,WACL5B,EAAKgB,GAAOkF,GAAanD,GAAakD,KAEnC,KAARhsE,EAAoB+lE,EAAK8B,EAAYW,EAAO,KAAMzB,GAAOkF,GAAanD,GAAakD,IAC1E,KAATxgE,GACFtJ,GAAGylE,OAAS,UACL5B,EAAKiG,KAEF,KAARhsE,EAAoB+lE,EAAKiG,IACjB,KAARhsE,EAAoB+lE,IACX,KAATv6D,EAAqBu6D,EAAK8B,EAAYmE,QAA1C,GAEF,QAASC,IAAWjsE,EAAMwL,GACxB,MAAa,KAATA,EAAqBu6D,EAAKkG,IAClB,KAARjsE,EAAoB+lE,EAAKiD,EAAUuC,IAC1B,KAAT//D,EAAqBu6D,EAAKuD,GACvB/I,EAAKuI,IAEd,QAASK,IAAYnpE,EAAMwL,GACzB,MAAa,KAATA,GACFtJ,GAAGylE,OAAS,UAAiB5B,EAAKmG,GAAW1D,EAAO,OAEzC,WAATh9D,GACFtJ,GAAGylE,OAAS,UAAiB5B,EAAK8B,EAAYW,EAAO,OAE3C,KAARxoE,EAAoB+lE,EAAK2D,EAASyC,GAAa,KAAMD,GAAW1D,EAAO,MACpEjI,EAAKuH,GAEd,QAASqE,IAAYnsE,EAAMwL,GACzB,MAAa,MAATA,GACFtJ,GAAGylE,OAAS,UAAiB5B,EAAKyC,EAAO,cAE/B,YAARxoE,EAA2BugE,EAAK+I,EAAmB6C,QAAvD,GAEF,QAAS/C,IAAYppE,GACnB,MAAY,UAARA,EAAyB+lE,IACtBxF,EAAK6L,GAAYC,GAAkBH,IAE5C,QAASE,IAAWpsE,EAAMwL,GACxB,MAAY,KAARxL,EAAoBmqE,EAAaiC,GAAY,MACrC,YAARpsE,GAAoBgoE,EAASx8D,GACpB,KAATA,IAActJ,GAAGylE,OAAS,WACvB5B,EAAKuG,KAEd,QAASD,IAAiBrsE,GACxB,GAAY,KAARA,EAAa,MAAO+lE,GAAKqG,GAAYC,IAE3C,QAASC,IAAQZ,EAAOlgE,GACtB,GAAa,MAATA,EACoB,MAAtBtJ,IAAGylE,OAAS,UAAiB5B,EAAKqG,IAGtC,QAASF,IAAUR,EAAOlgE,GACxB,GAAa,QAATA,EACoB,MAAtBtJ,IAAGylE,OAAS,UAAiB5B,EAAK8B,GAGtC,QAASqC,IAAalqE,GACpB,MAAY,KAARA,EAAoB+lE,IACjBxF,EAAKmJ,EAASJ,EAAmB,MAG1C,QAASiD,IAAqBttE,EAAOsjE,GACnC,MAAyB,YAAlBtjE,EAAMqnE,UAA4C,KAAlBrnE,EAAMqnE,UAAmBJ,GAAejmE,KAAKsiE,EAAUpiE,OAAO,KAAO,OAAOF,KAAKsiE,EAAUpiE,OAAO,IAG3I,QAAS8lE,IAAkBtkD,EAAQ1iB,EAAO0lD,GACxC,MAAO1lD,GAAMygE,UAAYK,GAAa,sEAAsE9/D,KAAKhB,EAAMqnE,WAA+B,SAAlBrnE,EAAMqnE,UAAuB,SAASrmE,KAAK0hB,EAAOzhB,OAAOL,MAAM,EAAG8hB,EAAOjjB,KAAOimD,GAAU,KAhvBhO,GAgFI3kD,IAAMuI,GAhFNwyC,GAAa4kB,EAAO5kB,WACpByxB,GAAkB5M,EAAa4M,gBAC/B9F,GAAa9G,EAAa6M,OAC1B7E,GAAWhI,EAAa8M,MAAQhG,GAChCK,GAAOnH,EAAa+M,WACpBtG,GAASzG,EAAagN,gBAAkB,mBAIxCrG,GAAW,WACb,QAASE,GAAGzmE,GACV,OAASA,KAAMA,EAAMwI,MAAO,WAE9B,GAAIqkE,GAAIpG,EAAG,aACPqG,EAAIrG,EAAG,aACPsG,EAAItG,EAAG,aACPuG,EAAWvG,EAAG,YACdwG,GAASjtE,KAAM,OAAQwI,MAAO,QAE9B0kE,GACFC,GAAM1G,EAAG,MAAO2G,MAASP,EAAGQ,KAAQR,EAAGS,KAAQR,EAAGS,GAAMT,EAAGU,IAAOV,EAAGW,QAAWX,EAChFY,OAAUX,EAAGY,MAASZ,EAAGa,SAAYb;WAAGc,IAAOpH,EAAG,OAAQqH,OAAUf,EAAGgB,MAAShB,EAAGiB,SAAYjB,EAC/FkB,IAAOxH,EAAG,OAAQyH,MAASzH,EAAG,OAAQ0H,IAAO1H,EAAG,OAChD2H,SAAY3H,EAAG,YAAa4H,MAAS5H,EAAG,SACxC6H,IAAO7H,EAAG,OAAQ8H,OAAU9H,EAAG,UAAW+H,KAAQ/H,EAAG,QAASgI,QAAWhI,EAAG,WAC5EiI,GAAM1B,EAAU2B,OAAU3B,EAAU4B,WAAc5B,EAClD6B,KAAQ5B,EAAM6B,MAAS7B,EAAMvmB,KAAQumB,EAAMvyE,UAAauyE,EAAM1jC,IAAO0jC,EAAMzmD,SAAYymD,EACvFjxE,KAAQyqE,EAAG,QAASsI,MAAStI,EAAG,SAAUuI,MAASvI,EAAG,QACtDwI,MAASlC,EAAGmC,OAAUzI,EAAG,UAAW0I,OAAU1I,EAAG,UAAW2I,QAAWrC,EACvEsC,MAAStC,EAIX,IAAIhG,GAAM,CACR,GAAI/mE,IAASA,KAAM,WAAYwI,MAAO,QAClC8mE,GAEFC,UAAa9I,EAAG,SAChB+I,WAAczC,EACd0C,UAAa1C,EACblxE,OAAU4qE,EAAG,UACbiJ,KAAQjJ,EAAG,UAGXkJ,OAAUlJ,EAAG,YACbmJ,QAAWnJ,EAAG,YACdoJ,UAAapJ,EAAG,YAChBqJ,SAAYrJ,EAAG,YACfsJ,SAAYtJ,EAAG,YAGfvmE,OAAUF,EAAMgwE,OAAUhwE,EAAMiwE,QAAWjwE,EAAMkwE,IAAOlwE,EAG1D,KAAK,GAAIgkE,KAAQsL,GACfpC,EAAWlJ,GAAQsL,EAAWtL,GAIlC,MAAOkJ,MAGLhH,GAAiB,oBACjBS,GAAkB,wFAgIlBQ,GAAW,SA+CX2C,IAAgBmD,MAAQ,EAAM+C,QAAU,EAAMG,UAAY,EAAMjwE,QAAU,EAAM+jE,QAAU,EAAMjoE,MAAQ,EAAMo0E,kBAAkB,GA2ChIluE,IAAOjD,MAAO,KAAM2lD,OAAQ,KAAM+iB,OAAQ,KAAMD,GAAI,MA6BpDU,IAAgBlpE,KAAM,OAAQoD,MAAQpD,KAAM,aA+bhD,OApaAqpE,GAAOR,KAAM,GAqaXvoD,WAAY,SAAoB6wD,GAC9B,GAAIpxE,IACFygE,SAAUK,EACVuG,SAAU,MACVoB,MACAtB,QAAS,GAAIgB,IAAWiJ,GAAc,GAAKt1B,GAAY,EAAG,SAAS,GACnEwsB,UAAW3H,EAAa2H,UACxBlmE,QAASu+D,EAAa2H,YAAeC,KAAM5H,EAAa2H,WACxDnkD,SAAUitD,GAAc,EAG1B,OADIzQ,GAAasI,YAAkD,UAApC/tE,QAAQylE,EAAasI,cAAyBjpE,EAAMipE,WAAatI,EAAasI,YACtGjpE,GAGTgjB,MAAO,SAAeN,EAAQ1iB,GAM5B,GALI0iB,EAAOyiC,QACJnlD,EAAMmnE,QAAQ97D,eAAe,WAAUrL,EAAMmnE,QAAQhvC,OAAQ,GAClEn4B,EAAMmkB,SAAWzB,EAAOk5B,cACxB+rB,EAAajlD,EAAQ1iB,IAEnBA,EAAMygE,UAAYsG,GAAgBrkD,EAAO6iC,WAAY,MAAO,KAChE,IAAIh8C,GAAQvJ,EAAMygE,SAAS/9C,EAAQ1iB,EACnC,OAAY,WAARe,GAA0BwI,GAC9BvJ,EAAMqnE,SAAmB,YAARtmE,IAAkC,MAAXuI,IAA8B,MAAXA,GAA8BvI,GAAX,SACvEynE,EAAQxoE,EAAOuJ,EAAOxI,GAAMuI,GAASoZ,KAG9CrhB,OAAQ,SAAgBrB,EAAOsjE,GAC7B,GAAItjE,EAAMygE,UAAYsG,EAAc,MAAOxpE,GAAW6B,IACtD,IAAIY,EAAMygE,UAAYK,EAAW,MAAO,EACxC,IAEI3lD,GAFAk2D,EAAY/N,GAAaA,EAAUpiE,OAAO,GAC1CimE,EAAUnnE,EAAMmnE,OAGpB,KAAK,aAAanmE,KAAKsiE,GAAY,IAAK,GAAInnE,GAAI6D,EAAMyoE,GAAG/rE,OAAS,EAAGP,GAAK,IAAKA,EAAG,CAChF,GAAIm1E,GAAItxE,EAAMyoE,GAAGtsE,EACjB,IAAIm1E,GAAKhI,EAAQnC,EAAUA,EAAQhkE,SAAU,IAAImuE,GAAK1H,GAAW,MAEnE,MAAwB,QAAhBzC,EAAQpmE,MAAkC,QAAhBomE,EAAQpmE,QAAiC,KAAbswE,IAAqBl2D,EAAMnb,EAAMyoE,GAAGzoE,EAAMyoE,GAAG/rE,OAAS,MAAQye,GAAOyvD,GAAsBzvD,GAAOwvD,KAA0B,mBAAmB3pE,KAAKsiE,KAChN6D,EAAUA,EAAQhkE,IACfoqE,KAAmC,KAAhBpG,EAAQpmE,MAAoC,QAArBomE,EAAQhkE,KAAKpC,OAAgBomE,EAAUA,EAAQhkE,KAC9F,IAAIpC,GAAOomE,EAAQpmE,KACfu+C,EAAU+xB,GAAatwE,CAE3B,OAAY,UAARA,EAAyBomE,EAAQhjD,UAA8B,YAAlBnkB,EAAMqnE,UAA4C,KAAlBrnE,EAAMqnE,SAAkBF,EAAQzlE,KAAO,EAAI,GAAoB,QAARX,GAA+B,KAAbswE,EAAyBlK,EAAQhjD,SAA0B,QAARpjB,EAAuBomE,EAAQhjD,SAAW23B,GAA4B,QAAR/6C,EAAuBomE,EAAQhjD,UAAYmpD,GAAqBttE,EAAOsjE,GAAaiK,IAAmBzxB,GAAa,GAA4B,UAAhBqrB,EAAQzlE,MAAqB49C,GAA8C,GAAnCqhB,EAAa4Q,mBAAsIpK,EAAQhvC,MAAcgvC,EAAQxhB,QAAUrG,EAAU,EAAI,GAAe6nB,EAAQhjD,UAAYm7B,EAAU,EAAIxD,IAAzMqrB,EAAQhjD,UAAY,sBAAsBnjB,KAAKsiE,GAAaxnB,GAAa,EAAIA,KAGnjByB,cAAe,oCACfgmB,kBAAmBoF,GAAW,KAAO,KACrCnF,gBAAiBmF,GAAW,KAAO,KACnCrG,YAAaqG,GAAW,KAAO,KAC/BlF,KAAM,QACN+N,cAAe,iBAEfxxD,WAAY2oD,GAAW,OAAS,aAChClB,WAAYA,GACZkB,SAAUA,GAEV3B,kBAAmBA,GAEnByK,eAAgB,SAAwBzxE,GACtC,GAAImb,GAAMnb,EAAMyoE,GAAGzoE,EAAMyoE,GAAG/rE,OAAS,EACjCye,IAAOytD,GAAcztD,GAAOkvD,GAAmBrqE,EAAMyoE,GAAG9gC,UAKlEpqC,EAAW2K,eAAe,YAAa,aAAc,SAErD3K,EAAWgiB,WAAW,kBAAmB,cACzChiB,EAAWgiB,WAAW,kBAAmB,cACzChiB,EAAWgiB,WAAW,yBAA0B,cAChDhiB,EAAWgiB,WAAW,2BAA4B,cAClDhiB,EAAWgiB,WAAW,yBAA0B,cAChDhiB,EAAWgiB,WAAW,oBAAsBtf,KAAM,aAAcwtE,MAAM,IACtElwE,EAAWgiB,WAAW,sBAAwBtf,KAAM,aAAcwtE,MAAM,IACxElwE,EAAWgiB,WAAW,uBAAyBtf,KAAM,aAAcutE,QAAQ,IAC3EjwE,EAAWgiB,WAAW,mBAAqBtf,KAAM,aAAcytE,YAAY,IAC3EnwE,EAAWgiB,WAAW,0BAA4Btf,KAAM,aAAcytE,YAAY,QAEjFzpE,uBAAwB,IAAM8nD,GAAI,SAAUvwD,EAASoB,EAAQJ,IAIhE,SAAWuC,GACgE,eAAjD,KAAZvC,EAA0B,YAActB,QAAQsB,KAA4F,eAAhD,KAAXI,EAAyB,YAAc1B,QAAQ0B,IAC1ImC,EAAIvD,EAAQ,yBAAmD,kBAAVE,IAAwBA,EAAOsD,IACpFtD,GAAQ,wBAAyBqD,GACjCA,EAAIxB,aACL,SAAUA,GAGX,GAAIm0E,IACFC,iBAAmBC,MAAQ,EAAM/kE,MAAQ,EAAMglE,IAAM,EAAM9lE,KAAO,EAAM+lE,SAAW,EACjFC,OAAS,EAAMC,OAAS,EAAMC,IAAM,EAAMlhC,KAAO,EAAMxiC,OAAS,EAChE2jE,QAAU,EAAM1mB,MAAQ,EAAM2mB,MAAQ,EAAMC,OAAS,EAAM7kE,QAAU,EACrE8kE,OAAS,EAAMC,KAAO,EAAMC,UAAY,GAC1CC,kBAAoBC,IAAM,EAAMC,IAAM,EAAMC,UAAY,EAAMl8B,QAAU,EAAMj/B,GAAK,EACjFo7D,IAAM,EAAMluB,IAAM,EAAMmuB,OAAS,EAAMC,IAAM,EAAMC,OAAS,EAC5Dv/C,IAAM,EAAMw/C,IAAM,GACpBC,iBACER,IAAQA,IAAM,EAAMS,IAAM,GAC1BA,IAAQT,IAAM,EAAMS,IAAM,GAC1BR,IAAQA,IAAM,GACdj8B,QAAYA,QAAU,EAAMk8B,UAAY,GACxCA,UAAcA,UAAY,GAC1Bn7D,GAAO27D,SAAW,EAAMC,SAAW,EAAMC,OAAS,EAAMC,YAAc,EAAMxlE,KAAO,EACjFkwC,KAAO,EAAMu1B,IAAM,EAAMC,UAAY,EAAMC,QAAU,EAAM1yB,MAAQ,EACnE2yB,IAAM,EAAMC,IAAM,EAAMC,IAAM,EAAMC,IAAM,EAAMC,IAAM,EAAMC,IAAM,EAClEC,QAAU,EAAMC,QAAU,EAAMhC,IAAM,EAAMiC,MAAQ,EAAMC,KAAO,EAAMC,IAAM,EAC7E58D,GAAK,EAAMyN,KAAO,EAAMovD,SAAW,EAAMC,OAAS,EAAMC,IAAM,GAChE3B,IAAQA,IAAM,EAAMluB,IAAM,GAC1BA,IAAQkuB,IAAM,EAAMluB,IAAM,GAC1BmuB,OAAWA,OAAS,EAAME,OAAS,GACnCD,IAAQA,IAAM,EAAMt/C,IAAM,GAC1Bu/C,OAAWF,OAAS,GACpBr/C,IAAQs/C,IAAM,EAAMt/C,IAAM,GAC1BghD,OAAW3B,OAAS,EAAME,OAAS,GACnCC,IAAQA,IAAM,IAEhByB,aAAexvD,KAAO,GACtByvD,eAAe,EACfC,cAAc,EACdC,UAAU,GAGRC,GACFlD,mBACAa,oBACAS,mBACAwB,eACAC,eAAe,EACfC,cAAc,EACdC,UAAU,EAGZr3E,GAAW6hB,WAAW,MAAO,SAAU01D,EAAYC,GAWjD,QAASC,GAAOtyD,EAAQ1iB,GACtB,QAASi1E,GAAMC,GAEb,MADAl1E,GAAMygE,SAAWyU,EACVA,EAAOxyD,EAAQ1iB,GAGxB,GAAIW,GAAK+hB,EAAOrf,MAChB,IAAU,KAAN1C,EACF,MAAI+hB,GAAO2iC,IAAI,KACT3iC,EAAO2iC,IAAI,KACT3iC,EAAOzd,MAAM,UAAkBgwE,EAAME,EAAQ,OAAQ,QAAoB,KACpEzyD,EAAOzd,MAAM,MACfgwE,EAAME,EAAQ,UAAW,WACvBzyD,EAAOzd,MAAM,WAAW,GAAM,IACvCyd,EAAO4iC,SAAS,aACT2vB,EAAMG,EAAQ,KAEd,KAEA1yD,EAAO2iC,IAAI,MACpB3iC,EAAO4iC,SAAS,aAChBtlD,EAAMygE,SAAW0U,EAAQ,OAAQ,MAC1B,SAEPp0E,EAAO2hB,EAAO2iC,IAAI,KAAO,WAAa,UACtCrlD,EAAMygE,SAAWoF,EACV,cAEJ,IAAU,KAANllE,EAAW,CACpB,GAAIysC,EAUJ,OAPIA,GAFA1qB,EAAO2iC,IAAI,KACT3iC,EAAO2iC,IAAI,KACR3iC,EAAO4iC,SAAS,eAAiB5iC,EAAO2iC,IAAI,KAE5C3iC,EAAO4iC,SAAS,SAAW5iC,EAAO2iC,IAAI,KAGxC3iC,EAAO4iC,SAAS,cAAgB5iC,EAAO2iC,IAAI,KAE3CjY,EAAK,OAAS,QAGrB,MADA1qB,GAAO4iC,SAAS,SACT,KAKX,QAASugB,GAAMnjD,EAAQ1iB,GACrB,GAAIW,GAAK+hB,EAAOrf,MAChB,IAAU,KAAN1C,GAAmB,KAANA,GAAa+hB,EAAO2iC,IAAI,KAGvC,MAFArlD,GAAMygE,SAAWuU,EACjBj0E,EAAa,KAANJ,EAAY,SAAW,eACvB,aACF,IAAU,KAANA,EAET,MADAI,GAAO,SACA,IACF,IAAU,KAANJ,EAAW,CACpBX,EAAMygE,SAAWuU,EACjBh1E,EAAMA,MAAQq1E,EACdr1E,EAAME,QAAUF,EAAMs1E,SAAW,IACjC,IAAIjyE,GAAOrD,EAAMygE,SAAS/9C,EAAQ1iB,EAClC,OAAOqD,GAAOA,EAAO,aAAe,YAC/B,MAAI,SAASrC,KAAKL,IACvBX,EAAMygE,SAAW8U,EAAY50E,GAC7BX,EAAMw1E,eAAiB9yD,EAAOijC,SACvB3lD,EAAMygE,SAAS/9C,EAAQ1iB,KAE9B0iB,EAAOzd,MAAM,4CACN,QAIX,QAASswE,GAAYrU,GACnB,GAAIuU,GAAU,SAAiB/yD,EAAQ1iB,GACrC,MAAQ0iB,EAAOG,OACb,GAAIH,EAAOrf,QAAU69D,EAAO,CAC1BlhE,EAAMygE,SAAWoF,CACjB,OAGJ,MAAO,SAGT,OADA4P,GAAQC,eAAgB,EACjBD,EAGT,QAASN,GAAQ5rE,EAAOosE,GACtB,MAAO,UAAUjzD,EAAQ1iB,GACvB,MAAQ0iB,EAAOG,OAAO,CACpB,GAAIH,EAAOzd,MAAM0wE,GAAa,CAC5B31E,EAAMygE,SAAWuU,CACjB,OAEFtyD,EAAOrf,OAET,MAAOkG,IAGX,QAAS6rE,GAAQrN,GACf,MAAO,UAAUrlD,EAAQ1iB,GAEvB,IADA,GAAIW,GAC2B,OAAvBA,EAAK+hB,EAAOrf,SAAiB,CACnC,GAAU,KAAN1C,EAEF,MADAX,GAAMygE,SAAW2U,EAAQrN,EAAQ,GAC1B/nE,EAAMygE,SAAS/9C,EAAQ1iB,EACzB,IAAU,KAANW,EAAW,CACpB,GAAa,GAATonE,EAAY,CACd/nE,EAAMygE,SAAWuU,CACjB,OAGA,MADAh1E,GAAMygE,SAAW2U,EAAQrN,EAAQ,GAC1B/nE,EAAMygE,SAAS/9C,EAAQ1iB,IAIpC,MAAO,QAIX,QAASoiB,GAAQpiB,EAAOE,EAAS01E,GAC/B74E,KAAKoG,KAAOnD,EAAMoC,QAClBrF,KAAKmD,QAAUA,EACfnD,KAAKsE,OAASrB,EAAMmkB,SACpBpnB,KAAK64E,YAAcA,GACflV,EAAO+T,YAAYppE,eAAenL,IAAYF,EAAMoC,SAAWpC,EAAMoC,QAAQyzE,YAAU94E,KAAK84E,UAAW,GAE7G,QAASxU,GAAWrhE,GACdA,EAAMoC,UAASpC,EAAMoC,QAAUpC,EAAMoC,QAAQe,MAEnD,QAAS2yE,GAAgB91E,EAAO+1E,GAE9B,IADA,GAAIC,KACS,CACX,IAAKh2E,EAAMoC,QACT,MAGF,IADA4zE,EAAgBh2E,EAAMoC,QAAQlC,SACzBwgE,EAAOuS,gBAAgB5nE,eAAe2qE,KAAmBtV,EAAOuS,gBAAgB+C,GAAe3qE,eAAe0qE,GACjH,MAEF1U,GAAWrhE,IAIf,QAASq1E,GAAUt0E,EAAM2hB,EAAQ1iB,GAC/B,MAAY,WAARe,GACFf,EAAMs1E,SAAW5yD,EAAOijC,SACjBswB,GACU,YAARl1E,EACFm1E,EAEAb,EAGX,QAASY,GAAal1E,EAAM2hB,EAAQ1iB,GAClC,MAAY,QAARe,GACFf,EAAME,QAAUwiB,EAAOlY,UACvB2rE,EAAW,MACJC,IAEPD,EAAW,QACJF,GAGX,QAASC,GAAkBn1E,EAAM2hB,EAAQ1iB,GACvC,GAAY,QAARe,EAAgB,CAClB,GAAIb,GAAUwiB,EAAOlY,SAErB,OADIxK,GAAMoC,SAAWpC,EAAMoC,QAAQlC,SAAWA,GAAWwgE,EAAO8R,iBAAiBnnE,eAAerL,EAAMoC,QAAQlC,UAAUmhE,EAAWrhE,GAC/HA,EAAMoC,SAAWpC,EAAMoC,QAAQlC,SAAWA,IAAmC,IAAxBwgE,EAAO2V,cAC9DF,EAAW,MACJG,IAEPH,EAAW,YACJI,GAIT,MADAJ,GAAW,QACJI,EAIX,QAASD,GAAWv1E,EAAM6hE,EAAS5iE,GACjC,MAAY,UAARe,GACFo1E,EAAW,QACJG,IAETjV,EAAWrhE,GACJq1E,GAET,QAASkB,GAAcx1E,EAAM2hB,EAAQ1iB,GAEnC,MADAm2E,GAAW,QACJG,EAAWv1E,EAAM2hB,EAAQ1iB,GAGlC,QAASo2E,GAAUr1E,EAAM6hE,EAAS5iE,GAChC,GAAY,QAARe,EAEF,MADAo1E,GAAW,YACJK,CACF,IAAY,UAARz1E,GAA4B,gBAARA,EAAwB,CACrD,GAAIb,GAAUF,EAAME,QAChBo1E,EAAWt1E,EAAMs1E,QAQrB,OAPAt1E,GAAME,QAAUF,EAAMs1E,SAAW,KACrB,gBAARv0E,GAA0B2/D,EAAOiR,gBAAgBtmE,eAAenL,GAClE41E,EAAgB91E,EAAOE,IAEvB41E,EAAgB91E,EAAOE,GACvBF,EAAMoC,QAAU,GAAIggB,GAAQpiB,EAAOE,EAASo1E,GAAYt1E,EAAMmkB,WAEzDkxD,EAGT,MADAc,GAAW,QACJC,EAET,QAASI,GAAYz1E,EAAM2hB,EAAQ1iB,GACjC,MAAY,UAARe,EAAyB01E,GACxB/V,EAAOiU,eAAcwB,EAAW,SAC9BC,EAAUr1E,EAAM2hB,EAAQ1iB,IAEjC,QAASy2E,GAAe11E,EAAM2hB,EAAQ1iB,GACpC,MAAY,UAARe,EAAyB21E,EACjB,QAAR31E,GAAkB2/D,EAAOgU,eAC3ByB,EAAW,SAAgBC,IAE7BD,EAAW,QACJC,EAAUr1E,EAAM2hB,EAAQ1iB,IAEjC,QAAS02E,GAAmB31E,EAAM2hB,EAAQ1iB,GACxC,MAAY,UAARe,EAAyB21E,EACtBN,EAAUr1E,EAAM2hB,EAAQ1iB,GA7OjC,GAAI87C,GAAag5B,EAAWh5B,WACxB4kB,KACA9mB,EAAWm7B,EAAQ/2E,SAAW0zE,EAAamD,CAC/C,KAAK,GAAIzpE,KAAQwuC,GACf8mB,EAAOt1D,GAAQwuC,EAASxuC,EACzB,KAAK,GAAIA,KAAQ2pE,GAChBrU,EAAOt1D,GAAQ2pE,EAAQ3pE,EAEzB,IAAIrK,GAAMo1E,CAwOV,OAzLAnB,GAAO2B,UAAW,GA0LhBp2D,WAAY,SAAoBq2D,GAC9B,GAAI52E,IAAUygE,SAAUuU,EACtBh1E,MAAOq1E,EACPlxD,SAAUyyD,GAAc,EACxB12E,QAAS,KAAMo1E,SAAU,KACzBlzE,QAAS,KAEX,OADkB,OAAdw0E,IAAoB52E,EAAM42E,WAAaA,GACpC52E,GAGTgjB,MAAO,SAAeN,EAAQ1iB,GAG5B,IAFKA,EAAME,SAAWwiB,EAAOyiC,QAAOnlD,EAAMmkB,SAAWzB,EAAOk5B,eAExDl5B,EAAO6iC,WAAY,MAAO,KAC9BxkD,GAAO,IACP,IAAIwI,GAAQvJ,EAAMygE,SAAS/9C,EAAQ1iB,EAMnC,QALKuJ,GAASxI,IAAkB,WAATwI,IACrB4sE,EAAW,KACXn2E,EAAMA,MAAQA,EAAMA,MAAMe,GAAQwI,EAAOmZ,EAAQ1iB,GAC7Cm2E,IAAU5sE,EAAoB,SAAZ4sE,EAAsB5sE,EAAQ,SAAW4sE,IAE1D5sE,GAGTlI,OAAQ,SAAgBrB,EAAOsjE,EAAWuT,GACxC,GAAIz0E,GAAUpC,EAAMoC,OAEpB,IAAIpC,EAAMygE,SAASiV,cACjB,MAAI11E,GAAMs1E,UAAYt1E,EAAMmkB,SAAiBnkB,EAAMw1E,eAAiB,EAAcx1E,EAAMmkB,SAAW23B,CAErG,IAAI15C,GAAWA,EAAQyzE,SAAU,MAAOt4E,GAAW6B,IACnD,IAAIY,EAAMygE,UAAYoF,GAAS7lE,EAAMygE,UAAYuU,EAAQ,MAAO6B,GAAWA,EAAS5xE,MAAM,UAAU,GAAGvI,OAAS,CAEhH,IAAIsD,EAAME,QACR,OAAyC,IAArCwgE,EAAOyF,0BAA4CnmE,EAAMs1E,SAAWt1E,EAAME,QAAQxD,OAAS,EAAcsD,EAAMs1E,SAAWx5B,GAAc4kB,EAAOwF,0BAA4B,EAEjL,IAAIxF,EAAOoW,YAAc,cAAc91E,KAAKsiE,GAAY,MAAO,EAC/D,IAAIyT,GAAWzT,GAAa,sBAAsBl8D,KAAKk8D,EACvD,IAAIyT,GAAYA,EAAS,GAEvB,KAAO30E,GAAS,CACd,GAAIA,EAAQlC,SAAW62E,EAAS,GAAI,CAClC30E,EAAUA,EAAQe,IAClB,OACK,IAAIu9D,EAAO8R,iBAAiBnnE,eAAejJ,EAAQlC,SAGxD,KAFAkC,GAAUA,EAAQe,SAKjB,IAAI4zE,EAET,KAAO30E,GAAS,CACd,GAAI40E,GAAWtW,EAAOuS,gBAAgB7wE,EAAQlC,QAC9C,KAAI82E,IAAYA,EAAS3rE,eAAe0rE,EAAS,IAAiC,KAA5B30E,GAAUA,EAAQe,KAG5E,KAAOf,GAAWA,EAAQe,OAASf,EAAQwzE,aACzCxzE,EAAUA,EAAQe,IACnB,OAAIf,GAAgBA,EAAQf,OAASy6C,EAAuB97C,EAAM42E,YAAc,GAGnFr5B,cAAe,gBACfgmB,kBAAmB,UACnBC,gBAAiB,SAEjBnjE,cAAeqgE,EAAO1iE,SAAW,OAAS,MAC1CgiB,WAAY0gD,EAAO1iE,SAAW,OAAS,MAEvCi5E,cAAe,SAAuBj3E,GAChCA,EAAMA,OAASy2E,IAAgBz2E,EAAMA,MAAQo2E,OAKvD74E,EAAWgiB,WAAW,WAAY,OAClChiB,EAAWgiB,WAAW,kBAAmB,OACpChiB,EAAWmiB,UAAUrU,eAAe,cAAc9N,EAAWgiB,WAAW,aAAetf,KAAM,MAAOjC,UAAU,QAElHiG,uBAAwB,SAAa","file":"admin.min.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n  var require = undefined;var module = undefined;var exports = undefined;var define = undefined;(function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;if (!u && a) return a(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n        }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }return n[o].exports;\n    }var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n      s(r[o]);\n    }return s;\n  })({ 1: [function (require, module, exports) {\n      'use strict';\n\n      // load CodeMirror & plugins\n\n      var CodeMirror = require('codemirror');\n      require('codemirror/mode/xml/xml');\n      require('codemirror/mode/javascript/javascript');\n      require('codemirror/mode/css/css');\n      require('codemirror/mode/htmlmixed/htmlmixed');\n      require('codemirror/addon/fold/xml-fold');\n      require('codemirror/addon/edit/matchtags');\n      require('codemirror/addon/edit/closetag.js');\n\n      var element = document.querySelector('#hf-form-editor');\n      var editor = CodeMirror.fromTextArea(element, {\n        selectionPointer: true,\n        matchTags: { bothTags: true },\n        mode: \"htmlmixed\",\n        htmlMode: true,\n        autoCloseTags: true,\n        autoRefresh: true\n      });\n\n      var tabs = document.querySelectorAll('.hf-tab');\n      var tabNavs = document.querySelectorAll('#hf-tabs-nav a');\n      for (var i = 0; i < tabNavs.length; i++) {\n        tabNavs[i].addEventListener('click', openTab);\n      }\n\n      function openTab(e) {\n        var tabTarget = this.getAttribute('data-tab-target');\n        for (var _i = 0; _i < tabs.length; _i++) {\n          var tab = tabs[_i];\n          tab.classList.toggle('hf-tab-active', tab.getAttribute('data-tab') === tabTarget);\n        }\n\n        e.preventDefault();\n      }\n    }, { \"codemirror\": 5, \"codemirror/addon/edit/closetag.js\": 2, \"codemirror/addon/edit/matchtags\": 3, \"codemirror/addon/fold/xml-fold\": 4, \"codemirror/mode/css/css\": 6, \"codemirror/mode/htmlmixed/htmlmixed\": 7, \"codemirror/mode/javascript/javascript\": 8, \"codemirror/mode/xml/xml\": 9 }], 2: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      /**\n       * Tag-closer extension for CodeMirror.\n       *\n       * This extension adds an \"autoCloseTags\" option that can be set to\n       * either true to get the default behavior, or an object to further\n       * configure its behavior.\n       *\n       * These are supported options:\n       *\n       * `whenClosing` (default true)\n       *   Whether to autoclose when the '/' of a closing tag is typed.\n       * `whenOpening` (default true)\n       *   Whether to autoclose the tag when the final '>' of an opening\n       *   tag is typed.\n       * `dontCloseTags` (default is empty tags for HTML, none for XML)\n       *   An array of tag names that should not be autoclosed.\n       * `indentTags` (default is block tags for HTML, none for XML)\n       *   An array of tag names that should, when opened, cause a\n       *   blank line to be added inside the tag, and the blank line and\n       *   closing line to be indented.\n       *\n       * See demos/closetag.html for a usage example.\n       */\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        CodeMirror.defineOption(\"autoCloseTags\", false, function (cm, val, old) {\n          if (old != CodeMirror.Init && old) cm.removeKeyMap(\"autoCloseTags\");\n          if (!val) return;\n          var map = { name: \"autoCloseTags\" };\n          if ((typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) != \"object\" || val.whenClosing) map[\"'/'\"] = function (cm) {\n            return autoCloseSlash(cm);\n          };\n          if ((typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) != \"object\" || val.whenOpening) map[\"'>'\"] = function (cm) {\n            return autoCloseGT(cm);\n          };\n          cm.addKeyMap(map);\n        });\n\n        var htmlDontClose = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"wbr\"];\n        var htmlIndent = [\"applet\", \"blockquote\", \"body\", \"button\", \"div\", \"dl\", \"fieldset\", \"form\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"head\", \"html\", \"iframe\", \"layer\", \"legend\", \"object\", \"ol\", \"p\", \"select\", \"table\", \"ul\"];\n\n        function autoCloseGT(cm) {\n          if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n          var ranges = cm.listSelections(),\n              replacements = [];\n          for (var i = 0; i < ranges.length; i++) {\n            if (!ranges[i].empty()) return CodeMirror.Pass;\n            var pos = ranges[i].head,\n                tok = cm.getTokenAt(pos);\n            var inner = CodeMirror.innerMode(cm.getMode(), tok.state),\n                state = inner.state;\n            if (inner.mode.name != \"xml\" || !state.tagName) return CodeMirror.Pass;\n\n            var opt = cm.getOption(\"autoCloseTags\"),\n                html = inner.mode.configuration == \"html\";\n            var dontCloseTags = (typeof opt === \"undefined\" ? \"undefined\" : _typeof(opt)) == \"object\" && opt.dontCloseTags || html && htmlDontClose;\n            var indentTags = (typeof opt === \"undefined\" ? \"undefined\" : _typeof(opt)) == \"object\" && opt.indentTags || html && htmlIndent;\n\n            var tagName = state.tagName;\n            if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n            var lowerTagName = tagName.toLowerCase();\n            // Don't process the '>' at the end of an end-tag or self-closing tag\n            if (!tagName || tok.type == \"string\" && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) || tok.type == \"tag\" && state.type == \"closeTag\" || tok.string.indexOf(\"/\") == tok.string.length - 1 || // match something like <someTagName />\n            dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 || closingTagExists(cm, tagName, pos, state, true)) return CodeMirror.Pass;\n\n            var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n            replacements[i] = { indent: indent,\n              text: \">\" + (indent ? \"\\n\\n\" : \"\") + \"</\" + tagName + \">\",\n              newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1) };\n          }\n\n          for (var i = ranges.length - 1; i >= 0; i--) {\n            var info = replacements[i];\n            cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, \"+insert\");\n            var sel = cm.listSelections().slice(0);\n            sel[i] = { head: info.newPos, anchor: info.newPos };\n            cm.setSelections(sel);\n            if (info.indent) {\n              cm.indentLine(info.newPos.line, null, true);\n              cm.indentLine(info.newPos.line + 1, null, true);\n            }\n          }\n        }\n\n        function autoCloseCurrent(cm, typingSlash) {\n          var ranges = cm.listSelections(),\n              replacements = [];\n          var head = typingSlash ? \"/\" : \"</\";\n          for (var i = 0; i < ranges.length; i++) {\n            if (!ranges[i].empty()) return CodeMirror.Pass;\n            var pos = ranges[i].head,\n                tok = cm.getTokenAt(pos);\n            var inner = CodeMirror.innerMode(cm.getMode(), tok.state),\n                state = inner.state;\n            if (typingSlash && (tok.type == \"string\" || tok.string.charAt(0) != \"<\" || tok.start != pos.ch - 1)) return CodeMirror.Pass;\n            // Kludge to get around the fact that we are not in XML mode\n            // when completing in JS/CSS snippet in htmlmixed mode. Does not\n            // work for other XML embedded languages (there is no general\n            // way to go from a mixed mode to its current XML state).\n            var replacement;\n            if (inner.mode.name != \"xml\") {\n              if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"javascript\") replacement = head + \"script\";else if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"css\") replacement = head + \"style\";else return CodeMirror.Pass;\n            } else {\n              if (!state.context || !state.context.tagName || closingTagExists(cm, state.context.tagName, pos, state)) return CodeMirror.Pass;\n              replacement = head + state.context.tagName;\n            }\n            if (cm.getLine(pos.line).charAt(tok.end) != \">\") replacement += \">\";\n            replacements[i] = replacement;\n          }\n          cm.replaceSelections(replacements);\n          ranges = cm.listSelections();\n          for (var i = 0; i < ranges.length; i++) {\n            if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line) cm.indentLine(ranges[i].head.line);\n          }\n        }\n\n        function autoCloseSlash(cm) {\n          if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n          return autoCloseCurrent(cm, true);\n        }\n\n        CodeMirror.commands.closeTag = function (cm) {\n          return autoCloseCurrent(cm);\n        };\n\n        function indexOf(collection, elt) {\n          if (collection.indexOf) return collection.indexOf(elt);\n          for (var i = 0, e = collection.length; i < e; ++i) {\n            if (collection[i] == elt) return i;\n          }return -1;\n        }\n\n        // If xml-fold is loaded, we use its functionality to try and verify\n        // whether a given tag is actually unclosed.\n        function closingTagExists(cm, tagName, pos, state, newTag) {\n          if (!CodeMirror.scanForClosingTag) return false;\n          var end = Math.min(cm.lastLine() + 1, pos.line + 500);\n          var nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n          if (!nextClose || nextClose.tag != tagName) return false;\n          var cx = state.context;\n          // If the immediate wrapping context contains onCx instances of\n          // the same tag, a closing tag only exists if there are at least\n          // that many closing tags of that type following.\n          for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) {\n            ++onCx;\n          }pos = nextClose.to;\n          for (var i = 1; i < onCx; i++) {\n            var next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n            if (!next || next.tag != tagName) return false;\n            pos = next.to;\n          }\n          return true;\n        }\n      });\n    }, { \"../../lib/codemirror\": 5, \"../fold/xml-fold\": 4 }], 3: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineOption(\"matchTags\", false, function (cm, val, old) {\n          if (old && old != CodeMirror.Init) {\n            cm.off(\"cursorActivity\", doMatchTags);\n            cm.off(\"viewportChange\", maybeUpdateMatch);\n            clear(cm);\n          }\n          if (val) {\n            cm.state.matchBothTags = (typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) == \"object\" && val.bothTags;\n            cm.on(\"cursorActivity\", doMatchTags);\n            cm.on(\"viewportChange\", maybeUpdateMatch);\n            doMatchTags(cm);\n          }\n        });\n\n        function clear(cm) {\n          if (cm.state.tagHit) cm.state.tagHit.clear();\n          if (cm.state.tagOther) cm.state.tagOther.clear();\n          cm.state.tagHit = cm.state.tagOther = null;\n        }\n\n        function doMatchTags(cm) {\n          cm.state.failedTagMatch = false;\n          cm.operation(function () {\n            clear(cm);\n            if (cm.somethingSelected()) return;\n            var cur = cm.getCursor(),\n                range = cm.getViewport();\n            range.from = Math.min(range.from, cur.line);range.to = Math.max(cur.line + 1, range.to);\n            var match = CodeMirror.findMatchingTag(cm, cur, range);\n            if (!match) return;\n            if (cm.state.matchBothTags) {\n              var hit = match.at == \"open\" ? match.open : match.close;\n              if (hit) cm.state.tagHit = cm.markText(hit.from, hit.to, { className: \"CodeMirror-matchingtag\" });\n            }\n            var other = match.at == \"close\" ? match.open : match.close;\n            if (other) cm.state.tagOther = cm.markText(other.from, other.to, { className: \"CodeMirror-matchingtag\" });else cm.state.failedTagMatch = true;\n          });\n        }\n\n        function maybeUpdateMatch(cm) {\n          if (cm.state.failedTagMatch) doMatchTags(cm);\n        }\n\n        CodeMirror.commands.toMatchingTag = function (cm) {\n          var found = CodeMirror.findMatchingTag(cm, cm.getCursor());\n          if (found) {\n            var other = found.at == \"close\" ? found.open : found.close;\n            if (other) cm.extendSelection(other.to, other.from);\n          }\n        };\n      });\n    }, { \"../../lib/codemirror\": 5, \"../fold/xml-fold\": 4 }], 4: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var Pos = CodeMirror.Pos;\n        function cmp(a, b) {\n          return a.line - b.line || a.ch - b.ch;\n        }\n\n        var nameStartChar = \"A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\";\n        var nameChar = nameStartChar + \"-:.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040\";\n        var xmlTagStart = new RegExp(\"<(/?)([\" + nameStartChar + \"][\" + nameChar + \"]*)\", \"g\");\n\n        function Iter(cm, line, ch, range) {\n          this.line = line;this.ch = ch;\n          this.cm = cm;this.text = cm.getLine(line);\n          this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n          this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n        }\n\n        function tagAt(iter, ch) {\n          var type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n          return type && /\\btag\\b/.test(type);\n        }\n\n        function nextLine(iter) {\n          if (iter.line >= iter.max) return;\n          iter.ch = 0;\n          iter.text = iter.cm.getLine(++iter.line);\n          return true;\n        }\n        function prevLine(iter) {\n          if (iter.line <= iter.min) return;\n          iter.text = iter.cm.getLine(--iter.line);\n          iter.ch = iter.text.length;\n          return true;\n        }\n\n        function toTagEnd(iter) {\n          for (;;) {\n            var gt = iter.text.indexOf(\">\", iter.ch);\n            if (gt == -1) {\n              if (nextLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, gt + 1)) {\n              iter.ch = gt + 1;continue;\n            }\n            var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n            var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n            iter.ch = gt + 1;\n            return selfClose ? \"selfClose\" : \"regular\";\n          }\n        }\n        function toTagStart(iter) {\n          for (;;) {\n            var lt = iter.ch ? iter.text.lastIndexOf(\"<\", iter.ch - 1) : -1;\n            if (lt == -1) {\n              if (prevLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, lt + 1)) {\n              iter.ch = lt;continue;\n            }\n            xmlTagStart.lastIndex = lt;\n            iter.ch = lt;\n            var match = xmlTagStart.exec(iter.text);\n            if (match && match.index == lt) return match;\n          }\n        }\n\n        function toNextTag(iter) {\n          for (;;) {\n            xmlTagStart.lastIndex = iter.ch;\n            var found = xmlTagStart.exec(iter.text);\n            if (!found) {\n              if (nextLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, found.index + 1)) {\n              iter.ch = found.index + 1;continue;\n            }\n            iter.ch = found.index + found[0].length;\n            return found;\n          }\n        }\n        function toPrevTag(iter) {\n          for (;;) {\n            var gt = iter.ch ? iter.text.lastIndexOf(\">\", iter.ch - 1) : -1;\n            if (gt == -1) {\n              if (prevLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, gt + 1)) {\n              iter.ch = gt;continue;\n            }\n            var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n            var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n            iter.ch = gt + 1;\n            return selfClose ? \"selfClose\" : \"regular\";\n          }\n        }\n\n        function findMatchingClose(iter, tag) {\n          var stack = [];\n          for (;;) {\n            var next = toNextTag(iter),\n                end,\n                startLine = iter.line,\n                startCh = iter.ch - (next ? next[0].length : 0);\n            if (!next || !(end = toTagEnd(iter))) return;\n            if (end == \"selfClose\") continue;\n            if (next[1]) {\n              // closing tag\n              for (var i = stack.length - 1; i >= 0; --i) {\n                if (stack[i] == next[2]) {\n                  stack.length = i;\n                  break;\n                }\n              }if (i < 0 && (!tag || tag == next[2])) return {\n                tag: next[2],\n                from: Pos(startLine, startCh),\n                to: Pos(iter.line, iter.ch)\n              };\n            } else {\n              // opening tag\n              stack.push(next[2]);\n            }\n          }\n        }\n        function findMatchingOpen(iter, tag) {\n          var stack = [];\n          for (;;) {\n            var prev = toPrevTag(iter);\n            if (!prev) return;\n            if (prev == \"selfClose\") {\n              toTagStart(iter);continue;\n            }\n            var endLine = iter.line,\n                endCh = iter.ch;\n            var start = toTagStart(iter);\n            if (!start) return;\n            if (start[1]) {\n              // closing tag\n              stack.push(start[2]);\n            } else {\n              // opening tag\n              for (var i = stack.length - 1; i >= 0; --i) {\n                if (stack[i] == start[2]) {\n                  stack.length = i;\n                  break;\n                }\n              }if (i < 0 && (!tag || tag == start[2])) return {\n                tag: start[2],\n                from: Pos(iter.line, iter.ch),\n                to: Pos(endLine, endCh)\n              };\n            }\n          }\n        }\n\n        CodeMirror.registerHelper(\"fold\", \"xml\", function (cm, start) {\n          var iter = new Iter(cm, start.line, 0);\n          for (;;) {\n            var openTag = toNextTag(iter),\n                end;\n            if (!openTag || iter.line != start.line || !(end = toTagEnd(iter))) return;\n            if (!openTag[1] && end != \"selfClose\") {\n              var startPos = Pos(iter.line, iter.ch);\n              var endPos = findMatchingClose(iter, openTag[2]);\n              return endPos && { from: startPos, to: endPos.from };\n            }\n          }\n        });\n        CodeMirror.findMatchingTag = function (cm, pos, range) {\n          var iter = new Iter(cm, pos.line, pos.ch, range);\n          if (iter.text.indexOf(\">\") == -1 && iter.text.indexOf(\"<\") == -1) return;\n          var end = toTagEnd(iter),\n              to = end && Pos(iter.line, iter.ch);\n          var start = end && toTagStart(iter);\n          if (!end || !start || cmp(iter, pos) > 0) return;\n          var here = { from: Pos(iter.line, iter.ch), to: to, tag: start[2] };\n          if (end == \"selfClose\") return { open: here, close: null, at: \"open\" };\n\n          if (start[1]) {\n            // closing tag\n            return { open: findMatchingOpen(iter, start[2]), close: here, at: \"close\" };\n          } else {\n            // opening tag\n            iter = new Iter(cm, to.line, to.ch, range);\n            return { open: here, close: findMatchingClose(iter, start[2]), at: \"open\" };\n          }\n        };\n\n        CodeMirror.findEnclosingTag = function (cm, pos, range, tag) {\n          var iter = new Iter(cm, pos.line, pos.ch, range);\n          for (;;) {\n            var open = findMatchingOpen(iter, tag);\n            if (!open) break;\n            var forward = new Iter(cm, pos.line, pos.ch, range);\n            var close = findMatchingClose(forward, open.tag);\n            if (close) return { open: open, close: close };\n          }\n        };\n\n        // Used by addon/edit/closetag.js\n        CodeMirror.scanForClosingTag = function (cm, pos, name, end) {\n          var iter = new Iter(cm, pos.line, pos.ch, end ? { from: 0, to: end } : null);\n          return findMatchingClose(iter, name);\n        };\n      });\n    }, { \"../../lib/codemirror\": 5 }], 5: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      // This is CodeMirror (http://codemirror.net), a code editor\n      // implemented in JavaScript on top of the browser's DOM.\n      //\n      // You can find some technical background for some of the code below\n      // at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n      (function (global, factory) {\n        (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.CodeMirror = factory();\n      })(this, function () {\n        'use strict';\n\n        // Kludges for bugs and behavior differences that can't be feature\n        // detected are enabled based on userAgent etc sniffing.\n\n        var userAgent = navigator.userAgent;\n        var platform = navigator.platform;\n\n        var gecko = /gecko\\/\\d/i.test(userAgent);\n        var ie_upto10 = /MSIE \\d/.test(userAgent);\n        var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n        var edge = /Edge\\/(\\d+)/.exec(userAgent);\n        var ie = ie_upto10 || ie_11up || edge;\n        var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n        var webkit = !edge && /WebKit\\//.test(userAgent);\n        var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n        var chrome = !edge && /Chrome\\//.test(userAgent);\n        var presto = /Opera\\//.test(userAgent);\n        var safari = /Apple Computer/.test(navigator.vendor);\n        var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n        var phantom = /PhantomJS/.test(userAgent);\n\n        var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n        var android = /Android/.test(userAgent);\n        // This is woefully incomplete. Suggestions for alternative methods welcome.\n        var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n        var mac = ios || /Mac/.test(platform);\n        var chromeOS = /\\bCrOS\\b/.test(userAgent);\n        var windows = /win/i.test(platform);\n\n        var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n        if (presto_version) {\n          presto_version = Number(presto_version[1]);\n        }\n        if (presto_version && presto_version >= 15) {\n          presto = false;webkit = true;\n        }\n        // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n        var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n        var captureRightClick = gecko || ie && ie_version >= 9;\n\n        function classTest(cls) {\n          return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n        }\n\n        var rmClass = function rmClass(node, cls) {\n          var current = node.className;\n          var match = classTest(cls).exec(current);\n          if (match) {\n            var after = current.slice(match.index + match[0].length);\n            node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n          }\n        };\n\n        function removeChildren(e) {\n          for (var count = e.childNodes.length; count > 0; --count) {\n            e.removeChild(e.firstChild);\n          }\n          return e;\n        }\n\n        function removeChildrenAndAdd(parent, e) {\n          return removeChildren(parent).appendChild(e);\n        }\n\n        function elt(tag, content, className, style) {\n          var e = document.createElement(tag);\n          if (className) {\n            e.className = className;\n          }\n          if (style) {\n            e.style.cssText = style;\n          }\n          if (typeof content == \"string\") {\n            e.appendChild(document.createTextNode(content));\n          } else if (content) {\n            for (var i = 0; i < content.length; ++i) {\n              e.appendChild(content[i]);\n            }\n          }\n          return e;\n        }\n        // wrapper for elt, which removes the elt from the accessibility tree\n        function eltP(tag, content, className, style) {\n          var e = elt(tag, content, className, style);\n          e.setAttribute(\"role\", \"presentation\");\n          return e;\n        }\n\n        var range;\n        if (document.createRange) {\n          range = function range(node, start, end, endNode) {\n            var r = document.createRange();\n            r.setEnd(endNode || node, end);\n            r.setStart(node, start);\n            return r;\n          };\n        } else {\n          range = function range(node, start, end) {\n            var r = document.body.createTextRange();\n            try {\n              r.moveToElementText(node.parentNode);\n            } catch (e) {\n              return r;\n            }\n            r.collapse(true);\n            r.moveEnd(\"character\", end);\n            r.moveStart(\"character\", start);\n            return r;\n          };\n        }\n\n        function contains(parent, child) {\n          if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n            {\n              child = child.parentNode;\n            }\n          if (parent.contains) {\n            return parent.contains(child);\n          }\n          do {\n            if (child.nodeType == 11) {\n              child = child.host;\n            }\n            if (child == parent) {\n              return true;\n            }\n          } while (child = child.parentNode);\n        }\n\n        function activeElt() {\n          // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n          // IE < 10 will throw when accessed while the page is loading or in an iframe.\n          // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n          var activeElement;\n          try {\n            activeElement = document.activeElement;\n          } catch (e) {\n            activeElement = document.body || null;\n          }\n          while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n            activeElement = activeElement.shadowRoot.activeElement;\n          }\n          return activeElement;\n        }\n\n        function addClass(node, cls) {\n          var current = node.className;\n          if (!classTest(cls).test(current)) {\n            node.className += (current ? \" \" : \"\") + cls;\n          }\n        }\n        function joinClasses(a, b) {\n          var as = a.split(\" \");\n          for (var i = 0; i < as.length; i++) {\n            if (as[i] && !classTest(as[i]).test(b)) {\n              b += \" \" + as[i];\n            }\n          }\n          return b;\n        }\n\n        var selectInput = function selectInput(node) {\n          node.select();\n        };\n        if (ios) // Mobile Safari apparently has a bug where select() is broken.\n          {\n            selectInput = function selectInput(node) {\n              node.selectionStart = 0;node.selectionEnd = node.value.length;\n            };\n          } else if (ie) // Suppress mysterious IE10 errors\n          {\n            selectInput = function selectInput(node) {\n              try {\n                node.select();\n              } catch (_e) {}\n            };\n          }\n\n        function bind(f) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          return function () {\n            return f.apply(null, args);\n          };\n        }\n\n        function copyObj(obj, target, overwrite) {\n          if (!target) {\n            target = {};\n          }\n          for (var prop in obj) {\n            if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n              target[prop] = obj[prop];\n            }\n          }\n          return target;\n        }\n\n        // Counts the column offset in a string, taking tabs into account.\n        // Used mostly to find indentation.\n        function countColumn(string, end, tabSize, startIndex, startValue) {\n          if (end == null) {\n            end = string.search(/[^\\s\\u00a0]/);\n            if (end == -1) {\n              end = string.length;\n            }\n          }\n          for (var i = startIndex || 0, n = startValue || 0;;) {\n            var nextTab = string.indexOf(\"\\t\", i);\n            if (nextTab < 0 || nextTab >= end) {\n              return n + (end - i);\n            }\n            n += nextTab - i;\n            n += tabSize - n % tabSize;\n            i = nextTab + 1;\n          }\n        }\n\n        var Delayed = function Delayed() {\n          this.id = null;\n        };\n        Delayed.prototype.set = function (ms, f) {\n          clearTimeout(this.id);\n          this.id = setTimeout(f, ms);\n        };\n\n        function indexOf(array, elt) {\n          for (var i = 0; i < array.length; ++i) {\n            if (array[i] == elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        // Number of pixels added to scroller and sizer to hide scrollbar\n        var scrollerGap = 30;\n\n        // Returned or thrown by various protocols to signal 'I'm not\n        // handling this'.\n        var Pass = { toString: function toString() {\n            return \"CodeMirror.Pass\";\n          } };\n\n        // Reused option objects for setSelection & friends\n        var sel_dontScroll = { scroll: false };\n        var sel_mouse = { origin: \"*mouse\" };\n        var sel_move = { origin: \"+move\" };\n\n        // The inverse of countColumn -- find the offset that corresponds to\n        // a particular column.\n        function findColumn(string, goal, tabSize) {\n          for (var pos = 0, col = 0;;) {\n            var nextTab = string.indexOf(\"\\t\", pos);\n            if (nextTab == -1) {\n              nextTab = string.length;\n            }\n            var skipped = nextTab - pos;\n            if (nextTab == string.length || col + skipped >= goal) {\n              return pos + Math.min(skipped, goal - col);\n            }\n            col += nextTab - pos;\n            col += tabSize - col % tabSize;\n            pos = nextTab + 1;\n            if (col >= goal) {\n              return pos;\n            }\n          }\n        }\n\n        var spaceStrs = [\"\"];\n        function spaceStr(n) {\n          while (spaceStrs.length <= n) {\n            spaceStrs.push(lst(spaceStrs) + \" \");\n          }\n          return spaceStrs[n];\n        }\n\n        function lst(arr) {\n          return arr[arr.length - 1];\n        }\n\n        function map(array, f) {\n          var out = [];\n          for (var i = 0; i < array.length; i++) {\n            out[i] = f(array[i], i);\n          }\n          return out;\n        }\n\n        function insertSorted(array, value, score) {\n          var pos = 0,\n              priority = score(value);\n          while (pos < array.length && score(array[pos]) <= priority) {\n            pos++;\n          }\n          array.splice(pos, 0, value);\n        }\n\n        function nothing() {}\n\n        function createObj(base, props) {\n          var inst;\n          if (Object.create) {\n            inst = Object.create(base);\n          } else {\n            nothing.prototype = base;\n            inst = new nothing();\n          }\n          if (props) {\n            copyObj(props, inst);\n          }\n          return inst;\n        }\n\n        var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n        function isWordCharBasic(ch) {\n          return (/\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n          );\n        }\n        function isWordChar(ch, helper) {\n          if (!helper) {\n            return isWordCharBasic(ch);\n          }\n          if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n            return true;\n          }\n          return helper.test(ch);\n        }\n\n        function isEmpty(obj) {\n          for (var n in obj) {\n            if (obj.hasOwnProperty(n) && obj[n]) {\n              return false;\n            }\n          }\n          return true;\n        }\n\n        // Extending unicode characters. A series of a non-extending char +\n        // any number of extending chars is treated as a single unit as far\n        // as editing and measuring is concerned. This is not fully correct,\n        // since some scripts/fonts/browsers also treat other configurations\n        // of code points as a group.\n        var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n        function isExtendingChar(ch) {\n          return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n        }\n\n        // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n        function skipExtendingChars(str, pos, dir) {\n          while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n            pos += dir;\n          }\n          return pos;\n        }\n\n        // Returns the value from the range [`from`; `to`] that satisfies\n        // `pred` and is closest to `from`. Assumes that at least `to` satisfies `pred`.\n        function findFirst(pred, from, to) {\n          for (;;) {\n            if (Math.abs(from - to) <= 1) {\n              return pred(from) ? from : to;\n            }\n            var mid = Math.floor((from + to) / 2);\n            if (pred(mid)) {\n              to = mid;\n            } else {\n              from = mid;\n            }\n          }\n        }\n\n        // The display handles the DOM integration, both for input reading\n        // and content drawing. It holds references to DOM nodes and\n        // display-related state.\n\n        function Display(place, doc, input) {\n          var d = this;\n          this.input = input;\n\n          // Covers bottom-right square when both scrollbars are present.\n          d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n          d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n          // Covers bottom of gutter when coverGutterNextToScrollbar is on\n          // and h scrollbar is present.\n          d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n          d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n          // Will contain the actual code, positioned to cover the viewport.\n          d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n          // Elements are added to these to represent selection and cursors.\n          d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n          d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n          // A visibility: hidden element used to find the size of things.\n          d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n          // When lines outside of the viewport are measured, they are drawn in this.\n          d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n          // Wraps everything that needs to exist inside the vertically-padded coordinate system\n          d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n          var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n          // Moved around its parent to cover visible view.\n          d.mover = elt(\"div\", [lines], null, \"position: relative\");\n          // Set to the height of the document, allowing scrolling.\n          d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n          d.sizerWidth = null;\n          // Behavior of elts with overflow: auto and padding is\n          // inconsistent across browsers. This is used to ensure the\n          // scrollable area is big enough.\n          d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n          // Will contain the gutters, if any.\n          d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n          d.lineGutter = null;\n          // Actual scrollable element.\n          d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n          d.scroller.setAttribute(\"tabIndex\", \"-1\");\n          // The element in which the editor lives.\n          d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n          // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n          if (ie && ie_version < 8) {\n            d.gutters.style.zIndex = -1;d.scroller.style.paddingRight = 0;\n          }\n          if (!webkit && !(gecko && mobile)) {\n            d.scroller.draggable = true;\n          }\n\n          if (place) {\n            if (place.appendChild) {\n              place.appendChild(d.wrapper);\n            } else {\n              place(d.wrapper);\n            }\n          }\n\n          // Current rendered range (may be bigger than the view window).\n          d.viewFrom = d.viewTo = doc.first;\n          d.reportedViewFrom = d.reportedViewTo = doc.first;\n          // Information about the rendered lines.\n          d.view = [];\n          d.renderedView = null;\n          // Holds info about a single rendered line when it was rendered\n          // for measurement, while not in view.\n          d.externalMeasured = null;\n          // Empty space (in pixels) above the view\n          d.viewOffset = 0;\n          d.lastWrapHeight = d.lastWrapWidth = 0;\n          d.updateLineNumbers = null;\n\n          d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n          d.scrollbarsClipped = false;\n\n          // Used to only resize the line number gutter when necessary (when\n          // the amount of lines crosses a boundary that makes its width change)\n          d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n          // Set to true when a non-horizontal-scrolling line widget is\n          // added. As an optimization, line widget aligning is skipped when\n          // this is false.\n          d.alignWidgets = false;\n\n          d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n          // Tracks the maximum line length so that the horizontal scrollbar\n          // can be kept static when scrolling.\n          d.maxLine = null;\n          d.maxLineLength = 0;\n          d.maxLineChanged = false;\n\n          // Used for measuring wheel scrolling granularity\n          d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n          // True when shift is held down.\n          d.shift = false;\n\n          // Used to track whether anything happened since the context menu\n          // was opened.\n          d.selForContextMenu = null;\n\n          d.activeTouch = null;\n\n          input.init(d);\n        }\n\n        // Find the line object corresponding to the given line number.\n        function getLine(doc, n) {\n          n -= doc.first;\n          if (n < 0 || n >= doc.size) {\n            throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n          }\n          var chunk = doc;\n          while (!chunk.lines) {\n            for (var i = 0;; ++i) {\n              var child = chunk.children[i],\n                  sz = child.chunkSize();\n              if (n < sz) {\n                chunk = child;break;\n              }\n              n -= sz;\n            }\n          }\n          return chunk.lines[n];\n        }\n\n        // Get the part of a document between two positions, as an array of\n        // strings.\n        function getBetween(doc, start, end) {\n          var out = [],\n              n = start.line;\n          doc.iter(start.line, end.line + 1, function (line) {\n            var text = line.text;\n            if (n == end.line) {\n              text = text.slice(0, end.ch);\n            }\n            if (n == start.line) {\n              text = text.slice(start.ch);\n            }\n            out.push(text);\n            ++n;\n          });\n          return out;\n        }\n        // Get the lines between from and to, as array of strings.\n        function getLines(doc, from, to) {\n          var out = [];\n          doc.iter(from, to, function (line) {\n            out.push(line.text);\n          }); // iter aborts when callback returns truthy value\n          return out;\n        }\n\n        // Update the height of a line, propagating the height change\n        // upwards to parent nodes.\n        function updateLineHeight(line, height) {\n          var diff = height - line.height;\n          if (diff) {\n            for (var n = line; n; n = n.parent) {\n              n.height += diff;\n            }\n          }\n        }\n\n        // Given a line object, find its line number by walking up through\n        // its parent links.\n        function lineNo(line) {\n          if (line.parent == null) {\n            return null;\n          }\n          var cur = line.parent,\n              no = indexOf(cur.lines, line);\n          for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n            for (var i = 0;; ++i) {\n              if (chunk.children[i] == cur) {\n                break;\n              }\n              no += chunk.children[i].chunkSize();\n            }\n          }\n          return no + cur.first;\n        }\n\n        // Find the line at the given vertical position, using the height\n        // information in the document tree.\n        function _lineAtHeight(chunk, h) {\n          var n = chunk.first;\n          outer: do {\n            for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n              var child = chunk.children[i$1],\n                  ch = child.height;\n              if (h < ch) {\n                chunk = child;continue outer;\n              }\n              h -= ch;\n              n += child.chunkSize();\n            }\n            return n;\n          } while (!chunk.lines);\n          var i = 0;\n          for (; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i],\n                lh = line.height;\n            if (h < lh) {\n              break;\n            }\n            h -= lh;\n          }\n          return n + i;\n        }\n\n        function isLine(doc, l) {\n          return l >= doc.first && l < doc.first + doc.size;\n        }\n\n        function lineNumberFor(options, i) {\n          return String(options.lineNumberFormatter(i + options.firstLineNumber));\n        }\n\n        // A Pos instance represents a position within the text.\n        function Pos(line, ch, sticky) {\n          if (sticky === void 0) sticky = null;\n\n          if (!(this instanceof Pos)) {\n            return new Pos(line, ch, sticky);\n          }\n          this.line = line;\n          this.ch = ch;\n          this.sticky = sticky;\n        }\n\n        // Compare two positions, return 0 if they are the same, a negative\n        // number when a is less, and a positive number otherwise.\n        function cmp(a, b) {\n          return a.line - b.line || a.ch - b.ch;\n        }\n\n        function equalCursorPos(a, b) {\n          return a.sticky == b.sticky && cmp(a, b) == 0;\n        }\n\n        function copyPos(x) {\n          return Pos(x.line, x.ch);\n        }\n        function maxPos(a, b) {\n          return cmp(a, b) < 0 ? b : a;\n        }\n        function minPos(a, b) {\n          return cmp(a, b) < 0 ? a : b;\n        }\n\n        // Most of the external API clips given positions to make sure they\n        // actually exist within the document.\n        function clipLine(doc, n) {\n          return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n        }\n        function _clipPos(doc, pos) {\n          if (pos.line < doc.first) {\n            return Pos(doc.first, 0);\n          }\n          var last = doc.first + doc.size - 1;\n          if (pos.line > last) {\n            return Pos(last, getLine(doc, last).text.length);\n          }\n          return clipToLen(pos, getLine(doc, pos.line).text.length);\n        }\n        function clipToLen(pos, linelen) {\n          var ch = pos.ch;\n          if (ch == null || ch > linelen) {\n            return Pos(pos.line, linelen);\n          } else if (ch < 0) {\n            return Pos(pos.line, 0);\n          } else {\n            return pos;\n          }\n        }\n        function clipPosArray(doc, array) {\n          var out = [];\n          for (var i = 0; i < array.length; i++) {\n            out[i] = _clipPos(doc, array[i]);\n          }\n          return out;\n        }\n\n        // Optimize some code when these features are not used.\n        var sawReadOnlySpans = false;\n        var sawCollapsedSpans = false;\n\n        function seeReadOnlySpans() {\n          sawReadOnlySpans = true;\n        }\n\n        function seeCollapsedSpans() {\n          sawCollapsedSpans = true;\n        }\n\n        // TEXTMARKER SPANS\n\n        function MarkedSpan(marker, from, to) {\n          this.marker = marker;\n          this.from = from;this.to = to;\n        }\n\n        // Search an array of spans for a span matching the given marker.\n        function getMarkedSpanFor(spans, marker) {\n          if (spans) {\n            for (var i = 0; i < spans.length; ++i) {\n              var span = spans[i];\n              if (span.marker == marker) {\n                return span;\n              }\n            }\n          }\n        }\n        // Remove a span from an array, returning undefined if no spans are\n        // left (we don't store arrays for lines without spans).\n        function removeMarkedSpan(spans, span) {\n          var r;\n          for (var i = 0; i < spans.length; ++i) {\n            if (spans[i] != span) {\n              (r || (r = [])).push(spans[i]);\n            }\n          }\n          return r;\n        }\n        // Add a span to a line.\n        function addMarkedSpan(line, span) {\n          line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n          span.marker.attachLine(line);\n        }\n\n        // Used for the algorithm that adjusts markers for a change in the\n        // document. These functions cut an array of spans at a given\n        // character position, returning an array of remaining chunks (or\n        // undefined if nothing remains).\n        function markedSpansBefore(old, startCh, isInsert) {\n          var nw;\n          if (old) {\n            for (var i = 0; i < old.length; ++i) {\n              var span = old[i],\n                  marker = span.marker;\n              var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n              if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n                var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n              }\n            }\n          }\n          return nw;\n        }\n        function markedSpansAfter(old, endCh, isInsert) {\n          var nw;\n          if (old) {\n            for (var i = 0; i < old.length; ++i) {\n              var span = old[i],\n                  marker = span.marker;\n              var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n              if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n                var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n              }\n            }\n          }\n          return nw;\n        }\n\n        // Given a change object, compute the new set of marker spans that\n        // cover the line in which the change took place. Removes spans\n        // entirely within the change, reconnects spans belonging to the\n        // same marker that appear on both sides of the change, and cuts off\n        // spans partially within the change. Returns an array of span\n        // arrays with one element for each line in (after) the change.\n        function stretchSpansOverChange(doc, change) {\n          if (change.full) {\n            return null;\n          }\n          var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n          var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n          if (!oldFirst && !oldLast) {\n            return null;\n          }\n\n          var startCh = change.from.ch,\n              endCh = change.to.ch,\n              isInsert = cmp(change.from, change.to) == 0;\n          // Get the spans that 'stick out' on both sides\n          var first = markedSpansBefore(oldFirst, startCh, isInsert);\n          var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n          // Next, merge those two ends\n          var sameLine = change.text.length == 1,\n              offset = lst(change.text).length + (sameLine ? startCh : 0);\n          if (first) {\n            // Fix up .to properties of first\n            for (var i = 0; i < first.length; ++i) {\n              var span = first[i];\n              if (span.to == null) {\n                var found = getMarkedSpanFor(last, span.marker);\n                if (!found) {\n                  span.to = startCh;\n                } else if (sameLine) {\n                  span.to = found.to == null ? null : found.to + offset;\n                }\n              }\n            }\n          }\n          if (last) {\n            // Fix up .from in last (or move them into first in case of sameLine)\n            for (var i$1 = 0; i$1 < last.length; ++i$1) {\n              var span$1 = last[i$1];\n              if (span$1.to != null) {\n                span$1.to += offset;\n              }\n              if (span$1.from == null) {\n                var found$1 = getMarkedSpanFor(first, span$1.marker);\n                if (!found$1) {\n                  span$1.from = offset;\n                  if (sameLine) {\n                    (first || (first = [])).push(span$1);\n                  }\n                }\n              } else {\n                span$1.from += offset;\n                if (sameLine) {\n                  (first || (first = [])).push(span$1);\n                }\n              }\n            }\n          }\n          // Make sure we didn't create any zero-length spans\n          if (first) {\n            first = clearEmptySpans(first);\n          }\n          if (last && last != first) {\n            last = clearEmptySpans(last);\n          }\n\n          var newMarkers = [first];\n          if (!sameLine) {\n            // Fill gap with whole-line-spans\n            var gap = change.text.length - 2,\n                gapMarkers;\n            if (gap > 0 && first) {\n              for (var i$2 = 0; i$2 < first.length; ++i$2) {\n                if (first[i$2].to == null) {\n                  (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n                }\n              }\n            }\n            for (var i$3 = 0; i$3 < gap; ++i$3) {\n              newMarkers.push(gapMarkers);\n            }\n            newMarkers.push(last);\n          }\n          return newMarkers;\n        }\n\n        // Remove spans that are empty and don't have a clearWhenEmpty\n        // option of false.\n        function clearEmptySpans(spans) {\n          for (var i = 0; i < spans.length; ++i) {\n            var span = spans[i];\n            if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n              spans.splice(i--, 1);\n            }\n          }\n          if (!spans.length) {\n            return null;\n          }\n          return spans;\n        }\n\n        // Used to 'clip' out readOnly ranges when making a change.\n        function removeReadOnlyRanges(doc, from, to) {\n          var markers = null;\n          doc.iter(from.line, to.line + 1, function (line) {\n            if (line.markedSpans) {\n              for (var i = 0; i < line.markedSpans.length; ++i) {\n                var mark = line.markedSpans[i].marker;\n                if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n                  (markers || (markers = [])).push(mark);\n                }\n              }\n            }\n          });\n          if (!markers) {\n            return null;\n          }\n          var parts = [{ from: from, to: to }];\n          for (var i = 0; i < markers.length; ++i) {\n            var mk = markers[i],\n                m = mk.find(0);\n            for (var j = 0; j < parts.length; ++j) {\n              var p = parts[j];\n              if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n                continue;\n              }\n              var newParts = [j, 1],\n                  dfrom = cmp(p.from, m.from),\n                  dto = cmp(p.to, m.to);\n              if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n                newParts.push({ from: p.from, to: m.from });\n              }\n              if (dto > 0 || !mk.inclusiveRight && !dto) {\n                newParts.push({ from: m.to, to: p.to });\n              }\n              parts.splice.apply(parts, newParts);\n              j += newParts.length - 3;\n            }\n          }\n          return parts;\n        }\n\n        // Connect or disconnect spans from a line.\n        function detachMarkedSpans(line) {\n          var spans = line.markedSpans;\n          if (!spans) {\n            return;\n          }\n          for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.detachLine(line);\n          }\n          line.markedSpans = null;\n        }\n        function attachMarkedSpans(line, spans) {\n          if (!spans) {\n            return;\n          }\n          for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.attachLine(line);\n          }\n          line.markedSpans = spans;\n        }\n\n        // Helpers used when computing which overlapping collapsed span\n        // counts as the larger one.\n        function extraLeft(marker) {\n          return marker.inclusiveLeft ? -1 : 0;\n        }\n        function extraRight(marker) {\n          return marker.inclusiveRight ? 1 : 0;\n        }\n\n        // Returns a number indicating which of two overlapping collapsed\n        // spans is larger (and thus includes the other). Falls back to\n        // comparing ids when the spans cover exactly the same range.\n        function compareCollapsedMarkers(a, b) {\n          var lenDiff = a.lines.length - b.lines.length;\n          if (lenDiff != 0) {\n            return lenDiff;\n          }\n          var aPos = a.find(),\n              bPos = b.find();\n          var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n          if (fromCmp) {\n            return -fromCmp;\n          }\n          var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n          if (toCmp) {\n            return toCmp;\n          }\n          return b.id - a.id;\n        }\n\n        // Find out whether a line ends or starts in a collapsed span. If\n        // so, return the marker for that span.\n        function collapsedSpanAtSide(line, start) {\n          var sps = sawCollapsedSpans && line.markedSpans,\n              found;\n          if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n              sp = sps[i];\n              if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n                found = sp.marker;\n              }\n            }\n          }\n          return found;\n        }\n        function collapsedSpanAtStart(line) {\n          return collapsedSpanAtSide(line, true);\n        }\n        function collapsedSpanAtEnd(line) {\n          return collapsedSpanAtSide(line, false);\n        }\n\n        // Test whether there exists a collapsed span that partially\n        // overlaps (covers the start or end, but not both) of a new span.\n        // Such overlap is not allowed.\n        function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n          var line = getLine(doc, lineNo$$1);\n          var sps = sawCollapsedSpans && line.markedSpans;\n          if (sps) {\n            for (var i = 0; i < sps.length; ++i) {\n              var sp = sps[i];\n              if (!sp.marker.collapsed) {\n                continue;\n              }\n              var found = sp.marker.find(0);\n              var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n              var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n              if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n                continue;\n              }\n              if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n                return true;\n              }\n            }\n          }\n        }\n\n        // A visual line is a line as drawn on the screen. Folding, for\n        // example, can cause multiple logical lines to appear on the same\n        // visual line. This finds the start of the visual line that the\n        // given line is part of (usually that is the line itself).\n        function visualLine(line) {\n          var merged;\n          while (merged = collapsedSpanAtStart(line)) {\n            line = merged.find(-1, true).line;\n          }\n          return line;\n        }\n\n        function visualLineEnd(line) {\n          var merged;\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n          }\n          return line;\n        }\n\n        // Returns an array of logical lines that continue the visual line\n        // started by the argument, or undefined if there are no such lines.\n        function visualLineContinued(line) {\n          var merged, lines;\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;(lines || (lines = [])).push(line);\n          }\n          return lines;\n        }\n\n        // Get the line number of the start of the visual line that the\n        // given line number is part of.\n        function visualLineNo(doc, lineN) {\n          var line = getLine(doc, lineN),\n              vis = visualLine(line);\n          if (line == vis) {\n            return lineN;\n          }\n          return lineNo(vis);\n        }\n\n        // Get the line number of the start of the next visual line after\n        // the given line.\n        function visualLineEndNo(doc, lineN) {\n          if (lineN > doc.lastLine()) {\n            return lineN;\n          }\n          var line = getLine(doc, lineN),\n              merged;\n          if (!lineIsHidden(doc, line)) {\n            return lineN;\n          }\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n          }\n          return lineNo(line) + 1;\n        }\n\n        // Compute whether a line is hidden. Lines count as hidden when they\n        // are part of a visual line that starts with another line, or when\n        // they are entirely covered by collapsed, non-widget span.\n        function lineIsHidden(doc, line) {\n          var sps = sawCollapsedSpans && line.markedSpans;\n          if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n              sp = sps[i];\n              if (!sp.marker.collapsed) {\n                continue;\n              }\n              if (sp.from == null) {\n                return true;\n              }\n              if (sp.marker.widgetNode) {\n                continue;\n              }\n              if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n                return true;\n              }\n            }\n          }\n        }\n        function lineIsHiddenInner(doc, line, span) {\n          if (span.to == null) {\n            var end = span.marker.find(1, true);\n            return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n          }\n          if (span.marker.inclusiveRight && span.to == line.text.length) {\n            return true;\n          }\n          for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n            sp = line.markedSpans[i];\n            if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n              return true;\n            }\n          }\n        }\n\n        // Find the height above the given line.\n        function _heightAtLine(lineObj) {\n          lineObj = visualLine(lineObj);\n\n          var h = 0,\n              chunk = lineObj.parent;\n          for (var i = 0; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i];\n            if (line == lineObj) {\n              break;\n            } else {\n              h += line.height;\n            }\n          }\n          for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n            for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n              var cur = p.children[i$1];\n              if (cur == chunk) {\n                break;\n              } else {\n                h += cur.height;\n              }\n            }\n          }\n          return h;\n        }\n\n        // Compute the character length of a line, taking into account\n        // collapsed ranges (see markText) that might hide parts, and join\n        // other lines onto it.\n        function lineLength(line) {\n          if (line.height == 0) {\n            return 0;\n          }\n          var len = line.text.length,\n              merged,\n              cur = line;\n          while (merged = collapsedSpanAtStart(cur)) {\n            var found = merged.find(0, true);\n            cur = found.from.line;\n            len += found.from.ch - found.to.ch;\n          }\n          cur = line;\n          while (merged = collapsedSpanAtEnd(cur)) {\n            var found$1 = merged.find(0, true);\n            len -= cur.text.length - found$1.from.ch;\n            cur = found$1.to.line;\n            len += cur.text.length - found$1.to.ch;\n          }\n          return len;\n        }\n\n        // Find the longest line in the document.\n        function findMaxLine(cm) {\n          var d = cm.display,\n              doc = cm.doc;\n          d.maxLine = getLine(doc, doc.first);\n          d.maxLineLength = lineLength(d.maxLine);\n          d.maxLineChanged = true;\n          doc.iter(function (line) {\n            var len = lineLength(line);\n            if (len > d.maxLineLength) {\n              d.maxLineLength = len;\n              d.maxLine = line;\n            }\n          });\n        }\n\n        // BIDI HELPERS\n\n        function iterateBidiSections(order, from, to, f) {\n          if (!order) {\n            return f(from, to, \"ltr\");\n          }\n          var found = false;\n          for (var i = 0; i < order.length; ++i) {\n            var part = order[i];\n            if (part.from < to && part.to > from || from == to && part.to == from) {\n              f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n              found = true;\n            }\n          }\n          if (!found) {\n            f(from, to, \"ltr\");\n          }\n        }\n\n        var bidiOther = null;\n        function getBidiPartAt(order, ch, sticky) {\n          var found;\n          bidiOther = null;\n          for (var i = 0; i < order.length; ++i) {\n            var cur = order[i];\n            if (cur.from < ch && cur.to > ch) {\n              return i;\n            }\n            if (cur.to == ch) {\n              if (cur.from != cur.to && sticky == \"before\") {\n                found = i;\n              } else {\n                bidiOther = i;\n              }\n            }\n            if (cur.from == ch) {\n              if (cur.from != cur.to && sticky != \"before\") {\n                found = i;\n              } else {\n                bidiOther = i;\n              }\n            }\n          }\n          return found != null ? found : bidiOther;\n        }\n\n        // Bidirectional ordering algorithm\n        // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n        // that this (partially) implements.\n\n        // One-char codes used for character types:\n        // L (L):   Left-to-Right\n        // R (R):   Right-to-Left\n        // r (AL):  Right-to-Left Arabic\n        // 1 (EN):  European Number\n        // + (ES):  European Number Separator\n        // % (ET):  European Number Terminator\n        // n (AN):  Arabic Number\n        // , (CS):  Common Number Separator\n        // m (NSM): Non-Spacing Mark\n        // b (BN):  Boundary Neutral\n        // s (B):   Paragraph Separator\n        // t (S):   Segment Separator\n        // w (WS):  Whitespace\n        // N (ON):  Other Neutrals\n\n        // Returns null if characters are ordered as they appear\n        // (left-to-right), or an array of sections ({from, to, level}\n        // objects) in the order in which they occur visually.\n        var bidiOrdering = function () {\n          // Character types for codepoints 0 to 0xff\n          var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n          // Character types for codepoints 0x600 to 0x6f9\n          var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n          function charType(code) {\n            if (code <= 0xf7) {\n              return lowTypes.charAt(code);\n            } else if (0x590 <= code && code <= 0x5f4) {\n              return \"R\";\n            } else if (0x600 <= code && code <= 0x6f9) {\n              return arabicTypes.charAt(code - 0x600);\n            } else if (0x6ee <= code && code <= 0x8ac) {\n              return \"r\";\n            } else if (0x2000 <= code && code <= 0x200b) {\n              return \"w\";\n            } else if (code == 0x200c) {\n              return \"b\";\n            } else {\n              return \"L\";\n            }\n          }\n\n          var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n          var isNeutral = /[stwN]/,\n              isStrong = /[LRr]/,\n              countsAsLeft = /[Lb1n]/,\n              countsAsNum = /[1n]/;\n\n          function BidiSpan(level, from, to) {\n            this.level = level;\n            this.from = from;this.to = to;\n          }\n\n          return function (str, direction) {\n            var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n            if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n              return false;\n            }\n            var len = str.length,\n                types = [];\n            for (var i = 0; i < len; ++i) {\n              types.push(charType(str.charCodeAt(i)));\n            }\n\n            // W1. Examine each non-spacing mark (NSM) in the level run, and\n            // change the type of the NSM to the type of the previous\n            // character. If the NSM is at the start of the level run, it will\n            // get the type of sor.\n            for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n              var type = types[i$1];\n              if (type == \"m\") {\n                types[i$1] = prev;\n              } else {\n                prev = type;\n              }\n            }\n\n            // W2. Search backwards from each instance of a European number\n            // until the first strong type (R, L, AL, or sor) is found. If an\n            // AL is found, change the type of the European number to Arabic\n            // number.\n            // W3. Change all ALs to R.\n            for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n              var type$1 = types[i$2];\n              if (type$1 == \"1\" && cur == \"r\") {\n                types[i$2] = \"n\";\n              } else if (isStrong.test(type$1)) {\n                cur = type$1;if (type$1 == \"r\") {\n                  types[i$2] = \"R\";\n                }\n              }\n            }\n\n            // W4. A single European separator between two European numbers\n            // changes to a European number. A single common separator between\n            // two numbers of the same type changes to that type.\n            for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n              var type$2 = types[i$3];\n              if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n                types[i$3] = \"1\";\n              } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n                types[i$3] = prev$1;\n              }\n              prev$1 = type$2;\n            }\n\n            // W5. A sequence of European terminators adjacent to European\n            // numbers changes to all European numbers.\n            // W6. Otherwise, separators and terminators change to Other\n            // Neutral.\n            for (var i$4 = 0; i$4 < len; ++i$4) {\n              var type$3 = types[i$4];\n              if (type$3 == \",\") {\n                types[i$4] = \"N\";\n              } else if (type$3 == \"%\") {\n                var end = void 0;\n                for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n                var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n                for (var j = i$4; j < end; ++j) {\n                  types[j] = replace;\n                }\n                i$4 = end - 1;\n              }\n            }\n\n            // W7. Search backwards from each instance of a European number\n            // until the first strong type (R, L, or sor) is found. If an L is\n            // found, then change the type of the European number to L.\n            for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n              var type$4 = types[i$5];\n              if (cur$1 == \"L\" && type$4 == \"1\") {\n                types[i$5] = \"L\";\n              } else if (isStrong.test(type$4)) {\n                cur$1 = type$4;\n              }\n            }\n\n            // N1. A sequence of neutrals takes the direction of the\n            // surrounding strong text if the text on both sides has the same\n            // direction. European and Arabic numbers act as if they were R in\n            // terms of their influence on neutrals. Start-of-level-run (sor)\n            // and end-of-level-run (eor) are used at level run boundaries.\n            // N2. Any remaining neutrals take the embedding direction.\n            for (var i$6 = 0; i$6 < len; ++i$6) {\n              if (isNeutral.test(types[i$6])) {\n                var end$1 = void 0;\n                for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n                var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n                var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n                var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n                for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n                  types[j$1] = replace$1;\n                }\n                i$6 = end$1 - 1;\n              }\n            }\n\n            // Here we depart from the documented algorithm, in order to avoid\n            // building up an actual levels array. Since there are only three\n            // levels (0, 1, 2) in an implementation that doesn't take\n            // explicit embedding into account, we can build up the order on\n            // the fly, without following the level-based algorithm.\n            var order = [],\n                m;\n            for (var i$7 = 0; i$7 < len;) {\n              if (countsAsLeft.test(types[i$7])) {\n                var start = i$7;\n                for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n                order.push(new BidiSpan(0, start, i$7));\n              } else {\n                var pos = i$7,\n                    at = order.length;\n                for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n                for (var j$2 = pos; j$2 < i$7;) {\n                  if (countsAsNum.test(types[j$2])) {\n                    if (pos < j$2) {\n                      order.splice(at, 0, new BidiSpan(1, pos, j$2));\n                    }\n                    var nstart = j$2;\n                    for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n                    order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n                    pos = j$2;\n                  } else {\n                    ++j$2;\n                  }\n                }\n                if (pos < i$7) {\n                  order.splice(at, 0, new BidiSpan(1, pos, i$7));\n                }\n              }\n            }\n            if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n              order[0].from = m[0].length;\n              order.unshift(new BidiSpan(0, 0, m[0].length));\n            }\n            if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n              lst(order).to -= m[0].length;\n              order.push(new BidiSpan(0, len - m[0].length, len));\n            }\n\n            return direction == \"rtl\" ? order.reverse() : order;\n          };\n        }();\n\n        // Get the bidi ordering for the given line (and cache it). Returns\n        // false for lines that are fully left-to-right, and an array of\n        // BidiSpan objects otherwise.\n        function getOrder(line, direction) {\n          var order = line.order;\n          if (order == null) {\n            order = line.order = bidiOrdering(line.text, direction);\n          }\n          return order;\n        }\n\n        function moveCharLogically(line, ch, dir) {\n          var target = skipExtendingChars(line.text, ch + dir, dir);\n          return target < 0 || target > line.text.length ? null : target;\n        }\n\n        function moveLogically(line, start, dir) {\n          var ch = moveCharLogically(line, start.ch, dir);\n          return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n        }\n\n        function endOfLine(visually, cm, lineObj, lineNo, dir) {\n          if (visually) {\n            var order = getOrder(lineObj, cm.doc.direction);\n            if (order) {\n              var part = dir < 0 ? lst(order) : order[0];\n              var moveInStorageOrder = dir < 0 == (part.level == 1);\n              var sticky = moveInStorageOrder ? \"after\" : \"before\";\n              var ch;\n              // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n              // it could be that the last bidi part is not on the last visual line,\n              // since visual lines contain content order-consecutive chunks.\n              // Thus, in rtl, we are looking for the first (content-order) character\n              // in the rtl chunk that is on the last line (that is, the same line\n              // as the last (content-order) character).\n              if (part.level > 0) {\n                var prep = prepareMeasureForLine(cm, lineObj);\n                ch = dir < 0 ? lineObj.text.length - 1 : 0;\n                var targetTop = measureCharPrepared(cm, prep, ch).top;\n                ch = findFirst(function (ch) {\n                  return measureCharPrepared(cm, prep, ch).top == targetTop;\n                }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n                if (sticky == \"before\") {\n                  ch = moveCharLogically(lineObj, ch, 1);\n                }\n              } else {\n                ch = dir < 0 ? part.to : part.from;\n              }\n              return new Pos(lineNo, ch, sticky);\n            }\n          }\n          return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n        }\n\n        function moveVisually(cm, line, start, dir) {\n          var bidi = getOrder(line, cm.doc.direction);\n          if (!bidi) {\n            return moveLogically(line, start, dir);\n          }\n          if (start.ch >= line.text.length) {\n            start.ch = line.text.length;\n            start.sticky = \"before\";\n          } else if (start.ch <= 0) {\n            start.ch = 0;\n            start.sticky = \"after\";\n          }\n          var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n              part = bidi[partPos];\n          if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n            // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n            // nothing interesting happens.\n            return moveLogically(line, start, dir);\n          }\n\n          var mv = function mv(pos, dir) {\n            return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n          };\n          var prep;\n          var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n            if (!cm.options.lineWrapping) {\n              return { begin: 0, end: line.text.length };\n            }\n            prep = prep || prepareMeasureForLine(cm, line);\n            return wrappedLineExtentChar(cm, line, prep, ch);\n          };\n          var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n          if (cm.doc.direction == \"rtl\" || part.level == 1) {\n            var moveInStorageOrder = part.level == 1 == dir < 0;\n            var ch = mv(start, moveInStorageOrder ? 1 : -1);\n            if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n              // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n              var sticky = moveInStorageOrder ? \"before\" : \"after\";\n              return new Pos(start.line, ch, sticky);\n            }\n          }\n\n          // Case 3: Could not move within this bidi part in this visual line, so leave\n          // the current bidi part\n\n          var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n            var getRes = function getRes(ch, moveInStorageOrder) {\n              return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n            };\n\n            for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n              var part = bidi[partPos];\n              var moveInStorageOrder = dir > 0 == (part.level != 1);\n              var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n              if (part.from <= ch && ch < part.to) {\n                return getRes(ch, moveInStorageOrder);\n              }\n              ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n              if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n                return getRes(ch, moveInStorageOrder);\n              }\n            }\n          };\n\n          // Case 3a: Look for other bidi parts on the same visual line\n          var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n          if (res) {\n            return res;\n          }\n\n          // Case 3b: Look for other bidi parts on the next visual line\n          var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n          if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n            res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n            if (res) {\n              return res;\n            }\n          }\n\n          // Case 4: Nowhere to move\n          return null;\n        }\n\n        // EVENT HANDLING\n\n        // Lightweight event framework. on/off also work on DOM nodes,\n        // registering native DOM handlers.\n\n        var noHandlers = [];\n\n        var on = function on(emitter, type, f) {\n          if (emitter.addEventListener) {\n            emitter.addEventListener(type, f, false);\n          } else if (emitter.attachEvent) {\n            emitter.attachEvent(\"on\" + type, f);\n          } else {\n            var map$$1 = emitter._handlers || (emitter._handlers = {});\n            map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n          }\n        };\n\n        function getHandlers(emitter, type) {\n          return emitter._handlers && emitter._handlers[type] || noHandlers;\n        }\n\n        function off(emitter, type, f) {\n          if (emitter.removeEventListener) {\n            emitter.removeEventListener(type, f, false);\n          } else if (emitter.detachEvent) {\n            emitter.detachEvent(\"on\" + type, f);\n          } else {\n            var map$$1 = emitter._handlers,\n                arr = map$$1 && map$$1[type];\n            if (arr) {\n              var index = indexOf(arr, f);\n              if (index > -1) {\n                map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n              }\n            }\n          }\n        }\n\n        function signal(emitter, type /*, values...*/) {\n          var handlers = getHandlers(emitter, type);\n          if (!handlers.length) {\n            return;\n          }\n          var args = Array.prototype.slice.call(arguments, 2);\n          for (var i = 0; i < handlers.length; ++i) {\n            handlers[i].apply(null, args);\n          }\n        }\n\n        // The DOM events that CodeMirror handles can be overridden by\n        // registering a (non-DOM) handler on the editor for the event name,\n        // and preventDefault-ing the event in that handler.\n        function signalDOMEvent(cm, e, override) {\n          if (typeof e == \"string\") {\n            e = { type: e, preventDefault: function preventDefault() {\n                this.defaultPrevented = true;\n              } };\n          }\n          signal(cm, override || e.type, cm, e);\n          return e_defaultPrevented(e) || e.codemirrorIgnore;\n        }\n\n        function signalCursorActivity(cm) {\n          var arr = cm._handlers && cm._handlers.cursorActivity;\n          if (!arr) {\n            return;\n          }\n          var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n          for (var i = 0; i < arr.length; ++i) {\n            if (indexOf(set, arr[i]) == -1) {\n              set.push(arr[i]);\n            }\n          }\n        }\n\n        function hasHandler(emitter, type) {\n          return getHandlers(emitter, type).length > 0;\n        }\n\n        // Add on and off methods to a constructor's prototype, to make\n        // registering events on such objects more convenient.\n        function eventMixin(ctor) {\n          ctor.prototype.on = function (type, f) {\n            on(this, type, f);\n          };\n          ctor.prototype.off = function (type, f) {\n            off(this, type, f);\n          };\n        }\n\n        // Due to the fact that we still support jurassic IE versions, some\n        // compatibility wrappers are needed.\n\n        function e_preventDefault(e) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n        }\n        function e_stopPropagation(e) {\n          if (e.stopPropagation) {\n            e.stopPropagation();\n          } else {\n            e.cancelBubble = true;\n          }\n        }\n        function e_defaultPrevented(e) {\n          return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n        }\n        function e_stop(e) {\n          e_preventDefault(e);e_stopPropagation(e);\n        }\n\n        function e_target(e) {\n          return e.target || e.srcElement;\n        }\n        function e_button(e) {\n          var b = e.which;\n          if (b == null) {\n            if (e.button & 1) {\n              b = 1;\n            } else if (e.button & 2) {\n              b = 3;\n            } else if (e.button & 4) {\n              b = 2;\n            }\n          }\n          if (mac && e.ctrlKey && b == 1) {\n            b = 3;\n          }\n          return b;\n        }\n\n        // Detect drag-and-drop\n        var dragAndDrop = function () {\n          // There is *some* kind of drag-and-drop support in IE6-8, but I\n          // couldn't get it to work yet.\n          if (ie && ie_version < 9) {\n            return false;\n          }\n          var div = elt('div');\n          return \"draggable\" in div || \"dragDrop\" in div;\n        }();\n\n        var zwspSupported;\n        function zeroWidthElement(measure) {\n          if (zwspSupported == null) {\n            var test = elt(\"span\", \"\\u200B\");\n            removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n            if (measure.firstChild.offsetHeight != 0) {\n              zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n            }\n          }\n          var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n          node.setAttribute(\"cm-text\", \"\");\n          return node;\n        }\n\n        // Feature-detect IE's crummy client rect reporting for bidi text\n        var badBidiRects;\n        function hasBadBidiRects(measure) {\n          if (badBidiRects != null) {\n            return badBidiRects;\n          }\n          var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n          var r0 = range(txt, 0, 1).getBoundingClientRect();\n          var r1 = range(txt, 1, 2).getBoundingClientRect();\n          removeChildren(measure);\n          if (!r0 || r0.left == r0.right) {\n            return false;\n          } // Safari returns null in some cases (#2780)\n          return badBidiRects = r1.right - r0.right < 3;\n        }\n\n        // See if \"\".split is the broken IE version, if so, provide an\n        // alternative way to split lines.\n        var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n          var pos = 0,\n              result = [],\n              l = string.length;\n          while (pos <= l) {\n            var nl = string.indexOf(\"\\n\", pos);\n            if (nl == -1) {\n              nl = string.length;\n            }\n            var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n            var rt = line.indexOf(\"\\r\");\n            if (rt != -1) {\n              result.push(line.slice(0, rt));\n              pos += rt + 1;\n            } else {\n              result.push(line);\n              pos = nl + 1;\n            }\n          }\n          return result;\n        } : function (string) {\n          return string.split(/\\r\\n?|\\n/);\n        };\n\n        var hasSelection = window.getSelection ? function (te) {\n          try {\n            return te.selectionStart != te.selectionEnd;\n          } catch (e) {\n            return false;\n          }\n        } : function (te) {\n          var range$$1;\n          try {\n            range$$1 = te.ownerDocument.selection.createRange();\n          } catch (e) {}\n          if (!range$$1 || range$$1.parentElement() != te) {\n            return false;\n          }\n          return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0;\n        };\n\n        var hasCopyEvent = function () {\n          var e = elt(\"div\");\n          if (\"oncopy\" in e) {\n            return true;\n          }\n          e.setAttribute(\"oncopy\", \"return;\");\n          return typeof e.oncopy == \"function\";\n        }();\n\n        var badZoomedRects = null;\n        function hasBadZoomedRects(measure) {\n          if (badZoomedRects != null) {\n            return badZoomedRects;\n          }\n          var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n          var normal = node.getBoundingClientRect();\n          var fromRange = range(node, 0, 1).getBoundingClientRect();\n          return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n        }\n\n        // Known modes, by name and by MIME\n        var modes = {};\n        var mimeModes = {};\n\n        // Extra arguments are stored as the mode's dependencies, which is\n        // used by (legacy) mechanisms like loadmode.js to automatically\n        // load a mode. (Preferred mechanism is the require/define calls.)\n        function defineMode(name, mode) {\n          if (arguments.length > 2) {\n            mode.dependencies = Array.prototype.slice.call(arguments, 2);\n          }\n          modes[name] = mode;\n        }\n\n        function defineMIME(mime, spec) {\n          mimeModes[mime] = spec;\n        }\n\n        // Given a MIME type, a {name, ...options} config object, or a name\n        // string, return a mode config object.\n        function resolveMode(spec) {\n          if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n            spec = mimeModes[spec];\n          } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n            var found = mimeModes[spec.name];\n            if (typeof found == \"string\") {\n              found = { name: found };\n            }\n            spec = createObj(found, spec);\n            spec.name = found.name;\n          } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n            return resolveMode(\"application/xml\");\n          } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n            return resolveMode(\"application/json\");\n          }\n          if (typeof spec == \"string\") {\n            return { name: spec };\n          } else {\n            return spec || { name: \"null\" };\n          }\n        }\n\n        // Given a mode spec (anything that resolveMode accepts), find and\n        // initialize an actual mode object.\n        function getMode(options, spec) {\n          spec = resolveMode(spec);\n          var mfactory = modes[spec.name];\n          if (!mfactory) {\n            return getMode(options, \"text/plain\");\n          }\n          var modeObj = mfactory(options, spec);\n          if (modeExtensions.hasOwnProperty(spec.name)) {\n            var exts = modeExtensions[spec.name];\n            for (var prop in exts) {\n              if (!exts.hasOwnProperty(prop)) {\n                continue;\n              }\n              if (modeObj.hasOwnProperty(prop)) {\n                modeObj[\"_\" + prop] = modeObj[prop];\n              }\n              modeObj[prop] = exts[prop];\n            }\n          }\n          modeObj.name = spec.name;\n          if (spec.helperType) {\n            modeObj.helperType = spec.helperType;\n          }\n          if (spec.modeProps) {\n            for (var prop$1 in spec.modeProps) {\n              modeObj[prop$1] = spec.modeProps[prop$1];\n            }\n          }\n\n          return modeObj;\n        }\n\n        // This can be used to attach properties to mode objects from\n        // outside the actual mode definition.\n        var modeExtensions = {};\n        function extendMode(mode, properties) {\n          var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n          copyObj(properties, exts);\n        }\n\n        function copyState(mode, state) {\n          if (state === true) {\n            return state;\n          }\n          if (mode.copyState) {\n            return mode.copyState(state);\n          }\n          var nstate = {};\n          for (var n in state) {\n            var val = state[n];\n            if (val instanceof Array) {\n              val = val.concat([]);\n            }\n            nstate[n] = val;\n          }\n          return nstate;\n        }\n\n        // Given a mode and a state (for that mode), find the inner mode and\n        // state at the position that the state refers to.\n        function innerMode(mode, state) {\n          var info;\n          while (mode.innerMode) {\n            info = mode.innerMode(state);\n            if (!info || info.mode == mode) {\n              break;\n            }\n            state = info.state;\n            mode = info.mode;\n          }\n          return info || { mode: mode, state: state };\n        }\n\n        function startState(mode, a1, a2) {\n          return mode.startState ? mode.startState(a1, a2) : true;\n        }\n\n        // STRING STREAM\n\n        // Fed to the mode parsers, provides helper functions to make\n        // parsers more succinct.\n\n        var StringStream = function StringStream(string, tabSize, lineOracle) {\n          this.pos = this.start = 0;\n          this.string = string;\n          this.tabSize = tabSize || 8;\n          this.lastColumnPos = this.lastColumnValue = 0;\n          this.lineStart = 0;\n          this.lineOracle = lineOracle;\n        };\n\n        StringStream.prototype.eol = function () {\n          return this.pos >= this.string.length;\n        };\n        StringStream.prototype.sol = function () {\n          return this.pos == this.lineStart;\n        };\n        StringStream.prototype.peek = function () {\n          return this.string.charAt(this.pos) || undefined;\n        };\n        StringStream.prototype.next = function () {\n          if (this.pos < this.string.length) {\n            return this.string.charAt(this.pos++);\n          }\n        };\n        StringStream.prototype.eat = function (match) {\n          var ch = this.string.charAt(this.pos);\n          var ok;\n          if (typeof match == \"string\") {\n            ok = ch == match;\n          } else {\n            ok = ch && (match.test ? match.test(ch) : match(ch));\n          }\n          if (ok) {\n            ++this.pos;return ch;\n          }\n        };\n        StringStream.prototype.eatWhile = function (match) {\n          var start = this.pos;\n          while (this.eat(match)) {}\n          return this.pos > start;\n        };\n        StringStream.prototype.eatSpace = function () {\n          var this$1 = this;\n\n          var start = this.pos;\n          while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n            ++this$1.pos;\n          }\n          return this.pos > start;\n        };\n        StringStream.prototype.skipToEnd = function () {\n          this.pos = this.string.length;\n        };\n        StringStream.prototype.skipTo = function (ch) {\n          var found = this.string.indexOf(ch, this.pos);\n          if (found > -1) {\n            this.pos = found;return true;\n          }\n        };\n        StringStream.prototype.backUp = function (n) {\n          this.pos -= n;\n        };\n        StringStream.prototype.column = function () {\n          if (this.lastColumnPos < this.start) {\n            this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n            this.lastColumnPos = this.start;\n          }\n          return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n        };\n        StringStream.prototype.indentation = function () {\n          return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n        };\n        StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n          if (typeof pattern == \"string\") {\n            var cased = function cased(str) {\n              return caseInsensitive ? str.toLowerCase() : str;\n            };\n            var substr = this.string.substr(this.pos, pattern.length);\n            if (cased(substr) == cased(pattern)) {\n              if (consume !== false) {\n                this.pos += pattern.length;\n              }\n              return true;\n            }\n          } else {\n            var match = this.string.slice(this.pos).match(pattern);\n            if (match && match.index > 0) {\n              return null;\n            }\n            if (match && consume !== false) {\n              this.pos += match[0].length;\n            }\n            return match;\n          }\n        };\n        StringStream.prototype.current = function () {\n          return this.string.slice(this.start, this.pos);\n        };\n        StringStream.prototype.hideFirstChars = function (n, inner) {\n          this.lineStart += n;\n          try {\n            return inner();\n          } finally {\n            this.lineStart -= n;\n          }\n        };\n        StringStream.prototype.lookAhead = function (n) {\n          var oracle = this.lineOracle;\n          return oracle && oracle.lookAhead(n);\n        };\n\n        var SavedContext = function SavedContext(state, lookAhead) {\n          this.state = state;\n          this.lookAhead = lookAhead;\n        };\n\n        var Context = function Context(doc, state, line, lookAhead) {\n          this.state = state;\n          this.doc = doc;\n          this.line = line;\n          this.maxLookAhead = lookAhead || 0;\n        };\n\n        Context.prototype.lookAhead = function (n) {\n          var line = this.doc.getLine(this.line + n);\n          if (line != null && n > this.maxLookAhead) {\n            this.maxLookAhead = n;\n          }\n          return line;\n        };\n\n        Context.prototype.nextLine = function () {\n          this.line++;\n          if (this.maxLookAhead > 0) {\n            this.maxLookAhead--;\n          }\n        };\n\n        Context.fromSaved = function (doc, saved, line) {\n          if (saved instanceof SavedContext) {\n            return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n          } else {\n            return new Context(doc, copyState(doc.mode, saved), line);\n          }\n        };\n\n        Context.prototype.save = function (copy) {\n          var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n          return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n        };\n\n        // Compute a style array (an array starting with a mode generation\n        // -- for invalidation -- followed by pairs of end positions and\n        // style strings), which is used to highlight the tokens on the\n        // line.\n        function highlightLine(cm, line, context, forceToEnd) {\n          // A styles array always starts with a number identifying the\n          // mode/overlays that it is based on (for easy invalidation).\n          var st = [cm.state.modeGen],\n              lineClasses = {};\n          // Compute the base array of styles\n          runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n            return st.push(end, style);\n          }, lineClasses, forceToEnd);\n          var state = context.state;\n\n          // Run overlays, adjust style array.\n          var loop = function loop(o) {\n            var overlay = cm.state.overlays[o],\n                i = 1,\n                at = 0;\n            context.state = true;\n            runMode(cm, line.text, overlay.mode, context, function (end, style) {\n              var start = i;\n              // Ensure there's a token end at the current position, and that i points at it\n              while (at < end) {\n                var i_end = st[i];\n                if (i_end > end) {\n                  st.splice(i, 1, end, st[i + 1], i_end);\n                }\n                i += 2;\n                at = Math.min(end, i_end);\n              }\n              if (!style) {\n                return;\n              }\n              if (overlay.opaque) {\n                st.splice(start, i - start, end, \"overlay \" + style);\n                i = start + 2;\n              } else {\n                for (; start < i; start += 2) {\n                  var cur = st[start + 1];\n                  st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n                }\n              }\n            }, lineClasses);\n          };\n\n          for (var o = 0; o < cm.state.overlays.length; ++o) {\n            loop(o);\n          }context.state = state;\n\n          return { styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null };\n        }\n\n        function getLineStyles(cm, line, updateFrontier) {\n          if (!line.styles || line.styles[0] != cm.state.modeGen) {\n            var context = getContextBefore(cm, lineNo(line));\n            var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n            var result = highlightLine(cm, line, context);\n            if (resetState) {\n              context.state = resetState;\n            }\n            line.stateAfter = context.save(!resetState);\n            line.styles = result.styles;\n            if (result.classes) {\n              line.styleClasses = result.classes;\n            } else if (line.styleClasses) {\n              line.styleClasses = null;\n            }\n            if (updateFrontier === cm.doc.highlightFrontier) {\n              cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n            }\n          }\n          return line.styles;\n        }\n\n        function getContextBefore(cm, n, precise) {\n          var doc = cm.doc,\n              display = cm.display;\n          if (!doc.mode.startState) {\n            return new Context(doc, true, n);\n          }\n          var start = findStartLine(cm, n, precise);\n          var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n          var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n          doc.iter(start, n, function (line) {\n            processLine(cm, line.text, context);\n            var pos = context.line;\n            line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n            context.nextLine();\n          });\n          if (precise) {\n            doc.modeFrontier = context.line;\n          }\n          return context;\n        }\n\n        // Lightweight form of highlight -- proceed over this line and\n        // update state, but don't save a style array. Used for lines that\n        // aren't currently visible.\n        function processLine(cm, text, context, startAt) {\n          var mode = cm.doc.mode;\n          var stream = new StringStream(text, cm.options.tabSize, context);\n          stream.start = stream.pos = startAt || 0;\n          if (text == \"\") {\n            callBlankLine(mode, context.state);\n          }\n          while (!stream.eol()) {\n            readToken(mode, stream, context.state);\n            stream.start = stream.pos;\n          }\n        }\n\n        function callBlankLine(mode, state) {\n          if (mode.blankLine) {\n            return mode.blankLine(state);\n          }\n          if (!mode.innerMode) {\n            return;\n          }\n          var inner = innerMode(mode, state);\n          if (inner.mode.blankLine) {\n            return inner.mode.blankLine(inner.state);\n          }\n        }\n\n        function readToken(mode, stream, state, inner) {\n          for (var i = 0; i < 10; i++) {\n            if (inner) {\n              inner[0] = innerMode(mode, state).mode;\n            }\n            var style = mode.token(stream, state);\n            if (stream.pos > stream.start) {\n              return style;\n            }\n          }\n          throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n        }\n\n        var Token = function Token(stream, type, state) {\n          this.start = stream.start;this.end = stream.pos;\n          this.string = stream.current();\n          this.type = type || null;\n          this.state = state;\n        };\n\n        // Utility for getTokenAt and getLineTokens\n        function takeToken(cm, pos, precise, asArray) {\n          var doc = cm.doc,\n              mode = doc.mode,\n              style;\n          pos = _clipPos(doc, pos);\n          var line = getLine(doc, pos.line),\n              context = getContextBefore(cm, pos.line, precise);\n          var stream = new StringStream(line.text, cm.options.tabSize, context),\n              tokens;\n          if (asArray) {\n            tokens = [];\n          }\n          while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n            stream.start = stream.pos;\n            style = readToken(mode, stream, context.state);\n            if (asArray) {\n              tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n            }\n          }\n          return asArray ? tokens : new Token(stream, style, context.state);\n        }\n\n        function extractLineClasses(type, output) {\n          if (type) {\n            for (;;) {\n              var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n              if (!lineClass) {\n                break;\n              }\n              type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n              var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n              if (output[prop] == null) {\n                output[prop] = lineClass[2];\n              } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n                output[prop] += \" \" + lineClass[2];\n              }\n            }\n          }\n          return type;\n        }\n\n        // Run the given mode's parser over a line, calling f for each token.\n        function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n          var flattenSpans = mode.flattenSpans;\n          if (flattenSpans == null) {\n            flattenSpans = cm.options.flattenSpans;\n          }\n          var curStart = 0,\n              curStyle = null;\n          var stream = new StringStream(text, cm.options.tabSize, context),\n              style;\n          var inner = cm.options.addModeClass && [null];\n          if (text == \"\") {\n            extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n          }\n          while (!stream.eol()) {\n            if (stream.pos > cm.options.maxHighlightLength) {\n              flattenSpans = false;\n              if (forceToEnd) {\n                processLine(cm, text, context, stream.pos);\n              }\n              stream.pos = text.length;\n              style = null;\n            } else {\n              style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n            }\n            if (inner) {\n              var mName = inner[0].name;\n              if (mName) {\n                style = \"m-\" + (style ? mName + \" \" + style : mName);\n              }\n            }\n            if (!flattenSpans || curStyle != style) {\n              while (curStart < stream.start) {\n                curStart = Math.min(stream.start, curStart + 5000);\n                f(curStart, curStyle);\n              }\n              curStyle = style;\n            }\n            stream.start = stream.pos;\n          }\n          while (curStart < stream.pos) {\n            // Webkit seems to refuse to render text nodes longer than 57444\n            // characters, and returns inaccurate measurements in nodes\n            // starting around 5000 chars.\n            var pos = Math.min(stream.pos, curStart + 5000);\n            f(pos, curStyle);\n            curStart = pos;\n          }\n        }\n\n        // Finds the line to start with when starting a parse. Tries to\n        // find a line with a stateAfter, so that it can start with a\n        // valid state. If that fails, it returns the line with the\n        // smallest indentation, which tends to need the least context to\n        // parse correctly.\n        function findStartLine(cm, n, precise) {\n          var minindent,\n              minline,\n              doc = cm.doc;\n          var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n          for (var search = n; search > lim; --search) {\n            if (search <= doc.first) {\n              return doc.first;\n            }\n            var line = getLine(doc, search - 1),\n                after = line.stateAfter;\n            if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n              return search;\n            }\n            var indented = countColumn(line.text, null, cm.options.tabSize);\n            if (minline == null || minindent > indented) {\n              minline = search - 1;\n              minindent = indented;\n            }\n          }\n          return minline;\n        }\n\n        function retreatFrontier(doc, n) {\n          doc.modeFrontier = Math.min(doc.modeFrontier, n);\n          if (doc.highlightFrontier < n - 10) {\n            return;\n          }\n          var start = doc.first;\n          for (var line = n - 1; line > start; line--) {\n            var saved = getLine(doc, line).stateAfter;\n            // change is on 3\n            // state on line 1 looked ahead 2 -- so saw 3\n            // test 1 + 2 < 3 should cover this\n            if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n              start = line + 1;\n              break;\n            }\n          }\n          doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n        }\n\n        // LINE DATA STRUCTURE\n\n        // Line objects. These hold state related to a line, including\n        // highlighting info (the styles array).\n        var Line = function Line(text, markedSpans, estimateHeight) {\n          this.text = text;\n          attachMarkedSpans(this, markedSpans);\n          this.height = estimateHeight ? estimateHeight(this) : 1;\n        };\n\n        Line.prototype.lineNo = function () {\n          return lineNo(this);\n        };\n        eventMixin(Line);\n\n        // Change the content (text, markers) of a line. Automatically\n        // invalidates cached information and tries to re-estimate the\n        // line's height.\n        function updateLine(line, text, markedSpans, estimateHeight) {\n          line.text = text;\n          if (line.stateAfter) {\n            line.stateAfter = null;\n          }\n          if (line.styles) {\n            line.styles = null;\n          }\n          if (line.order != null) {\n            line.order = null;\n          }\n          detachMarkedSpans(line);\n          attachMarkedSpans(line, markedSpans);\n          var estHeight = estimateHeight ? estimateHeight(line) : 1;\n          if (estHeight != line.height) {\n            updateLineHeight(line, estHeight);\n          }\n        }\n\n        // Detach a line from the document tree and its markers.\n        function cleanUpLine(line) {\n          line.parent = null;\n          detachMarkedSpans(line);\n        }\n\n        // Convert a style as returned by a mode (either null, or a string\n        // containing one or more styles) to a CSS style. This is cached,\n        // and also looks for line-wide styles.\n        var styleToClassCache = {};\n        var styleToClassCacheWithMode = {};\n        function interpretTokenStyle(style, options) {\n          if (!style || /^\\s*$/.test(style)) {\n            return null;\n          }\n          var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n          return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n        }\n\n        // Render the DOM representation of the text of a line. Also builds\n        // up a 'line map', which points at the DOM nodes that represent\n        // specific stretches of text, and is used by the measuring code.\n        // The returned object contains the DOM node, this map, and\n        // information about line-wide styles that were set by the mode.\n        function buildLineContent(cm, lineView) {\n          // The padding-right forces the element to have a 'border', which\n          // is needed on Webkit to be able to get line-level bounding\n          // rectangles for it (in measureChar).\n          var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n          var builder = { pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n            col: 0, pos: 0, cm: cm,\n            trailingSpace: false,\n            splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\") };\n          lineView.measure = {};\n\n          // Iterate over the logical lines that make up this visual line.\n          for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n            var line = i ? lineView.rest[i - 1] : lineView.line,\n                order = void 0;\n            builder.pos = 0;\n            builder.addToken = buildToken;\n            // Optionally wire in some hacks into the token-rendering\n            // algorithm, to deal with browser quirks.\n            if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n              builder.addToken = buildTokenBadBidi(builder.addToken, order);\n            }\n            builder.map = [];\n            var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n            insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n            if (line.styleClasses) {\n              if (line.styleClasses.bgClass) {\n                builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n              }\n              if (line.styleClasses.textClass) {\n                builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n              }\n            }\n\n            // Ensure at least a single node is present, for measuring.\n            if (builder.map.length == 0) {\n              builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n            }\n\n            // Store the map and a cache object for the current logical line\n            if (i == 0) {\n              lineView.measure.map = builder.map;\n              lineView.measure.cache = {};\n            } else {\n              (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n            }\n          }\n\n          // See issue #2901\n          if (webkit) {\n            var last = builder.content.lastChild;\n            if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n              builder.content.className = \"cm-tab-wrap-hack\";\n            }\n          }\n\n          signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n          if (builder.pre.className) {\n            builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n          }\n\n          return builder;\n        }\n\n        function defaultSpecialCharPlaceholder(ch) {\n          var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n          token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n          token.setAttribute(\"aria-label\", token.title);\n          return token;\n        }\n\n        // Build up the DOM representation for a single token, and add it to\n        // the line map. Takes care to render special characters separately.\n        function buildToken(builder, text, style, startStyle, endStyle, title, css) {\n          if (!text) {\n            return;\n          }\n          var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n          var special = builder.cm.state.specialChars,\n              mustWrap = false;\n          var content;\n          if (!special.test(text)) {\n            builder.col += text.length;\n            content = document.createTextNode(displayText);\n            builder.map.push(builder.pos, builder.pos + text.length, content);\n            if (ie && ie_version < 9) {\n              mustWrap = true;\n            }\n            builder.pos += text.length;\n          } else {\n            content = document.createDocumentFragment();\n            var pos = 0;\n            while (true) {\n              special.lastIndex = pos;\n              var m = special.exec(text);\n              var skipped = m ? m.index - pos : text.length - pos;\n              if (skipped) {\n                var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n                if (ie && ie_version < 9) {\n                  content.appendChild(elt(\"span\", [txt]));\n                } else {\n                  content.appendChild(txt);\n                }\n                builder.map.push(builder.pos, builder.pos + skipped, txt);\n                builder.col += skipped;\n                builder.pos += skipped;\n              }\n              if (!m) {\n                break;\n              }\n              pos += skipped + 1;\n              var txt$1 = void 0;\n              if (m[0] == \"\\t\") {\n                var tabSize = builder.cm.options.tabSize,\n                    tabWidth = tabSize - builder.col % tabSize;\n                txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n                txt$1.setAttribute(\"role\", \"presentation\");\n                txt$1.setAttribute(\"cm-text\", \"\\t\");\n                builder.col += tabWidth;\n              } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n                txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n                txt$1.setAttribute(\"cm-text\", m[0]);\n                builder.col += 1;\n              } else {\n                txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n                txt$1.setAttribute(\"cm-text\", m[0]);\n                if (ie && ie_version < 9) {\n                  content.appendChild(elt(\"span\", [txt$1]));\n                } else {\n                  content.appendChild(txt$1);\n                }\n                builder.col += 1;\n              }\n              builder.map.push(builder.pos, builder.pos + 1, txt$1);\n              builder.pos++;\n            }\n          }\n          builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n          if (style || startStyle || endStyle || mustWrap || css) {\n            var fullStyle = style || \"\";\n            if (startStyle) {\n              fullStyle += startStyle;\n            }\n            if (endStyle) {\n              fullStyle += endStyle;\n            }\n            var token = elt(\"span\", [content], fullStyle, css);\n            if (title) {\n              token.title = title;\n            }\n            return builder.content.appendChild(token);\n          }\n          builder.content.appendChild(content);\n        }\n\n        function splitSpaces(text, trailingBefore) {\n          if (text.length > 1 && !/  /.test(text)) {\n            return text;\n          }\n          var spaceBefore = trailingBefore,\n              result = \"\";\n          for (var i = 0; i < text.length; i++) {\n            var ch = text.charAt(i);\n            if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n              ch = \"\\xA0\";\n            }\n            result += ch;\n            spaceBefore = ch == \" \";\n          }\n          return result;\n        }\n\n        // Work around nonsense dimensions being reported for stretches of\n        // right-to-left text.\n        function buildTokenBadBidi(inner, order) {\n          return function (builder, text, style, startStyle, endStyle, title, css) {\n            style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n            var start = builder.pos,\n                end = start + text.length;\n            for (;;) {\n              // Find the part that overlaps with the start of this text\n              var part = void 0;\n              for (var i = 0; i < order.length; i++) {\n                part = order[i];\n                if (part.to > start && part.from <= start) {\n                  break;\n                }\n              }\n              if (part.to >= end) {\n                return inner(builder, text, style, startStyle, endStyle, title, css);\n              }\n              inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n              startStyle = null;\n              text = text.slice(part.to - start);\n              start = part.to;\n            }\n          };\n        }\n\n        function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n          var widget = !ignoreWidget && marker.widgetNode;\n          if (widget) {\n            builder.map.push(builder.pos, builder.pos + size, widget);\n          }\n          if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n            if (!widget) {\n              widget = builder.content.appendChild(document.createElement(\"span\"));\n            }\n            widget.setAttribute(\"cm-marker\", marker.id);\n          }\n          if (widget) {\n            builder.cm.display.input.setUneditable(widget);\n            builder.content.appendChild(widget);\n          }\n          builder.pos += size;\n          builder.trailingSpace = false;\n        }\n\n        // Outputs a number of spans to make up a line, taking highlighting\n        // and marked text into account.\n        function insertLineContent(line, builder, styles) {\n          var spans = line.markedSpans,\n              allText = line.text,\n              at = 0;\n          if (!spans) {\n            for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n              builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n            }\n            return;\n          }\n\n          var len = allText.length,\n              pos = 0,\n              i = 1,\n              text = \"\",\n              style,\n              css;\n          var nextChange = 0,\n              spanStyle,\n              spanEndStyle,\n              spanStartStyle,\n              title,\n              collapsed;\n          for (;;) {\n            if (nextChange == pos) {\n              // Update current marker set\n              spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n              collapsed = null;nextChange = Infinity;\n              var foundBookmarks = [],\n                  endStyles = void 0;\n              for (var j = 0; j < spans.length; ++j) {\n                var sp = spans[j],\n                    m = sp.marker;\n                if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n                  foundBookmarks.push(m);\n                } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n                  if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n                    nextChange = sp.to;\n                    spanEndStyle = \"\";\n                  }\n                  if (m.className) {\n                    spanStyle += \" \" + m.className;\n                  }\n                  if (m.css) {\n                    css = (css ? css + \";\" : \"\") + m.css;\n                  }\n                  if (m.startStyle && sp.from == pos) {\n                    spanStartStyle += \" \" + m.startStyle;\n                  }\n                  if (m.endStyle && sp.to == nextChange) {\n                    (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n                  }\n                  if (m.title && !title) {\n                    title = m.title;\n                  }\n                  if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n                    collapsed = sp;\n                  }\n                } else if (sp.from > pos && nextChange > sp.from) {\n                  nextChange = sp.from;\n                }\n              }\n              if (endStyles) {\n                for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n                  if (endStyles[j$1 + 1] == nextChange) {\n                    spanEndStyle += \" \" + endStyles[j$1];\n                  }\n                }\n              }\n\n              if (!collapsed || collapsed.from == pos) {\n                for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n                  buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n                }\n              }\n              if (collapsed && (collapsed.from || 0) == pos) {\n                buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n                if (collapsed.to == null) {\n                  return;\n                }\n                if (collapsed.to == pos) {\n                  collapsed = false;\n                }\n              }\n            }\n            if (pos >= len) {\n              break;\n            }\n\n            var upto = Math.min(len, nextChange);\n            while (true) {\n              if (text) {\n                var end = pos + text.length;\n                if (!collapsed) {\n                  var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n                  builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n                }\n                if (end >= upto) {\n                  text = text.slice(upto - pos);pos = upto;break;\n                }\n                pos = end;\n                spanStartStyle = \"\";\n              }\n              text = allText.slice(at, at = styles[i++]);\n              style = interpretTokenStyle(styles[i++], builder.cm.options);\n            }\n          }\n        }\n\n        // These objects are used to represent the visible (currently drawn)\n        // part of the document. A LineView may correspond to multiple\n        // logical lines, if those are connected by collapsed ranges.\n        function LineView(doc, line, lineN) {\n          // The starting line\n          this.line = line;\n          // Continuing lines, if any\n          this.rest = visualLineContinued(line);\n          // Number of logical lines in this visual line\n          this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n          this.node = this.text = null;\n          this.hidden = lineIsHidden(doc, line);\n        }\n\n        // Create a range of LineView objects for the given lines.\n        function buildViewArray(cm, from, to) {\n          var array = [],\n              nextPos;\n          for (var pos = from; pos < to; pos = nextPos) {\n            var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n            nextPos = pos + view.size;\n            array.push(view);\n          }\n          return array;\n        }\n\n        var operationGroup = null;\n\n        function pushOperation(op) {\n          if (operationGroup) {\n            operationGroup.ops.push(op);\n          } else {\n            op.ownsGroup = operationGroup = {\n              ops: [op],\n              delayedCallbacks: []\n            };\n          }\n        }\n\n        function fireCallbacksForOps(group) {\n          // Calls delayed callbacks and cursorActivity handlers until no\n          // new ones appear\n          var callbacks = group.delayedCallbacks,\n              i = 0;\n          do {\n            for (; i < callbacks.length; i++) {\n              callbacks[i].call(null);\n            }\n            for (var j = 0; j < group.ops.length; j++) {\n              var op = group.ops[j];\n              if (op.cursorActivityHandlers) {\n                while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n                  op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n                }\n              }\n            }\n          } while (i < callbacks.length);\n        }\n\n        function finishOperation(op, endCb) {\n          var group = op.ownsGroup;\n          if (!group) {\n            return;\n          }\n\n          try {\n            fireCallbacksForOps(group);\n          } finally {\n            operationGroup = null;\n            endCb(group);\n          }\n        }\n\n        var orphanDelayedCallbacks = null;\n\n        // Often, we want to signal events at a point where we are in the\n        // middle of some work, but don't want the handler to start calling\n        // other methods on the editor, which might be in an inconsistent\n        // state or simply not expect any other events to happen.\n        // signalLater looks whether there are any handlers, and schedules\n        // them to be executed when the last operation ends, or, if no\n        // operation is active, when a timeout fires.\n        function signalLater(emitter, type /*, values...*/) {\n          var arr = getHandlers(emitter, type);\n          if (!arr.length) {\n            return;\n          }\n          var args = Array.prototype.slice.call(arguments, 2),\n              list;\n          if (operationGroup) {\n            list = operationGroup.delayedCallbacks;\n          } else if (orphanDelayedCallbacks) {\n            list = orphanDelayedCallbacks;\n          } else {\n            list = orphanDelayedCallbacks = [];\n            setTimeout(fireOrphanDelayed, 0);\n          }\n          var loop = function loop(i) {\n            list.push(function () {\n              return arr[i].apply(null, args);\n            });\n          };\n\n          for (var i = 0; i < arr.length; ++i) {\n            loop(i);\n          }\n        }\n\n        function fireOrphanDelayed() {\n          var delayed = orphanDelayedCallbacks;\n          orphanDelayedCallbacks = null;\n          for (var i = 0; i < delayed.length; ++i) {\n            delayed[i]();\n          }\n        }\n\n        // When an aspect of a line changes, a string is added to\n        // lineView.changes. This updates the relevant part of the line's\n        // DOM structure.\n        function updateLineForChanges(cm, lineView, lineN, dims) {\n          for (var j = 0; j < lineView.changes.length; j++) {\n            var type = lineView.changes[j];\n            if (type == \"text\") {\n              updateLineText(cm, lineView);\n            } else if (type == \"gutter\") {\n              updateLineGutter(cm, lineView, lineN, dims);\n            } else if (type == \"class\") {\n              updateLineClasses(cm, lineView);\n            } else if (type == \"widget\") {\n              updateLineWidgets(cm, lineView, dims);\n            }\n          }\n          lineView.changes = null;\n        }\n\n        // Lines with gutter elements, widgets or a background class need to\n        // be wrapped, and have the extra elements added to the wrapper div\n        function ensureLineWrapped(lineView) {\n          if (lineView.node == lineView.text) {\n            lineView.node = elt(\"div\", null, null, \"position: relative\");\n            if (lineView.text.parentNode) {\n              lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n            }\n            lineView.node.appendChild(lineView.text);\n            if (ie && ie_version < 8) {\n              lineView.node.style.zIndex = 2;\n            }\n          }\n          return lineView.node;\n        }\n\n        function updateLineBackground(cm, lineView) {\n          var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n          if (cls) {\n            cls += \" CodeMirror-linebackground\";\n          }\n          if (lineView.background) {\n            if (cls) {\n              lineView.background.className = cls;\n            } else {\n              lineView.background.parentNode.removeChild(lineView.background);lineView.background = null;\n            }\n          } else if (cls) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n            cm.display.input.setUneditable(lineView.background);\n          }\n        }\n\n        // Wrapper around buildLineContent which will reuse the structure\n        // in display.externalMeasured when possible.\n        function getLineContent(cm, lineView) {\n          var ext = cm.display.externalMeasured;\n          if (ext && ext.line == lineView.line) {\n            cm.display.externalMeasured = null;\n            lineView.measure = ext.measure;\n            return ext.built;\n          }\n          return buildLineContent(cm, lineView);\n        }\n\n        // Redraw the line's text. Interacts with the background and text\n        // classes because the mode may output tokens that influence these\n        // classes.\n        function updateLineText(cm, lineView) {\n          var cls = lineView.text.className;\n          var built = getLineContent(cm, lineView);\n          if (lineView.text == lineView.node) {\n            lineView.node = built.pre;\n          }\n          lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n          lineView.text = built.pre;\n          if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n            lineView.bgClass = built.bgClass;\n            lineView.textClass = built.textClass;\n            updateLineClasses(cm, lineView);\n          } else if (cls) {\n            lineView.text.className = cls;\n          }\n        }\n\n        function updateLineClasses(cm, lineView) {\n          updateLineBackground(cm, lineView);\n          if (lineView.line.wrapClass) {\n            ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n          } else if (lineView.node != lineView.text) {\n            lineView.node.className = \"\";\n          }\n          var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n          lineView.text.className = textClass || \"\";\n        }\n\n        function updateLineGutter(cm, lineView, lineN, dims) {\n          if (lineView.gutter) {\n            lineView.node.removeChild(lineView.gutter);\n            lineView.gutter = null;\n          }\n          if (lineView.gutterBackground) {\n            lineView.node.removeChild(lineView.gutterBackground);\n            lineView.gutterBackground = null;\n          }\n          if (lineView.line.gutterClass) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n            cm.display.input.setUneditable(lineView.gutterBackground);\n            wrap.insertBefore(lineView.gutterBackground, lineView.text);\n          }\n          var markers = lineView.line.gutterMarkers;\n          if (cm.options.lineNumbers || markers) {\n            var wrap$1 = ensureLineWrapped(lineView);\n            var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n            cm.display.input.setUneditable(gutterWrap);\n            wrap$1.insertBefore(gutterWrap, lineView.text);\n            if (lineView.line.gutterClass) {\n              gutterWrap.className += \" \" + lineView.line.gutterClass;\n            }\n            if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n              lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n            }\n            if (markers) {\n              for (var k = 0; k < cm.options.gutters.length; ++k) {\n                var id = cm.options.gutters[k],\n                    found = markers.hasOwnProperty(id) && markers[id];\n                if (found) {\n                  gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n                }\n              }\n            }\n          }\n        }\n\n        function updateLineWidgets(cm, lineView, dims) {\n          if (lineView.alignable) {\n            lineView.alignable = null;\n          }\n          for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n            next = node.nextSibling;\n            if (node.className == \"CodeMirror-linewidget\") {\n              lineView.node.removeChild(node);\n            }\n          }\n          insertLineWidgets(cm, lineView, dims);\n        }\n\n        // Build a line's DOM representation from scratch\n        function buildLineElement(cm, lineView, lineN, dims) {\n          var built = getLineContent(cm, lineView);\n          lineView.text = lineView.node = built.pre;\n          if (built.bgClass) {\n            lineView.bgClass = built.bgClass;\n          }\n          if (built.textClass) {\n            lineView.textClass = built.textClass;\n          }\n\n          updateLineClasses(cm, lineView);\n          updateLineGutter(cm, lineView, lineN, dims);\n          insertLineWidgets(cm, lineView, dims);\n          return lineView.node;\n        }\n\n        // A lineView may contain multiple logical lines (when merged by\n        // collapsed spans). The widgets for all of them need to be drawn.\n        function insertLineWidgets(cm, lineView, dims) {\n          insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n          if (lineView.rest) {\n            for (var i = 0; i < lineView.rest.length; i++) {\n              insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n            }\n          }\n        }\n\n        function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n          if (!line.widgets) {\n            return;\n          }\n          var wrap = ensureLineWrapped(lineView);\n          for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n            var widget = ws[i],\n                node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n            if (!widget.handleMouseEvents) {\n              node.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            positionLineWidget(widget, node, lineView, dims);\n            cm.display.input.setUneditable(node);\n            if (allowAbove && widget.above) {\n              wrap.insertBefore(node, lineView.gutter || lineView.text);\n            } else {\n              wrap.appendChild(node);\n            }\n            signalLater(widget, \"redraw\");\n          }\n        }\n\n        function positionLineWidget(widget, node, lineView, dims) {\n          if (widget.noHScroll) {\n            (lineView.alignable || (lineView.alignable = [])).push(node);\n            var width = dims.wrapperWidth;\n            node.style.left = dims.fixedPos + \"px\";\n            if (!widget.coverGutter) {\n              width -= dims.gutterTotalWidth;\n              node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n            }\n            node.style.width = width + \"px\";\n          }\n          if (widget.coverGutter) {\n            node.style.zIndex = 5;\n            node.style.position = \"relative\";\n            if (!widget.noHScroll) {\n              node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n            }\n          }\n        }\n\n        function widgetHeight(widget) {\n          if (widget.height != null) {\n            return widget.height;\n          }\n          var cm = widget.doc.cm;\n          if (!cm) {\n            return 0;\n          }\n          if (!contains(document.body, widget.node)) {\n            var parentStyle = \"position: relative;\";\n            if (widget.coverGutter) {\n              parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n            }\n            if (widget.noHScroll) {\n              parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n            }\n            removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n          }\n          return widget.height = widget.node.parentNode.offsetHeight;\n        }\n\n        // Return true when the given mouse event happened in a widget\n        function eventInWidget(display, e) {\n          for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n            if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n              return true;\n            }\n          }\n        }\n\n        // POSITION MEASUREMENT\n\n        function paddingTop(display) {\n          return display.lineSpace.offsetTop;\n        }\n        function paddingVert(display) {\n          return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n        }\n        function paddingH(display) {\n          if (display.cachedPaddingH) {\n            return display.cachedPaddingH;\n          }\n          var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n          var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n          var data = { left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight) };\n          if (!isNaN(data.left) && !isNaN(data.right)) {\n            display.cachedPaddingH = data;\n          }\n          return data;\n        }\n\n        function scrollGap(cm) {\n          return scrollerGap - cm.display.nativeBarWidth;\n        }\n        function displayWidth(cm) {\n          return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n        }\n        function displayHeight(cm) {\n          return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n        }\n\n        // Ensure the lineView.wrapping.heights array is populated. This is\n        // an array of bottom offsets for the lines that make up a drawn\n        // line. When lineWrapping is on, there might be more than one\n        // height.\n        function ensureLineHeights(cm, lineView, rect) {\n          var wrapping = cm.options.lineWrapping;\n          var curWidth = wrapping && displayWidth(cm);\n          if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n            var heights = lineView.measure.heights = [];\n            if (wrapping) {\n              lineView.measure.width = curWidth;\n              var rects = lineView.text.firstChild.getClientRects();\n              for (var i = 0; i < rects.length - 1; i++) {\n                var cur = rects[i],\n                    next = rects[i + 1];\n                if (Math.abs(cur.bottom - next.bottom) > 2) {\n                  heights.push((cur.bottom + next.top) / 2 - rect.top);\n                }\n              }\n            }\n            heights.push(rect.bottom - rect.top);\n          }\n        }\n\n        // Find a line map (mapping character offsets to text nodes) and a\n        // measurement cache for the given line number. (A line view might\n        // contain multiple lines when collapsed ranges are present.)\n        function mapFromLineView(lineView, line, lineN) {\n          if (lineView.line == line) {\n            return { map: lineView.measure.map, cache: lineView.measure.cache };\n          }\n          for (var i = 0; i < lineView.rest.length; i++) {\n            if (lineView.rest[i] == line) {\n              return { map: lineView.measure.maps[i], cache: lineView.measure.caches[i] };\n            }\n          }\n          for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n            if (lineNo(lineView.rest[i$1]) > lineN) {\n              return { map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true };\n            }\n          }\n        }\n\n        // Render a line into the hidden node display.externalMeasured. Used\n        // when measurement is needed for a line that's not in the viewport.\n        function updateExternalMeasurement(cm, line) {\n          line = visualLine(line);\n          var lineN = lineNo(line);\n          var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n          view.lineN = lineN;\n          var built = view.built = buildLineContent(cm, view);\n          view.text = built.pre;\n          removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n          return view;\n        }\n\n        // Get a {top, bottom, left, right} box (in line-local coordinates)\n        // for a given character.\n        function measureChar(cm, line, ch, bias) {\n          return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n        }\n\n        // Find a line view that corresponds to the given line number.\n        function findViewForLine(cm, lineN) {\n          if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n            return cm.display.view[findViewIndex(cm, lineN)];\n          }\n          var ext = cm.display.externalMeasured;\n          if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n            return ext;\n          }\n        }\n\n        // Measurement can be split in two steps, the set-up work that\n        // applies to the whole line, and the measurement of the actual\n        // character. Functions like coordsChar, that need to do a lot of\n        // measurements in a row, can thus ensure that the set-up work is\n        // only done once.\n        function prepareMeasureForLine(cm, line) {\n          var lineN = lineNo(line);\n          var view = findViewForLine(cm, lineN);\n          if (view && !view.text) {\n            view = null;\n          } else if (view && view.changes) {\n            updateLineForChanges(cm, view, lineN, getDimensions(cm));\n            cm.curOp.forceUpdate = true;\n          }\n          if (!view) {\n            view = updateExternalMeasurement(cm, line);\n          }\n\n          var info = mapFromLineView(view, line, lineN);\n          return {\n            line: line, view: view, rect: null,\n            map: info.map, cache: info.cache, before: info.before,\n            hasHeights: false\n          };\n        }\n\n        // Given a prepared measurement object, measures the position of an\n        // actual character (or fetches it from the cache).\n        function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n          if (prepared.before) {\n            ch = -1;\n          }\n          var key = ch + (bias || \"\"),\n              found;\n          if (prepared.cache.hasOwnProperty(key)) {\n            found = prepared.cache[key];\n          } else {\n            if (!prepared.rect) {\n              prepared.rect = prepared.view.text.getBoundingClientRect();\n            }\n            if (!prepared.hasHeights) {\n              ensureLineHeights(cm, prepared.view, prepared.rect);\n              prepared.hasHeights = true;\n            }\n            found = measureCharInner(cm, prepared, ch, bias);\n            if (!found.bogus) {\n              prepared.cache[key] = found;\n            }\n          }\n          return { left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom };\n        }\n\n        var nullRect = { left: 0, right: 0, top: 0, bottom: 0 };\n\n        function nodeAndOffsetInLineMap(map$$1, ch, bias) {\n          var node, start, end, collapse, mStart, mEnd;\n          // First, search the line map for the text node corresponding to,\n          // or closest to, the target character.\n          for (var i = 0; i < map$$1.length; i += 3) {\n            mStart = map$$1[i];\n            mEnd = map$$1[i + 1];\n            if (ch < mStart) {\n              start = 0;end = 1;\n              collapse = \"left\";\n            } else if (ch < mEnd) {\n              start = ch - mStart;\n              end = start + 1;\n            } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n              end = mEnd - mStart;\n              start = end - 1;\n              if (ch >= mEnd) {\n                collapse = \"right\";\n              }\n            }\n            if (start != null) {\n              node = map$$1[i + 2];\n              if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n                collapse = bias;\n              }\n              if (bias == \"left\" && start == 0) {\n                while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n                  node = map$$1[(i -= 3) + 2];\n                  collapse = \"left\";\n                }\n              }\n              if (bias == \"right\" && start == mEnd - mStart) {\n                while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n                  node = map$$1[(i += 3) + 2];\n                  collapse = \"right\";\n                }\n              }\n              break;\n            }\n          }\n          return { node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd };\n        }\n\n        function getUsefulRect(rects, bias) {\n          var rect = nullRect;\n          if (bias == \"left\") {\n            for (var i = 0; i < rects.length; i++) {\n              if ((rect = rects[i]).left != rect.right) {\n                break;\n              }\n            }\n          } else {\n            for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n              if ((rect = rects[i$1]).left != rect.right) {\n                break;\n              }\n            }\n          }\n          return rect;\n        }\n\n        function measureCharInner(cm, prepared, ch, bias) {\n          var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n          var node = place.node,\n              start = place.start,\n              end = place.end,\n              collapse = place.collapse;\n\n          var rect;\n          if (node.nodeType == 3) {\n            // If it is a text node, use a range to retrieve the coordinates.\n            for (var i$1 = 0; i$1 < 4; i$1++) {\n              // Retry a maximum of 4 times when nonsense rectangles are returned\n              while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n                --start;\n              }\n              while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n                ++end;\n              }\n              if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n                rect = node.parentNode.getBoundingClientRect();\n              } else {\n                rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n              }\n              if (rect.left || rect.right || start == 0) {\n                break;\n              }\n              end = start;\n              start = start - 1;\n              collapse = \"right\";\n            }\n            if (ie && ie_version < 11) {\n              rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n            }\n          } else {\n            // If it is a widget, simply get the box for the whole widget.\n            if (start > 0) {\n              collapse = bias = \"right\";\n            }\n            var rects;\n            if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n              rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n            } else {\n              rect = node.getBoundingClientRect();\n            }\n          }\n          if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n            var rSpan = node.parentNode.getClientRects()[0];\n            if (rSpan) {\n              rect = { left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom };\n            } else {\n              rect = nullRect;\n            }\n          }\n\n          var rtop = rect.top - prepared.rect.top,\n              rbot = rect.bottom - prepared.rect.top;\n          var mid = (rtop + rbot) / 2;\n          var heights = prepared.view.measure.heights;\n          var i = 0;\n          for (; i < heights.length - 1; i++) {\n            if (mid < heights[i]) {\n              break;\n            }\n          }\n          var top = i ? heights[i - 1] : 0,\n              bot = heights[i];\n          var result = { left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n            right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n            top: top, bottom: bot };\n          if (!rect.left && !rect.right) {\n            result.bogus = true;\n          }\n          if (!cm.options.singleCursorHeightPerLine) {\n            result.rtop = rtop;result.rbottom = rbot;\n          }\n\n          return result;\n        }\n\n        // Work around problem with bounding client rects on ranges being\n        // returned incorrectly when zoomed on IE10 and below.\n        function maybeUpdateRectForZooming(measure, rect) {\n          if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n            return rect;\n          }\n          var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n          var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n          return { left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY };\n        }\n\n        function clearLineMeasurementCacheFor(lineView) {\n          if (lineView.measure) {\n            lineView.measure.cache = {};\n            lineView.measure.heights = null;\n            if (lineView.rest) {\n              for (var i = 0; i < lineView.rest.length; i++) {\n                lineView.measure.caches[i] = {};\n              }\n            }\n          }\n        }\n\n        function clearLineMeasurementCache(cm) {\n          cm.display.externalMeasure = null;\n          removeChildren(cm.display.lineMeasure);\n          for (var i = 0; i < cm.display.view.length; i++) {\n            clearLineMeasurementCacheFor(cm.display.view[i]);\n          }\n        }\n\n        function clearCaches(cm) {\n          clearLineMeasurementCache(cm);\n          cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n          if (!cm.options.lineWrapping) {\n            cm.display.maxLineChanged = true;\n          }\n          cm.display.lineNumChars = null;\n        }\n\n        function pageScrollX() {\n          // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n          // which causes page_Offset and bounding client rects to use\n          // different reference viewports and invalidate our calculations.\n          if (chrome && android) {\n            return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n          }\n          return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n        }\n        function pageScrollY() {\n          if (chrome && android) {\n            return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n          }\n          return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n        }\n\n        // Converts a {top, bottom, left, right} box from line-local\n        // coordinates into another coordinate system. Context may be one of\n        // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n        // or \"page\".\n        function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n          if (!includeWidgets && lineObj.widgets) {\n            for (var i = 0; i < lineObj.widgets.length; ++i) {\n              if (lineObj.widgets[i].above) {\n                var size = widgetHeight(lineObj.widgets[i]);\n                rect.top += size;rect.bottom += size;\n              }\n            }\n          }\n          if (context == \"line\") {\n            return rect;\n          }\n          if (!context) {\n            context = \"local\";\n          }\n          var yOff = _heightAtLine(lineObj);\n          if (context == \"local\") {\n            yOff += paddingTop(cm.display);\n          } else {\n            yOff -= cm.display.viewOffset;\n          }\n          if (context == \"page\" || context == \"window\") {\n            var lOff = cm.display.lineSpace.getBoundingClientRect();\n            yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n            var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n            rect.left += xOff;rect.right += xOff;\n          }\n          rect.top += yOff;rect.bottom += yOff;\n          return rect;\n        }\n\n        // Coverts a box from \"div\" coords to another coordinate system.\n        // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n        function fromCoordSystem(cm, coords, context) {\n          if (context == \"div\") {\n            return coords;\n          }\n          var left = coords.left,\n              top = coords.top;\n          // First move into \"page\" coordinate system\n          if (context == \"page\") {\n            left -= pageScrollX();\n            top -= pageScrollY();\n          } else if (context == \"local\" || !context) {\n            var localBox = cm.display.sizer.getBoundingClientRect();\n            left += localBox.left;\n            top += localBox.top;\n          }\n\n          var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n          return { left: left - lineSpaceBox.left, top: top - lineSpaceBox.top };\n        }\n\n        function _charCoords(cm, pos, context, lineObj, bias) {\n          if (!lineObj) {\n            lineObj = getLine(cm.doc, pos.line);\n          }\n          return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n        }\n\n        // Returns a box for a given cursor position, which may have an\n        // 'other' property containing the position of the secondary cursor\n        // on a bidi boundary.\n        // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n        // and after `char - 1` in writing order of `char - 1`\n        // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n        // and before `char` in writing order of `char`\n        // Examples (upper-case letters are RTL, lower-case are LTR):\n        //     Pos(0, 1, ...)\n        //     before   after\n        // ab     a|b     a|b\n        // aB     a|B     aB|\n        // Ab     |Ab     A|b\n        // AB     B|A     B|A\n        // Every position after the last character on a line is considered to stick\n        // to the last character on the line.\n        function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n          lineObj = lineObj || getLine(cm.doc, pos.line);\n          if (!preparedMeasure) {\n            preparedMeasure = prepareMeasureForLine(cm, lineObj);\n          }\n          function get(ch, right) {\n            var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n            if (right) {\n              m.left = m.right;\n            } else {\n              m.right = m.left;\n            }\n            return intoCoordSystem(cm, lineObj, m, context);\n          }\n          var order = getOrder(lineObj, cm.doc.direction),\n              ch = pos.ch,\n              sticky = pos.sticky;\n          if (ch >= lineObj.text.length) {\n            ch = lineObj.text.length;\n            sticky = \"before\";\n          } else if (ch <= 0) {\n            ch = 0;\n            sticky = \"after\";\n          }\n          if (!order) {\n            return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n          }\n\n          function getBidi(ch, partPos, invert) {\n            var part = order[partPos],\n                right = part.level % 2 != 0;\n            return get(invert ? ch - 1 : ch, right != invert);\n          }\n          var partPos = getBidiPartAt(order, ch, sticky);\n          var other = bidiOther;\n          var val = getBidi(ch, partPos, sticky == \"before\");\n          if (other != null) {\n            val.other = getBidi(ch, other, sticky != \"before\");\n          }\n          return val;\n        }\n\n        // Used to cheaply estimate the coordinates for a position. Used for\n        // intermediate scroll updates.\n        function estimateCoords(cm, pos) {\n          var left = 0;\n          pos = _clipPos(cm.doc, pos);\n          if (!cm.options.lineWrapping) {\n            left = charWidth(cm.display) * pos.ch;\n          }\n          var lineObj = getLine(cm.doc, pos.line);\n          var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n          return { left: left, right: left, top: top, bottom: top + lineObj.height };\n        }\n\n        // Positions returned by coordsChar contain some extra information.\n        // xRel is the relative x position of the input coordinates compared\n        // to the found position (so xRel > 0 means the coordinates are to\n        // the right of the character position, for example). When outside\n        // is true, that means the coordinates lie outside the line's\n        // vertical range.\n        function PosWithInfo(line, ch, sticky, outside, xRel) {\n          var pos = Pos(line, ch, sticky);\n          pos.xRel = xRel;\n          if (outside) {\n            pos.outside = true;\n          }\n          return pos;\n        }\n\n        // Compute the character position closest to the given coordinates.\n        // Input must be lineSpace-local (\"div\" coordinate system).\n        function _coordsChar(cm, x, y) {\n          var doc = cm.doc;\n          y += cm.display.viewOffset;\n          if (y < 0) {\n            return PosWithInfo(doc.first, 0, null, true, -1);\n          }\n          var lineN = _lineAtHeight(doc, y),\n              last = doc.first + doc.size - 1;\n          if (lineN > last) {\n            return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1);\n          }\n          if (x < 0) {\n            x = 0;\n          }\n\n          var lineObj = getLine(doc, lineN);\n          for (;;) {\n            var found = coordsCharInner(cm, lineObj, lineN, x, y);\n            var merged = collapsedSpanAtEnd(lineObj);\n            var mergedPos = merged && merged.find(0, true);\n            if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0)) {\n              lineN = lineNo(lineObj = mergedPos.to.line);\n            } else {\n              return found;\n            }\n          }\n        }\n\n        function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n          var measure = function measure(ch) {\n            return intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n          };\n          var end = lineObj.text.length;\n          var begin = findFirst(function (ch) {\n            return measure(ch - 1).bottom <= y;\n          }, end, 0);\n          end = findFirst(function (ch) {\n            return measure(ch).top > y;\n          }, begin, end);\n          return { begin: begin, end: end };\n        }\n\n        function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n          var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n          return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n        }\n\n        function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n          y -= _heightAtLine(lineObj);\n          var begin = 0,\n              end = lineObj.text.length;\n          var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n          var pos;\n          var order = getOrder(lineObj, cm.doc.direction);\n          if (order) {\n            if (cm.options.lineWrapping) {\n              var assign;\n              assign = wrappedLineExtent(cm, lineObj, preparedMeasure, y), begin = assign.begin, end = assign.end, assign;\n            }\n            pos = new Pos(lineNo$$1, Math.floor(begin + (end - begin) / 2));\n            var beginLeft = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left;\n            var dir = beginLeft < x ? 1 : -1;\n            var prevDiff,\n                diff = beginLeft - x,\n                prevPos;\n            var steps = Math.ceil((end - begin) / 4);\n            outer: do {\n              prevDiff = diff;\n              prevPos = pos;\n              var i = 0;\n              for (; i < steps; ++i) {\n                var prevPos$1 = pos;\n                pos = moveVisually(cm, lineObj, pos, dir);\n                if (pos == null || pos.ch < begin || end <= (pos.sticky == \"before\" ? pos.ch - 1 : pos.ch)) {\n                  pos = prevPos$1;\n                  break outer;\n                }\n              }\n              diff = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left - x;\n              if (steps > 1) {\n                var diff_change_per_step = Math.abs(diff - prevDiff) / steps;\n                steps = Math.min(steps, Math.ceil(Math.abs(diff) / diff_change_per_step));\n                dir = diff < 0 ? 1 : -1;\n              }\n            } while (diff != 0 && (steps > 1 || dir < 0 != diff < 0 && Math.abs(diff) <= Math.abs(prevDiff)));\n            if (Math.abs(diff) > Math.abs(prevDiff)) {\n              if (diff < 0 == prevDiff < 0) {\n                throw new Error(\"Broke out of infinite loop in coordsCharInner\");\n              }\n              pos = prevPos;\n            }\n          } else {\n            var ch = findFirst(function (ch) {\n              var box = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n              if (box.top > y) {\n                // For the cursor stickiness\n                end = Math.min(ch, end);\n                return true;\n              } else if (box.bottom <= y) {\n                return false;\n              } else if (box.left > x) {\n                return true;\n              } else if (box.right < x) {\n                return false;\n              } else {\n                return x - box.left < box.right - x;\n              }\n            }, begin, end);\n            ch = skipExtendingChars(lineObj.text, ch, 1);\n            pos = new Pos(lineNo$$1, ch, ch == end ? \"before\" : \"after\");\n          }\n          var coords = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure);\n          if (y < coords.top || coords.bottom < y) {\n            pos.outside = true;\n          }\n          pos.xRel = x < coords.left ? -1 : x > coords.right ? 1 : 0;\n          return pos;\n        }\n\n        var measureText;\n        // Compute the default text height.\n        function textHeight(display) {\n          if (display.cachedTextHeight != null) {\n            return display.cachedTextHeight;\n          }\n          if (measureText == null) {\n            measureText = elt(\"pre\");\n            // Measure a bunch of lines, for browsers that compute\n            // fractional heights.\n            for (var i = 0; i < 49; ++i) {\n              measureText.appendChild(document.createTextNode(\"x\"));\n              measureText.appendChild(elt(\"br\"));\n            }\n            measureText.appendChild(document.createTextNode(\"x\"));\n          }\n          removeChildrenAndAdd(display.measure, measureText);\n          var height = measureText.offsetHeight / 50;\n          if (height > 3) {\n            display.cachedTextHeight = height;\n          }\n          removeChildren(display.measure);\n          return height || 1;\n        }\n\n        // Compute the default character width.\n        function charWidth(display) {\n          if (display.cachedCharWidth != null) {\n            return display.cachedCharWidth;\n          }\n          var anchor = elt(\"span\", \"xxxxxxxxxx\");\n          var pre = elt(\"pre\", [anchor]);\n          removeChildrenAndAdd(display.measure, pre);\n          var rect = anchor.getBoundingClientRect(),\n              width = (rect.right - rect.left) / 10;\n          if (width > 2) {\n            display.cachedCharWidth = width;\n          }\n          return width || 10;\n        }\n\n        // Do a bulk-read of the DOM positions and sizes needed to draw the\n        // view, so that we don't interleave reading and writing to the DOM.\n        function getDimensions(cm) {\n          var d = cm.display,\n              left = {},\n              width = {};\n          var gutterLeft = d.gutters.clientLeft;\n          for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n            left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n            width[cm.options.gutters[i]] = n.clientWidth;\n          }\n          return { fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth };\n        }\n\n        // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n        // but using getBoundingClientRect to get a sub-pixel-accurate\n        // result.\n        function compensateForHScroll(display) {\n          return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n        }\n\n        // Returns a function that estimates the height of a line, to use as\n        // first approximation until the line becomes visible (and is thus\n        // properly measurable).\n        function estimateHeight(cm) {\n          var th = textHeight(cm.display),\n              wrapping = cm.options.lineWrapping;\n          var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n          return function (line) {\n            if (lineIsHidden(cm.doc, line)) {\n              return 0;\n            }\n\n            var widgetsHeight = 0;\n            if (line.widgets) {\n              for (var i = 0; i < line.widgets.length; i++) {\n                if (line.widgets[i].height) {\n                  widgetsHeight += line.widgets[i].height;\n                }\n              }\n            }\n\n            if (wrapping) {\n              return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n            } else {\n              return widgetsHeight + th;\n            }\n          };\n        }\n\n        function estimateLineHeights(cm) {\n          var doc = cm.doc,\n              est = estimateHeight(cm);\n          doc.iter(function (line) {\n            var estHeight = est(line);\n            if (estHeight != line.height) {\n              updateLineHeight(line, estHeight);\n            }\n          });\n        }\n\n        // Given a mouse event, find the corresponding position. If liberal\n        // is false, it checks whether a gutter or scrollbar was clicked,\n        // and returns null if it was. forRect is used by rectangular\n        // selections, and tries to estimate a character position even for\n        // coordinates beyond the right of the text.\n        function posFromMouse(cm, e, liberal, forRect) {\n          var display = cm.display;\n          if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n            return null;\n          }\n\n          var x,\n              y,\n              space = display.lineSpace.getBoundingClientRect();\n          // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n          try {\n            x = e.clientX - space.left;y = e.clientY - space.top;\n          } catch (e) {\n            return null;\n          }\n          var coords = _coordsChar(cm, x, y),\n              line;\n          if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n            var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n            coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n          }\n          return coords;\n        }\n\n        // Find the view element corresponding to a given line. Return null\n        // when the line isn't visible.\n        function findViewIndex(cm, n) {\n          if (n >= cm.display.viewTo) {\n            return null;\n          }\n          n -= cm.display.viewFrom;\n          if (n < 0) {\n            return null;\n          }\n          var view = cm.display.view;\n          for (var i = 0; i < view.length; i++) {\n            n -= view[i].size;\n            if (n < 0) {\n              return i;\n            }\n          }\n        }\n\n        function updateSelection(cm) {\n          cm.display.input.showSelection(cm.display.input.prepareSelection());\n        }\n\n        function prepareSelection(cm, primary) {\n          var doc = cm.doc,\n              result = {};\n          var curFragment = result.cursors = document.createDocumentFragment();\n          var selFragment = result.selection = document.createDocumentFragment();\n\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            if (primary === false && i == doc.sel.primIndex) {\n              continue;\n            }\n            var range$$1 = doc.sel.ranges[i];\n            if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) {\n              continue;\n            }\n            var collapsed = range$$1.empty();\n            if (collapsed || cm.options.showCursorWhenSelecting) {\n              drawSelectionCursor(cm, range$$1.head, curFragment);\n            }\n            if (!collapsed) {\n              drawSelectionRange(cm, range$$1, selFragment);\n            }\n          }\n          return result;\n        }\n\n        // Draws a cursor for the given range\n        function drawSelectionCursor(cm, head, output) {\n          var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n          var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n          cursor.style.left = pos.left + \"px\";\n          cursor.style.top = pos.top + \"px\";\n          cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n          if (pos.other) {\n            // Secondary cursor, shown when on a 'jump' in bi-directional text\n            var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n            otherCursor.style.display = \"\";\n            otherCursor.style.left = pos.other.left + \"px\";\n            otherCursor.style.top = pos.other.top + \"px\";\n            otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n          }\n        }\n\n        // Draws the given range as a highlighted selection\n        function drawSelectionRange(cm, range$$1, output) {\n          var display = cm.display,\n              doc = cm.doc;\n          var fragment = document.createDocumentFragment();\n          var padding = paddingH(cm.display),\n              leftSide = padding.left;\n          var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n\n          function add(left, top, width, bottom) {\n            if (top < 0) {\n              top = 0;\n            }\n            top = Math.round(top);\n            bottom = Math.round(bottom);\n            fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n          }\n\n          function drawForLine(line, fromArg, toArg) {\n            var lineObj = getLine(doc, line);\n            var lineLen = lineObj.text.length;\n            var start, end;\n            function coords(ch, bias) {\n              return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n            }\n\n            iterateBidiSections(getOrder(lineObj, doc.direction), fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir) {\n              var leftPos = coords(from, \"left\"),\n                  rightPos,\n                  left,\n                  right;\n              if (from == to) {\n                rightPos = leftPos;\n                left = right = leftPos.left;\n              } else {\n                rightPos = coords(to - 1, \"right\");\n                if (dir == \"rtl\") {\n                  var tmp = leftPos;leftPos = rightPos;rightPos = tmp;\n                }\n                left = leftPos.left;\n                right = rightPos.right;\n              }\n              if (fromArg == null && from == 0) {\n                left = leftSide;\n              }\n              if (rightPos.top - leftPos.top > 3) {\n                // Different lines, draw top part\n                add(left, leftPos.top, null, leftPos.bottom);\n                left = leftSide;\n                if (leftPos.bottom < rightPos.top) {\n                  add(left, leftPos.bottom, null, rightPos.top);\n                }\n              }\n              if (toArg == null && to == lineLen) {\n                right = rightSide;\n              }\n              if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left) {\n                start = leftPos;\n              }\n              if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right) {\n                end = rightPos;\n              }\n              if (left < leftSide + 1) {\n                left = leftSide;\n              }\n              add(left, rightPos.top, right - left, rightPos.bottom);\n            });\n            return { start: start, end: end };\n          }\n\n          var sFrom = range$$1.from(),\n              sTo = range$$1.to();\n          if (sFrom.line == sTo.line) {\n            drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n          } else {\n            var fromLine = getLine(doc, sFrom.line),\n                toLine = getLine(doc, sTo.line);\n            var singleVLine = visualLine(fromLine) == visualLine(toLine);\n            var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n            var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n            if (singleVLine) {\n              if (leftEnd.top < rightStart.top - 2) {\n                add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n                add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n              } else {\n                add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n              }\n            }\n            if (leftEnd.bottom < rightStart.top) {\n              add(leftSide, leftEnd.bottom, null, rightStart.top);\n            }\n          }\n\n          output.appendChild(fragment);\n        }\n\n        // Cursor-blinking\n        function restartBlink(cm) {\n          if (!cm.state.focused) {\n            return;\n          }\n          var display = cm.display;\n          clearInterval(display.blinker);\n          var on = true;\n          display.cursorDiv.style.visibility = \"\";\n          if (cm.options.cursorBlinkRate > 0) {\n            display.blinker = setInterval(function () {\n              return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n            }, cm.options.cursorBlinkRate);\n          } else if (cm.options.cursorBlinkRate < 0) {\n            display.cursorDiv.style.visibility = \"hidden\";\n          }\n        }\n\n        function ensureFocus(cm) {\n          if (!cm.state.focused) {\n            cm.display.input.focus();onFocus(cm);\n          }\n        }\n\n        function delayBlurEvent(cm) {\n          cm.state.delayingBlurEvent = true;\n          setTimeout(function () {\n            if (cm.state.delayingBlurEvent) {\n              cm.state.delayingBlurEvent = false;\n              onBlur(cm);\n            }\n          }, 100);\n        }\n\n        function onFocus(cm, e) {\n          if (cm.state.delayingBlurEvent) {\n            cm.state.delayingBlurEvent = false;\n          }\n\n          if (cm.options.readOnly == \"nocursor\") {\n            return;\n          }\n          if (!cm.state.focused) {\n            signal(cm, \"focus\", cm, e);\n            cm.state.focused = true;\n            addClass(cm.display.wrapper, \"CodeMirror-focused\");\n            // This test prevents this from firing when a context\n            // menu is closed (since the input reset would kill the\n            // select-all detection hack)\n            if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n              cm.display.input.reset();\n              if (webkit) {\n                setTimeout(function () {\n                  return cm.display.input.reset(true);\n                }, 20);\n              } // Issue #1730\n            }\n            cm.display.input.receivedFocus();\n          }\n          restartBlink(cm);\n        }\n        function onBlur(cm, e) {\n          if (cm.state.delayingBlurEvent) {\n            return;\n          }\n\n          if (cm.state.focused) {\n            signal(cm, \"blur\", cm, e);\n            cm.state.focused = false;\n            rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n          }\n          clearInterval(cm.display.blinker);\n          setTimeout(function () {\n            if (!cm.state.focused) {\n              cm.display.shift = false;\n            }\n          }, 150);\n        }\n\n        // Read the actual heights of the rendered lines, and update their\n        // stored heights to match.\n        function updateHeightsInViewport(cm) {\n          var display = cm.display;\n          var prevBottom = display.lineDiv.offsetTop;\n          for (var i = 0; i < display.view.length; i++) {\n            var cur = display.view[i],\n                height = void 0;\n            if (cur.hidden) {\n              continue;\n            }\n            if (ie && ie_version < 8) {\n              var bot = cur.node.offsetTop + cur.node.offsetHeight;\n              height = bot - prevBottom;\n              prevBottom = bot;\n            } else {\n              var box = cur.node.getBoundingClientRect();\n              height = box.bottom - box.top;\n            }\n            var diff = cur.line.height - height;\n            if (height < 2) {\n              height = textHeight(display);\n            }\n            if (diff > .005 || diff < -.005) {\n              updateLineHeight(cur.line, height);\n              updateWidgetHeight(cur.line);\n              if (cur.rest) {\n                for (var j = 0; j < cur.rest.length; j++) {\n                  updateWidgetHeight(cur.rest[j]);\n                }\n              }\n            }\n          }\n        }\n\n        // Read and store the height of line widgets associated with the\n        // given line.\n        function updateWidgetHeight(line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; ++i) {\n              line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;\n            }\n          }\n        }\n\n        // Compute the lines that are visible in a given viewport (defaults\n        // the the current scroll position). viewport may contain top,\n        // height, and ensure (see op.scrollToPos) properties.\n        function visibleLines(display, doc, viewport) {\n          var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n          top = Math.floor(top - paddingTop(display));\n          var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n          var from = _lineAtHeight(doc, top),\n              to = _lineAtHeight(doc, bottom);\n          // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n          // forces those lines into the viewport (if possible).\n          if (viewport && viewport.ensure) {\n            var ensureFrom = viewport.ensure.from.line,\n                ensureTo = viewport.ensure.to.line;\n            if (ensureFrom < from) {\n              from = ensureFrom;\n              to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n            } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n              from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n              to = ensureTo;\n            }\n          }\n          return { from: from, to: Math.max(to, from + 1) };\n        }\n\n        // Re-align line numbers and gutter marks to compensate for\n        // horizontal scrolling.\n        function alignHorizontally(cm) {\n          var display = cm.display,\n              view = display.view;\n          if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n            return;\n          }\n          var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n          var gutterW = display.gutters.offsetWidth,\n              left = comp + \"px\";\n          for (var i = 0; i < view.length; i++) {\n            if (!view[i].hidden) {\n              if (cm.options.fixedGutter) {\n                if (view[i].gutter) {\n                  view[i].gutter.style.left = left;\n                }\n                if (view[i].gutterBackground) {\n                  view[i].gutterBackground.style.left = left;\n                }\n              }\n              var align = view[i].alignable;\n              if (align) {\n                for (var j = 0; j < align.length; j++) {\n                  align[j].style.left = left;\n                }\n              }\n            }\n          }\n          if (cm.options.fixedGutter) {\n            display.gutters.style.left = comp + gutterW + \"px\";\n          }\n        }\n\n        // Used to ensure that the line number gutter is still the right\n        // size for the current document size. Returns true when an update\n        // is needed.\n        function maybeUpdateLineNumberWidth(cm) {\n          if (!cm.options.lineNumbers) {\n            return false;\n          }\n          var doc = cm.doc,\n              last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n              display = cm.display;\n          if (last.length != display.lineNumChars) {\n            var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n            var innerW = test.firstChild.offsetWidth,\n                padding = test.offsetWidth - innerW;\n            display.lineGutter.style.width = \"\";\n            display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n            display.lineNumWidth = display.lineNumInnerWidth + padding;\n            display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n            display.lineGutter.style.width = display.lineNumWidth + \"px\";\n            updateGutterSpace(cm);\n            return true;\n          }\n          return false;\n        }\n\n        // SCROLLING THINGS INTO VIEW\n\n        // If an editor sits on the top or bottom of the window, partially\n        // scrolled out of view, this ensures that the cursor is visible.\n        function maybeScrollWindow(cm, rect) {\n          if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n            return;\n          }\n\n          var display = cm.display,\n              box = display.sizer.getBoundingClientRect(),\n              doScroll = null;\n          if (rect.top + box.top < 0) {\n            doScroll = true;\n          } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n            doScroll = false;\n          }\n          if (doScroll != null && !phantom) {\n            var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n            cm.display.lineSpace.appendChild(scrollNode);\n            scrollNode.scrollIntoView(doScroll);\n            cm.display.lineSpace.removeChild(scrollNode);\n          }\n        }\n\n        // Scroll a given position into view (immediately), verifying that\n        // it actually became visible (as line heights are accurately\n        // measured, the position of something may 'drift' during drawing).\n        function scrollPosIntoView(cm, pos, end, margin) {\n          if (margin == null) {\n            margin = 0;\n          }\n          var rect;\n          if (!cm.options.lineWrapping && pos == end) {\n            // Set pos and end to the cursor positions around the character pos sticks to\n            // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n            // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n            pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n            end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n          }\n          for (var limit = 0; limit < 5; limit++) {\n            var changed = false;\n            var coords = _cursorCoords(cm, pos);\n            var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n            rect = { left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin };\n            var scrollPos = calculateScrollPos(cm, rect);\n            var startTop = cm.doc.scrollTop,\n                startLeft = cm.doc.scrollLeft;\n            if (scrollPos.scrollTop != null) {\n              updateScrollTop(cm, scrollPos.scrollTop);\n              if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n                changed = true;\n              }\n            }\n            if (scrollPos.scrollLeft != null) {\n              setScrollLeft(cm, scrollPos.scrollLeft);\n              if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n                changed = true;\n              }\n            }\n            if (!changed) {\n              break;\n            }\n          }\n          return rect;\n        }\n\n        // Scroll a given set of coordinates into view (immediately).\n        function scrollIntoView(cm, rect) {\n          var scrollPos = calculateScrollPos(cm, rect);\n          if (scrollPos.scrollTop != null) {\n            updateScrollTop(cm, scrollPos.scrollTop);\n          }\n          if (scrollPos.scrollLeft != null) {\n            setScrollLeft(cm, scrollPos.scrollLeft);\n          }\n        }\n\n        // Calculate a new scroll position needed to scroll the given\n        // rectangle into view. Returns an object with scrollTop and\n        // scrollLeft properties. When these are undefined, the\n        // vertical/horizontal position does not need to be adjusted.\n        function calculateScrollPos(cm, rect) {\n          var display = cm.display,\n              snapMargin = textHeight(cm.display);\n          if (rect.top < 0) {\n            rect.top = 0;\n          }\n          var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n          var screen = displayHeight(cm),\n              result = {};\n          if (rect.bottom - rect.top > screen) {\n            rect.bottom = rect.top + screen;\n          }\n          var docBottom = cm.doc.height + paddingVert(display);\n          var atTop = rect.top < snapMargin,\n              atBottom = rect.bottom > docBottom - snapMargin;\n          if (rect.top < screentop) {\n            result.scrollTop = atTop ? 0 : rect.top;\n          } else if (rect.bottom > screentop + screen) {\n            var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n            if (newTop != screentop) {\n              result.scrollTop = newTop;\n            }\n          }\n\n          var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n          var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n          var tooWide = rect.right - rect.left > screenw;\n          if (tooWide) {\n            rect.right = rect.left + screenw;\n          }\n          if (rect.left < 10) {\n            result.scrollLeft = 0;\n          } else if (rect.left < screenleft) {\n            result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n          } else if (rect.right > screenw + screenleft - 3) {\n            result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n          }\n          return result;\n        }\n\n        // Store a relative adjustment to the scroll position in the current\n        // operation (to be applied when the operation finishes).\n        function addToScrollTop(cm, top) {\n          if (top == null) {\n            return;\n          }\n          resolveScrollToPos(cm);\n          cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n        }\n\n        // Make sure that at the end of the operation the current cursor is\n        // shown.\n        function ensureCursorVisible(cm) {\n          resolveScrollToPos(cm);\n          var cur = cm.getCursor();\n          cm.curOp.scrollToPos = { from: cur, to: cur, margin: cm.options.cursorScrollMargin };\n        }\n\n        function scrollToCoords(cm, x, y) {\n          if (x != null || y != null) {\n            resolveScrollToPos(cm);\n          }\n          if (x != null) {\n            cm.curOp.scrollLeft = x;\n          }\n          if (y != null) {\n            cm.curOp.scrollTop = y;\n          }\n        }\n\n        function scrollToRange(cm, range$$1) {\n          resolveScrollToPos(cm);\n          cm.curOp.scrollToPos = range$$1;\n        }\n\n        // When an operation has its scrollToPos property set, and another\n        // scroll action is applied before the end of the operation, this\n        // 'simulates' scrolling that position into view in a cheap way, so\n        // that the effect of intermediate scroll commands is not ignored.\n        function resolveScrollToPos(cm) {\n          var range$$1 = cm.curOp.scrollToPos;\n          if (range$$1) {\n            cm.curOp.scrollToPos = null;\n            var from = estimateCoords(cm, range$$1.from),\n                to = estimateCoords(cm, range$$1.to);\n            scrollToCoordsRange(cm, from, to, range$$1.margin);\n          }\n        }\n\n        function scrollToCoordsRange(cm, from, to, margin) {\n          var sPos = calculateScrollPos(cm, {\n            left: Math.min(from.left, to.left),\n            top: Math.min(from.top, to.top) - margin,\n            right: Math.max(from.right, to.right),\n            bottom: Math.max(from.bottom, to.bottom) + margin\n          });\n          scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n        }\n\n        // Sync the scrollable area and scrollbars, ensure the viewport\n        // covers the visible area.\n        function updateScrollTop(cm, val) {\n          if (Math.abs(cm.doc.scrollTop - val) < 2) {\n            return;\n          }\n          if (!gecko) {\n            updateDisplaySimple(cm, { top: val });\n          }\n          setScrollTop(cm, val, true);\n          if (gecko) {\n            updateDisplaySimple(cm);\n          }\n          startWorker(cm, 100);\n        }\n\n        function setScrollTop(cm, val, forceScroll) {\n          val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n          if (cm.display.scroller.scrollTop == val && !forceScroll) {\n            return;\n          }\n          cm.doc.scrollTop = val;\n          cm.display.scrollbars.setScrollTop(val);\n          if (cm.display.scroller.scrollTop != val) {\n            cm.display.scroller.scrollTop = val;\n          }\n        }\n\n        // Sync scroller and scrollbar, ensure the gutter elements are\n        // aligned.\n        function setScrollLeft(cm, val, isScroller, forceScroll) {\n          val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n          if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n            return;\n          }\n          cm.doc.scrollLeft = val;\n          alignHorizontally(cm);\n          if (cm.display.scroller.scrollLeft != val) {\n            cm.display.scroller.scrollLeft = val;\n          }\n          cm.display.scrollbars.setScrollLeft(val);\n        }\n\n        // SCROLLBARS\n\n        // Prepare DOM reads needed to update the scrollbars. Done in one\n        // shot to minimize update/measure roundtrips.\n        function measureForScrollbars(cm) {\n          var d = cm.display,\n              gutterW = d.gutters.offsetWidth;\n          var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n          return {\n            clientHeight: d.scroller.clientHeight,\n            viewHeight: d.wrapper.clientHeight,\n            scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n            viewWidth: d.wrapper.clientWidth,\n            barLeft: cm.options.fixedGutter ? gutterW : 0,\n            docHeight: docH,\n            scrollHeight: docH + scrollGap(cm) + d.barHeight,\n            nativeBarWidth: d.nativeBarWidth,\n            gutterWidth: gutterW\n          };\n        }\n\n        var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n          this.cm = cm;\n          var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n          var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n          place(vert);place(horiz);\n\n          on(vert, \"scroll\", function () {\n            if (vert.clientHeight) {\n              scroll(vert.scrollTop, \"vertical\");\n            }\n          });\n          on(horiz, \"scroll\", function () {\n            if (horiz.clientWidth) {\n              scroll(horiz.scrollLeft, \"horizontal\");\n            }\n          });\n\n          this.checkedZeroWidth = false;\n          // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n          if (ie && ie_version < 8) {\n            this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n          }\n        };\n\n        NativeScrollbars.prototype.update = function (measure) {\n          var needsH = measure.scrollWidth > measure.clientWidth + 1;\n          var needsV = measure.scrollHeight > measure.clientHeight + 1;\n          var sWidth = measure.nativeBarWidth;\n\n          if (needsV) {\n            this.vert.style.display = \"block\";\n            this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n            var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n            // A bug in IE8 can cause this value to be negative, so guard it.\n            this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n          } else {\n            this.vert.style.display = \"\";\n            this.vert.firstChild.style.height = \"0\";\n          }\n\n          if (needsH) {\n            this.horiz.style.display = \"block\";\n            this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n            this.horiz.style.left = measure.barLeft + \"px\";\n            var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n            this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n          } else {\n            this.horiz.style.display = \"\";\n            this.horiz.firstChild.style.width = \"0\";\n          }\n\n          if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n            if (sWidth == 0) {\n              this.zeroWidthHack();\n            }\n            this.checkedZeroWidth = true;\n          }\n\n          return { right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0 };\n        };\n\n        NativeScrollbars.prototype.setScrollLeft = function (pos) {\n          if (this.horiz.scrollLeft != pos) {\n            this.horiz.scrollLeft = pos;\n          }\n          if (this.disableHoriz) {\n            this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n          }\n        };\n\n        NativeScrollbars.prototype.setScrollTop = function (pos) {\n          if (this.vert.scrollTop != pos) {\n            this.vert.scrollTop = pos;\n          }\n          if (this.disableVert) {\n            this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n          }\n        };\n\n        NativeScrollbars.prototype.zeroWidthHack = function () {\n          var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n          this.horiz.style.height = this.vert.style.width = w;\n          this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n          this.disableHoriz = new Delayed();\n          this.disableVert = new Delayed();\n        };\n\n        NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n          bar.style.pointerEvents = \"auto\";\n          function maybeDisable() {\n            // To find out whether the scrollbar is still visible, we\n            // check whether the element under the pixel in the bottom\n            // right corner of the scrollbar box is the scrollbar box\n            // itself (when the bar is still visible) or its filler child\n            // (when the bar is hidden). If it is still visible, we keep\n            // it enabled, if it's hidden, we disable pointer events.\n            var box = bar.getBoundingClientRect();\n            var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n            if (elt$$1 != bar) {\n              bar.style.pointerEvents = \"none\";\n            } else {\n              delay.set(1000, maybeDisable);\n            }\n          }\n          delay.set(1000, maybeDisable);\n        };\n\n        NativeScrollbars.prototype.clear = function () {\n          var parent = this.horiz.parentNode;\n          parent.removeChild(this.horiz);\n          parent.removeChild(this.vert);\n        };\n\n        var NullScrollbars = function NullScrollbars() {};\n\n        NullScrollbars.prototype.update = function () {\n          return { bottom: 0, right: 0 };\n        };\n        NullScrollbars.prototype.setScrollLeft = function () {};\n        NullScrollbars.prototype.setScrollTop = function () {};\n        NullScrollbars.prototype.clear = function () {};\n\n        function updateScrollbars(cm, measure) {\n          if (!measure) {\n            measure = measureForScrollbars(cm);\n          }\n          var startWidth = cm.display.barWidth,\n              startHeight = cm.display.barHeight;\n          updateScrollbarsInner(cm, measure);\n          for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n            if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n              updateHeightsInViewport(cm);\n            }\n            updateScrollbarsInner(cm, measureForScrollbars(cm));\n            startWidth = cm.display.barWidth;startHeight = cm.display.barHeight;\n          }\n        }\n\n        // Re-synchronize the fake scrollbars with the actual size of the\n        // content.\n        function updateScrollbarsInner(cm, measure) {\n          var d = cm.display;\n          var sizes = d.scrollbars.update(measure);\n\n          d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n          d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n          d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n          if (sizes.right && sizes.bottom) {\n            d.scrollbarFiller.style.display = \"block\";\n            d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n            d.scrollbarFiller.style.width = sizes.right + \"px\";\n          } else {\n            d.scrollbarFiller.style.display = \"\";\n          }\n          if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n            d.gutterFiller.style.display = \"block\";\n            d.gutterFiller.style.height = sizes.bottom + \"px\";\n            d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n          } else {\n            d.gutterFiller.style.display = \"\";\n          }\n        }\n\n        var scrollbarModel = { \"native\": NativeScrollbars, \"null\": NullScrollbars };\n\n        function initScrollbars(cm) {\n          if (cm.display.scrollbars) {\n            cm.display.scrollbars.clear();\n            if (cm.display.scrollbars.addClass) {\n              rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n            }\n          }\n\n          cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n            cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n            // Prevent clicks in the scrollbars from killing focus\n            on(node, \"mousedown\", function () {\n              if (cm.state.focused) {\n                setTimeout(function () {\n                  return cm.display.input.focus();\n                }, 0);\n              }\n            });\n            node.setAttribute(\"cm-not-content\", \"true\");\n          }, function (pos, axis) {\n            if (axis == \"horizontal\") {\n              setScrollLeft(cm, pos);\n            } else {\n              updateScrollTop(cm, pos);\n            }\n          }, cm);\n          if (cm.display.scrollbars.addClass) {\n            addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n          }\n        }\n\n        // Operations are used to wrap a series of changes to the editor\n        // state in such a way that each change won't have to update the\n        // cursor and display (which would be awkward, slow, and\n        // error-prone). Instead, display updates are batched and then all\n        // combined and executed at once.\n\n        var nextOpId = 0;\n        // Start a new operation.\n        function _startOperation(cm) {\n          cm.curOp = {\n            cm: cm,\n            viewChanged: false, // Flag that indicates that lines might need to be redrawn\n            startHeight: cm.doc.height, // Used to detect need to update scrollbar\n            forceUpdate: false, // Used to force a redraw\n            updateInput: null, // Whether to reset the input textarea\n            typing: false, // Whether this reset should be careful to leave existing text (for compositing)\n            changeObjs: null, // Accumulated changes, for firing change events\n            cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n            cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n            selectionChanged: false, // Whether the selection needs to be redrawn\n            updateMaxLine: false, // Set when the widest line needs to be determined anew\n            scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n            scrollToPos: null, // Used to scroll to a specific position\n            focus: false,\n            id: ++nextOpId // Unique ID\n          };\n          pushOperation(cm.curOp);\n        }\n\n        // Finish an operation, updating the display and signalling delayed events\n        function _endOperation(cm) {\n          var op = cm.curOp;\n          finishOperation(op, function (group) {\n            for (var i = 0; i < group.ops.length; i++) {\n              group.ops[i].cm.curOp = null;\n            }\n            endOperations(group);\n          });\n        }\n\n        // The DOM updates done when an operation finishes are batched so\n        // that the minimum number of relayouts are required.\n        function endOperations(group) {\n          var ops = group.ops;\n          for (var i = 0; i < ops.length; i++) // Read DOM\n          {\n            endOperation_R1(ops[i]);\n          }\n          for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n          {\n            endOperation_W1(ops[i$1]);\n          }\n          for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n          {\n            endOperation_R2(ops[i$2]);\n          }\n          for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n          {\n            endOperation_W2(ops[i$3]);\n          }\n          for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n          {\n            endOperation_finish(ops[i$4]);\n          }\n        }\n\n        function endOperation_R1(op) {\n          var cm = op.cm,\n              display = cm.display;\n          maybeClipScrollbars(cm);\n          if (op.updateMaxLine) {\n            findMaxLine(cm);\n          }\n\n          op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n          op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && { top: op.scrollTop, ensure: op.scrollToPos }, op.forceUpdate);\n        }\n\n        function endOperation_W1(op) {\n          op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n        }\n\n        function endOperation_R2(op) {\n          var cm = op.cm,\n              display = cm.display;\n          if (op.updatedDisplay) {\n            updateHeightsInViewport(cm);\n          }\n\n          op.barMeasure = measureForScrollbars(cm);\n\n          // If the max line changed since it was last measured, measure it,\n          // and ensure the document's width matches it.\n          // updateDisplay_W2 will use these properties to do the actual resizing\n          if (display.maxLineChanged && !cm.options.lineWrapping) {\n            op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n            cm.display.sizerWidth = op.adjustWidthTo;\n            op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n            op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n          }\n\n          if (op.updatedDisplay || op.selectionChanged) {\n            op.preparedSelection = display.input.prepareSelection(op.focus);\n          }\n        }\n\n        function endOperation_W2(op) {\n          var cm = op.cm;\n\n          if (op.adjustWidthTo != null) {\n            cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n            if (op.maxScrollLeft < cm.doc.scrollLeft) {\n              setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n            }\n            cm.display.maxLineChanged = false;\n          }\n\n          var takeFocus = op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus());\n          if (op.preparedSelection) {\n            cm.display.input.showSelection(op.preparedSelection, takeFocus);\n          }\n          if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n            updateScrollbars(cm, op.barMeasure);\n          }\n          if (op.updatedDisplay) {\n            setDocumentHeight(cm, op.barMeasure);\n          }\n\n          if (op.selectionChanged) {\n            restartBlink(cm);\n          }\n\n          if (cm.state.focused && op.updateInput) {\n            cm.display.input.reset(op.typing);\n          }\n          if (takeFocus) {\n            ensureFocus(op.cm);\n          }\n        }\n\n        function endOperation_finish(op) {\n          var cm = op.cm,\n              display = cm.display,\n              doc = cm.doc;\n\n          if (op.updatedDisplay) {\n            postUpdateDisplay(cm, op.update);\n          }\n\n          // Abort mouse wheel delta measurement, when scrolling explicitly\n          if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n            display.wheelStartX = display.wheelStartY = null;\n          }\n\n          // Propagate the scroll position to the actual DOM scroller\n          if (op.scrollTop != null) {\n            setScrollTop(cm, op.scrollTop, op.forceScroll);\n          }\n\n          if (op.scrollLeft != null) {\n            setScrollLeft(cm, op.scrollLeft, true, true);\n          }\n          // If we need to scroll a specific position into view, do so.\n          if (op.scrollToPos) {\n            var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n            maybeScrollWindow(cm, rect);\n          }\n\n          // Fire events for markers that are hidden/unidden by editing or\n          // undoing\n          var hidden = op.maybeHiddenMarkers,\n              unhidden = op.maybeUnhiddenMarkers;\n          if (hidden) {\n            for (var i = 0; i < hidden.length; ++i) {\n              if (!hidden[i].lines.length) {\n                signal(hidden[i], \"hide\");\n              }\n            }\n          }\n          if (unhidden) {\n            for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n              if (unhidden[i$1].lines.length) {\n                signal(unhidden[i$1], \"unhide\");\n              }\n            }\n          }\n\n          if (display.wrapper.offsetHeight) {\n            doc.scrollTop = cm.display.scroller.scrollTop;\n          }\n\n          // Fire change events, and delayed event handlers\n          if (op.changeObjs) {\n            signal(cm, \"changes\", cm, op.changeObjs);\n          }\n          if (op.update) {\n            op.update.finish();\n          }\n        }\n\n        // Run the given function in an operation\n        function runInOp(cm, f) {\n          if (cm.curOp) {\n            return f();\n          }\n          _startOperation(cm);\n          try {\n            return f();\n          } finally {\n            _endOperation(cm);\n          }\n        }\n        // Wraps a function in an operation. Returns the wrapped function.\n        function operation(cm, f) {\n          return function () {\n            if (cm.curOp) {\n              return f.apply(cm, arguments);\n            }\n            _startOperation(cm);\n            try {\n              return f.apply(cm, arguments);\n            } finally {\n              _endOperation(cm);\n            }\n          };\n        }\n        // Used to add methods to editor and doc instances, wrapping them in\n        // operations.\n        function methodOp(f) {\n          return function () {\n            if (this.curOp) {\n              return f.apply(this, arguments);\n            }\n            _startOperation(this);\n            try {\n              return f.apply(this, arguments);\n            } finally {\n              _endOperation(this);\n            }\n          };\n        }\n        function docMethodOp(f) {\n          return function () {\n            var cm = this.cm;\n            if (!cm || cm.curOp) {\n              return f.apply(this, arguments);\n            }\n            _startOperation(cm);\n            try {\n              return f.apply(this, arguments);\n            } finally {\n              _endOperation(cm);\n            }\n          };\n        }\n\n        // Updates the display.view data structure for a given change to the\n        // document. From and to are in pre-change coordinates. Lendiff is\n        // the amount of lines added or subtracted by the change. This is\n        // used for changes that span multiple lines, or change the way\n        // lines are divided into visual lines. regLineChange (below)\n        // registers single-line changes.\n        function regChange(cm, from, to, lendiff) {\n          if (from == null) {\n            from = cm.doc.first;\n          }\n          if (to == null) {\n            to = cm.doc.first + cm.doc.size;\n          }\n          if (!lendiff) {\n            lendiff = 0;\n          }\n\n          var display = cm.display;\n          if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n            display.updateLineNumbers = from;\n          }\n\n          cm.curOp.viewChanged = true;\n\n          if (from >= display.viewTo) {\n            // Change after\n            if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n              resetView(cm);\n            }\n          } else if (to <= display.viewFrom) {\n            // Change before\n            if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n              resetView(cm);\n            } else {\n              display.viewFrom += lendiff;\n              display.viewTo += lendiff;\n            }\n          } else if (from <= display.viewFrom && to >= display.viewTo) {\n            // Full overlap\n            resetView(cm);\n          } else if (from <= display.viewFrom) {\n            // Top overlap\n            var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cut) {\n              display.view = display.view.slice(cut.index);\n              display.viewFrom = cut.lineN;\n              display.viewTo += lendiff;\n            } else {\n              resetView(cm);\n            }\n          } else if (to >= display.viewTo) {\n            // Bottom overlap\n            var cut$1 = viewCuttingPoint(cm, from, from, -1);\n            if (cut$1) {\n              display.view = display.view.slice(0, cut$1.index);\n              display.viewTo = cut$1.lineN;\n            } else {\n              resetView(cm);\n            }\n          } else {\n            // Gap in the middle\n            var cutTop = viewCuttingPoint(cm, from, from, -1);\n            var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cutTop && cutBot) {\n              display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n              display.viewTo += lendiff;\n            } else {\n              resetView(cm);\n            }\n          }\n\n          var ext = display.externalMeasured;\n          if (ext) {\n            if (to < ext.lineN) {\n              ext.lineN += lendiff;\n            } else if (from < ext.lineN + ext.size) {\n              display.externalMeasured = null;\n            }\n          }\n        }\n\n        // Register a change to a single line. Type must be one of \"text\",\n        // \"gutter\", \"class\", \"widget\"\n        function regLineChange(cm, line, type) {\n          cm.curOp.viewChanged = true;\n          var display = cm.display,\n              ext = cm.display.externalMeasured;\n          if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n            display.externalMeasured = null;\n          }\n\n          if (line < display.viewFrom || line >= display.viewTo) {\n            return;\n          }\n          var lineView = display.view[findViewIndex(cm, line)];\n          if (lineView.node == null) {\n            return;\n          }\n          var arr = lineView.changes || (lineView.changes = []);\n          if (indexOf(arr, type) == -1) {\n            arr.push(type);\n          }\n        }\n\n        // Clear the view.\n        function resetView(cm) {\n          cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n          cm.display.view = [];\n          cm.display.viewOffset = 0;\n        }\n\n        function viewCuttingPoint(cm, oldN, newN, dir) {\n          var index = findViewIndex(cm, oldN),\n              diff,\n              view = cm.display.view;\n          if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n            return { index: index, lineN: newN };\n          }\n          var n = cm.display.viewFrom;\n          for (var i = 0; i < index; i++) {\n            n += view[i].size;\n          }\n          if (n != oldN) {\n            if (dir > 0) {\n              if (index == view.length - 1) {\n                return null;\n              }\n              diff = n + view[index].size - oldN;\n              index++;\n            } else {\n              diff = n - oldN;\n            }\n            oldN += diff;newN += diff;\n          }\n          while (visualLineNo(cm.doc, newN) != newN) {\n            if (index == (dir < 0 ? 0 : view.length - 1)) {\n              return null;\n            }\n            newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n            index += dir;\n          }\n          return { index: index, lineN: newN };\n        }\n\n        // Force the view to cover a given range, adding empty view element\n        // or clipping off existing ones as needed.\n        function adjustView(cm, from, to) {\n          var display = cm.display,\n              view = display.view;\n          if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n            display.view = buildViewArray(cm, from, to);\n            display.viewFrom = from;\n          } else {\n            if (display.viewFrom > from) {\n              display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n            } else if (display.viewFrom < from) {\n              display.view = display.view.slice(findViewIndex(cm, from));\n            }\n            display.viewFrom = from;\n            if (display.viewTo < to) {\n              display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n            } else if (display.viewTo > to) {\n              display.view = display.view.slice(0, findViewIndex(cm, to));\n            }\n          }\n          display.viewTo = to;\n        }\n\n        // Count the number of lines in the view whose DOM representation is\n        // out of date (or nonexistent).\n        function countDirtyView(cm) {\n          var view = cm.display.view,\n              dirty = 0;\n          for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n              ++dirty;\n            }\n          }\n          return dirty;\n        }\n\n        // HIGHLIGHT WORKER\n\n        function startWorker(cm, time) {\n          if (cm.doc.highlightFrontier < cm.display.viewTo) {\n            cm.state.highlight.set(time, bind(highlightWorker, cm));\n          }\n        }\n\n        function highlightWorker(cm) {\n          var doc = cm.doc;\n          if (doc.highlightFrontier >= cm.display.viewTo) {\n            return;\n          }\n          var end = +new Date() + cm.options.workTime;\n          var context = getContextBefore(cm, doc.highlightFrontier);\n          var changedLines = [];\n\n          doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n            if (context.line >= cm.display.viewFrom) {\n              // Visible\n              var oldStyles = line.styles;\n              var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n              var highlighted = highlightLine(cm, line, context, true);\n              if (resetState) {\n                context.state = resetState;\n              }\n              line.styles = highlighted.styles;\n              var oldCls = line.styleClasses,\n                  newCls = highlighted.classes;\n              if (newCls) {\n                line.styleClasses = newCls;\n              } else if (oldCls) {\n                line.styleClasses = null;\n              }\n              var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n              for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n                ischange = oldStyles[i] != line.styles[i];\n              }\n              if (ischange) {\n                changedLines.push(context.line);\n              }\n              line.stateAfter = context.save();\n              context.nextLine();\n            } else {\n              if (line.text.length <= cm.options.maxHighlightLength) {\n                processLine(cm, line.text, context);\n              }\n              line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n              context.nextLine();\n            }\n            if (+new Date() > end) {\n              startWorker(cm, cm.options.workDelay);\n              return true;\n            }\n          });\n          doc.highlightFrontier = context.line;\n          doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n          if (changedLines.length) {\n            runInOp(cm, function () {\n              for (var i = 0; i < changedLines.length; i++) {\n                regLineChange(cm, changedLines[i], \"text\");\n              }\n            });\n          }\n        }\n\n        // DISPLAY DRAWING\n\n        var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n          var display = cm.display;\n\n          this.viewport = viewport;\n          // Store some values that we'll need later (but don't want to force a relayout for)\n          this.visible = visibleLines(display, cm.doc, viewport);\n          this.editorIsHidden = !display.wrapper.offsetWidth;\n          this.wrapperHeight = display.wrapper.clientHeight;\n          this.wrapperWidth = display.wrapper.clientWidth;\n          this.oldDisplayWidth = displayWidth(cm);\n          this.force = force;\n          this.dims = getDimensions(cm);\n          this.events = [];\n        };\n\n        DisplayUpdate.prototype.signal = function (emitter, type) {\n          if (hasHandler(emitter, type)) {\n            this.events.push(arguments);\n          }\n        };\n        DisplayUpdate.prototype.finish = function () {\n          var this$1 = this;\n\n          for (var i = 0; i < this.events.length; i++) {\n            signal.apply(null, this$1.events[i]);\n          }\n        };\n\n        function maybeClipScrollbars(cm) {\n          var display = cm.display;\n          if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n            display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n            display.heightForcer.style.height = scrollGap(cm) + \"px\";\n            display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n            display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n            display.scrollbarsClipped = true;\n          }\n        }\n\n        function selectionSnapshot(cm) {\n          if (cm.hasFocus()) {\n            return null;\n          }\n          var active = activeElt();\n          if (!active || !contains(cm.display.lineDiv, active)) {\n            return null;\n          }\n          var result = { activeElt: active };\n          if (window.getSelection) {\n            var sel = window.getSelection();\n            if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n              result.anchorNode = sel.anchorNode;\n              result.anchorOffset = sel.anchorOffset;\n              result.focusNode = sel.focusNode;\n              result.focusOffset = sel.focusOffset;\n            }\n          }\n          return result;\n        }\n\n        function restoreSelection(snapshot) {\n          if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n            return;\n          }\n          snapshot.activeElt.focus();\n          if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n            var sel = window.getSelection(),\n                range$$1 = document.createRange();\n            range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n            range$$1.collapse(false);\n            sel.removeAllRanges();\n            sel.addRange(range$$1);\n            sel.extend(snapshot.focusNode, snapshot.focusOffset);\n          }\n        }\n\n        // Does the actual updating of the line display. Bails out\n        // (returning false) when there is nothing to be done and forced is\n        // false.\n        function updateDisplayIfNeeded(cm, update) {\n          var display = cm.display,\n              doc = cm.doc;\n\n          if (update.editorIsHidden) {\n            resetView(cm);\n            return false;\n          }\n\n          // Bail out if the visible area is already rendered and nothing changed.\n          if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n            return false;\n          }\n\n          if (maybeUpdateLineNumberWidth(cm)) {\n            resetView(cm);\n            update.dims = getDimensions(cm);\n          }\n\n          // Compute a suitable new viewport (from & to)\n          var end = doc.first + doc.size;\n          var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n          var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n          if (display.viewFrom < from && from - display.viewFrom < 20) {\n            from = Math.max(doc.first, display.viewFrom);\n          }\n          if (display.viewTo > to && display.viewTo - to < 20) {\n            to = Math.min(end, display.viewTo);\n          }\n          if (sawCollapsedSpans) {\n            from = visualLineNo(cm.doc, from);\n            to = visualLineEndNo(cm.doc, to);\n          }\n\n          var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n          adjustView(cm, from, to);\n\n          display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom));\n          // Position the mover div to align with the current scroll position\n          cm.display.mover.style.top = display.viewOffset + \"px\";\n\n          var toUpdate = countDirtyView(cm);\n          if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n            return false;\n          }\n\n          // For big changes, we hide the enclosing element during the\n          // update, since that speeds up the operations on most browsers.\n          var selSnapshot = selectionSnapshot(cm);\n          if (toUpdate > 4) {\n            display.lineDiv.style.display = \"none\";\n          }\n          patchDisplay(cm, display.updateLineNumbers, update.dims);\n          if (toUpdate > 4) {\n            display.lineDiv.style.display = \"\";\n          }\n          display.renderedView = display.view;\n          // There might have been a widget with a focused element that got\n          // hidden or updated, if so re-focus it.\n          restoreSelection(selSnapshot);\n\n          // Prevent selection and cursors from interfering with the scroll\n          // width and height.\n          removeChildren(display.cursorDiv);\n          removeChildren(display.selectionDiv);\n          display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n          if (different) {\n            display.lastWrapHeight = update.wrapperHeight;\n            display.lastWrapWidth = update.wrapperWidth;\n            startWorker(cm, 400);\n          }\n\n          display.updateLineNumbers = null;\n\n          return true;\n        }\n\n        function postUpdateDisplay(cm, update) {\n          var viewport = update.viewport;\n\n          for (var first = true;; first = false) {\n            if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n              // Clip forced viewport to actual scrollable area.\n              if (viewport && viewport.top != null) {\n                viewport = { top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top) };\n              }\n              // Updated line heights might result in the drawn area not\n              // actually covering the viewport. Keep looping until it does.\n              update.visible = visibleLines(cm.display, cm.doc, viewport);\n              if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n                break;\n              }\n            }\n            if (!updateDisplayIfNeeded(cm, update)) {\n              break;\n            }\n            updateHeightsInViewport(cm);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.force = false;\n          }\n\n          update.signal(cm, \"update\", cm);\n          if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n            update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n            cm.display.reportedViewFrom = cm.display.viewFrom;cm.display.reportedViewTo = cm.display.viewTo;\n          }\n        }\n\n        function updateDisplaySimple(cm, viewport) {\n          var update = new DisplayUpdate(cm, viewport);\n          if (updateDisplayIfNeeded(cm, update)) {\n            updateHeightsInViewport(cm);\n            postUpdateDisplay(cm, update);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.finish();\n          }\n        }\n\n        // Sync the actual display DOM structure with display.view, removing\n        // nodes for lines that are no longer in view, and creating the ones\n        // that are not there yet, and updating the ones that are out of\n        // date.\n        function patchDisplay(cm, updateNumbersFrom, dims) {\n          var display = cm.display,\n              lineNumbers = cm.options.lineNumbers;\n          var container = display.lineDiv,\n              cur = container.firstChild;\n\n          function rm(node) {\n            var next = node.nextSibling;\n            // Works around a throw-scroll bug in OS X Webkit\n            if (webkit && mac && cm.display.currentWheelTarget == node) {\n              node.style.display = \"none\";\n            } else {\n              node.parentNode.removeChild(node);\n            }\n            return next;\n          }\n\n          var view = display.view,\n              lineN = display.viewFrom;\n          // Loop over the elements in the view, syncing cur (the DOM nodes\n          // in display.lineDiv) with the view as we go.\n          for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (lineView.hidden) {} else if (!lineView.node || lineView.node.parentNode != container) {\n              // Not drawn yet\n              var node = buildLineElement(cm, lineView, lineN, dims);\n              container.insertBefore(node, cur);\n            } else {\n              // Already drawn\n              while (cur != lineView.node) {\n                cur = rm(cur);\n              }\n              var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n              if (lineView.changes) {\n                if (indexOf(lineView.changes, \"gutter\") > -1) {\n                  updateNumber = false;\n                }\n                updateLineForChanges(cm, lineView, lineN, dims);\n              }\n              if (updateNumber) {\n                removeChildren(lineView.lineNumber);\n                lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n              }\n              cur = lineView.node.nextSibling;\n            }\n            lineN += lineView.size;\n          }\n          while (cur) {\n            cur = rm(cur);\n          }\n        }\n\n        function updateGutterSpace(cm) {\n          var width = cm.display.gutters.offsetWidth;\n          cm.display.sizer.style.marginLeft = width + \"px\";\n        }\n\n        function setDocumentHeight(cm, measure) {\n          cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n          cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n          cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n        }\n\n        // Rebuild the gutter elements, ensure the margin to the left of the\n        // code matches their width.\n        function updateGutters(cm) {\n          var gutters = cm.display.gutters,\n              specs = cm.options.gutters;\n          removeChildren(gutters);\n          var i = 0;\n          for (; i < specs.length; ++i) {\n            var gutterClass = specs[i];\n            var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n            if (gutterClass == \"CodeMirror-linenumbers\") {\n              cm.display.lineGutter = gElt;\n              gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n            }\n          }\n          gutters.style.display = i ? \"\" : \"none\";\n          updateGutterSpace(cm);\n        }\n\n        // Make sure the gutters options contains the element\n        // \"CodeMirror-linenumbers\" when the lineNumbers option is true.\n        function setGuttersForLineNumbers(options) {\n          var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n          if (found == -1 && options.lineNumbers) {\n            options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n          } else if (found > -1 && !options.lineNumbers) {\n            options.gutters = options.gutters.slice(0);\n            options.gutters.splice(found, 1);\n          }\n        }\n\n        // Since the delta values reported on mouse wheel events are\n        // unstandardized between browsers and even browser versions, and\n        // generally horribly unpredictable, this code starts by measuring\n        // the scroll effect that the first few mouse wheel events have,\n        // and, from that, detects the way it can convert deltas to pixel\n        // offsets afterwards.\n        //\n        // The reason we want to know the amount a wheel event will scroll\n        // is that it gives us a chance to update the display before the\n        // actual scrolling happens, reducing flickering.\n\n        var wheelSamples = 0;\n        var wheelPixelsPerUnit = null;\n        // Fill in a browser-detected starting value on browsers where we\n        // know one. These don't have to be accurate -- the result of them\n        // being wrong would just be a slight flicker on the first wheel\n        // scroll (if it is large enough).\n        if (ie) {\n          wheelPixelsPerUnit = -.53;\n        } else if (gecko) {\n          wheelPixelsPerUnit = 15;\n        } else if (chrome) {\n          wheelPixelsPerUnit = -.7;\n        } else if (safari) {\n          wheelPixelsPerUnit = -1 / 3;\n        }\n\n        function wheelEventDelta(e) {\n          var dx = e.wheelDeltaX,\n              dy = e.wheelDeltaY;\n          if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n            dx = e.detail;\n          }\n          if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n            dy = e.detail;\n          } else if (dy == null) {\n            dy = e.wheelDelta;\n          }\n          return { x: dx, y: dy };\n        }\n        function wheelEventPixels(e) {\n          var delta = wheelEventDelta(e);\n          delta.x *= wheelPixelsPerUnit;\n          delta.y *= wheelPixelsPerUnit;\n          return delta;\n        }\n\n        function onScrollWheel(cm, e) {\n          var delta = wheelEventDelta(e),\n              dx = delta.x,\n              dy = delta.y;\n\n          var display = cm.display,\n              scroll = display.scroller;\n          // Quit if there's nothing to scroll here\n          var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n          var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n          if (!(dx && canScrollX || dy && canScrollY)) {\n            return;\n          }\n\n          // Webkit browsers on OS X abort momentum scrolls when the target\n          // of the scroll event is removed from the scrollable element.\n          // This hack (see related code in patchDisplay) makes sure the\n          // element is kept around.\n          if (dy && mac && webkit) {\n            outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n              for (var i = 0; i < view.length; i++) {\n                if (view[i].node == cur) {\n                  cm.display.currentWheelTarget = cur;\n                  break outer;\n                }\n              }\n            }\n          }\n\n          // On some browsers, horizontal scrolling will cause redraws to\n          // happen before the gutter has been realigned, causing it to\n          // wriggle around in a most unseemly way. When we have an\n          // estimated pixels/delta value, we just handle horizontal\n          // scrolling entirely here. It'll be slightly off from native, but\n          // better than glitching out.\n          if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n            if (dy && canScrollY) {\n              updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n            }\n            setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n            // Only prevent default scrolling if vertical scrolling is\n            // actually possible. Otherwise, it causes vertical scroll\n            // jitter on OSX trackpads when deltaX is small and deltaY\n            // is large (issue #3579)\n            if (!dy || dy && canScrollY) {\n              e_preventDefault(e);\n            }\n            display.wheelStartX = null; // Abort measurement, if in progress\n            return;\n          }\n\n          // 'Project' the visible viewport to cover the area that is being\n          // scrolled into view (if we know enough to estimate it).\n          if (dy && wheelPixelsPerUnit != null) {\n            var pixels = dy * wheelPixelsPerUnit;\n            var top = cm.doc.scrollTop,\n                bot = top + display.wrapper.clientHeight;\n            if (pixels < 0) {\n              top = Math.max(0, top + pixels - 50);\n            } else {\n              bot = Math.min(cm.doc.height, bot + pixels + 50);\n            }\n            updateDisplaySimple(cm, { top: top, bottom: bot });\n          }\n\n          if (wheelSamples < 20) {\n            if (display.wheelStartX == null) {\n              display.wheelStartX = scroll.scrollLeft;display.wheelStartY = scroll.scrollTop;\n              display.wheelDX = dx;display.wheelDY = dy;\n              setTimeout(function () {\n                if (display.wheelStartX == null) {\n                  return;\n                }\n                var movedX = scroll.scrollLeft - display.wheelStartX;\n                var movedY = scroll.scrollTop - display.wheelStartY;\n                var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n                display.wheelStartX = display.wheelStartY = null;\n                if (!sample) {\n                  return;\n                }\n                wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n                ++wheelSamples;\n              }, 200);\n            } else {\n              display.wheelDX += dx;display.wheelDY += dy;\n            }\n          }\n        }\n\n        // Selection objects are immutable. A new one is created every time\n        // the selection changes. A selection is one or more non-overlapping\n        // (and non-touching) ranges, sorted, and an integer that indicates\n        // which one is the primary selection (the one that's scrolled into\n        // view, that getCursor returns, etc).\n        var Selection = function Selection(ranges, primIndex) {\n          this.ranges = ranges;\n          this.primIndex = primIndex;\n        };\n\n        Selection.prototype.primary = function () {\n          return this.ranges[this.primIndex];\n        };\n\n        Selection.prototype.equals = function (other) {\n          var this$1 = this;\n\n          if (other == this) {\n            return true;\n          }\n          if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n            return false;\n          }\n          for (var i = 0; i < this.ranges.length; i++) {\n            var here = this$1.ranges[i],\n                there = other.ranges[i];\n            if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n              return false;\n            }\n          }\n          return true;\n        };\n\n        Selection.prototype.deepCopy = function () {\n          var this$1 = this;\n\n          var out = [];\n          for (var i = 0; i < this.ranges.length; i++) {\n            out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head));\n          }\n          return new Selection(out, this.primIndex);\n        };\n\n        Selection.prototype.somethingSelected = function () {\n          var this$1 = this;\n\n          for (var i = 0; i < this.ranges.length; i++) {\n            if (!this$1.ranges[i].empty()) {\n              return true;\n            }\n          }\n          return false;\n        };\n\n        Selection.prototype.contains = function (pos, end) {\n          var this$1 = this;\n\n          if (!end) {\n            end = pos;\n          }\n          for (var i = 0; i < this.ranges.length; i++) {\n            var range = this$1.ranges[i];\n            if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n              return i;\n            }\n          }\n          return -1;\n        };\n\n        var Range = function Range(anchor, head) {\n          this.anchor = anchor;this.head = head;\n        };\n\n        Range.prototype.from = function () {\n          return minPos(this.anchor, this.head);\n        };\n        Range.prototype.to = function () {\n          return maxPos(this.anchor, this.head);\n        };\n        Range.prototype.empty = function () {\n          return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n        };\n\n        // Take an unsorted, potentially overlapping set of ranges, and\n        // build a selection out of it. 'Consumes' ranges array (modifying\n        // it).\n        function normalizeSelection(ranges, primIndex) {\n          var prim = ranges[primIndex];\n          ranges.sort(function (a, b) {\n            return cmp(a.from(), b.from());\n          });\n          primIndex = indexOf(ranges, prim);\n          for (var i = 1; i < ranges.length; i++) {\n            var cur = ranges[i],\n                prev = ranges[i - 1];\n            if (cmp(prev.to(), cur.from()) >= 0) {\n              var from = minPos(prev.from(), cur.from()),\n                  to = maxPos(prev.to(), cur.to());\n              var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n              if (i <= primIndex) {\n                --primIndex;\n              }\n              ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n            }\n          }\n          return new Selection(ranges, primIndex);\n        }\n\n        function simpleSelection(anchor, head) {\n          return new Selection([new Range(anchor, head || anchor)], 0);\n        }\n\n        // Compute the position of the end of a change (its 'to' property\n        // refers to the pre-change end).\n        function changeEnd(change) {\n          if (!change.text) {\n            return change.to;\n          }\n          return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n        }\n\n        // Adjust a position to refer to the post-change position of the\n        // same text, or the end of the change if the change covers it.\n        function adjustForChange(pos, change) {\n          if (cmp(pos, change.from) < 0) {\n            return pos;\n          }\n          if (cmp(pos, change.to) <= 0) {\n            return changeEnd(change);\n          }\n\n          var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n              ch = pos.ch;\n          if (pos.line == change.to.line) {\n            ch += changeEnd(change).ch - change.to.ch;\n          }\n          return Pos(line, ch);\n        }\n\n        function computeSelAfterChange(doc, change) {\n          var out = [];\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            var range = doc.sel.ranges[i];\n            out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n          }\n          return normalizeSelection(out, doc.sel.primIndex);\n        }\n\n        function offsetPos(pos, old, nw) {\n          if (pos.line == old.line) {\n            return Pos(nw.line, pos.ch - old.ch + nw.ch);\n          } else {\n            return Pos(nw.line + (pos.line - old.line), pos.ch);\n          }\n        }\n\n        // Used by replaceSelections to allow moving the selection to the\n        // start or around the replaced test. Hint may be \"start\" or \"around\".\n        function computeReplacedSel(doc, changes, hint) {\n          var out = [];\n          var oldPrev = Pos(doc.first, 0),\n              newPrev = oldPrev;\n          for (var i = 0; i < changes.length; i++) {\n            var change = changes[i];\n            var from = offsetPos(change.from, oldPrev, newPrev);\n            var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n            oldPrev = change.to;\n            newPrev = to;\n            if (hint == \"around\") {\n              var range = doc.sel.ranges[i],\n                  inv = cmp(range.head, range.anchor) < 0;\n              out[i] = new Range(inv ? to : from, inv ? from : to);\n            } else {\n              out[i] = new Range(from, from);\n            }\n          }\n          return new Selection(out, doc.sel.primIndex);\n        }\n\n        // Used to get the editor into a consistent state again when options change.\n\n        function loadMode(cm) {\n          cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n          resetModeState(cm);\n        }\n\n        function resetModeState(cm) {\n          cm.doc.iter(function (line) {\n            if (line.stateAfter) {\n              line.stateAfter = null;\n            }\n            if (line.styles) {\n              line.styles = null;\n            }\n          });\n          cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n          startWorker(cm, 100);\n          cm.state.modeGen++;\n          if (cm.curOp) {\n            regChange(cm);\n          }\n        }\n\n        // DOCUMENT DATA STRUCTURE\n\n        // By default, updates that start and end at the beginning of a line\n        // are treated specially, in order to make the association of line\n        // widgets and marker elements with the text behave more intuitive.\n        function isWholeLineUpdate(doc, change) {\n          return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n        }\n\n        // Perform a change on the document data structure.\n        function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n          function spansFor(n) {\n            return markedSpans ? markedSpans[n] : null;\n          }\n          function update(line, text, spans) {\n            updateLine(line, text, spans, estimateHeight$$1);\n            signalLater(line, \"change\", line, change);\n          }\n          function linesFor(start, end) {\n            var result = [];\n            for (var i = start; i < end; ++i) {\n              result.push(new Line(text[i], spansFor(i), estimateHeight$$1));\n            }\n            return result;\n          }\n\n          var from = change.from,\n              to = change.to,\n              text = change.text;\n          var firstLine = getLine(doc, from.line),\n              lastLine = getLine(doc, to.line);\n          var lastText = lst(text),\n              lastSpans = spansFor(text.length - 1),\n              nlines = to.line - from.line;\n\n          // Adjust the line structure\n          if (change.full) {\n            doc.insert(0, linesFor(0, text.length));\n            doc.remove(text.length, doc.size - text.length);\n          } else if (isWholeLineUpdate(doc, change)) {\n            // This is a whole-line replace. Treated specially to make\n            // sure line objects move the way they are supposed to.\n            var added = linesFor(0, text.length - 1);\n            update(lastLine, lastLine.text, lastSpans);\n            if (nlines) {\n              doc.remove(from.line, nlines);\n            }\n            if (added.length) {\n              doc.insert(from.line, added);\n            }\n          } else if (firstLine == lastLine) {\n            if (text.length == 1) {\n              update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n            } else {\n              var added$1 = linesFor(1, text.length - 1);\n              added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n              update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n              doc.insert(from.line + 1, added$1);\n            }\n          } else if (text.length == 1) {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n            doc.remove(from.line + 1, nlines);\n          } else {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n            update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n            var added$2 = linesFor(1, text.length - 1);\n            if (nlines > 1) {\n              doc.remove(from.line + 1, nlines - 1);\n            }\n            doc.insert(from.line + 1, added$2);\n          }\n\n          signalLater(doc, \"change\", doc, change);\n        }\n\n        // Call f for all linked documents.\n        function linkedDocs(doc, f, sharedHistOnly) {\n          function propagate(doc, skip, sharedHist) {\n            if (doc.linked) {\n              for (var i = 0; i < doc.linked.length; ++i) {\n                var rel = doc.linked[i];\n                if (rel.doc == skip) {\n                  continue;\n                }\n                var shared = sharedHist && rel.sharedHist;\n                if (sharedHistOnly && !shared) {\n                  continue;\n                }\n                f(rel.doc, shared);\n                propagate(rel.doc, doc, shared);\n              }\n            }\n          }\n          propagate(doc, null, true);\n        }\n\n        // Attach a document to an editor.\n        function attachDoc(cm, doc) {\n          if (doc.cm) {\n            throw new Error(\"This document is already in use.\");\n          }\n          cm.doc = doc;\n          doc.cm = cm;\n          estimateLineHeights(cm);\n          loadMode(cm);\n          setDirectionClass(cm);\n          if (!cm.options.lineWrapping) {\n            findMaxLine(cm);\n          }\n          cm.options.mode = doc.modeOption;\n          regChange(cm);\n        }\n\n        function setDirectionClass(cm) {\n          (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n        }\n\n        function directionChanged(cm) {\n          runInOp(cm, function () {\n            setDirectionClass(cm);\n            regChange(cm);\n          });\n        }\n\n        function History(startGen) {\n          // Arrays of change events and selections. Doing something adds an\n          // event to done and clears undo. Undoing moves events from done\n          // to undone, redoing moves them in the other direction.\n          this.done = [];this.undone = [];\n          this.undoDepth = Infinity;\n          // Used to track when changes can be merged into a single undo\n          // event\n          this.lastModTime = this.lastSelTime = 0;\n          this.lastOp = this.lastSelOp = null;\n          this.lastOrigin = this.lastSelOrigin = null;\n          // Used by the isClean() method\n          this.generation = this.maxGeneration = startGen || 1;\n        }\n\n        // Create a history change event from an updateDoc-style change\n        // object.\n        function historyChangeFromChange(doc, change) {\n          var histChange = { from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to) };\n          attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n          linkedDocs(doc, function (doc) {\n            return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n          }, true);\n          return histChange;\n        }\n\n        // Pop all selection events off the end of a history array. Stop at\n        // a change event.\n        function clearSelectionEvents(array) {\n          while (array.length) {\n            var last = lst(array);\n            if (last.ranges) {\n              array.pop();\n            } else {\n              break;\n            }\n          }\n        }\n\n        // Find the top change event in the history. Pop off selection\n        // events that are in the way.\n        function lastChangeEvent(hist, force) {\n          if (force) {\n            clearSelectionEvents(hist.done);\n            return lst(hist.done);\n          } else if (hist.done.length && !lst(hist.done).ranges) {\n            return lst(hist.done);\n          } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n            hist.done.pop();\n            return lst(hist.done);\n          }\n        }\n\n        // Register a change in the history. Merges changes that are within\n        // a single operation, or are close together with an origin that\n        // allows merging (starting with \"+\") into a single event.\n        function addChangeToHistory(doc, change, selAfter, opId) {\n          var hist = doc.history;\n          hist.undone.length = 0;\n          var time = +new Date(),\n              cur;\n          var last;\n\n          if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n            // Merge this change into the last event\n            last = lst(cur.changes);\n            if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n              // Optimized case for simple insertion -- don't want to add\n              // new changesets for every character typed\n              last.to = changeEnd(change);\n            } else {\n              // Add new sub-event\n              cur.changes.push(historyChangeFromChange(doc, change));\n            }\n          } else {\n            // Can not be merged, start a new event.\n            var before = lst(hist.done);\n            if (!before || !before.ranges) {\n              pushSelectionToHistory(doc.sel, hist.done);\n            }\n            cur = { changes: [historyChangeFromChange(doc, change)],\n              generation: hist.generation };\n            hist.done.push(cur);\n            while (hist.done.length > hist.undoDepth) {\n              hist.done.shift();\n              if (!hist.done[0].ranges) {\n                hist.done.shift();\n              }\n            }\n          }\n          hist.done.push(selAfter);\n          hist.generation = ++hist.maxGeneration;\n          hist.lastModTime = hist.lastSelTime = time;\n          hist.lastOp = hist.lastSelOp = opId;\n          hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n          if (!last) {\n            signal(doc, \"historyAdded\");\n          }\n        }\n\n        function selectionEventCanBeMerged(doc, origin, prev, sel) {\n          var ch = origin.charAt(0);\n          return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n        }\n\n        // Called whenever the selection changes, sets the new selection as\n        // the pending selection in the history, and pushes the old pending\n        // selection into the 'done' array when it was significantly\n        // different (in number of selected ranges, emptiness, or time).\n        function addSelectionToHistory(doc, sel, opId, options) {\n          var hist = doc.history,\n              origin = options && options.origin;\n\n          // A new event is started when the previous origin does not match\n          // the current, or the origins don't allow matching. Origins\n          // starting with * are always merged, those starting with + are\n          // merged when similar and close together in time.\n          if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n            hist.done[hist.done.length - 1] = sel;\n          } else {\n            pushSelectionToHistory(sel, hist.done);\n          }\n\n          hist.lastSelTime = +new Date();\n          hist.lastSelOrigin = origin;\n          hist.lastSelOp = opId;\n          if (options && options.clearRedo !== false) {\n            clearSelectionEvents(hist.undone);\n          }\n        }\n\n        function pushSelectionToHistory(sel, dest) {\n          var top = lst(dest);\n          if (!(top && top.ranges && top.equals(sel))) {\n            dest.push(sel);\n          }\n        }\n\n        // Used to store marked span information in the history.\n        function attachLocalSpans(doc, change, from, to) {\n          var existing = change[\"spans_\" + doc.id],\n              n = 0;\n          doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n            if (line.markedSpans) {\n              (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n            }\n            ++n;\n          });\n        }\n\n        // When un/re-doing restores text containing marked spans, those\n        // that have been explicitly cleared should not be restored.\n        function removeClearedSpans(spans) {\n          if (!spans) {\n            return null;\n          }\n          var out;\n          for (var i = 0; i < spans.length; ++i) {\n            if (spans[i].marker.explicitlyCleared) {\n              if (!out) {\n                out = spans.slice(0, i);\n              }\n            } else if (out) {\n              out.push(spans[i]);\n            }\n          }\n          return !out ? spans : out.length ? out : null;\n        }\n\n        // Retrieve and filter the old marked spans stored in a change event.\n        function getOldSpans(doc, change) {\n          var found = change[\"spans_\" + doc.id];\n          if (!found) {\n            return null;\n          }\n          var nw = [];\n          for (var i = 0; i < change.text.length; ++i) {\n            nw.push(removeClearedSpans(found[i]));\n          }\n          return nw;\n        }\n\n        // Used for un/re-doing changes from the history. Combines the\n        // result of computing the existing spans with the set of spans that\n        // existed in the history (so that deleting around a span and then\n        // undoing brings back the span).\n        function mergeOldSpans(doc, change) {\n          var old = getOldSpans(doc, change);\n          var stretched = stretchSpansOverChange(doc, change);\n          if (!old) {\n            return stretched;\n          }\n          if (!stretched) {\n            return old;\n          }\n\n          for (var i = 0; i < old.length; ++i) {\n            var oldCur = old[i],\n                stretchCur = stretched[i];\n            if (oldCur && stretchCur) {\n              spans: for (var j = 0; j < stretchCur.length; ++j) {\n                var span = stretchCur[j];\n                for (var k = 0; k < oldCur.length; ++k) {\n                  if (oldCur[k].marker == span.marker) {\n                    continue spans;\n                  }\n                }\n                oldCur.push(span);\n              }\n            } else if (stretchCur) {\n              old[i] = stretchCur;\n            }\n          }\n          return old;\n        }\n\n        // Used both to provide a JSON-safe object in .getHistory, and, when\n        // detaching a document, to split the history in two\n        function copyHistoryArray(events, newGroup, instantiateSel) {\n          var copy = [];\n          for (var i = 0; i < events.length; ++i) {\n            var event = events[i];\n            if (event.ranges) {\n              copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n              continue;\n            }\n            var changes = event.changes,\n                newChanges = [];\n            copy.push({ changes: newChanges });\n            for (var j = 0; j < changes.length; ++j) {\n              var change = changes[j],\n                  m = void 0;\n              newChanges.push({ from: change.from, to: change.to, text: change.text });\n              if (newGroup) {\n                for (var prop in change) {\n                  if (m = prop.match(/^spans_(\\d+)$/)) {\n                    if (indexOf(newGroup, Number(m[1])) > -1) {\n                      lst(newChanges)[prop] = change[prop];\n                      delete change[prop];\n                    }\n                  }\n                }\n              }\n            }\n          }\n          return copy;\n        }\n\n        // The 'scroll' parameter given to many of these indicated whether\n        // the new cursor position should be scrolled into view after\n        // modifying the selection.\n\n        // If shift is held or the extend flag is set, extends a range to\n        // include a given position (and optionally a second position).\n        // Otherwise, simply returns the range between the given positions.\n        // Used for cursor motion and such.\n        function extendRange(range, head, other, extend) {\n          if (extend) {\n            var anchor = range.anchor;\n            if (other) {\n              var posBefore = cmp(head, anchor) < 0;\n              if (posBefore != cmp(other, anchor) < 0) {\n                anchor = head;\n                head = other;\n              } else if (posBefore != cmp(head, other) < 0) {\n                head = other;\n              }\n            }\n            return new Range(anchor, head);\n          } else {\n            return new Range(other || head, head);\n          }\n        }\n\n        // Extend the primary selection range, discard the rest.\n        function extendSelection(doc, head, other, options, extend) {\n          if (extend == null) {\n            extend = doc.cm && (doc.cm.display.shift || doc.extend);\n          }\n          setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n        }\n\n        // Extend all selections (pos is an array of selections with length\n        // equal the number of selections)\n        function extendSelections(doc, heads, options) {\n          var out = [];\n          var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n          }\n          var newSel = normalizeSelection(out, doc.sel.primIndex);\n          setSelection(doc, newSel, options);\n        }\n\n        // Updates a single range in the selection.\n        function replaceOneSelection(doc, i, range, options) {\n          var ranges = doc.sel.ranges.slice(0);\n          ranges[i] = range;\n          setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n        }\n\n        // Reset the selection to a single range.\n        function setSimpleSelection(doc, anchor, head, options) {\n          setSelection(doc, simpleSelection(anchor, head), options);\n        }\n\n        // Give beforeSelectionChange handlers a change to influence a\n        // selection update.\n        function filterSelectionChange(doc, sel, options) {\n          var obj = {\n            ranges: sel.ranges,\n            update: function update(ranges) {\n              var this$1 = this;\n\n              this.ranges = [];\n              for (var i = 0; i < ranges.length; i++) {\n                this$1.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n              }\n            },\n            origin: options && options.origin\n          };\n          signal(doc, \"beforeSelectionChange\", doc, obj);\n          if (doc.cm) {\n            signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n          }\n          if (obj.ranges != sel.ranges) {\n            return normalizeSelection(obj.ranges, obj.ranges.length - 1);\n          } else {\n            return sel;\n          }\n        }\n\n        function setSelectionReplaceHistory(doc, sel, options) {\n          var done = doc.history.done,\n              last = lst(done);\n          if (last && last.ranges) {\n            done[done.length - 1] = sel;\n            setSelectionNoUndo(doc, sel, options);\n          } else {\n            setSelection(doc, sel, options);\n          }\n        }\n\n        // Set a new selection.\n        function setSelection(doc, sel, options) {\n          setSelectionNoUndo(doc, sel, options);\n          addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n        }\n\n        function setSelectionNoUndo(doc, sel, options) {\n          if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n            sel = filterSelectionChange(doc, sel, options);\n          }\n\n          var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n          setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n          if (!(options && options.scroll === false) && doc.cm) {\n            ensureCursorVisible(doc.cm);\n          }\n        }\n\n        function setSelectionInner(doc, sel) {\n          if (sel.equals(doc.sel)) {\n            return;\n          }\n\n          doc.sel = sel;\n\n          if (doc.cm) {\n            doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n            signalCursorActivity(doc.cm);\n          }\n          signalLater(doc, \"cursorActivity\", doc);\n        }\n\n        // Verify that the selection does not partially select any atomic\n        // marked ranges.\n        function reCheckSelection(doc) {\n          setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n        }\n\n        // Return a selection that does not partially select any atomic\n        // ranges.\n        function skipAtomicInSelection(doc, sel, bias, mayClear) {\n          var out;\n          for (var i = 0; i < sel.ranges.length; i++) {\n            var range = sel.ranges[i];\n            var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n            var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n            var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n            if (out || newAnchor != range.anchor || newHead != range.head) {\n              if (!out) {\n                out = sel.ranges.slice(0, i);\n              }\n              out[i] = new Range(newAnchor, newHead);\n            }\n          }\n          return out ? normalizeSelection(out, sel.primIndex) : sel;\n        }\n\n        function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n          var line = getLine(doc, pos.line);\n          if (line.markedSpans) {\n            for (var i = 0; i < line.markedSpans.length; ++i) {\n              var sp = line.markedSpans[i],\n                  m = sp.marker;\n              if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n                if (mayClear) {\n                  signal(m, \"beforeCursorEnter\");\n                  if (m.explicitlyCleared) {\n                    if (!line.markedSpans) {\n                      break;\n                    } else {\n                      --i;continue;\n                    }\n                  }\n                }\n                if (!m.atomic) {\n                  continue;\n                }\n\n                if (oldPos) {\n                  var near = m.find(dir < 0 ? 1 : -1),\n                      diff = void 0;\n                  if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft) {\n                    near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n                  }\n                  if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n                    return skipAtomicInner(doc, near, pos, dir, mayClear);\n                  }\n                }\n\n                var far = m.find(dir < 0 ? -1 : 1);\n                if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight) {\n                  far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n                }\n                return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n              }\n            }\n          }\n          return pos;\n        }\n\n        // Ensure a given position is not inside an atomic range.\n        function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n          var dir = bias || 1;\n          var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n          if (!found) {\n            doc.cantEdit = true;\n            return Pos(doc.first, 0);\n          }\n          return found;\n        }\n\n        function movePos(doc, pos, dir, line) {\n          if (dir < 0 && pos.ch == 0) {\n            if (pos.line > doc.first) {\n              return _clipPos(doc, Pos(pos.line - 1));\n            } else {\n              return null;\n            }\n          } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n            if (pos.line < doc.first + doc.size - 1) {\n              return Pos(pos.line + 1, 0);\n            } else {\n              return null;\n            }\n          } else {\n            return new Pos(pos.line, pos.ch + dir);\n          }\n        }\n\n        function selectAll(cm) {\n          cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n        }\n\n        // UPDATING\n\n        // Allow \"beforeChange\" event handlers to influence a change\n        function filterChange(doc, change, update) {\n          var obj = {\n            canceled: false,\n            from: change.from,\n            to: change.to,\n            text: change.text,\n            origin: change.origin,\n            cancel: function cancel() {\n              return obj.canceled = true;\n            }\n          };\n          if (update) {\n            obj.update = function (from, to, text, origin) {\n              if (from) {\n                obj.from = _clipPos(doc, from);\n              }\n              if (to) {\n                obj.to = _clipPos(doc, to);\n              }\n              if (text) {\n                obj.text = text;\n              }\n              if (origin !== undefined) {\n                obj.origin = origin;\n              }\n            };\n          }\n          signal(doc, \"beforeChange\", doc, obj);\n          if (doc.cm) {\n            signal(doc.cm, \"beforeChange\", doc.cm, obj);\n          }\n\n          if (obj.canceled) {\n            return null;\n          }\n          return { from: obj.from, to: obj.to, text: obj.text, origin: obj.origin };\n        }\n\n        // Apply a change to a document, and add it to the document's\n        // history, and propagating it to all linked documents.\n        function makeChange(doc, change, ignoreReadOnly) {\n          if (doc.cm) {\n            if (!doc.cm.curOp) {\n              return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n            }\n            if (doc.cm.state.suppressEdits) {\n              return;\n            }\n          }\n\n          if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n            change = filterChange(doc, change, true);\n            if (!change) {\n              return;\n            }\n          }\n\n          // Possibly split or suppress the update based on the presence\n          // of read-only spans in its range.\n          var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n          if (split) {\n            for (var i = split.length - 1; i >= 0; --i) {\n              makeChangeInner(doc, { from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin });\n            }\n          } else {\n            makeChangeInner(doc, change);\n          }\n        }\n\n        function makeChangeInner(doc, change) {\n          if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n            return;\n          }\n          var selAfter = computeSelAfterChange(doc, change);\n          addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n          makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n          var rebased = [];\n\n          linkedDocs(doc, function (doc, sharedHist) {\n            if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n              rebaseHist(doc.history, change);\n              rebased.push(doc.history);\n            }\n            makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n          });\n        }\n\n        // Revert a change stored in a document's history.\n        function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n          if (doc.cm && doc.cm.state.suppressEdits && !allowSelectionOnly) {\n            return;\n          }\n\n          var hist = doc.history,\n              event,\n              selAfter = doc.sel;\n          var source = type == \"undo\" ? hist.done : hist.undone,\n              dest = type == \"undo\" ? hist.undone : hist.done;\n\n          // Verify that there is a useable event (so that ctrl-z won't\n          // needlessly clear selection events)\n          var i = 0;\n          for (; i < source.length; i++) {\n            event = source[i];\n            if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n              break;\n            }\n          }\n          if (i == source.length) {\n            return;\n          }\n          hist.lastOrigin = hist.lastSelOrigin = null;\n\n          for (;;) {\n            event = source.pop();\n            if (event.ranges) {\n              pushSelectionToHistory(event, dest);\n              if (allowSelectionOnly && !event.equals(doc.sel)) {\n                setSelection(doc, event, { clearRedo: false });\n                return;\n              }\n              selAfter = event;\n            } else {\n              break;\n            }\n          }\n\n          // Build up a reverse change object to add to the opposite history\n          // stack (redo when undoing, and vice versa).\n          var antiChanges = [];\n          pushSelectionToHistory(selAfter, dest);\n          dest.push({ changes: antiChanges, generation: hist.generation });\n          hist.generation = event.generation || ++hist.maxGeneration;\n\n          var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n          var loop = function loop(i) {\n            var change = event.changes[i];\n            change.origin = type;\n            if (filter && !filterChange(doc, change, false)) {\n              source.length = 0;\n              return {};\n            }\n\n            antiChanges.push(historyChangeFromChange(doc, change));\n\n            var after = i ? computeSelAfterChange(doc, change) : lst(source);\n            makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n            if (!i && doc.cm) {\n              doc.cm.scrollIntoView({ from: change.from, to: changeEnd(change) });\n            }\n            var rebased = [];\n\n            // Propagate to the linked documents\n            linkedDocs(doc, function (doc, sharedHist) {\n              if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n                rebaseHist(doc.history, change);\n                rebased.push(doc.history);\n              }\n              makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n            });\n          };\n\n          for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n            var returned = loop(i$1);\n\n            if (returned) return returned.v;\n          }\n        }\n\n        // Sub-views need their line numbers shifted when text is added\n        // above or below them in the parent document.\n        function shiftDoc(doc, distance) {\n          if (distance == 0) {\n            return;\n          }\n          doc.first += distance;\n          doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n            return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n          }), doc.sel.primIndex);\n          if (doc.cm) {\n            regChange(doc.cm, doc.first, doc.first - distance, distance);\n            for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n              regLineChange(doc.cm, l, \"gutter\");\n            }\n          }\n        }\n\n        // More lower-level change function, handling only a single document\n        // (not linked ones).\n        function makeChangeSingleDoc(doc, change, selAfter, spans) {\n          if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n          }\n\n          if (change.to.line < doc.first) {\n            shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n            return;\n          }\n          if (change.from.line > doc.lastLine()) {\n            return;\n          }\n\n          // Clip the change to the size of this doc\n          if (change.from.line < doc.first) {\n            var shift = change.text.length - 1 - (doc.first - change.from.line);\n            shiftDoc(doc, shift);\n            change = { from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin };\n          }\n          var last = doc.lastLine();\n          if (change.to.line > last) {\n            change = { from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin };\n          }\n\n          change.removed = getBetween(doc, change.from, change.to);\n\n          if (!selAfter) {\n            selAfter = computeSelAfterChange(doc, change);\n          }\n          if (doc.cm) {\n            makeChangeSingleDocInEditor(doc.cm, change, spans);\n          } else {\n            updateDoc(doc, change, spans);\n          }\n          setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n        }\n\n        // Handle the interaction of a change to a document with the editor\n        // that this document is part of.\n        function makeChangeSingleDocInEditor(cm, change, spans) {\n          var doc = cm.doc,\n              display = cm.display,\n              from = change.from,\n              to = change.to;\n\n          var recomputeMaxLength = false,\n              checkWidthStart = from.line;\n          if (!cm.options.lineWrapping) {\n            checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n            doc.iter(checkWidthStart, to.line + 1, function (line) {\n              if (line == display.maxLine) {\n                recomputeMaxLength = true;\n                return true;\n              }\n            });\n          }\n\n          if (doc.sel.contains(change.from, change.to) > -1) {\n            signalCursorActivity(cm);\n          }\n\n          updateDoc(doc, change, spans, estimateHeight(cm));\n\n          if (!cm.options.lineWrapping) {\n            doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n              var len = lineLength(line);\n              if (len > display.maxLineLength) {\n                display.maxLine = line;\n                display.maxLineLength = len;\n                display.maxLineChanged = true;\n                recomputeMaxLength = false;\n              }\n            });\n            if (recomputeMaxLength) {\n              cm.curOp.updateMaxLine = true;\n            }\n          }\n\n          retreatFrontier(doc, from.line);\n          startWorker(cm, 400);\n\n          var lendiff = change.text.length - (to.line - from.line) - 1;\n          // Remember that these lines changed, for updating the display\n          if (change.full) {\n            regChange(cm);\n          } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n            regLineChange(cm, from.line, \"text\");\n          } else {\n            regChange(cm, from.line, to.line + 1, lendiff);\n          }\n\n          var changesHandler = hasHandler(cm, \"changes\"),\n              changeHandler = hasHandler(cm, \"change\");\n          if (changeHandler || changesHandler) {\n            var obj = {\n              from: from, to: to,\n              text: change.text,\n              removed: change.removed,\n              origin: change.origin\n            };\n            if (changeHandler) {\n              signalLater(cm, \"change\", cm, obj);\n            }\n            if (changesHandler) {\n              (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n            }\n          }\n          cm.display.selForContextMenu = null;\n        }\n\n        function _replaceRange(doc, code, from, to, origin) {\n          if (!to) {\n            to = from;\n          }\n          if (cmp(to, from) < 0) {\n            var tmp = to;to = from;from = tmp;\n          }\n          if (typeof code == \"string\") {\n            code = doc.splitLines(code);\n          }\n          makeChange(doc, { from: from, to: to, text: code, origin: origin });\n        }\n\n        // Rebasing/resetting history to deal with externally-sourced changes\n\n        function rebaseHistSelSingle(pos, from, to, diff) {\n          if (to < pos.line) {\n            pos.line += diff;\n          } else if (from < pos.line) {\n            pos.line = from;\n            pos.ch = 0;\n          }\n        }\n\n        // Tries to rebase an array of history events given a change in the\n        // document. If the change touches the same lines as the event, the\n        // event, and everything 'behind' it, is discarded. If the change is\n        // before the event, the event's positions are updated. Uses a\n        // copy-on-write scheme for the positions, to avoid having to\n        // reallocate them all on every rebase, but also avoid problems with\n        // shared position objects being unsafely updated.\n        function rebaseHistArray(array, from, to, diff) {\n          for (var i = 0; i < array.length; ++i) {\n            var sub = array[i],\n                ok = true;\n            if (sub.ranges) {\n              if (!sub.copied) {\n                sub = array[i] = sub.deepCopy();sub.copied = true;\n              }\n              for (var j = 0; j < sub.ranges.length; j++) {\n                rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n                rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n              }\n              continue;\n            }\n            for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n              var cur = sub.changes[j$1];\n              if (to < cur.from.line) {\n                cur.from = Pos(cur.from.line + diff, cur.from.ch);\n                cur.to = Pos(cur.to.line + diff, cur.to.ch);\n              } else if (from <= cur.to.line) {\n                ok = false;\n                break;\n              }\n            }\n            if (!ok) {\n              array.splice(0, i + 1);\n              i = 0;\n            }\n          }\n        }\n\n        function rebaseHist(hist, change) {\n          var from = change.from.line,\n              to = change.to.line,\n              diff = change.text.length - (to - from) - 1;\n          rebaseHistArray(hist.done, from, to, diff);\n          rebaseHistArray(hist.undone, from, to, diff);\n        }\n\n        // Utility for applying a change to a line by handle or number,\n        // returning the number and optionally registering the line as\n        // changed.\n        function changeLine(doc, handle, changeType, op) {\n          var no = handle,\n              line = handle;\n          if (typeof handle == \"number\") {\n            line = getLine(doc, clipLine(doc, handle));\n          } else {\n            no = lineNo(handle);\n          }\n          if (no == null) {\n            return null;\n          }\n          if (op(line, no) && doc.cm) {\n            regLineChange(doc.cm, no, changeType);\n          }\n          return line;\n        }\n\n        // The document is represented as a BTree consisting of leaves, with\n        // chunk of lines in them, and branches, with up to ten leaves or\n        // other branch nodes below them. The top node is always a branch\n        // node, and is the document object itself (meaning it has\n        // additional methods and properties).\n        //\n        // All nodes have parent links. The tree is used both to go from\n        // line numbers to line objects, and to go from objects to numbers.\n        // It also indexes by height, and is used to convert between height\n        // and line object, and to find the total height of the document.\n        //\n        // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n        function LeafChunk(lines) {\n          var this$1 = this;\n\n          this.lines = lines;\n          this.parent = null;\n          var height = 0;\n          for (var i = 0; i < lines.length; ++i) {\n            lines[i].parent = this$1;\n            height += lines[i].height;\n          }\n          this.height = height;\n        }\n\n        LeafChunk.prototype = {\n          chunkSize: function chunkSize() {\n            return this.lines.length;\n          },\n\n          // Remove the n lines at offset 'at'.\n          removeInner: function removeInner(at, n) {\n            var this$1 = this;\n\n            for (var i = at, e = at + n; i < e; ++i) {\n              var line = this$1.lines[i];\n              this$1.height -= line.height;\n              cleanUpLine(line);\n              signalLater(line, \"delete\");\n            }\n            this.lines.splice(at, n);\n          },\n\n          // Helper used to collapse a small branch into a single leaf.\n          collapse: function collapse(lines) {\n            lines.push.apply(lines, this.lines);\n          },\n\n          // Insert the given array of lines at offset 'at', count them as\n          // having the given height.\n          insertInner: function insertInner(at, lines, height) {\n            var this$1 = this;\n\n            this.height += height;\n            this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n            for (var i = 0; i < lines.length; ++i) {\n              lines[i].parent = this$1;\n            }\n          },\n\n          // Used to iterate over a part of the tree.\n          iterN: function iterN(at, n, op) {\n            var this$1 = this;\n\n            for (var e = at + n; at < e; ++at) {\n              if (op(this$1.lines[at])) {\n                return true;\n              }\n            }\n          }\n        };\n\n        function BranchChunk(children) {\n          var this$1 = this;\n\n          this.children = children;\n          var size = 0,\n              height = 0;\n          for (var i = 0; i < children.length; ++i) {\n            var ch = children[i];\n            size += ch.chunkSize();height += ch.height;\n            ch.parent = this$1;\n          }\n          this.size = size;\n          this.height = height;\n          this.parent = null;\n        }\n\n        BranchChunk.prototype = {\n          chunkSize: function chunkSize() {\n            return this.size;\n          },\n\n          removeInner: function removeInner(at, n) {\n            var this$1 = this;\n\n            this.size -= n;\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at < sz) {\n                var rm = Math.min(n, sz - at),\n                    oldHeight = child.height;\n                child.removeInner(at, rm);\n                this$1.height -= oldHeight - child.height;\n                if (sz == rm) {\n                  this$1.children.splice(i--, 1);child.parent = null;\n                }\n                if ((n -= rm) == 0) {\n                  break;\n                }\n                at = 0;\n              } else {\n                at -= sz;\n              }\n            }\n            // If the result is smaller than 25 lines, ensure that it is a\n            // single leaf node.\n            if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n              var lines = [];\n              this.collapse(lines);\n              this.children = [new LeafChunk(lines)];\n              this.children[0].parent = this;\n            }\n          },\n\n          collapse: function collapse(lines) {\n            var this$1 = this;\n\n            for (var i = 0; i < this.children.length; ++i) {\n              this$1.children[i].collapse(lines);\n            }\n          },\n\n          insertInner: function insertInner(at, lines, height) {\n            var this$1 = this;\n\n            this.size += lines.length;\n            this.height += height;\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at <= sz) {\n                child.insertInner(at, lines, height);\n                if (child.lines && child.lines.length > 50) {\n                  // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n                  // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n                  var remaining = child.lines.length % 25 + 25;\n                  for (var pos = remaining; pos < child.lines.length;) {\n                    var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n                    child.height -= leaf.height;\n                    this$1.children.splice(++i, 0, leaf);\n                    leaf.parent = this$1;\n                  }\n                  child.lines = child.lines.slice(0, remaining);\n                  this$1.maybeSpill();\n                }\n                break;\n              }\n              at -= sz;\n            }\n          },\n\n          // When a node has grown, check whether it should be split.\n          maybeSpill: function maybeSpill() {\n            if (this.children.length <= 10) {\n              return;\n            }\n            var me = this;\n            do {\n              var spilled = me.children.splice(me.children.length - 5, 5);\n              var sibling = new BranchChunk(spilled);\n              if (!me.parent) {\n                // Become the parent node\n                var copy = new BranchChunk(me.children);\n                copy.parent = me;\n                me.children = [copy, sibling];\n                me = copy;\n              } else {\n                me.size -= sibling.size;\n                me.height -= sibling.height;\n                var myIndex = indexOf(me.parent.children, me);\n                me.parent.children.splice(myIndex + 1, 0, sibling);\n              }\n              sibling.parent = me.parent;\n            } while (me.children.length > 10);\n            me.parent.maybeSpill();\n          },\n\n          iterN: function iterN(at, n, op) {\n            var this$1 = this;\n\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at < sz) {\n                var used = Math.min(n, sz - at);\n                if (child.iterN(at, used, op)) {\n                  return true;\n                }\n                if ((n -= used) == 0) {\n                  break;\n                }\n                at = 0;\n              } else {\n                at -= sz;\n              }\n            }\n          }\n        };\n\n        // Line widgets are block elements displayed above or below a line.\n\n        var LineWidget = function LineWidget(doc, node, options) {\n          var this$1 = this;\n\n          if (options) {\n            for (var opt in options) {\n              if (options.hasOwnProperty(opt)) {\n                this$1[opt] = options[opt];\n              }\n            }\n          }\n          this.doc = doc;\n          this.node = node;\n        };\n\n        LineWidget.prototype.clear = function () {\n          var this$1 = this;\n\n          var cm = this.doc.cm,\n              ws = this.line.widgets,\n              line = this.line,\n              no = lineNo(line);\n          if (no == null || !ws) {\n            return;\n          }\n          for (var i = 0; i < ws.length; ++i) {\n            if (ws[i] == this$1) {\n              ws.splice(i--, 1);\n            }\n          }\n          if (!ws.length) {\n            line.widgets = null;\n          }\n          var height = widgetHeight(this);\n          updateLineHeight(line, Math.max(0, line.height - height));\n          if (cm) {\n            runInOp(cm, function () {\n              adjustScrollWhenAboveVisible(cm, line, -height);\n              regLineChange(cm, no, \"widget\");\n            });\n            signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n          }\n        };\n\n        LineWidget.prototype.changed = function () {\n          var this$1 = this;\n\n          var oldH = this.height,\n              cm = this.doc.cm,\n              line = this.line;\n          this.height = null;\n          var diff = widgetHeight(this) - oldH;\n          if (!diff) {\n            return;\n          }\n          updateLineHeight(line, line.height + diff);\n          if (cm) {\n            runInOp(cm, function () {\n              cm.curOp.forceUpdate = true;\n              adjustScrollWhenAboveVisible(cm, line, diff);\n              signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n            });\n          }\n        };\n        eventMixin(LineWidget);\n\n        function adjustScrollWhenAboveVisible(cm, line, diff) {\n          if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n            addToScrollTop(cm, diff);\n          }\n        }\n\n        function addLineWidget(doc, handle, node, options) {\n          var widget = new LineWidget(doc, node, options);\n          var cm = doc.cm;\n          if (cm && widget.noHScroll) {\n            cm.display.alignWidgets = true;\n          }\n          changeLine(doc, handle, \"widget\", function (line) {\n            var widgets = line.widgets || (line.widgets = []);\n            if (widget.insertAt == null) {\n              widgets.push(widget);\n            } else {\n              widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n            }\n            widget.line = line;\n            if (cm && !lineIsHidden(doc, line)) {\n              var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n              updateLineHeight(line, line.height + widgetHeight(widget));\n              if (aboveVisible) {\n                addToScrollTop(cm, widget.height);\n              }\n              cm.curOp.forceUpdate = true;\n            }\n            return true;\n          });\n          signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n          return widget;\n        }\n\n        // TEXTMARKERS\n\n        // Created with markText and setBookmark methods. A TextMarker is a\n        // handle that can be used to clear or find a marked position in the\n        // document. Line objects hold arrays (markedSpans) containing\n        // {from, to, marker} object pointing to such marker objects, and\n        // indicating that such a marker is present on that line. Multiple\n        // lines may point to the same marker when it spans across lines.\n        // The spans will have null for their from/to properties when the\n        // marker continues beyond the start/end of the line. Markers have\n        // links back to the lines they currently touch.\n\n        // Collapsed markers have unique ids, in order to be able to order\n        // them, which is needed for uniquely determining an outer marker\n        // when they overlap (they may nest, but not partially overlap).\n        var nextMarkerId = 0;\n\n        var TextMarker = function TextMarker(doc, type) {\n          this.lines = [];\n          this.type = type;\n          this.doc = doc;\n          this.id = ++nextMarkerId;\n        };\n\n        // Clear the marker.\n        TextMarker.prototype.clear = function () {\n          var this$1 = this;\n\n          if (this.explicitlyCleared) {\n            return;\n          }\n          var cm = this.doc.cm,\n              withOp = cm && !cm.curOp;\n          if (withOp) {\n            _startOperation(cm);\n          }\n          if (hasHandler(this, \"clear\")) {\n            var found = this.find();\n            if (found) {\n              signalLater(this, \"clear\", found.from, found.to);\n            }\n          }\n          var min = null,\n              max = null;\n          for (var i = 0; i < this.lines.length; ++i) {\n            var line = this$1.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this$1);\n            if (cm && !this$1.collapsed) {\n              regLineChange(cm, lineNo(line), \"text\");\n            } else if (cm) {\n              if (span.to != null) {\n                max = lineNo(line);\n              }\n              if (span.from != null) {\n                min = lineNo(line);\n              }\n            }\n            line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n            if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm) {\n              updateLineHeight(line, textHeight(cm.display));\n            }\n          }\n          if (cm && this.collapsed && !cm.options.lineWrapping) {\n            for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n              var visual = visualLine(this$1.lines[i$1]),\n                  len = lineLength(visual);\n              if (len > cm.display.maxLineLength) {\n                cm.display.maxLine = visual;\n                cm.display.maxLineLength = len;\n                cm.display.maxLineChanged = true;\n              }\n            }\n          }\n\n          if (min != null && cm && this.collapsed) {\n            regChange(cm, min, max + 1);\n          }\n          this.lines.length = 0;\n          this.explicitlyCleared = true;\n          if (this.atomic && this.doc.cantEdit) {\n            this.doc.cantEdit = false;\n            if (cm) {\n              reCheckSelection(cm.doc);\n            }\n          }\n          if (cm) {\n            signalLater(cm, \"markerCleared\", cm, this, min, max);\n          }\n          if (withOp) {\n            _endOperation(cm);\n          }\n          if (this.parent) {\n            this.parent.clear();\n          }\n        };\n\n        // Find the position of the marker in the document. Returns a {from,\n        // to} object by default. Side can be passed to get a specific side\n        // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n        // Pos objects returned contain a line object, rather than a line\n        // number (used to prevent looking up the same line twice).\n        TextMarker.prototype.find = function (side, lineObj) {\n          var this$1 = this;\n\n          if (side == null && this.type == \"bookmark\") {\n            side = 1;\n          }\n          var from, to;\n          for (var i = 0; i < this.lines.length; ++i) {\n            var line = this$1.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this$1);\n            if (span.from != null) {\n              from = Pos(lineObj ? line : lineNo(line), span.from);\n              if (side == -1) {\n                return from;\n              }\n            }\n            if (span.to != null) {\n              to = Pos(lineObj ? line : lineNo(line), span.to);\n              if (side == 1) {\n                return to;\n              }\n            }\n          }\n          return from && { from: from, to: to };\n        };\n\n        // Signals that the marker's widget changed, and surrounding layout\n        // should be recomputed.\n        TextMarker.prototype.changed = function () {\n          var this$1 = this;\n\n          var pos = this.find(-1, true),\n              widget = this,\n              cm = this.doc.cm;\n          if (!pos || !cm) {\n            return;\n          }\n          runInOp(cm, function () {\n            var line = pos.line,\n                lineN = lineNo(pos.line);\n            var view = findViewForLine(cm, lineN);\n            if (view) {\n              clearLineMeasurementCacheFor(view);\n              cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n            }\n            cm.curOp.updateMaxLine = true;\n            if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n              var oldHeight = widget.height;\n              widget.height = null;\n              var dHeight = widgetHeight(widget) - oldHeight;\n              if (dHeight) {\n                updateLineHeight(line, line.height + dHeight);\n              }\n            }\n            signalLater(cm, \"markerChanged\", cm, this$1);\n          });\n        };\n\n        TextMarker.prototype.attachLine = function (line) {\n          if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;\n            if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n              (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n            }\n          }\n          this.lines.push(line);\n        };\n\n        TextMarker.prototype.detachLine = function (line) {\n          this.lines.splice(indexOf(this.lines, line), 1);\n          if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n          }\n        };\n        eventMixin(TextMarker);\n\n        // Create a marker, wire it up to the right lines, and\n        function _markText(doc, from, to, options, type) {\n          // Shared markers (across linked documents) are handled separately\n          // (markTextShared will call out to this again, once per\n          // document).\n          if (options && options.shared) {\n            return markTextShared(doc, from, to, options, type);\n          }\n          // Ensure we are in an operation.\n          if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, _markText)(doc, from, to, options, type);\n          }\n\n          var marker = new TextMarker(doc, type),\n              diff = cmp(from, to);\n          if (options) {\n            copyObj(options, marker, false);\n          }\n          // Don't connect empty markers unless clearWhenEmpty is false\n          if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n            return marker;\n          }\n          if (marker.replacedWith) {\n            // Showing up as a widget implies collapsed (widget replaces text)\n            marker.collapsed = true;\n            marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n            if (!options.handleMouseEvents) {\n              marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            if (options.insertLeft) {\n              marker.widgetNode.insertLeft = true;\n            }\n          }\n          if (marker.collapsed) {\n            if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n              throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n            }\n            seeCollapsedSpans();\n          }\n\n          if (marker.addToHistory) {\n            addChangeToHistory(doc, { from: from, to: to, origin: \"markText\" }, doc.sel, NaN);\n          }\n\n          var curLine = from.line,\n              cm = doc.cm,\n              updateMaxLine;\n          doc.iter(curLine, to.line + 1, function (line) {\n            if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n              updateMaxLine = true;\n            }\n            if (marker.collapsed && curLine != from.line) {\n              updateLineHeight(line, 0);\n            }\n            addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n            ++curLine;\n          });\n          // lineIsHidden depends on the presence of the spans, so needs a second pass\n          if (marker.collapsed) {\n            doc.iter(from.line, to.line + 1, function (line) {\n              if (lineIsHidden(doc, line)) {\n                updateLineHeight(line, 0);\n              }\n            });\n          }\n\n          if (marker.clearOnEnter) {\n            on(marker, \"beforeCursorEnter\", function () {\n              return marker.clear();\n            });\n          }\n\n          if (marker.readOnly) {\n            seeReadOnlySpans();\n            if (doc.history.done.length || doc.history.undone.length) {\n              doc.clearHistory();\n            }\n          }\n          if (marker.collapsed) {\n            marker.id = ++nextMarkerId;\n            marker.atomic = true;\n          }\n          if (cm) {\n            // Sync editor state\n            if (updateMaxLine) {\n              cm.curOp.updateMaxLine = true;\n            }\n            if (marker.collapsed) {\n              regChange(cm, from.line, to.line + 1);\n            } else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css) {\n              for (var i = from.line; i <= to.line; i++) {\n                regLineChange(cm, i, \"text\");\n              }\n            }\n            if (marker.atomic) {\n              reCheckSelection(cm.doc);\n            }\n            signalLater(cm, \"markerAdded\", cm, marker);\n          }\n          return marker;\n        }\n\n        // SHARED TEXTMARKERS\n\n        // A shared marker spans multiple linked documents. It is\n        // implemented as a meta-marker-object controlling multiple normal\n        // markers.\n        var SharedTextMarker = function SharedTextMarker(markers, primary) {\n          var this$1 = this;\n\n          this.markers = markers;\n          this.primary = primary;\n          for (var i = 0; i < markers.length; ++i) {\n            markers[i].parent = this$1;\n          }\n        };\n\n        SharedTextMarker.prototype.clear = function () {\n          var this$1 = this;\n\n          if (this.explicitlyCleared) {\n            return;\n          }\n          this.explicitlyCleared = true;\n          for (var i = 0; i < this.markers.length; ++i) {\n            this$1.markers[i].clear();\n          }\n          signalLater(this, \"clear\");\n        };\n\n        SharedTextMarker.prototype.find = function (side, lineObj) {\n          return this.primary.find(side, lineObj);\n        };\n        eventMixin(SharedTextMarker);\n\n        function markTextShared(doc, from, to, options, type) {\n          options = copyObj(options);\n          options.shared = false;\n          var markers = [_markText(doc, from, to, options, type)],\n              primary = markers[0];\n          var widget = options.widgetNode;\n          linkedDocs(doc, function (doc) {\n            if (widget) {\n              options.widgetNode = widget.cloneNode(true);\n            }\n            markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n            for (var i = 0; i < doc.linked.length; ++i) {\n              if (doc.linked[i].isParent) {\n                return;\n              }\n            }\n            primary = lst(markers);\n          });\n          return new SharedTextMarker(markers, primary);\n        }\n\n        function findSharedMarkers(doc) {\n          return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n            return m.parent;\n          });\n        }\n\n        function copySharedMarkers(doc, markers) {\n          for (var i = 0; i < markers.length; i++) {\n            var marker = markers[i],\n                pos = marker.find();\n            var mFrom = doc.clipPos(pos.from),\n                mTo = doc.clipPos(pos.to);\n            if (cmp(mFrom, mTo)) {\n              var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n              marker.markers.push(subMark);\n              subMark.parent = marker;\n            }\n          }\n        }\n\n        function detachSharedMarkers(markers) {\n          var loop = function loop(i) {\n            var marker = markers[i],\n                linked = [marker.primary.doc];\n            linkedDocs(marker.primary.doc, function (d) {\n              return linked.push(d);\n            });\n            for (var j = 0; j < marker.markers.length; j++) {\n              var subMarker = marker.markers[j];\n              if (indexOf(linked, subMarker.doc) == -1) {\n                subMarker.parent = null;\n                marker.markers.splice(j--, 1);\n              }\n            }\n          };\n\n          for (var i = 0; i < markers.length; i++) {\n            loop(i);\n          }\n        }\n\n        var nextDocId = 0;\n        var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n          if (!(this instanceof Doc)) {\n            return new Doc(text, mode, firstLine, lineSep, direction);\n          }\n          if (firstLine == null) {\n            firstLine = 0;\n          }\n\n          BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n          this.first = firstLine;\n          this.scrollTop = this.scrollLeft = 0;\n          this.cantEdit = false;\n          this.cleanGeneration = 1;\n          this.modeFrontier = this.highlightFrontier = firstLine;\n          var start = Pos(firstLine, 0);\n          this.sel = simpleSelection(start);\n          this.history = new History(null);\n          this.id = ++nextDocId;\n          this.modeOption = mode;\n          this.lineSep = lineSep;\n          this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n          this.extend = false;\n\n          if (typeof text == \"string\") {\n            text = this.splitLines(text);\n          }\n          updateDoc(this, { from: start, to: start, text: text });\n          setSelection(this, simpleSelection(start), sel_dontScroll);\n        };\n\n        Doc.prototype = createObj(BranchChunk.prototype, {\n          constructor: Doc,\n          // Iterate over the document. Supports two forms -- with only one\n          // argument, it calls that for each line in the document. With\n          // three, it iterates over the range given by the first two (with\n          // the second being non-inclusive).\n          iter: function iter(from, to, op) {\n            if (op) {\n              this.iterN(from - this.first, to - from, op);\n            } else {\n              this.iterN(this.first, this.first + this.size, from);\n            }\n          },\n\n          // Non-public interface for adding and removing lines.\n          insert: function insert(at, lines) {\n            var height = 0;\n            for (var i = 0; i < lines.length; ++i) {\n              height += lines[i].height;\n            }\n            this.insertInner(at - this.first, lines, height);\n          },\n          remove: function remove(at, n) {\n            this.removeInner(at - this.first, n);\n          },\n\n          // From here, the methods are part of the public interface. Most\n          // are also available from CodeMirror (editor) instances.\n\n          getValue: function getValue(lineSep) {\n            var lines = getLines(this, this.first, this.first + this.size);\n            if (lineSep === false) {\n              return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n          },\n          setValue: docMethodOp(function (code) {\n            var top = Pos(this.first, 0),\n                last = this.first + this.size - 1;\n            makeChange(this, { from: top, to: Pos(last, getLine(this, last).text.length),\n              text: this.splitLines(code), origin: \"setValue\", full: true }, true);\n            if (this.cm) {\n              scrollToCoords(this.cm, 0, 0);\n            }\n            setSelection(this, simpleSelection(top), sel_dontScroll);\n          }),\n          replaceRange: function replaceRange(code, from, to, origin) {\n            from = _clipPos(this, from);\n            to = to ? _clipPos(this, to) : from;\n            _replaceRange(this, code, from, to, origin);\n          },\n          getRange: function getRange(from, to, lineSep) {\n            var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n            if (lineSep === false) {\n              return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n          },\n\n          getLine: function getLine(line) {\n            var l = this.getLineHandle(line);return l && l.text;\n          },\n\n          getLineHandle: function getLineHandle(line) {\n            if (isLine(this, line)) {\n              return getLine(this, line);\n            }\n          },\n          getLineNumber: function getLineNumber(line) {\n            return lineNo(line);\n          },\n\n          getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n            if (typeof line == \"number\") {\n              line = getLine(this, line);\n            }\n            return visualLine(line);\n          },\n\n          lineCount: function lineCount() {\n            return this.size;\n          },\n          firstLine: function firstLine() {\n            return this.first;\n          },\n          lastLine: function lastLine() {\n            return this.first + this.size - 1;\n          },\n\n          clipPos: function clipPos(pos) {\n            return _clipPos(this, pos);\n          },\n\n          getCursor: function getCursor(start) {\n            var range$$1 = this.sel.primary(),\n                pos;\n            if (start == null || start == \"head\") {\n              pos = range$$1.head;\n            } else if (start == \"anchor\") {\n              pos = range$$1.anchor;\n            } else if (start == \"end\" || start == \"to\" || start === false) {\n              pos = range$$1.to();\n            } else {\n              pos = range$$1.from();\n            }\n            return pos;\n          },\n          listSelections: function listSelections() {\n            return this.sel.ranges;\n          },\n          somethingSelected: function somethingSelected() {\n            return this.sel.somethingSelected();\n          },\n\n          setCursor: docMethodOp(function (line, ch, options) {\n            setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n          }),\n          setSelection: docMethodOp(function (anchor, head, options) {\n            setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n          }),\n          extendSelection: docMethodOp(function (head, other, options) {\n            extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n          }),\n          extendSelections: docMethodOp(function (heads, options) {\n            extendSelections(this, clipPosArray(this, heads), options);\n          }),\n          extendSelectionsBy: docMethodOp(function (f, options) {\n            var heads = map(this.sel.ranges, f);\n            extendSelections(this, clipPosArray(this, heads), options);\n          }),\n          setSelections: docMethodOp(function (ranges, primary, options) {\n            var this$1 = this;\n\n            if (!ranges.length) {\n              return;\n            }\n            var out = [];\n            for (var i = 0; i < ranges.length; i++) {\n              out[i] = new Range(_clipPos(this$1, ranges[i].anchor), _clipPos(this$1, ranges[i].head));\n            }\n            if (primary == null) {\n              primary = Math.min(ranges.length - 1, this.sel.primIndex);\n            }\n            setSelection(this, normalizeSelection(out, primary), options);\n          }),\n          addSelection: docMethodOp(function (anchor, head, options) {\n            var ranges = this.sel.ranges.slice(0);\n            ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n            setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n          }),\n\n          getSelection: function getSelection(lineSep) {\n            var this$1 = this;\n\n            var ranges = this.sel.ranges,\n                lines;\n            for (var i = 0; i < ranges.length; i++) {\n              var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n              lines = lines ? lines.concat(sel) : sel;\n            }\n            if (lineSep === false) {\n              return lines;\n            } else {\n              return lines.join(lineSep || this.lineSeparator());\n            }\n          },\n          getSelections: function getSelections(lineSep) {\n            var this$1 = this;\n\n            var parts = [],\n                ranges = this.sel.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n              var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n              if (lineSep !== false) {\n                sel = sel.join(lineSep || this$1.lineSeparator());\n              }\n              parts[i] = sel;\n            }\n            return parts;\n          },\n          replaceSelection: function replaceSelection(code, collapse, origin) {\n            var dup = [];\n            for (var i = 0; i < this.sel.ranges.length; i++) {\n              dup[i] = code;\n            }\n            this.replaceSelections(dup, collapse, origin || \"+input\");\n          },\n          replaceSelections: docMethodOp(function (code, collapse, origin) {\n            var this$1 = this;\n\n            var changes = [],\n                sel = this.sel;\n            for (var i = 0; i < sel.ranges.length; i++) {\n              var range$$1 = sel.ranges[i];\n              changes[i] = { from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin };\n            }\n            var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n            for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n              makeChange(this$1, changes[i$1]);\n            }\n            if (newSel) {\n              setSelectionReplaceHistory(this, newSel);\n            } else if (this.cm) {\n              ensureCursorVisible(this.cm);\n            }\n          }),\n          undo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\");\n          }),\n          redo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\");\n          }),\n          undoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\", true);\n          }),\n          redoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\", true);\n          }),\n\n          setExtending: function setExtending(val) {\n            this.extend = val;\n          },\n          getExtending: function getExtending() {\n            return this.extend;\n          },\n\n          historySize: function historySize() {\n            var hist = this.history,\n                done = 0,\n                undone = 0;\n            for (var i = 0; i < hist.done.length; i++) {\n              if (!hist.done[i].ranges) {\n                ++done;\n              }\n            }\n            for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n              if (!hist.undone[i$1].ranges) {\n                ++undone;\n              }\n            }\n            return { undo: done, redo: undone };\n          },\n          clearHistory: function clearHistory() {\n            this.history = new History(this.history.maxGeneration);\n          },\n\n          markClean: function markClean() {\n            this.cleanGeneration = this.changeGeneration(true);\n          },\n          changeGeneration: function changeGeneration(forceSplit) {\n            if (forceSplit) {\n              this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n            }\n            return this.history.generation;\n          },\n          isClean: function isClean(gen) {\n            return this.history.generation == (gen || this.cleanGeneration);\n          },\n\n          getHistory: function getHistory() {\n            return { done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone) };\n          },\n          setHistory: function setHistory(histData) {\n            var hist = this.history = new History(this.history.maxGeneration);\n            hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n            hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n          },\n\n          setGutterMarker: docMethodOp(function (line, gutterID, value) {\n            return changeLine(this, line, \"gutter\", function (line) {\n              var markers = line.gutterMarkers || (line.gutterMarkers = {});\n              markers[gutterID] = value;\n              if (!value && isEmpty(markers)) {\n                line.gutterMarkers = null;\n              }\n              return true;\n            });\n          }),\n\n          clearGutter: docMethodOp(function (gutterID) {\n            var this$1 = this;\n\n            this.iter(function (line) {\n              if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n                changeLine(this$1, line, \"gutter\", function () {\n                  line.gutterMarkers[gutterID] = null;\n                  if (isEmpty(line.gutterMarkers)) {\n                    line.gutterMarkers = null;\n                  }\n                  return true;\n                });\n              }\n            });\n          }),\n\n          lineInfo: function lineInfo(line) {\n            var n;\n            if (typeof line == \"number\") {\n              if (!isLine(this, line)) {\n                return null;\n              }\n              n = line;\n              line = getLine(this, line);\n              if (!line) {\n                return null;\n              }\n            } else {\n              n = lineNo(line);\n              if (n == null) {\n                return null;\n              }\n            }\n            return { line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets };\n          },\n\n          addLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n              var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n              if (!line[prop]) {\n                line[prop] = cls;\n              } else if (classTest(cls).test(line[prop])) {\n                return false;\n              } else {\n                line[prop] += \" \" + cls;\n              }\n              return true;\n            });\n          }),\n          removeLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n              var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n              var cur = line[prop];\n              if (!cur) {\n                return false;\n              } else if (cls == null) {\n                line[prop] = null;\n              } else {\n                var found = cur.match(classTest(cls));\n                if (!found) {\n                  return false;\n                }\n                var end = found.index + found[0].length;\n                line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n              }\n              return true;\n            });\n          }),\n\n          addLineWidget: docMethodOp(function (handle, node, options) {\n            return addLineWidget(this, handle, node, options);\n          }),\n          removeLineWidget: function removeLineWidget(widget) {\n            widget.clear();\n          },\n\n          markText: function markText(from, to, options) {\n            return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n          },\n          setBookmark: function setBookmark(pos, options) {\n            var realOpts = { replacedWith: options && (options.nodeType == null ? options.widget : options),\n              insertLeft: options && options.insertLeft,\n              clearWhenEmpty: false, shared: options && options.shared,\n              handleMouseEvents: options && options.handleMouseEvents };\n            pos = _clipPos(this, pos);\n            return _markText(this, pos, pos, realOpts, \"bookmark\");\n          },\n          findMarksAt: function findMarksAt(pos) {\n            pos = _clipPos(this, pos);\n            var markers = [],\n                spans = getLine(this, pos.line).markedSpans;\n            if (spans) {\n              for (var i = 0; i < spans.length; ++i) {\n                var span = spans[i];\n                if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n                  markers.push(span.marker.parent || span.marker);\n                }\n              }\n            }\n            return markers;\n          },\n          findMarks: function findMarks(from, to, filter) {\n            from = _clipPos(this, from);to = _clipPos(this, to);\n            var found = [],\n                lineNo$$1 = from.line;\n            this.iter(from.line, to.line + 1, function (line) {\n              var spans = line.markedSpans;\n              if (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                  var span = spans[i];\n                  if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to || span.from == null && lineNo$$1 != from.line || span.from != null && lineNo$$1 == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n                    found.push(span.marker.parent || span.marker);\n                  }\n                }\n              }\n              ++lineNo$$1;\n            });\n            return found;\n          },\n          getAllMarks: function getAllMarks() {\n            var markers = [];\n            this.iter(function (line) {\n              var sps = line.markedSpans;\n              if (sps) {\n                for (var i = 0; i < sps.length; ++i) {\n                  if (sps[i].from != null) {\n                    markers.push(sps[i].marker);\n                  }\n                }\n              }\n            });\n            return markers;\n          },\n\n          posFromIndex: function posFromIndex(off) {\n            var ch,\n                lineNo$$1 = this.first,\n                sepSize = this.lineSeparator().length;\n            this.iter(function (line) {\n              var sz = line.text.length + sepSize;\n              if (sz > off) {\n                ch = off;return true;\n              }\n              off -= sz;\n              ++lineNo$$1;\n            });\n            return _clipPos(this, Pos(lineNo$$1, ch));\n          },\n          indexFromPos: function indexFromPos(coords) {\n            coords = _clipPos(this, coords);\n            var index = coords.ch;\n            if (coords.line < this.first || coords.ch < 0) {\n              return 0;\n            }\n            var sepSize = this.lineSeparator().length;\n            this.iter(this.first, coords.line, function (line) {\n              // iter aborts when callback returns a truthy value\n              index += line.text.length + sepSize;\n            });\n            return index;\n          },\n\n          copy: function copy(copyHistory) {\n            var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n            doc.scrollTop = this.scrollTop;doc.scrollLeft = this.scrollLeft;\n            doc.sel = this.sel;\n            doc.extend = false;\n            if (copyHistory) {\n              doc.history.undoDepth = this.history.undoDepth;\n              doc.setHistory(this.getHistory());\n            }\n            return doc;\n          },\n\n          linkedDoc: function linkedDoc(options) {\n            if (!options) {\n              options = {};\n            }\n            var from = this.first,\n                to = this.first + this.size;\n            if (options.from != null && options.from > from) {\n              from = options.from;\n            }\n            if (options.to != null && options.to < to) {\n              to = options.to;\n            }\n            var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n            if (options.sharedHist) {\n              copy.history = this.history;\n            }(this.linked || (this.linked = [])).push({ doc: copy, sharedHist: options.sharedHist });\n            copy.linked = [{ doc: this, isParent: true, sharedHist: options.sharedHist }];\n            copySharedMarkers(copy, findSharedMarkers(this));\n            return copy;\n          },\n          unlinkDoc: function unlinkDoc(other) {\n            var this$1 = this;\n\n            if (other instanceof CodeMirror$1) {\n              other = other.doc;\n            }\n            if (this.linked) {\n              for (var i = 0; i < this.linked.length; ++i) {\n                var link = this$1.linked[i];\n                if (link.doc != other) {\n                  continue;\n                }\n                this$1.linked.splice(i, 1);\n                other.unlinkDoc(this$1);\n                detachSharedMarkers(findSharedMarkers(this$1));\n                break;\n              }\n            }\n            // If the histories were shared, split them again\n            if (other.history == this.history) {\n              var splitIds = [other.id];\n              linkedDocs(other, function (doc) {\n                return splitIds.push(doc.id);\n              }, true);\n              other.history = new History(null);\n              other.history.done = copyHistoryArray(this.history.done, splitIds);\n              other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n            }\n          },\n          iterLinkedDocs: function iterLinkedDocs(f) {\n            linkedDocs(this, f);\n          },\n\n          getMode: function getMode() {\n            return this.mode;\n          },\n          getEditor: function getEditor() {\n            return this.cm;\n          },\n\n          splitLines: function splitLines(str) {\n            if (this.lineSep) {\n              return str.split(this.lineSep);\n            }\n            return splitLinesAuto(str);\n          },\n          lineSeparator: function lineSeparator() {\n            return this.lineSep || \"\\n\";\n          },\n\n          setDirection: docMethodOp(function (dir) {\n            if (dir != \"rtl\") {\n              dir = \"ltr\";\n            }\n            if (dir == this.direction) {\n              return;\n            }\n            this.direction = dir;\n            this.iter(function (line) {\n              return line.order = null;\n            });\n            if (this.cm) {\n              directionChanged(this.cm);\n            }\n          })\n        });\n\n        // Public alias.\n        Doc.prototype.eachLine = Doc.prototype.iter;\n\n        // Kludge to work around strange IE behavior where it'll sometimes\n        // re-fire a series of drag-related events right after the drop (#1551)\n        var lastDrop = 0;\n\n        function onDrop(e) {\n          var cm = this;\n          clearDragCursor(cm);\n          if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n          }\n          e_preventDefault(e);\n          if (ie) {\n            lastDrop = +new Date();\n          }\n          var pos = posFromMouse(cm, e, true),\n              files = e.dataTransfer.files;\n          if (!pos || cm.isReadOnly()) {\n            return;\n          }\n          // Might be a file drop, in which case we simply extract the text\n          // and insert it.\n          if (files && files.length && window.FileReader && window.File) {\n            var n = files.length,\n                text = Array(n),\n                read = 0;\n            var loadFile = function loadFile(file, i) {\n              if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n                return;\n              }\n\n              var reader = new FileReader();\n              reader.onload = operation(cm, function () {\n                var content = reader.result;\n                if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n                  content = \"\";\n                }\n                text[i] = content;\n                if (++read == n) {\n                  pos = _clipPos(cm.doc, pos);\n                  var change = { from: pos, to: pos,\n                    text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                    origin: \"paste\" };\n                  makeChange(cm.doc, change);\n                  setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n                }\n              });\n              reader.readAsText(file);\n            };\n            for (var i = 0; i < n; ++i) {\n              loadFile(files[i], i);\n            }\n          } else {\n            // Normal drop\n            // Don't do a replace if the drop happened inside of the selected text.\n            if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n              cm.state.draggingText(e);\n              // Ensure the editor is re-focused\n              setTimeout(function () {\n                return cm.display.input.focus();\n              }, 20);\n              return;\n            }\n            try {\n              var text$1 = e.dataTransfer.getData(\"Text\");\n              if (text$1) {\n                var selected;\n                if (cm.state.draggingText && !cm.state.draggingText.copy) {\n                  selected = cm.listSelections();\n                }\n                setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n                if (selected) {\n                  for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n                    _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n                  }\n                }\n                cm.replaceSelection(text$1, \"around\", \"paste\");\n                cm.display.input.focus();\n              }\n            } catch (e) {}\n          }\n        }\n\n        function onDragStart(cm, e) {\n          if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n            e_stop(e);return;\n          }\n          if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n          }\n\n          e.dataTransfer.setData(\"Text\", cm.getSelection());\n          e.dataTransfer.effectAllowed = \"copyMove\";\n\n          // Use dummy image instead of default browsers image.\n          // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n          if (e.dataTransfer.setDragImage && !safari) {\n            var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n            img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n            if (presto) {\n              img.width = img.height = 1;\n              cm.display.wrapper.appendChild(img);\n              // Force a relayout, or Opera won't use our image for some obscure reason\n              img._top = img.offsetTop;\n            }\n            e.dataTransfer.setDragImage(img, 0, 0);\n            if (presto) {\n              img.parentNode.removeChild(img);\n            }\n          }\n        }\n\n        function onDragOver(cm, e) {\n          var pos = posFromMouse(cm, e);\n          if (!pos) {\n            return;\n          }\n          var frag = document.createDocumentFragment();\n          drawSelectionCursor(cm, pos, frag);\n          if (!cm.display.dragCursor) {\n            cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n            cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n          }\n          removeChildrenAndAdd(cm.display.dragCursor, frag);\n        }\n\n        function clearDragCursor(cm) {\n          if (cm.display.dragCursor) {\n            cm.display.lineSpace.removeChild(cm.display.dragCursor);\n            cm.display.dragCursor = null;\n          }\n        }\n\n        // These must be handled carefully, because naively registering a\n        // handler for each editor will cause the editors to never be\n        // garbage collected.\n\n        function forEachCodeMirror(f) {\n          if (!document.getElementsByClassName) {\n            return;\n          }\n          var byClass = document.getElementsByClassName(\"CodeMirror\");\n          for (var i = 0; i < byClass.length; i++) {\n            var cm = byClass[i].CodeMirror;\n            if (cm) {\n              f(cm);\n            }\n          }\n        }\n\n        var globalsRegistered = false;\n        function ensureGlobalHandlers() {\n          if (globalsRegistered) {\n            return;\n          }\n          registerGlobalHandlers();\n          globalsRegistered = true;\n        }\n        function registerGlobalHandlers() {\n          // When the window resizes, we need to refresh active editors.\n          var resizeTimer;\n          on(window, \"resize\", function () {\n            if (resizeTimer == null) {\n              resizeTimer = setTimeout(function () {\n                resizeTimer = null;\n                forEachCodeMirror(onResize);\n              }, 100);\n            }\n          });\n          // When the window loses focus, we want to show the editor as blurred\n          on(window, \"blur\", function () {\n            return forEachCodeMirror(onBlur);\n          });\n        }\n        // Called when the window resizes\n        function onResize(cm) {\n          var d = cm.display;\n          if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth) {\n            return;\n          }\n          // Might be a text scaling operation, clear size caches.\n          d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n          d.scrollbarsClipped = false;\n          cm.setSize();\n        }\n\n        var keyNames = {\n          3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n          19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n          36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n          46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n          106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\",\n          173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n          221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n          63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n        };\n\n        // Number keys\n        for (var i = 0; i < 10; i++) {\n          keyNames[i + 48] = keyNames[i + 96] = String(i);\n        }\n        // Alphabetic keys\n        for (var i$1 = 65; i$1 <= 90; i$1++) {\n          keyNames[i$1] = String.fromCharCode(i$1);\n        }\n        // Function keys\n        for (var i$2 = 1; i$2 <= 12; i$2++) {\n          keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n        }\n\n        var keyMap = {};\n\n        keyMap.basic = {\n          \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n          \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n          \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n          \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n          \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n          \"Esc\": \"singleSelection\"\n        };\n        // Note that the save and find-related commands aren't defined by\n        // default. User code or addons can define them. Unknown commands\n        // are simply ignored.\n        keyMap.pcDefault = {\n          \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n          \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n          \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n          \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n          \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n          \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n          \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n          fallthrough: \"basic\"\n        };\n        // Very basic readline/emacs-style bindings, which are standard on Mac.\n        keyMap.emacsy = {\n          \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n          \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n          \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n          \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n          \"Ctrl-O\": \"openLine\"\n        };\n        keyMap.macDefault = {\n          \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n          \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n          \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n          \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n          \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n          \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n          \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n          fallthrough: [\"basic\", \"emacsy\"]\n        };\n        keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n        // KEYMAP DISPATCH\n\n        function normalizeKeyName(name) {\n          var parts = name.split(/-(?!$)/);\n          name = parts[parts.length - 1];\n          var alt, ctrl, shift, cmd;\n          for (var i = 0; i < parts.length - 1; i++) {\n            var mod = parts[i];\n            if (/^(cmd|meta|m)$/i.test(mod)) {\n              cmd = true;\n            } else if (/^a(lt)?$/i.test(mod)) {\n              alt = true;\n            } else if (/^(c|ctrl|control)$/i.test(mod)) {\n              ctrl = true;\n            } else if (/^s(hift)?$/i.test(mod)) {\n              shift = true;\n            } else {\n              throw new Error(\"Unrecognized modifier name: \" + mod);\n            }\n          }\n          if (alt) {\n            name = \"Alt-\" + name;\n          }\n          if (ctrl) {\n            name = \"Ctrl-\" + name;\n          }\n          if (cmd) {\n            name = \"Cmd-\" + name;\n          }\n          if (shift) {\n            name = \"Shift-\" + name;\n          }\n          return name;\n        }\n\n        // This is a kludge to keep keymaps mostly working as raw objects\n        // (backwards compatibility) while at the same time support features\n        // like normalization and multi-stroke key bindings. It compiles a\n        // new normalized keymap, and then updates the old object to reflect\n        // this.\n        function normalizeKeyMap(keymap) {\n          var copy = {};\n          for (var keyname in keymap) {\n            if (keymap.hasOwnProperty(keyname)) {\n              var value = keymap[keyname];\n              if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n                continue;\n              }\n              if (value == \"...\") {\n                delete keymap[keyname];continue;\n              }\n\n              var keys = map(keyname.split(\" \"), normalizeKeyName);\n              for (var i = 0; i < keys.length; i++) {\n                var val = void 0,\n                    name = void 0;\n                if (i == keys.length - 1) {\n                  name = keys.join(\" \");\n                  val = value;\n                } else {\n                  name = keys.slice(0, i + 1).join(\" \");\n                  val = \"...\";\n                }\n                var prev = copy[name];\n                if (!prev) {\n                  copy[name] = val;\n                } else if (prev != val) {\n                  throw new Error(\"Inconsistent bindings for \" + name);\n                }\n              }\n              delete keymap[keyname];\n            }\n          }\n          for (var prop in copy) {\n            keymap[prop] = copy[prop];\n          }\n          return keymap;\n        }\n\n        function lookupKey(key, map$$1, handle, context) {\n          map$$1 = getKeyMap(map$$1);\n          var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n          if (found === false) {\n            return \"nothing\";\n          }\n          if (found === \"...\") {\n            return \"multi\";\n          }\n          if (found != null && handle(found)) {\n            return \"handled\";\n          }\n\n          if (map$$1.fallthrough) {\n            if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\") {\n              return lookupKey(key, map$$1.fallthrough, handle, context);\n            }\n            for (var i = 0; i < map$$1.fallthrough.length; i++) {\n              var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n              if (result) {\n                return result;\n              }\n            }\n          }\n        }\n\n        // Modifier key presses don't count as 'real' key presses for the\n        // purpose of keymap fallthrough.\n        function isModifierKey(value) {\n          var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n          return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n        }\n\n        function addModifierNames(name, event, noShift) {\n          var base = name;\n          if (event.altKey && base != \"Alt\") {\n            name = \"Alt-\" + name;\n          }\n          if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n            name = \"Ctrl-\" + name;\n          }\n          if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n            name = \"Cmd-\" + name;\n          }\n          if (!noShift && event.shiftKey && base != \"Shift\") {\n            name = \"Shift-\" + name;\n          }\n          return name;\n        }\n\n        // Look up the name of a key as indicated by an event object.\n        function keyName(event, noShift) {\n          if (presto && event.keyCode == 34 && event[\"char\"]) {\n            return false;\n          }\n          var name = keyNames[event.keyCode];\n          if (name == null || event.altGraphKey) {\n            return false;\n          }\n          return addModifierNames(name, event, noShift);\n        }\n\n        function getKeyMap(val) {\n          return typeof val == \"string\" ? keyMap[val] : val;\n        }\n\n        // Helper for deleting text near the selection(s), used to implement\n        // backspace, delete, and similar functionality.\n        function deleteNearSelection(cm, compute) {\n          var ranges = cm.doc.sel.ranges,\n              kill = [];\n          // Build up a set of ranges to kill first, merging overlapping\n          // ranges.\n          for (var i = 0; i < ranges.length; i++) {\n            var toKill = compute(ranges[i]);\n            while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n              var replaced = kill.pop();\n              if (cmp(replaced.from, toKill.from) < 0) {\n                toKill.from = replaced.from;\n                break;\n              }\n            }\n            kill.push(toKill);\n          }\n          // Next, remove those actual ranges.\n          runInOp(cm, function () {\n            for (var i = kill.length - 1; i >= 0; i--) {\n              _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n            }\n            ensureCursorVisible(cm);\n          });\n        }\n\n        // Commands are parameter-less actions that can be performed on an\n        // editor, mostly used for keybindings.\n        var commands = {\n          selectAll: selectAll,\n          singleSelection: function singleSelection(cm) {\n            return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n          },\n          killLine: function killLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n              if (range.empty()) {\n                var len = getLine(cm.doc, range.head.line).text.length;\n                if (range.head.ch == len && range.head.line < cm.lastLine()) {\n                  return { from: range.head, to: Pos(range.head.line + 1, 0) };\n                } else {\n                  return { from: range.head, to: Pos(range.head.line, len) };\n                }\n              } else {\n                return { from: range.from(), to: range.to() };\n              }\n            });\n          },\n          deleteLine: function deleteLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n              return {\n                from: Pos(range.from().line, 0),\n                to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n              };\n            });\n          },\n          delLineLeft: function delLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n              return {\n                from: Pos(range.from().line, 0), to: range.from()\n              };\n            });\n          },\n          delWrappedLineLeft: function delWrappedLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n              var top = cm.charCoords(range.head, \"div\").top + 5;\n              var leftPos = cm.coordsChar({ left: 0, top: top }, \"div\");\n              return { from: leftPos, to: range.from() };\n            });\n          },\n          delWrappedLineRight: function delWrappedLineRight(cm) {\n            return deleteNearSelection(cm, function (range) {\n              var top = cm.charCoords(range.head, \"div\").top + 5;\n              var rightPos = cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n              return { from: range.from(), to: rightPos };\n            });\n          },\n          undo: function undo(cm) {\n            return cm.undo();\n          },\n          redo: function redo(cm) {\n            return cm.redo();\n          },\n          undoSelection: function undoSelection(cm) {\n            return cm.undoSelection();\n          },\n          redoSelection: function redoSelection(cm) {\n            return cm.redoSelection();\n          },\n          goDocStart: function goDocStart(cm) {\n            return cm.extendSelection(Pos(cm.firstLine(), 0));\n          },\n          goDocEnd: function goDocEnd(cm) {\n            return cm.extendSelection(Pos(cm.lastLine()));\n          },\n          goLineStart: function goLineStart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineStart(cm, range.head.line);\n            }, { origin: \"+move\", bias: 1 });\n          },\n          goLineStartSmart: function goLineStartSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineStartSmart(cm, range.head);\n            }, { origin: \"+move\", bias: 1 });\n          },\n          goLineEnd: function goLineEnd(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineEnd(cm, range.head.line);\n            }, { origin: \"+move\", bias: -1 });\n          },\n          goLineRight: function goLineRight(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              return cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n            }, sel_move);\n          },\n          goLineLeft: function goLineLeft(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              return cm.coordsChar({ left: 0, top: top }, \"div\");\n            }, sel_move);\n          },\n          goLineLeftSmart: function goLineLeftSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              var pos = cm.coordsChar({ left: 0, top: top }, \"div\");\n              if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n                return lineStartSmart(cm, range.head);\n              }\n              return pos;\n            }, sel_move);\n          },\n          goLineUp: function goLineUp(cm) {\n            return cm.moveV(-1, \"line\");\n          },\n          goLineDown: function goLineDown(cm) {\n            return cm.moveV(1, \"line\");\n          },\n          goPageUp: function goPageUp(cm) {\n            return cm.moveV(-1, \"page\");\n          },\n          goPageDown: function goPageDown(cm) {\n            return cm.moveV(1, \"page\");\n          },\n          goCharLeft: function goCharLeft(cm) {\n            return cm.moveH(-1, \"char\");\n          },\n          goCharRight: function goCharRight(cm) {\n            return cm.moveH(1, \"char\");\n          },\n          goColumnLeft: function goColumnLeft(cm) {\n            return cm.moveH(-1, \"column\");\n          },\n          goColumnRight: function goColumnRight(cm) {\n            return cm.moveH(1, \"column\");\n          },\n          goWordLeft: function goWordLeft(cm) {\n            return cm.moveH(-1, \"word\");\n          },\n          goGroupRight: function goGroupRight(cm) {\n            return cm.moveH(1, \"group\");\n          },\n          goGroupLeft: function goGroupLeft(cm) {\n            return cm.moveH(-1, \"group\");\n          },\n          goWordRight: function goWordRight(cm) {\n            return cm.moveH(1, \"word\");\n          },\n          delCharBefore: function delCharBefore(cm) {\n            return cm.deleteH(-1, \"char\");\n          },\n          delCharAfter: function delCharAfter(cm) {\n            return cm.deleteH(1, \"char\");\n          },\n          delWordBefore: function delWordBefore(cm) {\n            return cm.deleteH(-1, \"word\");\n          },\n          delWordAfter: function delWordAfter(cm) {\n            return cm.deleteH(1, \"word\");\n          },\n          delGroupBefore: function delGroupBefore(cm) {\n            return cm.deleteH(-1, \"group\");\n          },\n          delGroupAfter: function delGroupAfter(cm) {\n            return cm.deleteH(1, \"group\");\n          },\n          indentAuto: function indentAuto(cm) {\n            return cm.indentSelection(\"smart\");\n          },\n          indentMore: function indentMore(cm) {\n            return cm.indentSelection(\"add\");\n          },\n          indentLess: function indentLess(cm) {\n            return cm.indentSelection(\"subtract\");\n          },\n          insertTab: function insertTab(cm) {\n            return cm.replaceSelection(\"\\t\");\n          },\n          insertSoftTab: function insertSoftTab(cm) {\n            var spaces = [],\n                ranges = cm.listSelections(),\n                tabSize = cm.options.tabSize;\n            for (var i = 0; i < ranges.length; i++) {\n              var pos = ranges[i].from();\n              var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n              spaces.push(spaceStr(tabSize - col % tabSize));\n            }\n            cm.replaceSelections(spaces);\n          },\n          defaultTab: function defaultTab(cm) {\n            if (cm.somethingSelected()) {\n              cm.indentSelection(\"add\");\n            } else {\n              cm.execCommand(\"insertTab\");\n            }\n          },\n          // Swap the two chars left and right of each selection's head.\n          // Move cursor behind the two swapped characters afterwards.\n          //\n          // Doesn't consider line feeds a character.\n          // Doesn't scan more than one line above to find a character.\n          // Doesn't do anything on an empty line.\n          // Doesn't do anything with non-empty selections.\n          transposeChars: function transposeChars(cm) {\n            return runInOp(cm, function () {\n              var ranges = cm.listSelections(),\n                  newSel = [];\n              for (var i = 0; i < ranges.length; i++) {\n                if (!ranges[i].empty()) {\n                  continue;\n                }\n                var cur = ranges[i].head,\n                    line = getLine(cm.doc, cur.line).text;\n                if (line) {\n                  if (cur.ch == line.length) {\n                    cur = new Pos(cur.line, cur.ch - 1);\n                  }\n                  if (cur.ch > 0) {\n                    cur = new Pos(cur.line, cur.ch + 1);\n                    cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n                  } else if (cur.line > cm.doc.first) {\n                    var prev = getLine(cm.doc, cur.line - 1).text;\n                    if (prev) {\n                      cur = new Pos(cur.line, 1);\n                      cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n                    }\n                  }\n                }\n                newSel.push(new Range(cur, cur));\n              }\n              cm.setSelections(newSel);\n            });\n          },\n          newlineAndIndent: function newlineAndIndent(cm) {\n            return runInOp(cm, function () {\n              var sels = cm.listSelections();\n              for (var i = sels.length - 1; i >= 0; i--) {\n                cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n              }\n              sels = cm.listSelections();\n              for (var i$1 = 0; i$1 < sels.length; i$1++) {\n                cm.indentLine(sels[i$1].from().line, null, true);\n              }\n              ensureCursorVisible(cm);\n            });\n          },\n          openLine: function openLine(cm) {\n            return cm.replaceSelection(\"\\n\", \"start\");\n          },\n          toggleOverwrite: function toggleOverwrite(cm) {\n            return cm.toggleOverwrite();\n          }\n        };\n\n        function lineStart(cm, lineN) {\n          var line = getLine(cm.doc, lineN);\n          var visual = visualLine(line);\n          if (visual != line) {\n            lineN = lineNo(visual);\n          }\n          return endOfLine(true, cm, visual, lineN, 1);\n        }\n        function lineEnd(cm, lineN) {\n          var line = getLine(cm.doc, lineN);\n          var visual = visualLineEnd(line);\n          if (visual != line) {\n            lineN = lineNo(visual);\n          }\n          return endOfLine(true, cm, line, lineN, -1);\n        }\n        function lineStartSmart(cm, pos) {\n          var start = lineStart(cm, pos.line);\n          var line = getLine(cm.doc, start.line);\n          var order = getOrder(line, cm.doc.direction);\n          if (!order || order[0].level == 0) {\n            var firstNonWS = Math.max(0, line.text.search(/\\S/));\n            var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n            return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n          }\n          return start;\n        }\n\n        // Run a handler that was bound to a key.\n        function doHandleBinding(cm, bound, dropShift) {\n          if (typeof bound == \"string\") {\n            bound = commands[bound];\n            if (!bound) {\n              return false;\n            }\n          }\n          // Ensure previous input has been read, so that the handler sees a\n          // consistent view of the document\n          cm.display.input.ensurePolled();\n          var prevShift = cm.display.shift,\n              done = false;\n          try {\n            if (cm.isReadOnly()) {\n              cm.state.suppressEdits = true;\n            }\n            if (dropShift) {\n              cm.display.shift = false;\n            }\n            done = bound(cm) != Pass;\n          } finally {\n            cm.display.shift = prevShift;\n            cm.state.suppressEdits = false;\n          }\n          return done;\n        }\n\n        function lookupKeyForEditor(cm, name, handle) {\n          for (var i = 0; i < cm.state.keyMaps.length; i++) {\n            var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n            if (result) {\n              return result;\n            }\n          }\n          return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n        }\n\n        // Note that, despite the name, this function is also used to check\n        // for bound mouse clicks.\n\n        var stopSeq = new Delayed();\n        function dispatchKey(cm, name, e, handle) {\n          var seq = cm.state.keySeq;\n          if (seq) {\n            if (isModifierKey(name)) {\n              return \"handled\";\n            }\n            stopSeq.set(50, function () {\n              if (cm.state.keySeq == seq) {\n                cm.state.keySeq = null;\n                cm.display.input.reset();\n              }\n            });\n            name = seq + \" \" + name;\n          }\n          var result = lookupKeyForEditor(cm, name, handle);\n\n          if (result == \"multi\") {\n            cm.state.keySeq = name;\n          }\n          if (result == \"handled\") {\n            signalLater(cm, \"keyHandled\", cm, name, e);\n          }\n\n          if (result == \"handled\" || result == \"multi\") {\n            e_preventDefault(e);\n            restartBlink(cm);\n          }\n\n          if (seq && !result && /\\'$/.test(name)) {\n            e_preventDefault(e);\n            return true;\n          }\n          return !!result;\n        }\n\n        // Handle a key from the keydown event.\n        function handleKeyBinding(cm, e) {\n          var name = keyName(e, true);\n          if (!name) {\n            return false;\n          }\n\n          if (e.shiftKey && !cm.state.keySeq) {\n            // First try to resolve full name (including 'Shift-'). Failing\n            // that, see if there is a cursor-motion command (starting with\n            // 'go') bound to the keyname without 'Shift-'.\n            return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n              return doHandleBinding(cm, b, true);\n            }) || dispatchKey(cm, name, e, function (b) {\n              if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n                return doHandleBinding(cm, b);\n              }\n            });\n          } else {\n            return dispatchKey(cm, name, e, function (b) {\n              return doHandleBinding(cm, b);\n            });\n          }\n        }\n\n        // Handle a key from the keypress event\n        function handleCharBinding(cm, e, ch) {\n          return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n            return doHandleBinding(cm, b, true);\n          });\n        }\n\n        var lastStoppedKey = null;\n        function onKeyDown(e) {\n          var cm = this;\n          cm.curOp.focus = activeElt();\n          if (signalDOMEvent(cm, e)) {\n            return;\n          }\n          // IE does strange things with escape.\n          if (ie && ie_version < 11 && e.keyCode == 27) {\n            e.returnValue = false;\n          }\n          var code = e.keyCode;\n          cm.display.shift = code == 16 || e.shiftKey;\n          var handled = handleKeyBinding(cm, e);\n          if (presto) {\n            lastStoppedKey = handled ? code : null;\n            // Opera has no cut event... we try to at least catch the key combo\n            if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n              cm.replaceSelection(\"\", null, \"cut\");\n            }\n          }\n\n          // Turn mouse into crosshair when Alt is held on Mac.\n          if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n            showCrossHair(cm);\n          }\n        }\n\n        function showCrossHair(cm) {\n          var lineDiv = cm.display.lineDiv;\n          addClass(lineDiv, \"CodeMirror-crosshair\");\n\n          function up(e) {\n            if (e.keyCode == 18 || !e.altKey) {\n              rmClass(lineDiv, \"CodeMirror-crosshair\");\n              off(document, \"keyup\", up);\n              off(document, \"mouseover\", up);\n            }\n          }\n          on(document, \"keyup\", up);\n          on(document, \"mouseover\", up);\n        }\n\n        function onKeyUp(e) {\n          if (e.keyCode == 16) {\n            this.doc.sel.shift = false;\n          }\n          signalDOMEvent(this, e);\n        }\n\n        function onKeyPress(e) {\n          var cm = this;\n          if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n            return;\n          }\n          var keyCode = e.keyCode,\n              charCode = e.charCode;\n          if (presto && keyCode == lastStoppedKey) {\n            lastStoppedKey = null;e_preventDefault(e);return;\n          }\n          if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n            return;\n          }\n          var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n          // Some browsers fire keypress events for backspace\n          if (ch == \"\\x08\") {\n            return;\n          }\n          if (handleCharBinding(cm, e, ch)) {\n            return;\n          }\n          cm.display.input.onKeyPress(e);\n        }\n\n        var DOUBLECLICK_DELAY = 400;\n\n        var PastClick = function PastClick(time, pos, button) {\n          this.time = time;\n          this.pos = pos;\n          this.button = button;\n        };\n\n        PastClick.prototype.compare = function (time, pos, button) {\n          return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n        };\n\n        var lastClick;\n        var lastDoubleClick;\n        function clickRepeat(pos, button) {\n          var now = +new Date();\n          if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n            lastClick = lastDoubleClick = null;\n            return \"triple\";\n          } else if (lastClick && lastClick.compare(now, pos, button)) {\n            lastDoubleClick = new PastClick(now, pos, button);\n            lastClick = null;\n            return \"double\";\n          } else {\n            lastClick = new PastClick(now, pos, button);\n            lastDoubleClick = null;\n            return \"single\";\n          }\n        }\n\n        // A mouse down can be a single click, double click, triple click,\n        // start of selection drag, start of text drag, new cursor\n        // (ctrl-click), rectangle drag (alt-drag), or xwin\n        // middle-click-paste. Or it might be a click on something we should\n        // not interfere with, such as a scrollbar or widget.\n        function onMouseDown(e) {\n          var cm = this,\n              display = cm.display;\n          if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n            return;\n          }\n          display.input.ensurePolled();\n          display.shift = e.shiftKey;\n\n          if (eventInWidget(display, e)) {\n            if (!webkit) {\n              // Briefly turn off draggability, to allow widgets to do\n              // normal dragging things.\n              display.scroller.draggable = false;\n              setTimeout(function () {\n                return display.scroller.draggable = true;\n              }, 100);\n            }\n            return;\n          }\n          if (clickInGutter(cm, e)) {\n            return;\n          }\n          var pos = posFromMouse(cm, e),\n              button = e_button(e),\n              repeat = pos ? clickRepeat(pos, button) : \"single\";\n          window.focus();\n\n          // #3261: make sure, that we're not starting a second selection\n          if (button == 1 && cm.state.selectingText) {\n            cm.state.selectingText(e);\n          }\n\n          if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n            return;\n          }\n\n          if (button == 1) {\n            if (pos) {\n              leftButtonDown(cm, pos, repeat, e);\n            } else if (e_target(e) == display.scroller) {\n              e_preventDefault(e);\n            }\n          } else if (button == 2) {\n            if (pos) {\n              extendSelection(cm.doc, pos);\n            }\n            setTimeout(function () {\n              return display.input.focus();\n            }, 20);\n          } else if (button == 3) {\n            if (captureRightClick) {\n              onContextMenu(cm, e);\n            } else {\n              delayBlurEvent(cm);\n            }\n          }\n        }\n\n        function handleMappedButton(cm, button, pos, repeat, event) {\n          var name = \"Click\";\n          if (repeat == \"double\") {\n            name = \"Double\" + name;\n          } else if (repeat == \"triple\") {\n            name = \"Triple\" + name;\n          }\n          name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n          return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n            if (typeof bound == \"string\") {\n              bound = commands[bound];\n            }\n            if (!bound) {\n              return false;\n            }\n            var done = false;\n            try {\n              if (cm.isReadOnly()) {\n                cm.state.suppressEdits = true;\n              }\n              done = bound(cm, pos) != Pass;\n            } finally {\n              cm.state.suppressEdits = false;\n            }\n            return done;\n          });\n        }\n\n        function configureMouse(cm, repeat, event) {\n          var option = cm.getOption(\"configureMouse\");\n          var value = option ? option(cm, repeat, event) : {};\n          if (value.unit == null) {\n            var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n            value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n          }\n          if (value.extend == null || cm.doc.extend) {\n            value.extend = cm.doc.extend || event.shiftKey;\n          }\n          if (value.addNew == null) {\n            value.addNew = mac ? event.metaKey : event.ctrlKey;\n          }\n          if (value.moveOnDrag == null) {\n            value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n          }\n          return value;\n        }\n\n        function leftButtonDown(cm, pos, repeat, event) {\n          if (ie) {\n            setTimeout(bind(ensureFocus, cm), 0);\n          } else {\n            cm.curOp.focus = activeElt();\n          }\n\n          var behavior = configureMouse(cm, repeat, event);\n\n          var sel = cm.doc.sel,\n              contained;\n          if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n            leftButtonStartDrag(cm, event, pos, behavior);\n          } else {\n            leftButtonSelect(cm, event, pos, behavior);\n          }\n        }\n\n        // Start a text drag. When it ends, see if any dragging actually\n        // happen, and treat as a click if it didn't.\n        function leftButtonStartDrag(cm, event, pos, behavior) {\n          var display = cm.display,\n              moved = false;\n          var dragEnd = operation(cm, function (e) {\n            if (webkit) {\n              display.scroller.draggable = false;\n            }\n            cm.state.draggingText = false;\n            off(document, \"mouseup\", dragEnd);\n            off(document, \"mousemove\", mouseMove);\n            off(display.scroller, \"dragstart\", dragStart);\n            off(display.scroller, \"drop\", dragEnd);\n            if (!moved) {\n              e_preventDefault(e);\n              if (!behavior.addNew) {\n                extendSelection(cm.doc, pos, null, null, behavior.extend);\n              }\n              // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n              if (webkit || ie && ie_version == 9) {\n                setTimeout(function () {\n                  document.body.focus();display.input.focus();\n                }, 20);\n              } else {\n                display.input.focus();\n              }\n            }\n          });\n          var mouseMove = function mouseMove(e2) {\n            moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n          };\n          var dragStart = function dragStart() {\n            return moved = true;\n          };\n          // Let the drag handler handle this.\n          if (webkit) {\n            display.scroller.draggable = true;\n          }\n          cm.state.draggingText = dragEnd;\n          dragEnd.copy = !behavior.moveOnDrag;\n          // IE's approach to draggable\n          if (display.scroller.dragDrop) {\n            display.scroller.dragDrop();\n          }\n          on(document, \"mouseup\", dragEnd);\n          on(document, \"mousemove\", mouseMove);\n          on(display.scroller, \"dragstart\", dragStart);\n          on(display.scroller, \"drop\", dragEnd);\n\n          delayBlurEvent(cm);\n          setTimeout(function () {\n            return display.input.focus();\n          }, 20);\n        }\n\n        function rangeForUnit(cm, pos, unit) {\n          if (unit == \"char\") {\n            return new Range(pos, pos);\n          }\n          if (unit == \"word\") {\n            return cm.findWordAt(pos);\n          }\n          if (unit == \"line\") {\n            return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n          var result = unit(cm, pos);\n          return new Range(result.from, result.to);\n        }\n\n        // Normal selection, as opposed to text dragging.\n        function leftButtonSelect(cm, event, start, behavior) {\n          var display = cm.display,\n              doc = cm.doc;\n          e_preventDefault(event);\n\n          var ourRange,\n              ourIndex,\n              startSel = doc.sel,\n              ranges = startSel.ranges;\n          if (behavior.addNew && !behavior.extend) {\n            ourIndex = doc.sel.contains(start);\n            if (ourIndex > -1) {\n              ourRange = ranges[ourIndex];\n            } else {\n              ourRange = new Range(start, start);\n            }\n          } else {\n            ourRange = doc.sel.primary();\n            ourIndex = doc.sel.primIndex;\n          }\n\n          if (behavior.unit == \"rectangle\") {\n            if (!behavior.addNew) {\n              ourRange = new Range(start, start);\n            }\n            start = posFromMouse(cm, event, true, true);\n            ourIndex = -1;\n          } else {\n            var range$$1 = rangeForUnit(cm, start, behavior.unit);\n            if (behavior.extend) {\n              ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend);\n            } else {\n              ourRange = range$$1;\n            }\n          }\n\n          if (!behavior.addNew) {\n            ourIndex = 0;\n            setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n            startSel = doc.sel;\n          } else if (ourIndex == -1) {\n            ourIndex = ranges.length;\n            setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex), { scroll: false, origin: \"*mouse\" });\n          } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n            setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), { scroll: false, origin: \"*mouse\" });\n            startSel = doc.sel;\n          } else {\n            replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n          }\n\n          var lastPos = start;\n          function extendTo(pos) {\n            if (cmp(lastPos, pos) == 0) {\n              return;\n            }\n            lastPos = pos;\n\n            if (behavior.unit == \"rectangle\") {\n              var ranges = [],\n                  tabSize = cm.options.tabSize;\n              var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n              var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n              var left = Math.min(startCol, posCol),\n                  right = Math.max(startCol, posCol);\n              for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n                var text = getLine(doc, line).text,\n                    leftPos = findColumn(text, left, tabSize);\n                if (left == right) {\n                  ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n                } else if (text.length > leftPos) {\n                  ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n                }\n              }\n              if (!ranges.length) {\n                ranges.push(new Range(start, start));\n              }\n              setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), { origin: \"*mouse\", scroll: false });\n              cm.scrollIntoView(pos);\n            } else {\n              var oldRange = ourRange;\n              var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n              var anchor = oldRange.anchor,\n                  head;\n              if (cmp(range$$1.anchor, anchor) > 0) {\n                head = range$$1.head;\n                anchor = minPos(oldRange.from(), range$$1.anchor);\n              } else {\n                head = range$$1.anchor;\n                anchor = maxPos(oldRange.to(), range$$1.head);\n              }\n              var ranges$1 = startSel.ranges.slice(0);\n              ranges$1[ourIndex] = new Range(_clipPos(doc, anchor), head);\n              setSelection(doc, normalizeSelection(ranges$1, ourIndex), sel_mouse);\n            }\n          }\n\n          var editorSize = display.wrapper.getBoundingClientRect();\n          // Used to ensure timeout re-tries don't fire when another extend\n          // happened in the meantime (clearTimeout isn't reliable -- at\n          // least on Chrome, the timeouts still happen even when cleared,\n          // if the clear happens after their scheduled firing time).\n          var counter = 0;\n\n          function extend(e) {\n            var curCount = ++counter;\n            var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n            if (!cur) {\n              return;\n            }\n            if (cmp(cur, lastPos) != 0) {\n              cm.curOp.focus = activeElt();\n              extendTo(cur);\n              var visible = visibleLines(display, doc);\n              if (cur.line >= visible.to || cur.line < visible.from) {\n                setTimeout(operation(cm, function () {\n                  if (counter == curCount) {\n                    extend(e);\n                  }\n                }), 150);\n              }\n            } else {\n              var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n              if (outside) {\n                setTimeout(operation(cm, function () {\n                  if (counter != curCount) {\n                    return;\n                  }\n                  display.scroller.scrollTop += outside;\n                  extend(e);\n                }), 50);\n              }\n            }\n          }\n\n          function done(e) {\n            cm.state.selectingText = false;\n            counter = Infinity;\n            e_preventDefault(e);\n            display.input.focus();\n            off(document, \"mousemove\", move);\n            off(document, \"mouseup\", up);\n            doc.history.lastSelOrigin = null;\n          }\n\n          var move = operation(cm, function (e) {\n            if (!e_button(e)) {\n              done(e);\n            } else {\n              extend(e);\n            }\n          });\n          var up = operation(cm, done);\n          cm.state.selectingText = up;\n          on(document, \"mousemove\", move);\n          on(document, \"mouseup\", up);\n        }\n\n        // Determines whether an event happened in the gutter, and fires the\n        // handlers for the corresponding event.\n        function gutterEvent(cm, e, type, prevent) {\n          var mX, mY;\n          try {\n            mX = e.clientX;mY = e.clientY;\n          } catch (e) {\n            return false;\n          }\n          if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n            return false;\n          }\n          if (prevent) {\n            e_preventDefault(e);\n          }\n\n          var display = cm.display;\n          var lineBox = display.lineDiv.getBoundingClientRect();\n\n          if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n            return e_defaultPrevented(e);\n          }\n          mY -= lineBox.top - display.viewOffset;\n\n          for (var i = 0; i < cm.options.gutters.length; ++i) {\n            var g = display.gutters.childNodes[i];\n            if (g && g.getBoundingClientRect().right >= mX) {\n              var line = _lineAtHeight(cm.doc, mY);\n              var gutter = cm.options.gutters[i];\n              signal(cm, type, cm, line, gutter, e);\n              return e_defaultPrevented(e);\n            }\n          }\n        }\n\n        function clickInGutter(cm, e) {\n          return gutterEvent(cm, e, \"gutterClick\", true);\n        }\n\n        // CONTEXT MENU HANDLING\n\n        // To make the context menu work, we need to briefly unhide the\n        // textarea (making it as unobtrusive as possible) to let the\n        // right-click take effect on it.\n        function onContextMenu(cm, e) {\n          if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n            return;\n          }\n          if (signalDOMEvent(cm, e, \"contextmenu\")) {\n            return;\n          }\n          cm.display.input.onContextMenu(e);\n        }\n\n        function contextMenuInGutter(cm, e) {\n          if (!hasHandler(cm, \"gutterContextMenu\")) {\n            return false;\n          }\n          return gutterEvent(cm, e, \"gutterContextMenu\", false);\n        }\n\n        function themeChanged(cm) {\n          cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n          clearCaches(cm);\n        }\n\n        var Init = { toString: function toString() {\n            return \"CodeMirror.Init\";\n          } };\n\n        var defaults = {};\n        var optionHandlers = {};\n\n        function defineOptions(CodeMirror) {\n          var optionHandlers = CodeMirror.optionHandlers;\n\n          function option(name, deflt, handle, notOnInit) {\n            CodeMirror.defaults[name] = deflt;\n            if (handle) {\n              optionHandlers[name] = notOnInit ? function (cm, val, old) {\n                if (old != Init) {\n                  handle(cm, val, old);\n                }\n              } : handle;\n            }\n          }\n\n          CodeMirror.defineOption = option;\n\n          // Passed to option handlers when there is no old value.\n          CodeMirror.Init = Init;\n\n          // These two are, on init, called from the constructor because they\n          // have to be initialized before the editor can start at all.\n          option(\"value\", \"\", function (cm, val) {\n            return cm.setValue(val);\n          }, true);\n          option(\"mode\", null, function (cm, val) {\n            cm.doc.modeOption = val;\n            loadMode(cm);\n          }, true);\n\n          option(\"indentUnit\", 2, loadMode, true);\n          option(\"indentWithTabs\", false);\n          option(\"smartIndent\", true);\n          option(\"tabSize\", 4, function (cm) {\n            resetModeState(cm);\n            clearCaches(cm);\n            regChange(cm);\n          }, true);\n          option(\"lineSeparator\", null, function (cm, val) {\n            cm.doc.lineSep = val;\n            if (!val) {\n              return;\n            }\n            var newBreaks = [],\n                lineNo = cm.doc.first;\n            cm.doc.iter(function (line) {\n              for (var pos = 0;;) {\n                var found = line.text.indexOf(val, pos);\n                if (found == -1) {\n                  break;\n                }\n                pos = found + val.length;\n                newBreaks.push(Pos(lineNo, found));\n              }\n              lineNo++;\n            });\n            for (var i = newBreaks.length - 1; i >= 0; i--) {\n              _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n            }\n          });\n          option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function (cm, val, old) {\n            cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n            if (old != Init) {\n              cm.refresh();\n            }\n          });\n          option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n            return cm.refresh();\n          }, true);\n          option(\"electricChars\", true);\n          option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n            throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n          }, true);\n          option(\"spellcheck\", false, function (cm, val) {\n            return cm.getInputField().spellcheck = val;\n          }, true);\n          option(\"rtlMoveVisually\", !windows);\n          option(\"wholeLineUpdateBefore\", true);\n\n          option(\"theme\", \"default\", function (cm) {\n            themeChanged(cm);\n            guttersChanged(cm);\n          }, true);\n          option(\"keyMap\", \"default\", function (cm, val, old) {\n            var next = getKeyMap(val);\n            var prev = old != Init && getKeyMap(old);\n            if (prev && prev.detach) {\n              prev.detach(cm, next);\n            }\n            if (next.attach) {\n              next.attach(cm, prev || null);\n            }\n          });\n          option(\"extraKeys\", null);\n          option(\"configureMouse\", null);\n\n          option(\"lineWrapping\", false, wrappingChanged, true);\n          option(\"gutters\", [], function (cm) {\n            setGuttersForLineNumbers(cm.options);\n            guttersChanged(cm);\n          }, true);\n          option(\"fixedGutter\", true, function (cm, val) {\n            cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n            cm.refresh();\n          }, true);\n          option(\"coverGutterNextToScrollbar\", false, function (cm) {\n            return updateScrollbars(cm);\n          }, true);\n          option(\"scrollbarStyle\", \"native\", function (cm) {\n            initScrollbars(cm);\n            updateScrollbars(cm);\n            cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n            cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n          }, true);\n          option(\"lineNumbers\", false, function (cm) {\n            setGuttersForLineNumbers(cm.options);\n            guttersChanged(cm);\n          }, true);\n          option(\"firstLineNumber\", 1, guttersChanged, true);\n          option(\"lineNumberFormatter\", function (integer) {\n            return integer;\n          }, guttersChanged, true);\n          option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n          option(\"resetSelectionOnContextMenu\", true);\n          option(\"lineWiseCopyCut\", true);\n          option(\"pasteLinesPerSelection\", true);\n\n          option(\"readOnly\", false, function (cm, val) {\n            if (val == \"nocursor\") {\n              onBlur(cm);\n              cm.display.input.blur();\n            }\n            cm.display.input.readOnlyChanged(val);\n          });\n          option(\"disableInput\", false, function (cm, val) {\n            if (!val) {\n              cm.display.input.reset();\n            }\n          }, true);\n          option(\"dragDrop\", true, dragDropChanged);\n          option(\"allowDropFileTypes\", null);\n\n          option(\"cursorBlinkRate\", 530);\n          option(\"cursorScrollMargin\", 0);\n          option(\"cursorHeight\", 1, updateSelection, true);\n          option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n          option(\"workTime\", 100);\n          option(\"workDelay\", 100);\n          option(\"flattenSpans\", true, resetModeState, true);\n          option(\"addModeClass\", false, resetModeState, true);\n          option(\"pollInterval\", 100);\n          option(\"undoDepth\", 200, function (cm, val) {\n            return cm.doc.history.undoDepth = val;\n          });\n          option(\"historyEventDelay\", 1250);\n          option(\"viewportMargin\", 10, function (cm) {\n            return cm.refresh();\n          }, true);\n          option(\"maxHighlightLength\", 10000, resetModeState, true);\n          option(\"moveInputWithCursor\", true, function (cm, val) {\n            if (!val) {\n              cm.display.input.resetPosition();\n            }\n          });\n\n          option(\"tabindex\", null, function (cm, val) {\n            return cm.display.input.getField().tabIndex = val || \"\";\n          });\n          option(\"autofocus\", null);\n          option(\"direction\", \"ltr\", function (cm, val) {\n            return cm.doc.setDirection(val);\n          }, true);\n        }\n\n        function guttersChanged(cm) {\n          updateGutters(cm);\n          regChange(cm);\n          alignHorizontally(cm);\n        }\n\n        function dragDropChanged(cm, value, old) {\n          var wasOn = old && old != Init;\n          if (!value != !wasOn) {\n            var funcs = cm.display.dragFunctions;\n            var toggle = value ? on : off;\n            toggle(cm.display.scroller, \"dragstart\", funcs.start);\n            toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n            toggle(cm.display.scroller, \"dragover\", funcs.over);\n            toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n            toggle(cm.display.scroller, \"drop\", funcs.drop);\n          }\n        }\n\n        function wrappingChanged(cm) {\n          if (cm.options.lineWrapping) {\n            addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            cm.display.sizer.style.minWidth = \"\";\n            cm.display.sizerWidth = null;\n          } else {\n            rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            findMaxLine(cm);\n          }\n          estimateLineHeights(cm);\n          regChange(cm);\n          clearCaches(cm);\n          setTimeout(function () {\n            return updateScrollbars(cm);\n          }, 100);\n        }\n\n        // A CodeMirror instance represents an editor. This is the object\n        // that user code is usually dealing with.\n\n        function CodeMirror$1(place, options) {\n          var this$1 = this;\n\n          if (!(this instanceof CodeMirror$1)) {\n            return new CodeMirror$1(place, options);\n          }\n\n          this.options = options = options ? copyObj(options) : {};\n          // Determine effective options based on given values and defaults.\n          copyObj(defaults, options, false);\n          setGuttersForLineNumbers(options);\n\n          var doc = options.value;\n          if (typeof doc == \"string\") {\n            doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n          }\n          this.doc = doc;\n\n          var input = new CodeMirror$1.inputStyles[options.inputStyle](this);\n          var display = this.display = new Display(place, doc, input);\n          display.wrapper.CodeMirror = this;\n          updateGutters(this);\n          themeChanged(this);\n          if (options.lineWrapping) {\n            this.display.wrapper.className += \" CodeMirror-wrap\";\n          }\n          initScrollbars(this);\n\n          this.state = {\n            keyMaps: [], // stores maps added by addKeyMap\n            overlays: [], // highlighting overlays, as added by addOverlay\n            modeGen: 0, // bumped when mode/overlay changes, used to invalidate highlighting info\n            overwrite: false,\n            delayingBlurEvent: false,\n            focused: false,\n            suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n            pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n            selectingText: false,\n            draggingText: false,\n            highlight: new Delayed(), // stores highlight worker timeout\n            keySeq: null, // Unfinished key sequence\n            specialChars: null\n          };\n\n          if (options.autofocus && !mobile) {\n            display.input.focus();\n          }\n\n          // Override magic textarea content restore that IE sometimes does\n          // on our hidden textarea on reload\n          if (ie && ie_version < 11) {\n            setTimeout(function () {\n              return this$1.display.input.reset(true);\n            }, 20);\n          }\n\n          registerEventHandlers(this);\n          ensureGlobalHandlers();\n\n          _startOperation(this);\n          this.curOp.forceUpdate = true;\n          attachDoc(this, doc);\n\n          if (options.autofocus && !mobile || this.hasFocus()) {\n            setTimeout(bind(onFocus, this), 20);\n          } else {\n            onBlur(this);\n          }\n\n          for (var opt in optionHandlers) {\n            if (optionHandlers.hasOwnProperty(opt)) {\n              optionHandlers[opt](this$1, options[opt], Init);\n            }\n          }\n          maybeUpdateLineNumberWidth(this);\n          if (options.finishInit) {\n            options.finishInit(this);\n          }\n          for (var i = 0; i < initHooks.length; ++i) {\n            initHooks[i](this$1);\n          }\n          _endOperation(this);\n          // Suppress optimizelegibility in Webkit, since it breaks text\n          // measuring on line wrapping boundaries.\n          if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n            display.lineDiv.style.textRendering = \"auto\";\n          }\n        }\n\n        // The default configuration options.\n        CodeMirror$1.defaults = defaults;\n        // Functions to run when options are changed.\n        CodeMirror$1.optionHandlers = optionHandlers;\n\n        // Attach the necessary event handlers when initializing the editor\n        function registerEventHandlers(cm) {\n          var d = cm.display;\n          on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n          // Older IE's will not fire a second mousedown for a double click\n          if (ie && ie_version < 11) {\n            on(d.scroller, \"dblclick\", operation(cm, function (e) {\n              if (signalDOMEvent(cm, e)) {\n                return;\n              }\n              var pos = posFromMouse(cm, e);\n              if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n                return;\n              }\n              e_preventDefault(e);\n              var word = cm.findWordAt(pos);\n              extendSelection(cm.doc, word.anchor, word.head);\n            }));\n          } else {\n            on(d.scroller, \"dblclick\", function (e) {\n              return signalDOMEvent(cm, e) || e_preventDefault(e);\n            });\n          }\n          // Some browsers fire contextmenu *after* opening the menu, at\n          // which point we can't mess with it anymore. Context menu is\n          // handled in onMouseDown for these browsers.\n          if (!captureRightClick) {\n            on(d.scroller, \"contextmenu\", function (e) {\n              return onContextMenu(cm, e);\n            });\n          }\n\n          // Used to suppress mouse event handling when a touch happens\n          var touchFinished,\n              prevTouch = { end: 0 };\n          function finishTouch() {\n            if (d.activeTouch) {\n              touchFinished = setTimeout(function () {\n                return d.activeTouch = null;\n              }, 1000);\n              prevTouch = d.activeTouch;\n              prevTouch.end = +new Date();\n            }\n          }\n          function isMouseLikeTouchEvent(e) {\n            if (e.touches.length != 1) {\n              return false;\n            }\n            var touch = e.touches[0];\n            return touch.radiusX <= 1 && touch.radiusY <= 1;\n          }\n          function farAway(touch, other) {\n            if (other.left == null) {\n              return true;\n            }\n            var dx = other.left - touch.left,\n                dy = other.top - touch.top;\n            return dx * dx + dy * dy > 20 * 20;\n          }\n          on(d.scroller, \"touchstart\", function (e) {\n            if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {\n              d.input.ensurePolled();\n              clearTimeout(touchFinished);\n              var now = +new Date();\n              d.activeTouch = { start: now, moved: false,\n                prev: now - prevTouch.end <= 300 ? prevTouch : null };\n              if (e.touches.length == 1) {\n                d.activeTouch.left = e.touches[0].pageX;\n                d.activeTouch.top = e.touches[0].pageY;\n              }\n            }\n          });\n          on(d.scroller, \"touchmove\", function () {\n            if (d.activeTouch) {\n              d.activeTouch.moved = true;\n            }\n          });\n          on(d.scroller, \"touchend\", function (e) {\n            var touch = d.activeTouch;\n            if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n              var pos = cm.coordsChar(d.activeTouch, \"page\"),\n                  range;\n              if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n                {\n                  range = new Range(pos, pos);\n                } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n                {\n                  range = cm.findWordAt(pos);\n                } else // Triple tap\n                {\n                  range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n                }\n              cm.setSelection(range.anchor, range.head);\n              cm.focus();\n              e_preventDefault(e);\n            }\n            finishTouch();\n          });\n          on(d.scroller, \"touchcancel\", finishTouch);\n\n          // Sync scrolling between fake scrollbars and real scrollable\n          // area, ensure viewport is updated when scrolling.\n          on(d.scroller, \"scroll\", function () {\n            if (d.scroller.clientHeight) {\n              updateScrollTop(cm, d.scroller.scrollTop);\n              setScrollLeft(cm, d.scroller.scrollLeft, true);\n              signal(cm, \"scroll\", cm);\n            }\n          });\n\n          // Listen to wheel events in order to try and update the viewport on time.\n          on(d.scroller, \"mousewheel\", function (e) {\n            return onScrollWheel(cm, e);\n          });\n          on(d.scroller, \"DOMMouseScroll\", function (e) {\n            return onScrollWheel(cm, e);\n          });\n\n          // Prevent wrapper from ever scrolling\n          on(d.wrapper, \"scroll\", function () {\n            return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n          });\n\n          d.dragFunctions = {\n            enter: function enter(e) {\n              if (!signalDOMEvent(cm, e)) {\n                e_stop(e);\n              }\n            },\n            over: function over(e) {\n              if (!signalDOMEvent(cm, e)) {\n                onDragOver(cm, e);e_stop(e);\n              }\n            },\n            start: function start(e) {\n              return onDragStart(cm, e);\n            },\n            drop: operation(cm, onDrop),\n            leave: function leave(e) {\n              if (!signalDOMEvent(cm, e)) {\n                clearDragCursor(cm);\n              }\n            }\n          };\n\n          var inp = d.input.getField();\n          on(inp, \"keyup\", function (e) {\n            return onKeyUp.call(cm, e);\n          });\n          on(inp, \"keydown\", operation(cm, onKeyDown));\n          on(inp, \"keypress\", operation(cm, onKeyPress));\n          on(inp, \"focus\", function (e) {\n            return onFocus(cm, e);\n          });\n          on(inp, \"blur\", function (e) {\n            return onBlur(cm, e);\n          });\n        }\n\n        var initHooks = [];\n        CodeMirror$1.defineInitHook = function (f) {\n          return initHooks.push(f);\n        };\n\n        // Indent the given line. The how parameter can be \"smart\",\n        // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n        // (typically set to true for forced single-line indents), empty\n        // lines are not indented, and places where the mode returns Pass\n        // are left alone.\n        function indentLine(cm, n, how, aggressive) {\n          var doc = cm.doc,\n              state;\n          if (how == null) {\n            how = \"add\";\n          }\n          if (how == \"smart\") {\n            // Fall back to \"prev\" when the mode doesn't have an indentation\n            // method.\n            if (!doc.mode.indent) {\n              how = \"prev\";\n            } else {\n              state = getContextBefore(cm, n).state;\n            }\n          }\n\n          var tabSize = cm.options.tabSize;\n          var line = getLine(doc, n),\n              curSpace = countColumn(line.text, null, tabSize);\n          if (line.stateAfter) {\n            line.stateAfter = null;\n          }\n          var curSpaceString = line.text.match(/^\\s*/)[0],\n              indentation;\n          if (!aggressive && !/\\S/.test(line.text)) {\n            indentation = 0;\n            how = \"not\";\n          } else if (how == \"smart\") {\n            indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n            if (indentation == Pass || indentation > 150) {\n              if (!aggressive) {\n                return;\n              }\n              how = \"prev\";\n            }\n          }\n          if (how == \"prev\") {\n            if (n > doc.first) {\n              indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n            } else {\n              indentation = 0;\n            }\n          } else if (how == \"add\") {\n            indentation = curSpace + cm.options.indentUnit;\n          } else if (how == \"subtract\") {\n            indentation = curSpace - cm.options.indentUnit;\n          } else if (typeof how == \"number\") {\n            indentation = curSpace + how;\n          }\n          indentation = Math.max(0, indentation);\n\n          var indentString = \"\",\n              pos = 0;\n          if (cm.options.indentWithTabs) {\n            for (var i = Math.floor(indentation / tabSize); i; --i) {\n              pos += tabSize;indentString += \"\\t\";\n            }\n          }\n          if (pos < indentation) {\n            indentString += spaceStr(indentation - pos);\n          }\n\n          if (indentString != curSpaceString) {\n            _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n            line.stateAfter = null;\n            return true;\n          } else {\n            // Ensure that, if the cursor was in the whitespace at the start\n            // of the line, it is moved to the end of that space.\n            for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n              var range = doc.sel.ranges[i$1];\n              if (range.head.line == n && range.head.ch < curSpaceString.length) {\n                var pos$1 = Pos(n, curSpaceString.length);\n                replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n                break;\n              }\n            }\n          }\n        }\n\n        // This will be set to a {lineWise: bool, text: [string]} object, so\n        // that, when pasting, we know what kind of selections the copied\n        // text was made out of.\n        var lastCopied = null;\n\n        function setLastCopied(newLastCopied) {\n          lastCopied = newLastCopied;\n        }\n\n        function applyTextInput(cm, inserted, deleted, sel, origin) {\n          var doc = cm.doc;\n          cm.display.shift = false;\n          if (!sel) {\n            sel = doc.sel;\n          }\n\n          var paste = cm.state.pasteIncoming || origin == \"paste\";\n          var textLines = splitLinesAuto(inserted),\n              multiPaste = null;\n          // When pasing N lines into N selections, insert one line per selection\n          if (paste && sel.ranges.length > 1) {\n            if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n              if (sel.ranges.length % lastCopied.text.length == 0) {\n                multiPaste = [];\n                for (var i = 0; i < lastCopied.text.length; i++) {\n                  multiPaste.push(doc.splitLines(lastCopied.text[i]));\n                }\n              }\n            } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n              multiPaste = map(textLines, function (l) {\n                return [l];\n              });\n            }\n          }\n\n          var updateInput;\n          // Normal behavior is to insert the new text into every selection\n          for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n            var range$$1 = sel.ranges[i$1];\n            var from = range$$1.from(),\n                to = range$$1.to();\n            if (range$$1.empty()) {\n              if (deleted && deleted > 0) // Handle deletion\n                {\n                  from = Pos(from.line, from.ch - deleted);\n                } else if (cm.state.overwrite && !paste) // Handle overwrite\n                {\n                  to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n                } else if (lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n                from = to = Pos(from.line, 0);\n              }\n            }\n            updateInput = cm.curOp.updateInput;\n            var changeEvent = { from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n              origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\") };\n            makeChange(cm.doc, changeEvent);\n            signalLater(cm, \"inputRead\", cm, changeEvent);\n          }\n          if (inserted && !paste) {\n            triggerElectric(cm, inserted);\n          }\n\n          ensureCursorVisible(cm);\n          cm.curOp.updateInput = updateInput;\n          cm.curOp.typing = true;\n          cm.state.pasteIncoming = cm.state.cutIncoming = false;\n        }\n\n        function handlePaste(e, cm) {\n          var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n          if (pasted) {\n            e.preventDefault();\n            if (!cm.isReadOnly() && !cm.options.disableInput) {\n              runInOp(cm, function () {\n                return applyTextInput(cm, pasted, 0, null, \"paste\");\n              });\n            }\n            return true;\n          }\n        }\n\n        function triggerElectric(cm, inserted) {\n          // When an 'electric' character is inserted, immediately trigger a reindent\n          if (!cm.options.electricChars || !cm.options.smartIndent) {\n            return;\n          }\n          var sel = cm.doc.sel;\n\n          for (var i = sel.ranges.length - 1; i >= 0; i--) {\n            var range$$1 = sel.ranges[i];\n            if (range$$1.head.ch > 100 || i && sel.ranges[i - 1].head.line == range$$1.head.line) {\n              continue;\n            }\n            var mode = cm.getModeAt(range$$1.head);\n            var indented = false;\n            if (mode.electricChars) {\n              for (var j = 0; j < mode.electricChars.length; j++) {\n                if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n                  indented = indentLine(cm, range$$1.head.line, \"smart\");\n                  break;\n                }\n              }\n            } else if (mode.electricInput) {\n              if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch))) {\n                indented = indentLine(cm, range$$1.head.line, \"smart\");\n              }\n            }\n            if (indented) {\n              signalLater(cm, \"electricInput\", cm, range$$1.head.line);\n            }\n          }\n        }\n\n        function copyableRanges(cm) {\n          var text = [],\n              ranges = [];\n          for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n            var line = cm.doc.sel.ranges[i].head.line;\n            var lineRange = { anchor: Pos(line, 0), head: Pos(line + 1, 0) };\n            ranges.push(lineRange);\n            text.push(cm.getRange(lineRange.anchor, lineRange.head));\n          }\n          return { text: text, ranges: ranges };\n        }\n\n        function disableBrowserMagic(field, spellcheck) {\n          field.setAttribute(\"autocorrect\", \"off\");\n          field.setAttribute(\"autocapitalize\", \"off\");\n          field.setAttribute(\"spellcheck\", !!spellcheck);\n        }\n\n        function hiddenTextarea() {\n          var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n          var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n          // The textarea is kept positioned near the cursor to prevent the\n          // fact that it'll be scrolled into view on input from scrolling\n          // our fake cursor out of view. On webkit, when wrap=off, paste is\n          // very slow. So make the area wide instead.\n          if (webkit) {\n            te.style.width = \"1000px\";\n          } else {\n            te.setAttribute(\"wrap\", \"off\");\n          }\n          // If border: 0; -- iOS fails to open keyboard (issue #1287)\n          if (ios) {\n            te.style.border = \"1px solid black\";\n          }\n          disableBrowserMagic(te);\n          return div;\n        }\n\n        // The publicly visible API. Note that methodOp(f) means\n        // 'wrap f in an operation, performed on its `this` parameter'.\n\n        // This is not the complete set of editor methods. Most of the\n        // methods defined on the Doc type are also injected into\n        // CodeMirror.prototype, for backwards compatibility and\n        // convenience.\n\n        var addEditorMethods = function addEditorMethods(CodeMirror) {\n          var optionHandlers = CodeMirror.optionHandlers;\n\n          var helpers = CodeMirror.helpers = {};\n\n          CodeMirror.prototype = {\n            constructor: CodeMirror,\n            focus: function focus() {\n              window.focus();this.display.input.focus();\n            },\n\n            setOption: function setOption(option, value) {\n              var options = this.options,\n                  old = options[option];\n              if (options[option] == value && option != \"mode\") {\n                return;\n              }\n              options[option] = value;\n              if (optionHandlers.hasOwnProperty(option)) {\n                operation(this, optionHandlers[option])(this, value, old);\n              }\n              signal(this, \"optionChange\", this, option);\n            },\n\n            getOption: function getOption(option) {\n              return this.options[option];\n            },\n            getDoc: function getDoc() {\n              return this.doc;\n            },\n\n            addKeyMap: function addKeyMap(map$$1, bottom) {\n              this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n            },\n            removeKeyMap: function removeKeyMap(map$$1) {\n              var maps = this.state.keyMaps;\n              for (var i = 0; i < maps.length; ++i) {\n                if (maps[i] == map$$1 || maps[i].name == map$$1) {\n                  maps.splice(i, 1);\n                  return true;\n                }\n              }\n            },\n\n            addOverlay: methodOp(function (spec, options) {\n              var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n              if (mode.startState) {\n                throw new Error(\"Overlays may not be stateful.\");\n              }\n              insertSorted(this.state.overlays, { mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                priority: options && options.priority || 0 }, function (overlay) {\n                return overlay.priority;\n              });\n              this.state.modeGen++;\n              regChange(this);\n            }),\n            removeOverlay: methodOp(function (spec) {\n              var this$1 = this;\n\n              var overlays = this.state.overlays;\n              for (var i = 0; i < overlays.length; ++i) {\n                var cur = overlays[i].modeSpec;\n                if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n                  overlays.splice(i, 1);\n                  this$1.state.modeGen++;\n                  regChange(this$1);\n                  return;\n                }\n              }\n            }),\n\n            indentLine: methodOp(function (n, dir, aggressive) {\n              if (typeof dir != \"string\" && typeof dir != \"number\") {\n                if (dir == null) {\n                  dir = this.options.smartIndent ? \"smart\" : \"prev\";\n                } else {\n                  dir = dir ? \"add\" : \"subtract\";\n                }\n              }\n              if (isLine(this.doc, n)) {\n                indentLine(this, n, dir, aggressive);\n              }\n            }),\n            indentSelection: methodOp(function (how) {\n              var this$1 = this;\n\n              var ranges = this.doc.sel.ranges,\n                  end = -1;\n              for (var i = 0; i < ranges.length; i++) {\n                var range$$1 = ranges[i];\n                if (!range$$1.empty()) {\n                  var from = range$$1.from(),\n                      to = range$$1.to();\n                  var start = Math.max(end, from.line);\n                  end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n                  for (var j = start; j < end; ++j) {\n                    indentLine(this$1, j, how);\n                  }\n                  var newRanges = this$1.doc.sel.ranges;\n                  if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n                    replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n                  }\n                } else if (range$$1.head.line > end) {\n                  indentLine(this$1, range$$1.head.line, how, true);\n                  end = range$$1.head.line;\n                  if (i == this$1.doc.sel.primIndex) {\n                    ensureCursorVisible(this$1);\n                  }\n                }\n              }\n            }),\n\n            // Fetch the parser token for a given character. Useful for hacks\n            // that want to inspect the mode state (say, for completion).\n            getTokenAt: function getTokenAt(pos, precise) {\n              return takeToken(this, pos, precise);\n            },\n\n            getLineTokens: function getLineTokens(line, precise) {\n              return takeToken(this, Pos(line), precise, true);\n            },\n\n            getTokenTypeAt: function getTokenTypeAt(pos) {\n              pos = _clipPos(this.doc, pos);\n              var styles = getLineStyles(this, getLine(this.doc, pos.line));\n              var before = 0,\n                  after = (styles.length - 1) / 2,\n                  ch = pos.ch;\n              var type;\n              if (ch == 0) {\n                type = styles[2];\n              } else {\n                for (;;) {\n                  var mid = before + after >> 1;\n                  if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n                    after = mid;\n                  } else if (styles[mid * 2 + 1] < ch) {\n                    before = mid + 1;\n                  } else {\n                    type = styles[mid * 2 + 2];break;\n                  }\n                }\n              }\n              var cut = type ? type.indexOf(\"overlay \") : -1;\n              return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n            },\n\n            getModeAt: function getModeAt(pos) {\n              var mode = this.doc.mode;\n              if (!mode.innerMode) {\n                return mode;\n              }\n              return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n            },\n\n            getHelper: function getHelper(pos, type) {\n              return this.getHelpers(pos, type)[0];\n            },\n\n            getHelpers: function getHelpers(pos, type) {\n              var this$1 = this;\n\n              var found = [];\n              if (!helpers.hasOwnProperty(type)) {\n                return found;\n              }\n              var help = helpers[type],\n                  mode = this.getModeAt(pos);\n              if (typeof mode[type] == \"string\") {\n                if (help[mode[type]]) {\n                  found.push(help[mode[type]]);\n                }\n              } else if (mode[type]) {\n                for (var i = 0; i < mode[type].length; i++) {\n                  var val = help[mode[type][i]];\n                  if (val) {\n                    found.push(val);\n                  }\n                }\n              } else if (mode.helperType && help[mode.helperType]) {\n                found.push(help[mode.helperType]);\n              } else if (help[mode.name]) {\n                found.push(help[mode.name]);\n              }\n              for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n                var cur = help._global[i$1];\n                if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1) {\n                  found.push(cur.val);\n                }\n              }\n              return found;\n            },\n\n            getStateAfter: function getStateAfter(line, precise) {\n              var doc = this.doc;\n              line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n              return getContextBefore(this, line + 1, precise).state;\n            },\n\n            cursorCoords: function cursorCoords(start, mode) {\n              var pos,\n                  range$$1 = this.doc.sel.primary();\n              if (start == null) {\n                pos = range$$1.head;\n              } else if ((typeof start === \"undefined\" ? \"undefined\" : _typeof(start)) == \"object\") {\n                pos = _clipPos(this.doc, start);\n              } else {\n                pos = start ? range$$1.from() : range$$1.to();\n              }\n              return _cursorCoords(this, pos, mode || \"page\");\n            },\n\n            charCoords: function charCoords(pos, mode) {\n              return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n            },\n\n            coordsChar: function coordsChar(coords, mode) {\n              coords = fromCoordSystem(this, coords, mode || \"page\");\n              return _coordsChar(this, coords.left, coords.top);\n            },\n\n            lineAtHeight: function lineAtHeight(height, mode) {\n              height = fromCoordSystem(this, { top: height, left: 0 }, mode || \"page\").top;\n              return _lineAtHeight(this.doc, height + this.display.viewOffset);\n            },\n            heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n              var end = false,\n                  lineObj;\n              if (typeof line == \"number\") {\n                var last = this.doc.first + this.doc.size - 1;\n                if (line < this.doc.first) {\n                  line = this.doc.first;\n                } else if (line > last) {\n                  line = last;end = true;\n                }\n                lineObj = getLine(this.doc, line);\n              } else {\n                lineObj = line;\n              }\n              return intoCoordSystem(this, lineObj, { top: 0, left: 0 }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n            },\n\n            defaultTextHeight: function defaultTextHeight() {\n              return textHeight(this.display);\n            },\n            defaultCharWidth: function defaultCharWidth() {\n              return charWidth(this.display);\n            },\n\n            getViewport: function getViewport() {\n              return { from: this.display.viewFrom, to: this.display.viewTo };\n            },\n\n            addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n              var display = this.display;\n              pos = _cursorCoords(this, _clipPos(this.doc, pos));\n              var top = pos.bottom,\n                  left = pos.left;\n              node.style.position = \"absolute\";\n              node.setAttribute(\"cm-ignore-events\", \"true\");\n              this.display.input.setUneditable(node);\n              display.sizer.appendChild(node);\n              if (vert == \"over\") {\n                top = pos.top;\n              } else if (vert == \"above\" || vert == \"near\") {\n                var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n                    hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n                // Default to positioning above (if specified and possible); otherwise default to positioning below\n                if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n                  top = pos.top - node.offsetHeight;\n                } else if (pos.bottom + node.offsetHeight <= vspace) {\n                  top = pos.bottom;\n                }\n                if (left + node.offsetWidth > hspace) {\n                  left = hspace - node.offsetWidth;\n                }\n              }\n              node.style.top = top + \"px\";\n              node.style.left = node.style.right = \"\";\n              if (horiz == \"right\") {\n                left = display.sizer.clientWidth - node.offsetWidth;\n                node.style.right = \"0px\";\n              } else {\n                if (horiz == \"left\") {\n                  left = 0;\n                } else if (horiz == \"middle\") {\n                  left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n                }\n                node.style.left = left + \"px\";\n              }\n              if (scroll) {\n                scrollIntoView(this, { left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight });\n              }\n            },\n\n            triggerOnKeyDown: methodOp(onKeyDown),\n            triggerOnKeyPress: methodOp(onKeyPress),\n            triggerOnKeyUp: onKeyUp,\n            triggerOnMouseDown: methodOp(onMouseDown),\n\n            execCommand: function execCommand(cmd) {\n              if (commands.hasOwnProperty(cmd)) {\n                return commands[cmd].call(null, this);\n              }\n            },\n\n            triggerElectric: methodOp(function (text) {\n              triggerElectric(this, text);\n            }),\n\n            findPosH: function findPosH(from, amount, unit, visually) {\n              var this$1 = this;\n\n              var dir = 1;\n              if (amount < 0) {\n                dir = -1;amount = -amount;\n              }\n              var cur = _clipPos(this.doc, from);\n              for (var i = 0; i < amount; ++i) {\n                cur = _findPosH(this$1.doc, cur, dir, unit, visually);\n                if (cur.hitSide) {\n                  break;\n                }\n              }\n              return cur;\n            },\n\n            moveH: methodOp(function (dir, unit) {\n              var this$1 = this;\n\n              this.extendSelectionsBy(function (range$$1) {\n                if (this$1.display.shift || this$1.doc.extend || range$$1.empty()) {\n                  return _findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually);\n                } else {\n                  return dir < 0 ? range$$1.from() : range$$1.to();\n                }\n              }, sel_move);\n            }),\n\n            deleteH: methodOp(function (dir, unit) {\n              var sel = this.doc.sel,\n                  doc = this.doc;\n              if (sel.somethingSelected()) {\n                doc.replaceSelection(\"\", null, \"+delete\");\n              } else {\n                deleteNearSelection(this, function (range$$1) {\n                  var other = _findPosH(doc, range$$1.head, dir, unit, false);\n                  return dir < 0 ? { from: other, to: range$$1.head } : { from: range$$1.head, to: other };\n                });\n              }\n            }),\n\n            findPosV: function findPosV(from, amount, unit, goalColumn) {\n              var this$1 = this;\n\n              var dir = 1,\n                  x = goalColumn;\n              if (amount < 0) {\n                dir = -1;amount = -amount;\n              }\n              var cur = _clipPos(this.doc, from);\n              for (var i = 0; i < amount; ++i) {\n                var coords = _cursorCoords(this$1, cur, \"div\");\n                if (x == null) {\n                  x = coords.left;\n                } else {\n                  coords.left = x;\n                }\n                cur = _findPosV(this$1, coords, dir, unit);\n                if (cur.hitSide) {\n                  break;\n                }\n              }\n              return cur;\n            },\n\n            moveV: methodOp(function (dir, unit) {\n              var this$1 = this;\n\n              var doc = this.doc,\n                  goals = [];\n              var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n              doc.extendSelectionsBy(function (range$$1) {\n                if (collapse) {\n                  return dir < 0 ? range$$1.from() : range$$1.to();\n                }\n                var headPos = _cursorCoords(this$1, range$$1.head, \"div\");\n                if (range$$1.goalColumn != null) {\n                  headPos.left = range$$1.goalColumn;\n                }\n                goals.push(headPos.left);\n                var pos = _findPosV(this$1, headPos, dir, unit);\n                if (unit == \"page\" && range$$1 == doc.sel.primary()) {\n                  addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n                }\n                return pos;\n              }, sel_move);\n              if (goals.length) {\n                for (var i = 0; i < doc.sel.ranges.length; i++) {\n                  doc.sel.ranges[i].goalColumn = goals[i];\n                }\n              }\n            }),\n\n            // Find the word at the given position (as returned by coordsChar).\n            findWordAt: function findWordAt(pos) {\n              var doc = this.doc,\n                  line = getLine(doc, pos.line).text;\n              var start = pos.ch,\n                  end = pos.ch;\n              if (line) {\n                var helper = this.getHelper(pos, \"wordChars\");\n                if ((pos.sticky == \"before\" || end == line.length) && start) {\n                  --start;\n                } else {\n                  ++end;\n                }\n                var startChar = line.charAt(start);\n                var check = isWordChar(startChar, helper) ? function (ch) {\n                  return isWordChar(ch, helper);\n                } : /\\s/.test(startChar) ? function (ch) {\n                  return (/\\s/.test(ch)\n                  );\n                } : function (ch) {\n                  return !/\\s/.test(ch) && !isWordChar(ch);\n                };\n                while (start > 0 && check(line.charAt(start - 1))) {\n                  --start;\n                }\n                while (end < line.length && check(line.charAt(end))) {\n                  ++end;\n                }\n              }\n              return new Range(Pos(pos.line, start), Pos(pos.line, end));\n            },\n\n            toggleOverwrite: function toggleOverwrite(value) {\n              if (value != null && value == this.state.overwrite) {\n                return;\n              }\n              if (this.state.overwrite = !this.state.overwrite) {\n                addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n              } else {\n                rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n              }\n\n              signal(this, \"overwriteToggle\", this, this.state.overwrite);\n            },\n            hasFocus: function hasFocus() {\n              return this.display.input.getField() == activeElt();\n            },\n            isReadOnly: function isReadOnly() {\n              return !!(this.options.readOnly || this.doc.cantEdit);\n            },\n\n            scrollTo: methodOp(function (x, y) {\n              scrollToCoords(this, x, y);\n            }),\n            getScrollInfo: function getScrollInfo() {\n              var scroller = this.display.scroller;\n              return { left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this) };\n            },\n\n            scrollIntoView: methodOp(function (range$$1, margin) {\n              if (range$$1 == null) {\n                range$$1 = { from: this.doc.sel.primary().head, to: null };\n                if (margin == null) {\n                  margin = this.options.cursorScrollMargin;\n                }\n              } else if (typeof range$$1 == \"number\") {\n                range$$1 = { from: Pos(range$$1, 0), to: null };\n              } else if (range$$1.from == null) {\n                range$$1 = { from: range$$1, to: null };\n              }\n              if (!range$$1.to) {\n                range$$1.to = range$$1.from;\n              }\n              range$$1.margin = margin || 0;\n\n              if (range$$1.from.line != null) {\n                scrollToRange(this, range$$1);\n              } else {\n                scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n              }\n            }),\n\n            setSize: methodOp(function (width, height) {\n              var this$1 = this;\n\n              var interpret = function interpret(val) {\n                return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n              };\n              if (width != null) {\n                this.display.wrapper.style.width = interpret(width);\n              }\n              if (height != null) {\n                this.display.wrapper.style.height = interpret(height);\n              }\n              if (this.options.lineWrapping) {\n                clearLineMeasurementCache(this);\n              }\n              var lineNo$$1 = this.display.viewFrom;\n              this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n                if (line.widgets) {\n                  for (var i = 0; i < line.widgets.length; i++) {\n                    if (line.widgets[i].noHScroll) {\n                      regLineChange(this$1, lineNo$$1, \"widget\");break;\n                    }\n                  }\n                }\n                ++lineNo$$1;\n              });\n              this.curOp.forceUpdate = true;\n              signal(this, \"refresh\", this);\n            }),\n\n            operation: function operation(f) {\n              return runInOp(this, f);\n            },\n            startOperation: function startOperation() {\n              return _startOperation(this);\n            },\n            endOperation: function endOperation() {\n              return _endOperation(this);\n            },\n\n            refresh: methodOp(function () {\n              var oldHeight = this.display.cachedTextHeight;\n              regChange(this);\n              this.curOp.forceUpdate = true;\n              clearCaches(this);\n              scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n              updateGutterSpace(this);\n              if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n                estimateLineHeights(this);\n              }\n              signal(this, \"refresh\", this);\n            }),\n\n            swapDoc: methodOp(function (doc) {\n              var old = this.doc;\n              old.cm = null;\n              attachDoc(this, doc);\n              clearCaches(this);\n              this.display.input.reset();\n              scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n              this.curOp.forceScroll = true;\n              signalLater(this, \"swapDoc\", this, old);\n              return old;\n            }),\n\n            getInputField: function getInputField() {\n              return this.display.input.getField();\n            },\n            getWrapperElement: function getWrapperElement() {\n              return this.display.wrapper;\n            },\n            getScrollerElement: function getScrollerElement() {\n              return this.display.scroller;\n            },\n            getGutterElement: function getGutterElement() {\n              return this.display.gutters;\n            }\n          };\n          eventMixin(CodeMirror);\n\n          CodeMirror.registerHelper = function (type, name, value) {\n            if (!helpers.hasOwnProperty(type)) {\n              helpers[type] = CodeMirror[type] = { _global: [] };\n            }\n            helpers[type][name] = value;\n          };\n          CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n            CodeMirror.registerHelper(type, name, value);\n            helpers[type]._global.push({ pred: predicate, val: value });\n          };\n        };\n\n        // Used for horizontal relative motion. Dir is -1 or 1 (left or\n        // right), unit can be \"char\", \"column\" (like char, but doesn't\n        // cross line boundaries), \"word\" (across next word), or \"group\" (to\n        // the start of next group of word or non-word-non-whitespace\n        // chars). The visually param controls whether, in right-to-left\n        // text, direction 1 means to move towards the next index in the\n        // string, or towards the character to the right of the current\n        // position. The resulting position will have a hitSide=true\n        // property if it reached the end of the document.\n        function _findPosH(doc, pos, dir, unit, visually) {\n          var oldPos = pos;\n          var origDir = dir;\n          var lineObj = getLine(doc, pos.line);\n          function findNextLine() {\n            var l = pos.line + dir;\n            if (l < doc.first || l >= doc.first + doc.size) {\n              return false;\n            }\n            pos = new Pos(l, pos.ch, pos.sticky);\n            return lineObj = getLine(doc, l);\n          }\n          function moveOnce(boundToLine) {\n            var next;\n            if (visually) {\n              next = moveVisually(doc.cm, lineObj, pos, dir);\n            } else {\n              next = moveLogically(lineObj, pos, dir);\n            }\n            if (next == null) {\n              if (!boundToLine && findNextLine()) {\n                pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir);\n              } else {\n                return false;\n              }\n            } else {\n              pos = next;\n            }\n            return true;\n          }\n\n          if (unit == \"char\") {\n            moveOnce();\n          } else if (unit == \"column\") {\n            moveOnce(true);\n          } else if (unit == \"word\" || unit == \"group\") {\n            var sawType = null,\n                group = unit == \"group\";\n            var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n            for (var first = true;; first = false) {\n              if (dir < 0 && !moveOnce(!first)) {\n                break;\n              }\n              var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n              var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n              if (group && !first && !type) {\n                type = \"s\";\n              }\n              if (sawType && sawType != type) {\n                if (dir < 0) {\n                  dir = 1;moveOnce();pos.sticky = \"after\";\n                }\n                break;\n              }\n\n              if (type) {\n                sawType = type;\n              }\n              if (dir > 0 && !moveOnce(!first)) {\n                break;\n              }\n            }\n          }\n          var result = skipAtomic(doc, pos, oldPos, origDir, true);\n          if (equalCursorPos(oldPos, result)) {\n            result.hitSide = true;\n          }\n          return result;\n        }\n\n        // For relative vertical movement. Dir may be -1 or 1. Unit can be\n        // \"page\" or \"line\". The resulting position will have a hitSide=true\n        // property if it reached the end of the document.\n        function _findPosV(cm, pos, dir, unit) {\n          var doc = cm.doc,\n              x = pos.left,\n              y;\n          if (unit == \"page\") {\n            var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n            var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n            y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n          } else if (unit == \"line\") {\n            y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n          }\n          var target;\n          for (;;) {\n            target = _coordsChar(cm, x, y);\n            if (!target.outside) {\n              break;\n            }\n            if (dir < 0 ? y <= 0 : y >= doc.height) {\n              target.hitSide = true;break;\n            }\n            y += dir * 5;\n          }\n          return target;\n        }\n\n        // CONTENTEDITABLE INPUT STYLE\n\n        var ContentEditableInput = function ContentEditableInput(cm) {\n          this.cm = cm;\n          this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n          this.polling = new Delayed();\n          this.composing = null;\n          this.gracePeriod = false;\n          this.readDOMTimeout = null;\n        };\n\n        ContentEditableInput.prototype.init = function (display) {\n          var this$1 = this;\n\n          var input = this,\n              cm = input.cm;\n          var div = input.div = display.lineDiv;\n          disableBrowserMagic(div, cm.options.spellcheck);\n\n          on(div, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n              return;\n            }\n            // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n            if (ie_version <= 11) {\n              setTimeout(operation(cm, function () {\n                return this$1.updateFromDOM();\n              }), 20);\n            }\n          });\n\n          on(div, \"compositionstart\", function (e) {\n            this$1.composing = { data: e.data, done: false };\n          });\n          on(div, \"compositionupdate\", function (e) {\n            if (!this$1.composing) {\n              this$1.composing = { data: e.data, done: false };\n            }\n          });\n          on(div, \"compositionend\", function (e) {\n            if (this$1.composing) {\n              if (e.data != this$1.composing.data) {\n                this$1.readFromDOMSoon();\n              }\n              this$1.composing.done = true;\n            }\n          });\n\n          on(div, \"touchstart\", function () {\n            return input.forceCompositionEnd();\n          });\n\n          on(div, \"input\", function () {\n            if (!this$1.composing) {\n              this$1.readFromDOMSoon();\n            }\n          });\n\n          function onCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n              return;\n            }\n            if (cm.somethingSelected()) {\n              setLastCopied({ lineWise: false, text: cm.getSelections() });\n              if (e.type == \"cut\") {\n                cm.replaceSelection(\"\", null, \"cut\");\n              }\n            } else if (!cm.options.lineWiseCopyCut) {\n              return;\n            } else {\n              var ranges = copyableRanges(cm);\n              setLastCopied({ lineWise: true, text: ranges.text });\n              if (e.type == \"cut\") {\n                cm.operation(function () {\n                  cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n                  cm.replaceSelection(\"\", null, \"cut\");\n                });\n              }\n            }\n            if (e.clipboardData) {\n              e.clipboardData.clearData();\n              var content = lastCopied.text.join(\"\\n\");\n              // iOS exposes the clipboard API, but seems to discard content inserted into it\n              e.clipboardData.setData(\"Text\", content);\n              if (e.clipboardData.getData(\"Text\") == content) {\n                e.preventDefault();\n                return;\n              }\n            }\n            // Old-fashioned briefly-focus-a-textarea hack\n            var kludge = hiddenTextarea(),\n                te = kludge.firstChild;\n            cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n            te.value = lastCopied.text.join(\"\\n\");\n            var hadFocus = document.activeElement;\n            selectInput(te);\n            setTimeout(function () {\n              cm.display.lineSpace.removeChild(kludge);\n              hadFocus.focus();\n              if (hadFocus == div) {\n                input.showPrimarySelection();\n              }\n            }, 50);\n          }\n          on(div, \"copy\", onCopyCut);\n          on(div, \"cut\", onCopyCut);\n        };\n\n        ContentEditableInput.prototype.prepareSelection = function () {\n          var result = prepareSelection(this.cm, false);\n          result.focus = this.cm.state.focused;\n          return result;\n        };\n\n        ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n          if (!info || !this.cm.display.view.length) {\n            return;\n          }\n          if (info.focus || takeFocus) {\n            this.showPrimarySelection();\n          }\n          this.showMultipleSelections(info);\n        };\n\n        ContentEditableInput.prototype.showPrimarySelection = function () {\n          var sel = window.getSelection(),\n              cm = this.cm,\n              prim = cm.doc.sel.primary();\n          var from = prim.from(),\n              to = prim.to();\n\n          if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n            sel.removeAllRanges();\n            return;\n          }\n\n          var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n          var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n          if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n            return;\n          }\n\n          var view = cm.display.view;\n          var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || { node: view[0].measure.map[2], offset: 0 };\n          var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n          if (!end) {\n            var measure = view[view.length - 1].measure;\n            var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n            end = { node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3] };\n          }\n\n          if (!start || !end) {\n            sel.removeAllRanges();\n            return;\n          }\n\n          var old = sel.rangeCount && sel.getRangeAt(0),\n              rng;\n          try {\n            rng = range(start.node, start.offset, end.offset, end.node);\n          } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n          if (rng) {\n            if (!gecko && cm.state.focused) {\n              sel.collapse(start.node, start.offset);\n              if (!rng.collapsed) {\n                sel.removeAllRanges();\n                sel.addRange(rng);\n              }\n            } else {\n              sel.removeAllRanges();\n              sel.addRange(rng);\n            }\n            if (old && sel.anchorNode == null) {\n              sel.addRange(old);\n            } else if (gecko) {\n              this.startGracePeriod();\n            }\n          }\n          this.rememberSelection();\n        };\n\n        ContentEditableInput.prototype.startGracePeriod = function () {\n          var this$1 = this;\n\n          clearTimeout(this.gracePeriod);\n          this.gracePeriod = setTimeout(function () {\n            this$1.gracePeriod = false;\n            if (this$1.selectionChanged()) {\n              this$1.cm.operation(function () {\n                return this$1.cm.curOp.selectionChanged = true;\n              });\n            }\n          }, 20);\n        };\n\n        ContentEditableInput.prototype.showMultipleSelections = function (info) {\n          removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n          removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n        };\n\n        ContentEditableInput.prototype.rememberSelection = function () {\n          var sel = window.getSelection();\n          this.lastAnchorNode = sel.anchorNode;this.lastAnchorOffset = sel.anchorOffset;\n          this.lastFocusNode = sel.focusNode;this.lastFocusOffset = sel.focusOffset;\n        };\n\n        ContentEditableInput.prototype.selectionInEditor = function () {\n          var sel = window.getSelection();\n          if (!sel.rangeCount) {\n            return false;\n          }\n          var node = sel.getRangeAt(0).commonAncestorContainer;\n          return contains(this.div, node);\n        };\n\n        ContentEditableInput.prototype.focus = function () {\n          if (this.cm.options.readOnly != \"nocursor\") {\n            if (!this.selectionInEditor()) {\n              this.showSelection(this.prepareSelection(), true);\n            }\n            this.div.focus();\n          }\n        };\n        ContentEditableInput.prototype.blur = function () {\n          this.div.blur();\n        };\n        ContentEditableInput.prototype.getField = function () {\n          return this.div;\n        };\n\n        ContentEditableInput.prototype.supportsTouch = function () {\n          return true;\n        };\n\n        ContentEditableInput.prototype.receivedFocus = function () {\n          var input = this;\n          if (this.selectionInEditor()) {\n            this.pollSelection();\n          } else {\n            runInOp(this.cm, function () {\n              return input.cm.curOp.selectionChanged = true;\n            });\n          }\n\n          function poll() {\n            if (input.cm.state.focused) {\n              input.pollSelection();\n              input.polling.set(input.cm.options.pollInterval, poll);\n            }\n          }\n          this.polling.set(this.cm.options.pollInterval, poll);\n        };\n\n        ContentEditableInput.prototype.selectionChanged = function () {\n          var sel = window.getSelection();\n          return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n        };\n\n        ContentEditableInput.prototype.pollSelection = function () {\n          if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n            return;\n          }\n          var sel = window.getSelection(),\n              cm = this.cm;\n          // On Android Chrome (version 56, at least), backspacing into an\n          // uneditable block element will put the cursor in that element,\n          // and then, because it's not editable, hide the virtual keyboard.\n          // Because Android doesn't allow us to actually detect backspace\n          // presses in a sane way, this code checks for when that happens\n          // and simulates a backspace press in this case.\n          if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\n            this.cm.triggerOnKeyDown({ type: \"keydown\", keyCode: 8, preventDefault: Math.abs });\n            this.blur();\n            this.focus();\n            return;\n          }\n          if (this.composing) {\n            return;\n          }\n          this.rememberSelection();\n          var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n          var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n          if (anchor && head) {\n            runInOp(cm, function () {\n              setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n              if (anchor.bad || head.bad) {\n                cm.curOp.selectionChanged = true;\n              }\n            });\n          }\n        };\n\n        ContentEditableInput.prototype.pollContent = function () {\n          if (this.readDOMTimeout != null) {\n            clearTimeout(this.readDOMTimeout);\n            this.readDOMTimeout = null;\n          }\n\n          var cm = this.cm,\n              display = cm.display,\n              sel = cm.doc.sel.primary();\n          var from = sel.from(),\n              to = sel.to();\n          if (from.ch == 0 && from.line > cm.firstLine()) {\n            from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n          }\n          if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n            to = Pos(to.line + 1, 0);\n          }\n          if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n            return false;\n          }\n\n          var fromIndex, fromLine, fromNode;\n          if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n            fromLine = lineNo(display.view[0].line);\n            fromNode = display.view[0].node;\n          } else {\n            fromLine = lineNo(display.view[fromIndex].line);\n            fromNode = display.view[fromIndex - 1].node.nextSibling;\n          }\n          var toIndex = findViewIndex(cm, to.line);\n          var toLine, toNode;\n          if (toIndex == display.view.length - 1) {\n            toLine = display.viewTo - 1;\n            toNode = display.lineDiv.lastChild;\n          } else {\n            toLine = lineNo(display.view[toIndex + 1].line) - 1;\n            toNode = display.view[toIndex + 1].node.previousSibling;\n          }\n\n          if (!fromNode) {\n            return false;\n          }\n          var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n          var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n          while (newText.length > 1 && oldText.length > 1) {\n            if (lst(newText) == lst(oldText)) {\n              newText.pop();oldText.pop();toLine--;\n            } else if (newText[0] == oldText[0]) {\n              newText.shift();oldText.shift();fromLine++;\n            } else {\n              break;\n            }\n          }\n\n          var cutFront = 0,\n              cutEnd = 0;\n          var newTop = newText[0],\n              oldTop = oldText[0],\n              maxCutFront = Math.min(newTop.length, oldTop.length);\n          while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n            ++cutFront;\n          }\n          var newBot = lst(newText),\n              oldBot = lst(oldText);\n          var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n          while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n            ++cutEnd;\n          }\n          // Try to move start of change to start of selection if ambiguous\n          if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n            while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n              cutFront--;\n              cutEnd++;\n            }\n          }\n\n          newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n          newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n          var chFrom = Pos(fromLine, cutFront);\n          var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n          if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n            _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n            return true;\n          }\n        };\n\n        ContentEditableInput.prototype.ensurePolled = function () {\n          this.forceCompositionEnd();\n        };\n        ContentEditableInput.prototype.reset = function () {\n          this.forceCompositionEnd();\n        };\n        ContentEditableInput.prototype.forceCompositionEnd = function () {\n          if (!this.composing) {\n            return;\n          }\n          clearTimeout(this.readDOMTimeout);\n          this.composing = null;\n          this.updateFromDOM();\n          this.div.blur();\n          this.div.focus();\n        };\n        ContentEditableInput.prototype.readFromDOMSoon = function () {\n          var this$1 = this;\n\n          if (this.readDOMTimeout != null) {\n            return;\n          }\n          this.readDOMTimeout = setTimeout(function () {\n            this$1.readDOMTimeout = null;\n            if (this$1.composing) {\n              if (this$1.composing.done) {\n                this$1.composing = null;\n              } else {\n                return;\n              }\n            }\n            this$1.updateFromDOM();\n          }, 80);\n        };\n\n        ContentEditableInput.prototype.updateFromDOM = function () {\n          var this$1 = this;\n\n          if (this.cm.isReadOnly() || !this.pollContent()) {\n            runInOp(this.cm, function () {\n              return regChange(this$1.cm);\n            });\n          }\n        };\n\n        ContentEditableInput.prototype.setUneditable = function (node) {\n          node.contentEditable = \"false\";\n        };\n\n        ContentEditableInput.prototype.onKeyPress = function (e) {\n          if (e.charCode == 0) {\n            return;\n          }\n          e.preventDefault();\n          if (!this.cm.isReadOnly()) {\n            operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n          }\n        };\n\n        ContentEditableInput.prototype.readOnlyChanged = function (val) {\n          this.div.contentEditable = String(val != \"nocursor\");\n        };\n\n        ContentEditableInput.prototype.onContextMenu = function () {};\n        ContentEditableInput.prototype.resetPosition = function () {};\n\n        ContentEditableInput.prototype.needsContentAttribute = true;\n\n        function posToDOM(cm, pos) {\n          var view = findViewForLine(cm, pos.line);\n          if (!view || view.hidden) {\n            return null;\n          }\n          var line = getLine(cm.doc, pos.line);\n          var info = mapFromLineView(view, line, pos.line);\n\n          var order = getOrder(line, cm.doc.direction),\n              side = \"left\";\n          if (order) {\n            var partPos = getBidiPartAt(order, pos.ch);\n            side = partPos % 2 ? \"right\" : \"left\";\n          }\n          var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n          result.offset = result.collapse == \"right\" ? result.end : result.start;\n          return result;\n        }\n\n        function isInGutter(node) {\n          for (var scan = node; scan; scan = scan.parentNode) {\n            if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n              return true;\n            }\n          }\n          return false;\n        }\n\n        function badPos(pos, bad) {\n          if (bad) {\n            pos.bad = true;\n          }return pos;\n        }\n\n        function domTextBetween(cm, from, to, fromLine, toLine) {\n          var text = \"\",\n              closing = false,\n              lineSep = cm.doc.lineSeparator();\n          function recognizeMarker(id) {\n            return function (marker) {\n              return marker.id == id;\n            };\n          }\n          function close() {\n            if (closing) {\n              text += lineSep;\n              closing = false;\n            }\n          }\n          function addText(str) {\n            if (str) {\n              close();\n              text += str;\n            }\n          }\n          function walk(node) {\n            if (node.nodeType == 1) {\n              var cmText = node.getAttribute(\"cm-text\");\n              if (cmText != null) {\n                addText(cmText || node.textContent.replace(/\\u200b/g, \"\"));\n                return;\n              }\n              var markerID = node.getAttribute(\"cm-marker\"),\n                  range$$1;\n              if (markerID) {\n                var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n                if (found.length && (range$$1 = found[0].find(0))) {\n                  addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep));\n                }\n                return;\n              }\n              if (node.getAttribute(\"contenteditable\") == \"false\") {\n                return;\n              }\n              var isBlock = /^(pre|div|p)$/i.test(node.nodeName);\n              if (isBlock) {\n                close();\n              }\n              for (var i = 0; i < node.childNodes.length; i++) {\n                walk(node.childNodes[i]);\n              }\n              if (isBlock) {\n                closing = true;\n              }\n            } else if (node.nodeType == 3) {\n              addText(node.nodeValue);\n            }\n          }\n          for (;;) {\n            walk(from);\n            if (from == to) {\n              break;\n            }\n            from = from.nextSibling;\n          }\n          return text;\n        }\n\n        function domToPos(cm, node, offset) {\n          var lineNode;\n          if (node == cm.display.lineDiv) {\n            lineNode = cm.display.lineDiv.childNodes[offset];\n            if (!lineNode) {\n              return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n            }\n            node = null;offset = 0;\n          } else {\n            for (lineNode = node;; lineNode = lineNode.parentNode) {\n              if (!lineNode || lineNode == cm.display.lineDiv) {\n                return null;\n              }\n              if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n                break;\n              }\n            }\n          }\n          for (var i = 0; i < cm.display.view.length; i++) {\n            var lineView = cm.display.view[i];\n            if (lineView.node == lineNode) {\n              return locateNodeInLineView(lineView, node, offset);\n            }\n          }\n        }\n\n        function locateNodeInLineView(lineView, node, offset) {\n          var wrapper = lineView.text.firstChild,\n              bad = false;\n          if (!node || !contains(wrapper, node)) {\n            return badPos(Pos(lineNo(lineView.line), 0), true);\n          }\n          if (node == wrapper) {\n            bad = true;\n            node = wrapper.childNodes[offset];\n            offset = 0;\n            if (!node) {\n              var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n              return badPos(Pos(lineNo(line), line.text.length), bad);\n            }\n          }\n\n          var textNode = node.nodeType == 3 ? node : null,\n              topNode = node;\n          if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n            textNode = node.firstChild;\n            if (offset) {\n              offset = textNode.nodeValue.length;\n            }\n          }\n          while (topNode.parentNode != wrapper) {\n            topNode = topNode.parentNode;\n          }\n          var measure = lineView.measure,\n              maps = measure.maps;\n\n          function find(textNode, topNode, offset) {\n            for (var i = -1; i < (maps ? maps.length : 0); i++) {\n              var map$$1 = i < 0 ? measure.map : maps[i];\n              for (var j = 0; j < map$$1.length; j += 3) {\n                var curNode = map$$1[j + 2];\n                if (curNode == textNode || curNode == topNode) {\n                  var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n                  var ch = map$$1[j] + offset;\n                  if (offset < 0 || curNode != textNode) {\n                    ch = map$$1[j + (offset ? 1 : 0)];\n                  }\n                  return Pos(line, ch);\n                }\n              }\n            }\n          }\n          var found = find(textNode, topNode, offset);\n          if (found) {\n            return badPos(found, bad);\n          }\n\n          // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n          for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n            found = find(after, after.firstChild, 0);\n            if (found) {\n              return badPos(Pos(found.line, found.ch - dist), bad);\n            } else {\n              dist += after.textContent.length;\n            }\n          }\n          for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n            found = find(before, before.firstChild, -1);\n            if (found) {\n              return badPos(Pos(found.line, found.ch + dist$1), bad);\n            } else {\n              dist$1 += before.textContent.length;\n            }\n          }\n        }\n\n        // TEXTAREA INPUT STYLE\n\n        var TextareaInput = function TextareaInput(cm) {\n          this.cm = cm;\n          // See input.poll and input.reset\n          this.prevInput = \"\";\n\n          // Flag that indicates whether we expect input to appear real soon\n          // now (after some event like 'keypress' or 'input') and are\n          // polling intensively.\n          this.pollingFast = false;\n          // Self-resetting timeout for the poller\n          this.polling = new Delayed();\n          // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n          this.hasSelection = false;\n          this.composing = null;\n        };\n\n        TextareaInput.prototype.init = function (display) {\n          var this$1 = this;\n\n          var input = this,\n              cm = this.cm;\n\n          // Wraps and hides input textarea\n          var div = this.wrapper = hiddenTextarea();\n          // The semihidden textarea that is focused when the editor is\n          // focused, and receives input.\n          var te = this.textarea = div.firstChild;\n          display.wrapper.insertBefore(div, display.wrapper.firstChild);\n\n          // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n          if (ios) {\n            te.style.width = \"0px\";\n          }\n\n          on(te, \"input\", function () {\n            if (ie && ie_version >= 9 && this$1.hasSelection) {\n              this$1.hasSelection = null;\n            }\n            input.poll();\n          });\n\n          on(te, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n              return;\n            }\n\n            cm.state.pasteIncoming = true;\n            input.fastPoll();\n          });\n\n          function prepareCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n              return;\n            }\n            if (cm.somethingSelected()) {\n              setLastCopied({ lineWise: false, text: cm.getSelections() });\n            } else if (!cm.options.lineWiseCopyCut) {\n              return;\n            } else {\n              var ranges = copyableRanges(cm);\n              setLastCopied({ lineWise: true, text: ranges.text });\n              if (e.type == \"cut\") {\n                cm.setSelections(ranges.ranges, null, sel_dontScroll);\n              } else {\n                input.prevInput = \"\";\n                te.value = ranges.text.join(\"\\n\");\n                selectInput(te);\n              }\n            }\n            if (e.type == \"cut\") {\n              cm.state.cutIncoming = true;\n            }\n          }\n          on(te, \"cut\", prepareCopyCut);\n          on(te, \"copy\", prepareCopyCut);\n\n          on(display.scroller, \"paste\", function (e) {\n            if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n              return;\n            }\n            cm.state.pasteIncoming = true;\n            input.focus();\n          });\n\n          // Prevent normal selection in the editor (we handle our own)\n          on(display.lineSpace, \"selectstart\", function (e) {\n            if (!eventInWidget(display, e)) {\n              e_preventDefault(e);\n            }\n          });\n\n          on(te, \"compositionstart\", function () {\n            var start = cm.getCursor(\"from\");\n            if (input.composing) {\n              input.composing.range.clear();\n            }\n            input.composing = {\n              start: start,\n              range: cm.markText(start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" })\n            };\n          });\n          on(te, \"compositionend\", function () {\n            if (input.composing) {\n              input.poll();\n              input.composing.range.clear();\n              input.composing = null;\n            }\n          });\n        };\n\n        TextareaInput.prototype.prepareSelection = function () {\n          // Redraw the selection and/or cursor\n          var cm = this.cm,\n              display = cm.display,\n              doc = cm.doc;\n          var result = prepareSelection(cm);\n\n          // Move the hidden textarea near the cursor to prevent scrolling artifacts\n          if (cm.options.moveInputWithCursor) {\n            var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n            var wrapOff = display.wrapper.getBoundingClientRect(),\n                lineOff = display.lineDiv.getBoundingClientRect();\n            result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n            result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n          }\n\n          return result;\n        };\n\n        TextareaInput.prototype.showSelection = function (drawn) {\n          var cm = this.cm,\n              display = cm.display;\n          removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n          removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n          if (drawn.teTop != null) {\n            this.wrapper.style.top = drawn.teTop + \"px\";\n            this.wrapper.style.left = drawn.teLeft + \"px\";\n          }\n        };\n\n        // Reset the input to correspond to the selection (or to be empty,\n        // when not typing and nothing is selected)\n        TextareaInput.prototype.reset = function (typing) {\n          if (this.contextMenuPending || this.composing) {\n            return;\n          }\n          var cm = this.cm;\n          if (cm.somethingSelected()) {\n            this.prevInput = \"\";\n            var content = cm.getSelection();\n            this.textarea.value = content;\n            if (cm.state.focused) {\n              selectInput(this.textarea);\n            }\n            if (ie && ie_version >= 9) {\n              this.hasSelection = content;\n            }\n          } else if (!typing) {\n            this.prevInput = this.textarea.value = \"\";\n            if (ie && ie_version >= 9) {\n              this.hasSelection = null;\n            }\n          }\n        };\n\n        TextareaInput.prototype.getField = function () {\n          return this.textarea;\n        };\n\n        TextareaInput.prototype.supportsTouch = function () {\n          return false;\n        };\n\n        TextareaInput.prototype.focus = function () {\n          if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n            try {\n              this.textarea.focus();\n            } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n          }\n        };\n\n        TextareaInput.prototype.blur = function () {\n          this.textarea.blur();\n        };\n\n        TextareaInput.prototype.resetPosition = function () {\n          this.wrapper.style.top = this.wrapper.style.left = 0;\n        };\n\n        TextareaInput.prototype.receivedFocus = function () {\n          this.slowPoll();\n        };\n\n        // Poll for input changes, using the normal rate of polling. This\n        // runs as long as the editor is focused.\n        TextareaInput.prototype.slowPoll = function () {\n          var this$1 = this;\n\n          if (this.pollingFast) {\n            return;\n          }\n          this.polling.set(this.cm.options.pollInterval, function () {\n            this$1.poll();\n            if (this$1.cm.state.focused) {\n              this$1.slowPoll();\n            }\n          });\n        };\n\n        // When an event has just come in that is likely to add or change\n        // something in the input textarea, we poll faster, to ensure that\n        // the change appears on the screen quickly.\n        TextareaInput.prototype.fastPoll = function () {\n          var missed = false,\n              input = this;\n          input.pollingFast = true;\n          function p() {\n            var changed = input.poll();\n            if (!changed && !missed) {\n              missed = true;input.polling.set(60, p);\n            } else {\n              input.pollingFast = false;input.slowPoll();\n            }\n          }\n          input.polling.set(20, p);\n        };\n\n        // Read input from the textarea, and update the document to match.\n        // When something is selected, it is present in the textarea, and\n        // selected (unless it is huge, in which case a placeholder is\n        // used). When nothing is selected, the cursor sits after previously\n        // seen text (can be empty), which is stored in prevInput (we must\n        // not reset the textarea when typing, because that breaks IME).\n        TextareaInput.prototype.poll = function () {\n          var this$1 = this;\n\n          var cm = this.cm,\n              input = this.textarea,\n              prevInput = this.prevInput;\n          // Since this is called a *lot*, try to bail out as cheaply as\n          // possible when it is clear that nothing happened. hasSelection\n          // will be the case when there is a lot of text in the textarea,\n          // in which case reading its value would be expensive.\n          if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n            return false;\n          }\n\n          var text = input.value;\n          // If nothing changed, bail.\n          if (text == prevInput && !cm.somethingSelected()) {\n            return false;\n          }\n          // Work around nonsensical selection resetting in IE9/10, and\n          // inexplicable appearance of private area unicode characters on\n          // some key combos in Mac (#2689).\n          if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n            cm.display.input.reset();\n            return false;\n          }\n\n          if (cm.doc.sel == cm.display.selForContextMenu) {\n            var first = text.charCodeAt(0);\n            if (first == 0x200b && !prevInput) {\n              prevInput = \"\\u200B\";\n            }\n            if (first == 0x21da) {\n              this.reset();return this.cm.execCommand(\"undo\");\n            }\n          }\n          // Find the part of the input that is actually new\n          var same = 0,\n              l = Math.min(prevInput.length, text.length);\n          while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n            ++same;\n          }\n\n          runInOp(cm, function () {\n            applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null);\n\n            // Don't leave long text in the textarea, since it makes further polling slow\n            if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n              input.value = this$1.prevInput = \"\";\n            } else {\n              this$1.prevInput = text;\n            }\n\n            if (this$1.composing) {\n              this$1.composing.range.clear();\n              this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" });\n            }\n          });\n          return true;\n        };\n\n        TextareaInput.prototype.ensurePolled = function () {\n          if (this.pollingFast && this.poll()) {\n            this.pollingFast = false;\n          }\n        };\n\n        TextareaInput.prototype.onKeyPress = function () {\n          if (ie && ie_version >= 9) {\n            this.hasSelection = null;\n          }\n          this.fastPoll();\n        };\n\n        TextareaInput.prototype.onContextMenu = function (e) {\n          var input = this,\n              cm = input.cm,\n              display = cm.display,\n              te = input.textarea;\n          var pos = posFromMouse(cm, e),\n              scrollPos = display.scroller.scrollTop;\n          if (!pos || presto) {\n            return;\n          } // Opera is difficult.\n\n          // Reset the current text selection only if the click is done outside of the selection\n          // and 'resetSelectionOnContextMenu' option is true.\n          var reset = cm.options.resetSelectionOnContextMenu;\n          if (reset && cm.doc.sel.contains(pos) == -1) {\n            operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n          }\n\n          var oldCSS = te.style.cssText,\n              oldWrapperCSS = input.wrapper.style.cssText;\n          input.wrapper.style.cssText = \"position: absolute\";\n          var wrapperBox = input.wrapper.getBoundingClientRect();\n          te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n          var oldScrollY;\n          if (webkit) {\n            oldScrollY = window.scrollY;\n          } // Work around Chrome issue (#2712)\n          display.input.focus();\n          if (webkit) {\n            window.scrollTo(null, oldScrollY);\n          }\n          display.input.reset();\n          // Adds \"Select all\" to context menu in FF\n          if (!cm.somethingSelected()) {\n            te.value = input.prevInput = \" \";\n          }\n          input.contextMenuPending = true;\n          display.selForContextMenu = cm.doc.sel;\n          clearTimeout(display.detectingSelectAll);\n\n          // Select-all will be greyed out if there's nothing to select, so\n          // this adds a zero-width space so that we can later check whether\n          // it got selected.\n          function prepareSelectAllHack() {\n            if (te.selectionStart != null) {\n              var selected = cm.somethingSelected();\n              var extval = \"\\u200B\" + (selected ? te.value : \"\");\n              te.value = \"\\u21DA\"; // Used to catch context-menu undo\n              te.value = extval;\n              input.prevInput = selected ? \"\" : \"\\u200B\";\n              te.selectionStart = 1;te.selectionEnd = extval.length;\n              // Re-set this, in case some other handler touched the\n              // selection in the meantime.\n              display.selForContextMenu = cm.doc.sel;\n            }\n          }\n          function rehide() {\n            input.contextMenuPending = false;\n            input.wrapper.style.cssText = oldWrapperCSS;\n            te.style.cssText = oldCSS;\n            if (ie && ie_version < 9) {\n              display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n            }\n\n            // Try to detect the user choosing select-all\n            if (te.selectionStart != null) {\n              if (!ie || ie && ie_version < 9) {\n                prepareSelectAllHack();\n              }\n              var i = 0,\n                  poll = function poll() {\n                if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n                  operation(cm, selectAll)(cm);\n                } else if (i++ < 10) {\n                  display.detectingSelectAll = setTimeout(poll, 500);\n                } else {\n                  display.selForContextMenu = null;\n                  display.input.reset();\n                }\n              };\n              display.detectingSelectAll = setTimeout(poll, 200);\n            }\n          }\n\n          if (ie && ie_version >= 9) {\n            prepareSelectAllHack();\n          }\n          if (captureRightClick) {\n            e_stop(e);\n            var mouseup = function mouseup() {\n              off(window, \"mouseup\", mouseup);\n              setTimeout(rehide, 20);\n            };\n            on(window, \"mouseup\", mouseup);\n          } else {\n            setTimeout(rehide, 50);\n          }\n        };\n\n        TextareaInput.prototype.readOnlyChanged = function (val) {\n          if (!val) {\n            this.reset();\n          }\n          this.textarea.disabled = val == \"nocursor\";\n        };\n\n        TextareaInput.prototype.setUneditable = function () {};\n\n        TextareaInput.prototype.needsContentAttribute = false;\n\n        function fromTextArea(textarea, options) {\n          options = options ? copyObj(options) : {};\n          options.value = textarea.value;\n          if (!options.tabindex && textarea.tabIndex) {\n            options.tabindex = textarea.tabIndex;\n          }\n          if (!options.placeholder && textarea.placeholder) {\n            options.placeholder = textarea.placeholder;\n          }\n          // Set autofocus to true if this textarea is focused, or if it has\n          // autofocus and no other element is focused.\n          if (options.autofocus == null) {\n            var hasFocus = activeElt();\n            options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n          }\n\n          function save() {\n            textarea.value = cm.getValue();\n          }\n\n          var realSubmit;\n          if (textarea.form) {\n            on(textarea.form, \"submit\", save);\n            // Deplorable hack to make the submit method do the right thing.\n            if (!options.leaveSubmitMethodAlone) {\n              var form = textarea.form;\n              realSubmit = form.submit;\n              try {\n                var wrappedSubmit = form.submit = function () {\n                  save();\n                  form.submit = realSubmit;\n                  form.submit();\n                  form.submit = wrappedSubmit;\n                };\n              } catch (e) {}\n            }\n          }\n\n          options.finishInit = function (cm) {\n            cm.save = save;\n            cm.getTextArea = function () {\n              return textarea;\n            };\n            cm.toTextArea = function () {\n              cm.toTextArea = isNaN; // Prevent this from being ran twice\n              save();\n              textarea.parentNode.removeChild(cm.getWrapperElement());\n              textarea.style.display = \"\";\n              if (textarea.form) {\n                off(textarea.form, \"submit\", save);\n                if (typeof textarea.form.submit == \"function\") {\n                  textarea.form.submit = realSubmit;\n                }\n              }\n            };\n          };\n\n          textarea.style.display = \"none\";\n          var cm = CodeMirror$1(function (node) {\n            return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n          }, options);\n          return cm;\n        }\n\n        function addLegacyProps(CodeMirror) {\n          CodeMirror.off = off;\n          CodeMirror.on = on;\n          CodeMirror.wheelEventPixels = wheelEventPixels;\n          CodeMirror.Doc = Doc;\n          CodeMirror.splitLines = splitLinesAuto;\n          CodeMirror.countColumn = countColumn;\n          CodeMirror.findColumn = findColumn;\n          CodeMirror.isWordChar = isWordCharBasic;\n          CodeMirror.Pass = Pass;\n          CodeMirror.signal = signal;\n          CodeMirror.Line = Line;\n          CodeMirror.changeEnd = changeEnd;\n          CodeMirror.scrollbarModel = scrollbarModel;\n          CodeMirror.Pos = Pos;\n          CodeMirror.cmpPos = cmp;\n          CodeMirror.modes = modes;\n          CodeMirror.mimeModes = mimeModes;\n          CodeMirror.resolveMode = resolveMode;\n          CodeMirror.getMode = getMode;\n          CodeMirror.modeExtensions = modeExtensions;\n          CodeMirror.extendMode = extendMode;\n          CodeMirror.copyState = copyState;\n          CodeMirror.startState = startState;\n          CodeMirror.innerMode = innerMode;\n          CodeMirror.commands = commands;\n          CodeMirror.keyMap = keyMap;\n          CodeMirror.keyName = keyName;\n          CodeMirror.isModifierKey = isModifierKey;\n          CodeMirror.lookupKey = lookupKey;\n          CodeMirror.normalizeKeyMap = normalizeKeyMap;\n          CodeMirror.StringStream = StringStream;\n          CodeMirror.SharedTextMarker = SharedTextMarker;\n          CodeMirror.TextMarker = TextMarker;\n          CodeMirror.LineWidget = LineWidget;\n          CodeMirror.e_preventDefault = e_preventDefault;\n          CodeMirror.e_stopPropagation = e_stopPropagation;\n          CodeMirror.e_stop = e_stop;\n          CodeMirror.addClass = addClass;\n          CodeMirror.contains = contains;\n          CodeMirror.rmClass = rmClass;\n          CodeMirror.keyNames = keyNames;\n        }\n\n        // EDITOR CONSTRUCTOR\n\n        defineOptions(CodeMirror$1);\n\n        addEditorMethods(CodeMirror$1);\n\n        // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n        var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n        for (var prop in Doc.prototype) {\n          if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n            CodeMirror$1.prototype[prop] = function (method) {\n              return function () {\n                return method.apply(this.doc, arguments);\n              };\n            }(Doc.prototype[prop]);\n          }\n        }\n\n        eventMixin(Doc);\n\n        // INPUT HANDLING\n\n        CodeMirror$1.inputStyles = { \"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput };\n\n        // MODE DEFINITION AND QUERYING\n\n        // Extra arguments are stored as the mode's dependencies, which is\n        // used by (legacy) mechanisms like loadmode.js to automatically\n        // load a mode. (Preferred mechanism is the require/define calls.)\n        CodeMirror$1.defineMode = function (name /*, mode, */) {\n          if (!CodeMirror$1.defaults.mode && name != \"null\") {\n            CodeMirror$1.defaults.mode = name;\n          }\n          defineMode.apply(this, arguments);\n        };\n\n        CodeMirror$1.defineMIME = defineMIME;\n\n        // Minimal default mode.\n        CodeMirror$1.defineMode(\"null\", function () {\n          return { token: function token(stream) {\n              return stream.skipToEnd();\n            } };\n        });\n        CodeMirror$1.defineMIME(\"text/plain\", \"null\");\n\n        // EXTENSIONS\n\n        CodeMirror$1.defineExtension = function (name, func) {\n          CodeMirror$1.prototype[name] = func;\n        };\n        CodeMirror$1.defineDocExtension = function (name, func) {\n          Doc.prototype[name] = func;\n        };\n\n        CodeMirror$1.fromTextArea = fromTextArea;\n\n        addLegacyProps(CodeMirror$1);\n\n        CodeMirror$1.version = \"5.29.0\";\n\n        return CodeMirror$1;\n      });\n    }, {}], 6: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineMode(\"css\", function (config, parserConfig) {\n          var inline = parserConfig.inline;\n          if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n          var indentUnit = config.indentUnit,\n              tokenHooks = parserConfig.tokenHooks,\n              documentTypes = parserConfig.documentTypes || {},\n              mediaTypes = parserConfig.mediaTypes || {},\n              mediaFeatures = parserConfig.mediaFeatures || {},\n              mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n              propertyKeywords = parserConfig.propertyKeywords || {},\n              nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n              fontProperties = parserConfig.fontProperties || {},\n              counterDescriptors = parserConfig.counterDescriptors || {},\n              colorKeywords = parserConfig.colorKeywords || {},\n              valueKeywords = parserConfig.valueKeywords || {},\n              allowNested = parserConfig.allowNested,\n              lineComment = parserConfig.lineComment,\n              supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n          var type, override;\n          function ret(style, tp) {\n            type = tp;return style;\n          }\n\n          // Tokenizers\n\n          function tokenBase(stream, state) {\n            var ch = stream.next();\n            if (tokenHooks[ch]) {\n              var result = tokenHooks[ch](stream, state);\n              if (result !== false) return result;\n            }\n            if (ch == \"@\") {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"def\", stream.current());\n            } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n              return ret(null, \"compare\");\n            } else if (ch == \"\\\"\" || ch == \"'\") {\n              state.tokenize = tokenString(ch);\n              return state.tokenize(stream, state);\n            } else if (ch == \"#\") {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"atom\", \"hash\");\n            } else if (ch == \"!\") {\n              stream.match(/^\\s*\\w*/);\n              return ret(\"keyword\", \"important\");\n            } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n              stream.eatWhile(/[\\w.%]/);\n              return ret(\"number\", \"unit\");\n            } else if (ch === \"-\") {\n              if (/[\\d.]/.test(stream.peek())) {\n                stream.eatWhile(/[\\w.%]/);\n                return ret(\"number\", \"unit\");\n              } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n                stream.eatWhile(/[\\w\\\\\\-]/);\n                if (stream.match(/^\\s*:/, false)) return ret(\"variable-2\", \"variable-definition\");\n                return ret(\"variable-2\", \"variable\");\n              } else if (stream.match(/^\\w+-/)) {\n                return ret(\"meta\", \"meta\");\n              }\n            } else if (/[,+>*\\/]/.test(ch)) {\n              return ret(null, \"select-op\");\n            } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n              return ret(\"qualifier\", \"qualifier\");\n            } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n              return ret(null, ch);\n            } else if (ch == \"u\" && stream.match(/rl(-prefix)?\\(/) || ch == \"d\" && stream.match(\"omain(\") || ch == \"r\" && stream.match(\"egexp(\")) {\n              stream.backUp(1);\n              state.tokenize = tokenParenthesized;\n              return ret(\"property\", \"word\");\n            } else if (/[\\w\\\\\\-]/.test(ch)) {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"property\", \"word\");\n            } else {\n              return ret(null, null);\n            }\n          }\n\n          function tokenString(quote) {\n            return function (stream, state) {\n              var escaped = false,\n                  ch;\n              while ((ch = stream.next()) != null) {\n                if (ch == quote && !escaped) {\n                  if (quote == \")\") stream.backUp(1);\n                  break;\n                }\n                escaped = !escaped && ch == \"\\\\\";\n              }\n              if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n              return ret(\"string\", \"string\");\n            };\n          }\n\n          function tokenParenthesized(stream, state) {\n            stream.next(); // Must be '('\n            if (!stream.match(/\\s*[\\\"\\')]/, false)) state.tokenize = tokenString(\")\");else state.tokenize = null;\n            return ret(null, \"(\");\n          }\n\n          // Context management\n\n          function Context(type, indent, prev) {\n            this.type = type;\n            this.indent = indent;\n            this.prev = prev;\n          }\n\n          function pushContext(state, stream, type, indent) {\n            state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n            return type;\n          }\n\n          function popContext(state) {\n            if (state.context.prev) state.context = state.context.prev;\n            return state.context.type;\n          }\n\n          function pass(type, stream, state) {\n            return states[state.context.type](type, stream, state);\n          }\n          function popAndPass(type, stream, state, n) {\n            for (var i = n || 1; i > 0; i--) {\n              state.context = state.context.prev;\n            }return pass(type, stream, state);\n          }\n\n          // Parser\n\n          function wordAsValue(stream) {\n            var word = stream.current().toLowerCase();\n            if (valueKeywords.hasOwnProperty(word)) override = \"atom\";else if (colorKeywords.hasOwnProperty(word)) override = \"keyword\";else override = \"variable\";\n          }\n\n          var states = {};\n\n          states.top = function (type, stream, state) {\n            if (type == \"{\") {\n              return pushContext(state, stream, \"block\");\n            } else if (type == \"}\" && state.context.prev) {\n              return popContext(state);\n            } else if (supportsAtComponent && /@component/.test(type)) {\n              return pushContext(state, stream, \"atComponentBlock\");\n            } else if (/^@(-moz-)?document$/.test(type)) {\n              return pushContext(state, stream, \"documentTypes\");\n            } else if (/^@(media|supports|(-moz-)?document|import)$/.test(type)) {\n              return pushContext(state, stream, \"atBlock\");\n            } else if (/^@(font-face|counter-style)/.test(type)) {\n              state.stateArg = type;\n              return \"restricted_atBlock_before\";\n            } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)) {\n              return \"keyframes\";\n            } else if (type && type.charAt(0) == \"@\") {\n              return pushContext(state, stream, \"at\");\n            } else if (type == \"hash\") {\n              override = \"builtin\";\n            } else if (type == \"word\") {\n              override = \"tag\";\n            } else if (type == \"variable-definition\") {\n              return \"maybeprop\";\n            } else if (type == \"interpolation\") {\n              return pushContext(state, stream, \"interpolation\");\n            } else if (type == \":\") {\n              return \"pseudo\";\n            } else if (allowNested && type == \"(\") {\n              return pushContext(state, stream, \"parens\");\n            }\n            return state.context.type;\n          };\n\n          states.block = function (type, stream, state) {\n            if (type == \"word\") {\n              var word = stream.current().toLowerCase();\n              if (propertyKeywords.hasOwnProperty(word)) {\n                override = \"property\";\n                return \"maybeprop\";\n              } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n                override = \"string-2\";\n                return \"maybeprop\";\n              } else if (allowNested) {\n                override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n                return \"block\";\n              } else {\n                override += \" error\";\n                return \"maybeprop\";\n              }\n            } else if (type == \"meta\") {\n              return \"block\";\n            } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n              override = \"error\";\n              return \"block\";\n            } else {\n              return states.top(type, stream, state);\n            }\n          };\n\n          states.maybeprop = function (type, stream, state) {\n            if (type == \":\") return pushContext(state, stream, \"prop\");\n            return pass(type, stream, state);\n          };\n\n          states.prop = function (type, stream, state) {\n            if (type == \";\") return popContext(state);\n            if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n            if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n            if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n            if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n              override += \" error\";\n            } else if (type == \"word\") {\n              wordAsValue(stream);\n            } else if (type == \"interpolation\") {\n              return pushContext(state, stream, \"interpolation\");\n            }\n            return \"prop\";\n          };\n\n          states.propBlock = function (type, _stream, state) {\n            if (type == \"}\") return popContext(state);\n            if (type == \"word\") {\n              override = \"property\";return \"maybeprop\";\n            }\n            return state.context.type;\n          };\n\n          states.parens = function (type, stream, state) {\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n            if (type == \")\") return popContext(state);\n            if (type == \"(\") return pushContext(state, stream, \"parens\");\n            if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n            if (type == \"word\") wordAsValue(stream);\n            return \"parens\";\n          };\n\n          states.pseudo = function (type, stream, state) {\n            if (type == \"meta\") return \"pseudo\";\n\n            if (type == \"word\") {\n              override = \"variable-3\";\n              return state.context.type;\n            }\n            return pass(type, stream, state);\n          };\n\n          states.documentTypes = function (type, stream, state) {\n            if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n              override = \"tag\";\n              return state.context.type;\n            } else {\n              return states.atBlock(type, stream, state);\n            }\n          };\n\n          states.atBlock = function (type, stream, state) {\n            if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n            if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n            if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n            if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n            if (type == \"word\") {\n              var word = stream.current().toLowerCase();\n              if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\") override = \"keyword\";else if (mediaTypes.hasOwnProperty(word)) override = \"attribute\";else if (mediaFeatures.hasOwnProperty(word)) override = \"property\";else if (mediaValueKeywords.hasOwnProperty(word)) override = \"keyword\";else if (propertyKeywords.hasOwnProperty(word)) override = \"property\";else if (nonStandardPropertyKeywords.hasOwnProperty(word)) override = \"string-2\";else if (valueKeywords.hasOwnProperty(word)) override = \"atom\";else if (colorKeywords.hasOwnProperty(word)) override = \"keyword\";else override = \"error\";\n            }\n            return state.context.type;\n          };\n\n          states.atComponentBlock = function (type, stream, state) {\n            if (type == \"}\") return popAndPass(type, stream, state);\n            if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n            if (type == \"word\") override = \"error\";\n            return state.context.type;\n          };\n\n          states.atBlock_parens = function (type, stream, state) {\n            if (type == \")\") return popContext(state);\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n            return states.atBlock(type, stream, state);\n          };\n\n          states.restricted_atBlock_before = function (type, stream, state) {\n            if (type == \"{\") return pushContext(state, stream, \"restricted_atBlock\");\n            if (type == \"word\" && state.stateArg == \"@counter-style\") {\n              override = \"variable\";\n              return \"restricted_atBlock_before\";\n            }\n            return pass(type, stream, state);\n          };\n\n          states.restricted_atBlock = function (type, stream, state) {\n            if (type == \"}\") {\n              state.stateArg = null;\n              return popContext(state);\n            }\n            if (type == \"word\") {\n              if (state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase()) || state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())) override = \"error\";else override = \"property\";\n              return \"maybeprop\";\n            }\n            return \"restricted_atBlock\";\n          };\n\n          states.keyframes = function (type, stream, state) {\n            if (type == \"word\") {\n              override = \"variable\";return \"keyframes\";\n            }\n            if (type == \"{\") return pushContext(state, stream, \"top\");\n            return pass(type, stream, state);\n          };\n\n          states.at = function (type, stream, state) {\n            if (type == \";\") return popContext(state);\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n            if (type == \"word\") override = \"tag\";else if (type == \"hash\") override = \"builtin\";\n            return \"at\";\n          };\n\n          states.interpolation = function (type, stream, state) {\n            if (type == \"}\") return popContext(state);\n            if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n            if (type == \"word\") override = \"variable\";else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n            return \"interpolation\";\n          };\n\n          return {\n            startState: function startState(base) {\n              return { tokenize: null,\n                state: inline ? \"block\" : \"top\",\n                stateArg: null,\n                context: new Context(inline ? \"block\" : \"top\", base || 0, null) };\n            },\n\n            token: function token(stream, state) {\n              if (!state.tokenize && stream.eatSpace()) return null;\n              var style = (state.tokenize || tokenBase)(stream, state);\n              if (style && (typeof style === \"undefined\" ? \"undefined\" : _typeof(style)) == \"object\") {\n                type = style[1];\n                style = style[0];\n              }\n              override = style;\n              if (type != \"comment\") state.state = states[state.state](type, stream, state);\n              return override;\n            },\n\n            indent: function indent(state, textAfter) {\n              var cx = state.context,\n                  ch = textAfter && textAfter.charAt(0);\n              var indent = cx.indent;\n              if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n              if (cx.prev) {\n                if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" || cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n                  // Resume indentation from parent context.\n                  cx = cx.prev;\n                  indent = cx.indent;\n                } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") || ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n                  // Dedent relative to current context.\n                  indent = Math.max(0, cx.indent - indentUnit);\n                }\n              }\n              return indent;\n            },\n\n            electricChars: \"}\",\n            blockCommentStart: \"/*\",\n            blockCommentEnd: \"*/\",\n            lineComment: lineComment,\n            fold: \"brace\"\n          };\n        });\n\n        function keySet(array) {\n          var keys = {};\n          for (var i = 0; i < array.length; ++i) {\n            keys[array[i].toLowerCase()] = true;\n          }\n          return keys;\n        }\n\n        var documentTypes_ = [\"domain\", \"regexp\", \"url\", \"url-prefix\"],\n            documentTypes = keySet(documentTypes_);\n\n        var mediaTypes_ = [\"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\", \"tty\", \"tv\", \"embossed\"],\n            mediaTypes = keySet(mediaTypes_);\n\n        var mediaFeatures_ = [\"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\", \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\", \"min-device-height\", \"max-device-height\", \"aspect-ratio\", \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\", \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\", \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\", \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\", \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\", \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\", \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"],\n            mediaFeatures = keySet(mediaFeatures_);\n\n        var mediaValueKeywords_ = [\"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\", \"interlace\", \"progressive\"],\n            mediaValueKeywords = keySet(mediaValueKeywords_);\n\n        var propertyKeywords_ = [\"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\", \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\", \"animation-direction\", \"animation-duration\", \"animation-fill-mode\", \"animation-iteration-count\", \"animation-name\", \"animation-play-state\", \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\", \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\", \"background-color\", \"background-image\", \"background-origin\", \"background-position\", \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\", \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\", \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\", \"border-bottom-left-radius\", \"border-bottom-right-radius\", \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\", \"border-color\", \"border-image\", \"border-image-outset\", \"border-image-repeat\", \"border-image-slice\", \"border-image-source\", \"border-image-width\", \"border-left\", \"border-left-color\", \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\", \"border-right-color\", \"border-right-style\", \"border-right-width\", \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\", \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\", \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\", \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\", \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\", \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\", \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\", \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\", \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"drop-initial-after-adjust\", \"drop-initial-after-align\", \"drop-initial-before-adjust\", \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\", \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\", \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\", \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\", \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\", \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\", \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\", \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\", \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\", \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\", \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\", \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\", \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\", \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\", \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\", \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\", \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\", \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\", \"marks\", \"marquee-direction\", \"marquee-loop\", \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\", \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\", \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\", \"opacity\", \"order\", \"orphans\", \"outline\", \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\", \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\", \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\", \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\", \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\", \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\", \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\", \"region-break-before\", \"region-break-inside\", \"region-fragment\", \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\", \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\", \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\", \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\", \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\", \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\", \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\", \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\", \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\", \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\", \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\", \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\", \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\", \"transition\", \"transition-delay\", \"transition-duration\", \"transition-property\", \"transition-timing-function\", \"unicode-bidi\", \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\", \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\", \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\", \"word-spacing\", \"word-wrap\", \"z-index\",\n        // SVG-specific\n        \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\", \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\", \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\", \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"],\n            propertyKeywords = keySet(propertyKeywords_);\n\n        var nonStandardPropertyKeywords_ = [\"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\", \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\", \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\", \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\", \"searchfield-results-decoration\", \"zoom\"],\n            nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n        var fontProperties_ = [\"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\", \"font-stretch\", \"font-weight\", \"font-style\"],\n            fontProperties = keySet(fontProperties_);\n\n        var counterDescriptors_ = [\"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\", \"speak-as\", \"suffix\", \"symbols\", \"system\"],\n            counterDescriptors = keySet(counterDescriptors_);\n\n        var colorKeywords_ = [\"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\", \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\", \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\", \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\", \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\", \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\", \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\", \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\", \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\", \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\", \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\", \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\", \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\", \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\", \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\", \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\", \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\", \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\", \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\", \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\", \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\", \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\", \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\", \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\", \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\", \"whitesmoke\", \"yellow\", \"yellowgreen\"],\n            colorKeywords = keySet(colorKeywords_);\n\n        var valueKeywords_ = [\"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\", \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\", \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\", \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\", \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\", \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\", \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\", \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\", \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\", \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\", \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\", \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\", \"compact\", \"condensed\", \"contain\", \"content\", \"contents\", \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\", \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\", \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\", \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\", \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\", \"dot-dash\", \"dot-dot-dash\", \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\", \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\", \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\", \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\", \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\", \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\", \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\", \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\", \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\", \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\", \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\", \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\", \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\", \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\", \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\", \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\", \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\", \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\", \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\", \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\", \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\", \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\", \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\", \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\", \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\", \"media-controls-background\", \"media-current-time-display\", \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\", \"media-return-to-realtime-button\", \"media-rewind-button\", \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\", \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\", \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\", \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\", \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\", \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\", \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\", \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\", \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\", \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\", \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\", \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\", \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\", \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\", \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\", \"relative\", \"repeat\", \"repeating-linear-gradient\", \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\", \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\", \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\", \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\", \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\", \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\", \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\", \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\", \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\", \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\", \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\", \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\", \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\", \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\", \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\", \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\", \"tamil\", \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\", \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\", \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\", \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\", \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\", \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\", \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\", \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\", \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\", \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\", \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\", \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\", \"xx-large\", \"xx-small\"],\n            valueKeywords = keySet(valueKeywords_);\n\n        var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);\n        CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n        function tokenCComment(stream, state) {\n          var maybeEnd = false,\n              ch;\n          while ((ch = stream.next()) != null) {\n            if (maybeEnd && ch == \"/\") {\n              state.tokenize = null;\n              break;\n            }\n            maybeEnd = ch == \"*\";\n          }\n          return [\"comment\", \"comment\"];\n        }\n\n        CodeMirror.defineMIME(\"text/css\", {\n          documentTypes: documentTypes,\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          fontProperties: fontProperties,\n          counterDescriptors: counterDescriptors,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (!stream.eat(\"*\")) return false;\n              state.tokenize = tokenCComment;\n              return tokenCComment(stream, state);\n            }\n          },\n          name: \"css\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-scss\", {\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          fontProperties: fontProperties,\n          allowNested: true,\n          lineComment: \"//\",\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return [\"comment\", \"comment\"];\n              } else if (stream.eat(\"*\")) {\n                state.tokenize = tokenCComment;\n                return tokenCComment(stream, state);\n              } else {\n                return [\"operator\", \"operator\"];\n              }\n            },\n            \":\": function _(stream) {\n              if (stream.match(/\\s*\\{/, false)) return [null, null];\n              return false;\n            },\n            \"$\": function $(stream) {\n              stream.match(/^[\\w-]+/);\n              if (stream.match(/^\\s*:/, false)) return [\"variable-2\", \"variable-definition\"];\n              return [\"variable-2\", \"variable\"];\n            },\n            \"#\": function _(stream) {\n              if (!stream.eat(\"{\")) return false;\n              return [null, \"interpolation\"];\n            }\n          },\n          name: \"css\",\n          helperType: \"scss\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-less\", {\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          fontProperties: fontProperties,\n          allowNested: true,\n          lineComment: \"//\",\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return [\"comment\", \"comment\"];\n              } else if (stream.eat(\"*\")) {\n                state.tokenize = tokenCComment;\n                return tokenCComment(stream, state);\n              } else {\n                return [\"operator\", \"operator\"];\n              }\n            },\n            \"@\": function _(stream) {\n              if (stream.eat(\"{\")) return [null, \"interpolation\"];\n              if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/, false)) return false;\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              if (stream.match(/^\\s*:/, false)) return [\"variable-2\", \"variable-definition\"];\n              return [\"variable-2\", \"variable\"];\n            },\n            \"&\": function _() {\n              return [\"atom\", \"atom\"];\n            }\n          },\n          name: \"css\",\n          helperType: \"less\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-gss\", {\n          documentTypes: documentTypes,\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          fontProperties: fontProperties,\n          counterDescriptors: counterDescriptors,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          supportsAtComponent: true,\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (!stream.eat(\"*\")) return false;\n              state.tokenize = tokenCComment;\n              return tokenCComment(stream, state);\n            }\n          },\n          name: \"css\",\n          helperType: \"gss\"\n        });\n      });\n    }, { \"../../lib/codemirror\": 5 }], 7: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../javascript/javascript\"), require(\"../css/css\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../xml/xml\", \"../javascript/javascript\", \"../css/css\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var defaultTags = {\n          script: [[\"lang\", /(javascript|babel)/i, \"javascript\"], [\"type\", /^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, \"javascript\"], [\"type\", /./, \"text/plain\"], [null, null, \"javascript\"]],\n          style: [[\"lang\", /^css$/i, \"css\"], [\"type\", /^(text\\/)?(x-)?(stylesheet|css)$/i, \"css\"], [\"type\", /./, \"text/plain\"], [null, null, \"css\"]]\n        };\n\n        function maybeBackup(stream, pat, style) {\n          var cur = stream.current(),\n              close = cur.search(pat);\n          if (close > -1) {\n            stream.backUp(cur.length - close);\n          } else if (cur.match(/<\\/?$/)) {\n            stream.backUp(cur.length);\n            if (!stream.match(pat, false)) stream.match(cur);\n          }\n          return style;\n        }\n\n        var attrRegexpCache = {};\n        function getAttrRegexp(attr) {\n          var regexp = attrRegexpCache[attr];\n          if (regexp) return regexp;\n          return attrRegexpCache[attr] = new RegExp(\"\\\\s+\" + attr + \"\\\\s*=\\\\s*('|\\\")?([^'\\\"]+)('|\\\")?\\\\s*\");\n        }\n\n        function getAttrValue(text, attr) {\n          var match = text.match(getAttrRegexp(attr));\n          return match ? /^\\s*(.*?)\\s*$/.exec(match[2])[1] : \"\";\n        }\n\n        function getTagRegexp(tagName, anchored) {\n          return new RegExp((anchored ? \"^\" : \"\") + \"<\\/\\s*\" + tagName + \"\\s*>\", \"i\");\n        }\n\n        function addTags(from, to) {\n          for (var tag in from) {\n            var dest = to[tag] || (to[tag] = []);\n            var source = from[tag];\n            for (var i = source.length - 1; i >= 0; i--) {\n              dest.unshift(source[i]);\n            }\n          }\n        }\n\n        function findMatchingMode(tagInfo, tagText) {\n          for (var i = 0; i < tagInfo.length; i++) {\n            var spec = tagInfo[i];\n            if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];\n          }\n        }\n\n        CodeMirror.defineMode(\"htmlmixed\", function (config, parserConfig) {\n          var htmlMode = CodeMirror.getMode(config, {\n            name: \"xml\",\n            htmlMode: true,\n            multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,\n            multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag\n          });\n\n          var tags = {};\n          var configTags = parserConfig && parserConfig.tags,\n              configScript = parserConfig && parserConfig.scriptTypes;\n          addTags(defaultTags, tags);\n          if (configTags) addTags(configTags, tags);\n          if (configScript) for (var i = configScript.length - 1; i >= 0; i--) {\n            tags.script.unshift([\"type\", configScript[i].matches, configScript[i].mode]);\n          }function html(stream, state) {\n            var style = htmlMode.token(stream, state.htmlState),\n                tag = /\\btag\\b/.test(style),\n                tagName;\n            if (tag && !/[<>\\s\\/]/.test(stream.current()) && (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) && tags.hasOwnProperty(tagName)) {\n              state.inTag = tagName + \" \";\n            } else if (state.inTag && tag && />$/.test(stream.current())) {\n              var inTag = /^([\\S]+) (.*)/.exec(state.inTag);\n              state.inTag = null;\n              var modeSpec = stream.current() == \">\" && findMatchingMode(tags[inTag[1]], inTag[2]);\n              var mode = CodeMirror.getMode(config, modeSpec);\n              var endTagA = getTagRegexp(inTag[1], true),\n                  endTag = getTagRegexp(inTag[1], false);\n              state.token = function (stream, state) {\n                if (stream.match(endTagA, false)) {\n                  state.token = html;\n                  state.localState = state.localMode = null;\n                  return null;\n                }\n                return maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));\n              };\n              state.localMode = mode;\n              state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, \"\"));\n            } else if (state.inTag) {\n              state.inTag += stream.current();\n              if (stream.eol()) state.inTag += \" \";\n            }\n            return style;\n          };\n\n          return {\n            startState: function startState() {\n              var state = CodeMirror.startState(htmlMode);\n              return { token: html, inTag: null, localMode: null, localState: null, htmlState: state };\n            },\n\n            copyState: function copyState(state) {\n              var local;\n              if (state.localState) {\n                local = CodeMirror.copyState(state.localMode, state.localState);\n              }\n              return { token: state.token, inTag: state.inTag,\n                localMode: state.localMode, localState: local,\n                htmlState: CodeMirror.copyState(htmlMode, state.htmlState) };\n            },\n\n            token: function token(stream, state) {\n              return state.token(stream, state);\n            },\n\n            indent: function indent(state, textAfter, line) {\n              if (!state.localMode || /^\\s*<\\//.test(textAfter)) return htmlMode.indent(state.htmlState, textAfter);else if (state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line);else return CodeMirror.Pass;\n            },\n\n            innerMode: function innerMode(state) {\n              return { state: state.localState || state.htmlState, mode: state.localMode || htmlMode };\n            }\n          };\n        }, \"xml\", \"javascript\", \"css\");\n\n        CodeMirror.defineMIME(\"text/html\", \"htmlmixed\");\n      });\n    }, { \"../../lib/codemirror\": 5, \"../css/css\": 6, \"../javascript/javascript\": 8, \"../xml/xml\": 9 }], 8: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineMode(\"javascript\", function (config, parserConfig) {\n          var indentUnit = config.indentUnit;\n          var statementIndent = parserConfig.statementIndent;\n          var jsonldMode = parserConfig.jsonld;\n          var jsonMode = parserConfig.json || jsonldMode;\n          var isTS = parserConfig.typescript;\n          var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n          // Tokenizer\n\n          var keywords = function () {\n            function kw(type) {\n              return { type: type, style: \"keyword\" };\n            }\n            var A = kw(\"keyword a\"),\n                B = kw(\"keyword b\"),\n                C = kw(\"keyword c\");\n            var operator = kw(\"operator\"),\n                atom = { type: \"atom\", style: \"atom\" };\n\n            var jsKeywords = {\n              \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n              \"return\": C, \"break\": C, \"continue\": C, \"new\": kw(\"new\"), \"delete\": C, \"throw\": C, \"debugger\": C,\n              \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n              \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n              \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n              \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n              \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n              \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n              \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n              \"await\": C\n            };\n\n            // Extend the 'normal' keywords with the TypeScript language extensions\n            if (isTS) {\n              var type = { type: \"variable\", style: \"type\" };\n              var tsKeywords = {\n                // object-like things\n                \"interface\": kw(\"class\"),\n                \"implements\": C,\n                \"namespace\": C,\n                \"module\": kw(\"module\"),\n                \"enum\": kw(\"module\"),\n\n                // scope modifiers\n                \"public\": kw(\"modifier\"),\n                \"private\": kw(\"modifier\"),\n                \"protected\": kw(\"modifier\"),\n                \"abstract\": kw(\"modifier\"),\n                \"readonly\": kw(\"modifier\"),\n\n                // types\n                \"string\": type, \"number\": type, \"boolean\": type, \"any\": type\n              };\n\n              for (var attr in tsKeywords) {\n                jsKeywords[attr] = tsKeywords[attr];\n              }\n            }\n\n            return jsKeywords;\n          }();\n\n          var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n          var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n          function readRegexp(stream) {\n            var escaped = false,\n                next,\n                inSet = false;\n            while ((next = stream.next()) != null) {\n              if (!escaped) {\n                if (next == \"/\" && !inSet) return;\n                if (next == \"[\") inSet = true;else if (inSet && next == \"]\") inSet = false;\n              }\n              escaped = !escaped && next == \"\\\\\";\n            }\n          }\n\n          // Used as scratch variables to communicate multiple values without\n          // consing up tons of objects.\n          var type, content;\n          function ret(tp, style, cont) {\n            type = tp;content = cont;\n            return style;\n          }\n          function tokenBase(stream, state) {\n            var ch = stream.next();\n            if (ch == '\"' || ch == \"'\") {\n              state.tokenize = tokenString(ch);\n              return state.tokenize(stream, state);\n            } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n              return ret(\"number\", \"number\");\n            } else if (ch == \".\" && stream.match(\"..\")) {\n              return ret(\"spread\", \"meta\");\n            } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n              return ret(ch);\n            } else if (ch == \"=\" && stream.eat(\">\")) {\n              return ret(\"=>\", \"operator\");\n            } else if (ch == \"0\" && stream.eat(/x/i)) {\n              stream.eatWhile(/[\\da-f]/i);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"0\" && stream.eat(/o/i)) {\n              stream.eatWhile(/[0-7]/i);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"0\" && stream.eat(/b/i)) {\n              stream.eatWhile(/[01]/i);\n              return ret(\"number\", \"number\");\n            } else if (/\\d/.test(ch)) {\n              stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"/\") {\n              if (stream.eat(\"*\")) {\n                state.tokenize = tokenComment;\n                return tokenComment(stream, state);\n              } else if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return ret(\"comment\", \"comment\");\n              } else if (expressionAllowed(stream, state, 1)) {\n                readRegexp(stream);\n                stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n                return ret(\"regexp\", \"string-2\");\n              } else {\n                stream.eatWhile(isOperatorChar);\n                return ret(\"operator\", \"operator\", stream.current());\n              }\n            } else if (ch == \"`\") {\n              state.tokenize = tokenQuasi;\n              return tokenQuasi(stream, state);\n            } else if (ch == \"#\") {\n              stream.skipToEnd();\n              return ret(\"error\", \"error\");\n            } else if (isOperatorChar.test(ch)) {\n              if (ch != \">\" || !state.lexical || state.lexical.type != \">\") stream.eatWhile(isOperatorChar);\n              return ret(\"operator\", \"operator\", stream.current());\n            } else if (wordRE.test(ch)) {\n              stream.eatWhile(wordRE);\n              var word = stream.current();\n              if (state.lastType != \".\") {\n                if (keywords.propertyIsEnumerable(word)) {\n                  var kw = keywords[word];\n                  return ret(kw.type, kw.style, word);\n                }\n                if (word == \"async\" && stream.match(/^\\s*[\\(\\w]/, false)) return ret(\"async\", \"keyword\", word);\n              }\n              return ret(\"variable\", \"variable\", word);\n            }\n          }\n\n          function tokenString(quote) {\n            return function (stream, state) {\n              var escaped = false,\n                  next;\n              if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)) {\n                state.tokenize = tokenBase;\n                return ret(\"jsonld-keyword\", \"meta\");\n              }\n              while ((next = stream.next()) != null) {\n                if (next == quote && !escaped) break;\n                escaped = !escaped && next == \"\\\\\";\n              }\n              if (!escaped) state.tokenize = tokenBase;\n              return ret(\"string\", \"string\");\n            };\n          }\n\n          function tokenComment(stream, state) {\n            var maybeEnd = false,\n                ch;\n            while (ch = stream.next()) {\n              if (ch == \"/\" && maybeEnd) {\n                state.tokenize = tokenBase;\n                break;\n              }\n              maybeEnd = ch == \"*\";\n            }\n            return ret(\"comment\", \"comment\");\n          }\n\n          function tokenQuasi(stream, state) {\n            var escaped = false,\n                next;\n            while ((next = stream.next()) != null) {\n              if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n                state.tokenize = tokenBase;\n                break;\n              }\n              escaped = !escaped && next == \"\\\\\";\n            }\n            return ret(\"quasi\", \"string-2\", stream.current());\n          }\n\n          var brackets = \"([{}])\";\n          // This is a crude lookahead trick to try and notice that we're\n          // parsing the argument patterns for a fat-arrow function before we\n          // actually hit the arrow token. It only works if the arrow is on\n          // the same line as the arguments and there's no strange noise\n          // (comments) in between. Fallback is to only notice when we hit the\n          // arrow, and not declare the arguments as locals for the arrow\n          // body.\n          function findFatArrow(stream, state) {\n            if (state.fatArrowAt) state.fatArrowAt = null;\n            var arrow = stream.string.indexOf(\"=>\", stream.start);\n            if (arrow < 0) return;\n\n            if (isTS) {\n              // Try to skip TypeScript return type declarations after the arguments\n              var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow));\n              if (m) arrow = m.index;\n            }\n\n            var depth = 0,\n                sawSomething = false;\n            for (var pos = arrow - 1; pos >= 0; --pos) {\n              var ch = stream.string.charAt(pos);\n              var bracket = brackets.indexOf(ch);\n              if (bracket >= 0 && bracket < 3) {\n                if (!depth) {\n                  ++pos;break;\n                }\n                if (--depth == 0) {\n                  if (ch == \"(\") sawSomething = true;break;\n                }\n              } else if (bracket >= 3 && bracket < 6) {\n                ++depth;\n              } else if (wordRE.test(ch)) {\n                sawSomething = true;\n              } else if (/[\"'\\/]/.test(ch)) {\n                return;\n              } else if (sawSomething && !depth) {\n                ++pos;\n                break;\n              }\n            }\n            if (sawSomething && !depth) state.fatArrowAt = pos;\n          }\n\n          // Parser\n\n          var atomicTypes = { \"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true };\n\n          function JSLexical(indented, column, type, align, prev, info) {\n            this.indented = indented;\n            this.column = column;\n            this.type = type;\n            this.prev = prev;\n            this.info = info;\n            if (align != null) this.align = align;\n          }\n\n          function inScope(state, varname) {\n            for (var v = state.localVars; v; v = v.next) {\n              if (v.name == varname) return true;\n            }for (var cx = state.context; cx; cx = cx.prev) {\n              for (var v = cx.vars; v; v = v.next) {\n                if (v.name == varname) return true;\n              }\n            }\n          }\n\n          function parseJS(state, style, type, content, stream) {\n            var cc = state.cc;\n            // Communicate our context to the combinators.\n            // (Less wasteful than consing up a hundred closures on every call.)\n            cx.state = state;cx.stream = stream;cx.marked = null, cx.cc = cc;cx.style = style;\n\n            if (!state.lexical.hasOwnProperty(\"align\")) state.lexical.align = true;\n\n            while (true) {\n              var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n              if (combinator(type, content)) {\n                while (cc.length && cc[cc.length - 1].lex) {\n                  cc.pop()();\n                }if (cx.marked) return cx.marked;\n                if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n                return style;\n              }\n            }\n          }\n\n          // Combinator utils\n\n          var cx = { state: null, column: null, marked: null, cc: null };\n          function pass() {\n            for (var i = arguments.length - 1; i >= 0; i--) {\n              cx.cc.push(arguments[i]);\n            }\n          }\n          function cont() {\n            pass.apply(null, arguments);\n            return true;\n          }\n          function register(varname) {\n            function inList(list) {\n              for (var v = list; v; v = v.next) {\n                if (v.name == varname) return true;\n              }return false;\n            }\n            var state = cx.state;\n            cx.marked = \"def\";\n            if (state.context) {\n              if (inList(state.localVars)) return;\n              state.localVars = { name: varname, next: state.localVars };\n            } else {\n              if (inList(state.globalVars)) return;\n              if (parserConfig.globalVars) state.globalVars = { name: varname, next: state.globalVars };\n            }\n          }\n\n          // Combinators\n\n          var defaultVars = { name: \"this\", next: { name: \"arguments\" } };\n          function pushcontext() {\n            cx.state.context = { prev: cx.state.context, vars: cx.state.localVars };\n            cx.state.localVars = defaultVars;\n          }\n          function popcontext() {\n            cx.state.localVars = cx.state.context.vars;\n            cx.state.context = cx.state.context.prev;\n          }\n          function pushlex(type, info) {\n            var result = function result() {\n              var state = cx.state,\n                  indent = state.indented;\n              if (state.lexical.type == \"stat\") indent = state.lexical.indented;else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev) {\n                indent = outer.indented;\n              }state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n            };\n            result.lex = true;\n            return result;\n          }\n          function poplex() {\n            var state = cx.state;\n            if (state.lexical.prev) {\n              if (state.lexical.type == \")\") state.indented = state.lexical.indented;\n              state.lexical = state.lexical.prev;\n            }\n          }\n          poplex.lex = true;\n\n          function expect(wanted) {\n            function exp(type) {\n              if (type == wanted) return cont();else if (wanted == \";\") return pass();else return cont(exp);\n            };\n            return exp;\n          }\n\n          function statement(type, value) {\n            if (type == \"var\") return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n            if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n            if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n            if (type == \"{\") return cont(pushlex(\"}\"), block, poplex);\n            if (type == \";\") return cont();\n            if (type == \"if\") {\n              if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex) cx.state.cc.pop()();\n              return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n            }\n            if (type == \"function\") return cont(functiondef);\n            if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n            if (type == \"variable\") {\n              if (isTS && value == \"type\") {\n                cx.marked = \"keyword\";\n                return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n              }if (isTS && value == \"declare\") {\n                cx.marked = \"keyword\";\n                return cont(statement);\n              } else {\n                return cont(pushlex(\"stat\"), maybelabel);\n              }\n            }\n            if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), block, poplex, poplex);\n            if (type == \"case\") return cont(expression, expect(\":\"));\n            if (type == \"default\") return cont(expect(\":\"));\n            if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"), statement, poplex, popcontext);\n            if (type == \"class\") return cont(pushlex(\"form\"), className, poplex);\n            if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n            if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n            if (type == \"module\") return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex);\n            if (type == \"async\") return cont(statement);\n            if (value == \"@\") return cont(expression, statement);\n            return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n          }\n          function expression(type) {\n            return expressionInner(type, false);\n          }\n          function expressionNoComma(type) {\n            return expressionInner(type, true);\n          }\n          function parenExpr(type) {\n            if (type != \"(\") return pass();\n            return cont(pushlex(\")\"), expression, expect(\")\"), poplex);\n          }\n          function expressionInner(type, noComma) {\n            if (cx.state.fatArrowAt == cx.stream.start) {\n              var body = noComma ? arrowBodyNoComma : arrowBody;\n              if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(pattern, \")\"), poplex, expect(\"=>\"), body, popcontext);else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n            }\n\n            var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n            if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n            if (type == \"function\") return cont(functiondef, maybeop);\n            if (type == \"class\") return cont(pushlex(\"form\"), classExpression, poplex);\n            if (type == \"keyword c\" || type == \"async\") return cont(noComma ? maybeexpressionNoComma : maybeexpression);\n            if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n            if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n            if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n            if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n            if (type == \"quasi\") return pass(quasi, maybeop);\n            if (type == \"new\") return cont(maybeTarget(noComma));\n            return cont();\n          }\n          function maybeexpression(type) {\n            if (type.match(/[;\\}\\)\\],]/)) return pass();\n            return pass(expression);\n          }\n          function maybeexpressionNoComma(type) {\n            if (type.match(/[;\\}\\)\\],]/)) return pass();\n            return pass(expressionNoComma);\n          }\n\n          function maybeoperatorComma(type, value) {\n            if (type == \",\") return cont(expression);\n            return maybeoperatorNoComma(type, value, false);\n          }\n          function maybeoperatorNoComma(type, value, noComma) {\n            var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n            var expr = noComma == false ? expression : expressionNoComma;\n            if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n            if (type == \"operator\") {\n              if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n              if (value == \"?\") return cont(expression, expect(\":\"), expr);\n              return cont(expr);\n            }\n            if (type == \"quasi\") {\n              return pass(quasi, me);\n            }\n            if (type == \";\") return;\n            if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n            if (type == \".\") return cont(property, me);\n            if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n            if (isTS && value == \"as\") {\n              cx.marked = \"keyword\";return cont(typeexpr, me);\n            }\n          }\n          function quasi(type, value) {\n            if (type != \"quasi\") return pass();\n            if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n            return cont(expression, continueQuasi);\n          }\n          function continueQuasi(type) {\n            if (type == \"}\") {\n              cx.marked = \"string-2\";\n              cx.state.tokenize = tokenQuasi;\n              return cont(quasi);\n            }\n          }\n          function arrowBody(type) {\n            findFatArrow(cx.stream, cx.state);\n            return pass(type == \"{\" ? statement : expression);\n          }\n          function arrowBodyNoComma(type) {\n            findFatArrow(cx.stream, cx.state);\n            return pass(type == \"{\" ? statement : expressionNoComma);\n          }\n          function maybeTarget(noComma) {\n            return function (type) {\n              if (type == \".\") return cont(noComma ? targetNoComma : target);else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma);else return pass(noComma ? expressionNoComma : expression);\n            };\n          }\n          function target(_, value) {\n            if (value == \"target\") {\n              cx.marked = \"keyword\";return cont(maybeoperatorComma);\n            }\n          }\n          function targetNoComma(_, value) {\n            if (value == \"target\") {\n              cx.marked = \"keyword\";return cont(maybeoperatorNoComma);\n            }\n          }\n          function maybelabel(type) {\n            if (type == \":\") return cont(poplex, statement);\n            return pass(maybeoperatorComma, expect(\";\"), poplex);\n          }\n          function property(type) {\n            if (type == \"variable\") {\n              cx.marked = \"property\";return cont();\n            }\n          }\n          function objprop(type, value) {\n            if (type == \"async\") {\n              cx.marked = \"property\";\n              return cont(objprop);\n            } else if (type == \"variable\" || cx.style == \"keyword\") {\n              cx.marked = \"property\";\n              if (value == \"get\" || value == \"set\") return cont(getterSetter);\n              return cont(afterprop);\n            } else if (type == \"number\" || type == \"string\") {\n              cx.marked = jsonldMode ? \"property\" : cx.style + \" property\";\n              return cont(afterprop);\n            } else if (type == \"jsonld-keyword\") {\n              return cont(afterprop);\n            } else if (type == \"modifier\") {\n              return cont(objprop);\n            } else if (type == \"[\") {\n              return cont(expression, expect(\"]\"), afterprop);\n            } else if (type == \"spread\") {\n              return cont(expression, afterprop);\n            } else if (type == \":\") {\n              return pass(afterprop);\n            }\n          }\n          function getterSetter(type) {\n            if (type != \"variable\") return pass(afterprop);\n            cx.marked = \"property\";\n            return cont(functiondef);\n          }\n          function afterprop(type) {\n            if (type == \":\") return cont(expressionNoComma);\n            if (type == \"(\") return pass(functiondef);\n          }\n          function commasep(what, end, sep) {\n            function proceed(type, value) {\n              if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n                var lex = cx.state.lexical;\n                if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n                return cont(function (type, value) {\n                  if (type == end || value == end) return pass();\n                  return pass(what);\n                }, proceed);\n              }\n              if (type == end || value == end) return cont();\n              return cont(expect(end));\n            }\n            return function (type, value) {\n              if (type == end || value == end) return cont();\n              return pass(what, proceed);\n            };\n          }\n          function contCommasep(what, end, info) {\n            for (var i = 3; i < arguments.length; i++) {\n              cx.cc.push(arguments[i]);\n            }return cont(pushlex(end, info), commasep(what, end), poplex);\n          }\n          function block(type) {\n            if (type == \"}\") return cont();\n            return pass(statement, block);\n          }\n          function maybetype(type, value) {\n            if (isTS) {\n              if (type == \":\") return cont(typeexpr);\n              if (value == \"?\") return cont(maybetype);\n            }\n          }\n          function typeexpr(type, value) {\n            if (type == \"variable\") {\n              if (value == \"keyof\") {\n                cx.marked = \"keyword\";\n                return cont(typeexpr);\n              } else {\n                cx.marked = \"type\";\n                return cont(afterType);\n              }\n            }\n            if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n            if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType);\n            if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType);\n            if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType);\n          }\n          function maybeReturnType(type) {\n            if (type == \"=>\") return cont(typeexpr);\n          }\n          function typeprop(type, value) {\n            if (type == \"variable\" || cx.style == \"keyword\") {\n              cx.marked = \"property\";\n              return cont(typeprop);\n            } else if (value == \"?\") {\n              return cont(typeprop);\n            } else if (type == \":\") {\n              return cont(typeexpr);\n            } else if (type == \"[\") {\n              return cont(expression, maybetype, expect(\"]\"), typeprop);\n            }\n          }\n          function typearg(type) {\n            if (type == \"variable\") return cont(typearg);else if (type == \":\") return cont(typeexpr);\n          }\n          function afterType(type, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType);\n            if (value == \"|\" || type == \".\") return cont(typeexpr);\n            if (type == \"[\") return cont(expect(\"]\"), afterType);\n            if (value == \"extends\") return cont(typeexpr);\n          }\n          function maybeTypeArgs(_, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType);\n          }\n          function vardef() {\n            return pass(pattern, maybetype, maybeAssign, vardefCont);\n          }\n          function pattern(type, value) {\n            if (type == \"modifier\") return cont(pattern);\n            if (type == \"variable\") {\n              register(value);return cont();\n            }\n            if (type == \"spread\") return cont(pattern);\n            if (type == \"[\") return contCommasep(pattern, \"]\");\n            if (type == \"{\") return contCommasep(proppattern, \"}\");\n          }\n          function proppattern(type, value) {\n            if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n              register(value);\n              return cont(maybeAssign);\n            }\n            if (type == \"variable\") cx.marked = \"property\";\n            if (type == \"spread\") return cont(pattern);\n            if (type == \"}\") return pass();\n            return cont(expect(\":\"), pattern, maybeAssign);\n          }\n          function maybeAssign(_type, value) {\n            if (value == \"=\") return cont(expressionNoComma);\n          }\n          function vardefCont(type) {\n            if (type == \",\") return cont(vardef);\n          }\n          function maybeelse(type, value) {\n            if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n          }\n          function forspec(type) {\n            if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n          }\n          function forspec1(type) {\n            if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n            if (type == \";\") return cont(forspec2);\n            if (type == \"variable\") return cont(formaybeinof);\n            return pass(expression, expect(\";\"), forspec2);\n          }\n          function formaybeinof(_type, value) {\n            if (value == \"in\" || value == \"of\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n            return cont(maybeoperatorComma, forspec2);\n          }\n          function forspec2(type, value) {\n            if (type == \";\") return cont(forspec3);\n            if (value == \"in\" || value == \"of\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n            return pass(expression, expect(\";\"), forspec3);\n          }\n          function forspec3(type) {\n            if (type != \")\") cont(expression);\n          }\n          function functiondef(type, value) {\n            if (value == \"*\") {\n              cx.marked = \"keyword\";return cont(functiondef);\n            }\n            if (type == \"variable\") {\n              register(value);return cont(functiondef);\n            }\n            if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, maybetype, statement, popcontext);\n            if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, functiondef);\n          }\n          function funarg(type) {\n            if (type == \"spread\" || type == \"modifier\") return cont(funarg);\n            return pass(pattern, maybetype, maybeAssign);\n          }\n          function classExpression(type, value) {\n            // Class expressions may have an optional name.\n            if (type == \"variable\") return className(type, value);\n            return classNameAfter(type, value);\n          }\n          function className(type, value) {\n            if (type == \"variable\") {\n              register(value);return cont(classNameAfter);\n            }\n          }\n          function classNameAfter(type, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, classNameAfter);\n            if (value == \"extends\" || value == \"implements\" || isTS && type == \",\") return cont(isTS ? typeexpr : expression, classNameAfter);\n            if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n          }\n          function classBody(type, value) {\n            if (type == \"modifier\" || type == \"async\" || type == \"variable\" && (value == \"static\" || value == \"get\" || value == \"set\") && cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false)) {\n              cx.marked = \"keyword\";\n              return cont(classBody);\n            }\n            if (type == \"variable\") {\n              cx.marked = \"property\";\n              return cont(isTS ? classfield : functiondef, classBody);\n            }\n            if (type == \"[\") return cont(expression, expect(\"]\"), isTS ? classfield : functiondef, classBody);\n            if (value == \"*\") {\n              cx.marked = \"keyword\";\n              return cont(classBody);\n            }\n            if (type == \";\") return cont(classBody);\n            if (type == \"}\") return cont();\n            if (value == \"@\") return cont(expression, classBody);\n          }\n          function classfield(type, value) {\n            if (value == \"?\") return cont(classfield);\n            if (type == \":\") return cont(typeexpr, maybeAssign);\n            if (value == \"=\") return cont(expressionNoComma);\n            return pass(functiondef);\n          }\n          function afterExport(type, value) {\n            if (value == \"*\") {\n              cx.marked = \"keyword\";return cont(maybeFrom, expect(\";\"));\n            }\n            if (value == \"default\") {\n              cx.marked = \"keyword\";return cont(expression, expect(\";\"));\n            }\n            if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n            return pass(statement);\n          }\n          function exportField(type, value) {\n            if (value == \"as\") {\n              cx.marked = \"keyword\";return cont(expect(\"variable\"));\n            }\n            if (type == \"variable\") return pass(expressionNoComma, exportField);\n          }\n          function afterImport(type) {\n            if (type == \"string\") return cont();\n            return pass(importSpec, maybeMoreImports, maybeFrom);\n          }\n          function importSpec(type, value) {\n            if (type == \"{\") return contCommasep(importSpec, \"}\");\n            if (type == \"variable\") register(value);\n            if (value == \"*\") cx.marked = \"keyword\";\n            return cont(maybeAs);\n          }\n          function maybeMoreImports(type) {\n            if (type == \",\") return cont(importSpec, maybeMoreImports);\n          }\n          function maybeAs(_type, value) {\n            if (value == \"as\") {\n              cx.marked = \"keyword\";return cont(importSpec);\n            }\n          }\n          function maybeFrom(_type, value) {\n            if (value == \"from\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n          }\n          function arrayLiteral(type) {\n            if (type == \"]\") return cont();\n            return pass(commasep(expressionNoComma, \"]\"));\n          }\n\n          function isContinuedStatement(state, textAfter) {\n            return state.lastType == \"operator\" || state.lastType == \",\" || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));\n          }\n\n          function expressionAllowed(stream, state, backUp) {\n            return state.tokenize == tokenBase && /^(?:operator|sof|keyword c|case|new|export|default|[\\[{}\\(,;:]|=>)$/.test(state.lastType) || state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0)));\n          }\n\n          // Interface\n\n          return {\n            startState: function startState(basecolumn) {\n              var state = {\n                tokenize: tokenBase,\n                lastType: \"sof\",\n                cc: [],\n                lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n                localVars: parserConfig.localVars,\n                context: parserConfig.localVars && { vars: parserConfig.localVars },\n                indented: basecolumn || 0\n              };\n              if (parserConfig.globalVars && _typeof(parserConfig.globalVars) == \"object\") state.globalVars = parserConfig.globalVars;\n              return state;\n            },\n\n            token: function token(stream, state) {\n              if (stream.sol()) {\n                if (!state.lexical.hasOwnProperty(\"align\")) state.lexical.align = false;\n                state.indented = stream.indentation();\n                findFatArrow(stream, state);\n              }\n              if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n              var style = state.tokenize(stream, state);\n              if (type == \"comment\") return style;\n              state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n              return parseJS(state, style, type, content, stream);\n            },\n\n            indent: function indent(state, textAfter) {\n              if (state.tokenize == tokenComment) return CodeMirror.Pass;\n              if (state.tokenize != tokenBase) return 0;\n              var firstChar = textAfter && textAfter.charAt(0),\n                  lexical = state.lexical,\n                  top;\n              // Kludge to prevent 'maybelse' from blocking lexical scope pops\n              if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n                var c = state.cc[i];\n                if (c == poplex) lexical = lexical.prev;else if (c != maybeelse) break;\n              }\n              while ((lexical.type == \"stat\" || lexical.type == \"form\") && (firstChar == \"}\" || (top = state.cc[state.cc.length - 1]) && (top == maybeoperatorComma || top == maybeoperatorNoComma) && !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))) {\n                lexical = lexical.prev;\n              }if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\") lexical = lexical.prev;\n              var type = lexical.type,\n                  closing = firstChar == type;\n\n              if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);else if (type == \"form\" && firstChar == \"{\") return lexical.indented;else if (type == \"form\") return lexical.indented + indentUnit;else if (type == \"stat\") return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false) return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);else if (lexical.align) return lexical.column + (closing ? 0 : 1);else return lexical.indented + (closing ? 0 : indentUnit);\n            },\n\n            electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n            blockCommentStart: jsonMode ? null : \"/*\",\n            blockCommentEnd: jsonMode ? null : \"*/\",\n            lineComment: jsonMode ? null : \"//\",\n            fold: \"brace\",\n            closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n            helperType: jsonMode ? \"json\" : \"javascript\",\n            jsonldMode: jsonldMode,\n            jsonMode: jsonMode,\n\n            expressionAllowed: expressionAllowed,\n\n            skipExpression: function skipExpression(state) {\n              var top = state.cc[state.cc.length - 1];\n              if (top == expression || top == expressionNoComma) state.cc.pop();\n            }\n          };\n        });\n\n        CodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\n        CodeMirror.defineMIME(\"text/javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/json\", { name: \"javascript\", json: true });\n        CodeMirror.defineMIME(\"application/x-json\", { name: \"javascript\", json: true });\n        CodeMirror.defineMIME(\"application/ld+json\", { name: \"javascript\", jsonld: true });\n        CodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\n        CodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n      });\n    }, { \"../../lib/codemirror\": 5 }], 9: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var htmlConfig = {\n          autoSelfClosers: { 'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n            'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n            'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n            'track': true, 'wbr': true, 'menuitem': true },\n          implicitlyClosed: { 'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n            'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n            'th': true, 'tr': true },\n          contextGrabbers: {\n            'dd': { 'dd': true, 'dt': true },\n            'dt': { 'dd': true, 'dt': true },\n            'li': { 'li': true },\n            'option': { 'option': true, 'optgroup': true },\n            'optgroup': { 'optgroup': true },\n            'p': { 'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n              'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n              'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n              'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n              'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true },\n            'rp': { 'rp': true, 'rt': true },\n            'rt': { 'rp': true, 'rt': true },\n            'tbody': { 'tbody': true, 'tfoot': true },\n            'td': { 'td': true, 'th': true },\n            'tfoot': { 'tbody': true },\n            'th': { 'td': true, 'th': true },\n            'thead': { 'tbody': true, 'tfoot': true },\n            'tr': { 'tr': true }\n          },\n          doNotIndent: { \"pre\": true },\n          allowUnquoted: true,\n          allowMissing: true,\n          caseFold: true\n        };\n\n        var xmlConfig = {\n          autoSelfClosers: {},\n          implicitlyClosed: {},\n          contextGrabbers: {},\n          doNotIndent: {},\n          allowUnquoted: false,\n          allowMissing: false,\n          caseFold: false\n        };\n\n        CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n          var indentUnit = editorConf.indentUnit;\n          var config = {};\n          var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n          for (var prop in defaults) {\n            config[prop] = defaults[prop];\n          }for (var prop in config_) {\n            config[prop] = config_[prop];\n          } // Return variables for tokenizers\n          var type, setStyle;\n\n          function inText(stream, state) {\n            function chain(parser) {\n              state.tokenize = parser;\n              return parser(stream, state);\n            }\n\n            var ch = stream.next();\n            if (ch == \"<\") {\n              if (stream.eat(\"!\")) {\n                if (stream.eat(\"[\")) {\n                  if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n                } else if (stream.match(\"--\")) {\n                  return chain(inBlock(\"comment\", \"-->\"));\n                } else if (stream.match(\"DOCTYPE\", true, true)) {\n                  stream.eatWhile(/[\\w\\._\\-]/);\n                  return chain(doctype(1));\n                } else {\n                  return null;\n                }\n              } else if (stream.eat(\"?\")) {\n                stream.eatWhile(/[\\w\\._\\-]/);\n                state.tokenize = inBlock(\"meta\", \"?>\");\n                return \"meta\";\n              } else {\n                type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n                state.tokenize = inTag;\n                return \"tag bracket\";\n              }\n            } else if (ch == \"&\") {\n              var ok;\n              if (stream.eat(\"#\")) {\n                if (stream.eat(\"x\")) {\n                  ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n                } else {\n                  ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n                }\n              } else {\n                ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n              }\n              return ok ? \"atom\" : \"error\";\n            } else {\n              stream.eatWhile(/[^&<]/);\n              return null;\n            }\n          }\n          inText.isInText = true;\n\n          function inTag(stream, state) {\n            var ch = stream.next();\n            if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n              state.tokenize = inText;\n              type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n              return \"tag bracket\";\n            } else if (ch == \"=\") {\n              type = \"equals\";\n              return null;\n            } else if (ch == \"<\") {\n              state.tokenize = inText;\n              state.state = baseState;\n              state.tagName = state.tagStart = null;\n              var next = state.tokenize(stream, state);\n              return next ? next + \" tag error\" : \"tag error\";\n            } else if (/[\\'\\\"]/.test(ch)) {\n              state.tokenize = inAttribute(ch);\n              state.stringStartCol = stream.column();\n              return state.tokenize(stream, state);\n            } else {\n              stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n              return \"word\";\n            }\n          }\n\n          function inAttribute(quote) {\n            var closure = function closure(stream, state) {\n              while (!stream.eol()) {\n                if (stream.next() == quote) {\n                  state.tokenize = inTag;\n                  break;\n                }\n              }\n              return \"string\";\n            };\n            closure.isInAttribute = true;\n            return closure;\n          }\n\n          function inBlock(style, terminator) {\n            return function (stream, state) {\n              while (!stream.eol()) {\n                if (stream.match(terminator)) {\n                  state.tokenize = inText;\n                  break;\n                }\n                stream.next();\n              }\n              return style;\n            };\n          }\n          function doctype(depth) {\n            return function (stream, state) {\n              var ch;\n              while ((ch = stream.next()) != null) {\n                if (ch == \"<\") {\n                  state.tokenize = doctype(depth + 1);\n                  return state.tokenize(stream, state);\n                } else if (ch == \">\") {\n                  if (depth == 1) {\n                    state.tokenize = inText;\n                    break;\n                  } else {\n                    state.tokenize = doctype(depth - 1);\n                    return state.tokenize(stream, state);\n                  }\n                }\n              }\n              return \"meta\";\n            };\n          }\n\n          function Context(state, tagName, startOfLine) {\n            this.prev = state.context;\n            this.tagName = tagName;\n            this.indent = state.indented;\n            this.startOfLine = startOfLine;\n            if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n          }\n          function popContext(state) {\n            if (state.context) state.context = state.context.prev;\n          }\n          function maybePopContext(state, nextTagName) {\n            var parentTagName;\n            while (true) {\n              if (!state.context) {\n                return;\n              }\n              parentTagName = state.context.tagName;\n              if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n                return;\n              }\n              popContext(state);\n            }\n          }\n\n          function baseState(type, stream, state) {\n            if (type == \"openTag\") {\n              state.tagStart = stream.column();\n              return tagNameState;\n            } else if (type == \"closeTag\") {\n              return closeTagNameState;\n            } else {\n              return baseState;\n            }\n          }\n          function tagNameState(type, stream, state) {\n            if (type == \"word\") {\n              state.tagName = stream.current();\n              setStyle = \"tag\";\n              return attrState;\n            } else {\n              setStyle = \"error\";\n              return tagNameState;\n            }\n          }\n          function closeTagNameState(type, stream, state) {\n            if (type == \"word\") {\n              var tagName = stream.current();\n              if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n              if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n                setStyle = \"tag\";\n                return closeState;\n              } else {\n                setStyle = \"tag error\";\n                return closeStateErr;\n              }\n            } else {\n              setStyle = \"error\";\n              return closeStateErr;\n            }\n          }\n\n          function closeState(type, _stream, state) {\n            if (type != \"endTag\") {\n              setStyle = \"error\";\n              return closeState;\n            }\n            popContext(state);\n            return baseState;\n          }\n          function closeStateErr(type, stream, state) {\n            setStyle = \"error\";\n            return closeState(type, stream, state);\n          }\n\n          function attrState(type, _stream, state) {\n            if (type == \"word\") {\n              setStyle = \"attribute\";\n              return attrEqState;\n            } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n              var tagName = state.tagName,\n                  tagStart = state.tagStart;\n              state.tagName = state.tagStart = null;\n              if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n                maybePopContext(state, tagName);\n              } else {\n                maybePopContext(state, tagName);\n                state.context = new Context(state, tagName, tagStart == state.indented);\n              }\n              return baseState;\n            }\n            setStyle = \"error\";\n            return attrState;\n          }\n          function attrEqState(type, stream, state) {\n            if (type == \"equals\") return attrValueState;\n            if (!config.allowMissing) setStyle = \"error\";\n            return attrState(type, stream, state);\n          }\n          function attrValueState(type, stream, state) {\n            if (type == \"string\") return attrContinuedState;\n            if (type == \"word\" && config.allowUnquoted) {\n              setStyle = \"string\";return attrState;\n            }\n            setStyle = \"error\";\n            return attrState(type, stream, state);\n          }\n          function attrContinuedState(type, stream, state) {\n            if (type == \"string\") return attrContinuedState;\n            return attrState(type, stream, state);\n          }\n\n          return {\n            startState: function startState(baseIndent) {\n              var state = { tokenize: inText,\n                state: baseState,\n                indented: baseIndent || 0,\n                tagName: null, tagStart: null,\n                context: null };\n              if (baseIndent != null) state.baseIndent = baseIndent;\n              return state;\n            },\n\n            token: function token(stream, state) {\n              if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n\n              if (stream.eatSpace()) return null;\n              type = null;\n              var style = state.tokenize(stream, state);\n              if ((style || type) && style != \"comment\") {\n                setStyle = null;\n                state.state = state.state(type || style, stream, state);\n                if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n              }\n              return style;\n            },\n\n            indent: function indent(state, textAfter, fullLine) {\n              var context = state.context;\n              // Indent multi-line strings (e.g. css).\n              if (state.tokenize.isInAttribute) {\n                if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n              }\n              if (context && context.noIndent) return CodeMirror.Pass;\n              if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n              // Indent the starts of attribute names.\n              if (state.tagName) {\n                if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n              }\n              if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n              var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n              if (tagAfter && tagAfter[1]) {\n                // Closing tag spotted\n                while (context) {\n                  if (context.tagName == tagAfter[2]) {\n                    context = context.prev;\n                    break;\n                  } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n                    context = context.prev;\n                  } else {\n                    break;\n                  }\n                }\n              } else if (tagAfter) {\n                // Opening tag spotted\n                while (context) {\n                  var grabbers = config.contextGrabbers[context.tagName];\n                  if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n                }\n              }\n              while (context && context.prev && !context.startOfLine) {\n                context = context.prev;\n              }if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n            },\n\n            electricInput: /<\\/[\\s\\w:]+>$/,\n            blockCommentStart: \"<!--\",\n            blockCommentEnd: \"-->\",\n\n            configuration: config.htmlMode ? \"html\" : \"xml\",\n            helperType: config.htmlMode ? \"html\" : \"xml\",\n\n            skipAttribute: function skipAttribute(state) {\n              if (state.state == attrValueState) state.state = attrState;\n            }\n          };\n        });\n\n        CodeMirror.defineMIME(\"text/xml\", \"xml\");\n        CodeMirror.defineMIME(\"application/xml\", \"xml\");\n        if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", { name: \"xml\", htmlMode: true });\n      });\n    }, { \"../../lib/codemirror\": 5 }] }, {}, [1]);\n  ;\n})();"]}