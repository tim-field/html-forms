{"version":3,"sources":["admin.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","require","undefined","define","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","1","module","openTab","tabTarget","this","getAttribute","_i","tabNavs","classList","toggle","blur","_i2","tabs","tab","preventDefault","document","querySelectorAll","addEventListener","2","./admin-tabs.js","./form-editor.js","3","updateShadowDOM","console","log","dom","innerHTML","editor","getValue","updateRequiredFields","fields","fieldNames","map","name","requiredFieldsInput","value","join","updateEmailFields","emailFieldsInput","CodeMirror","element","querySelector","createElement","getElementById","fromTextArea","selectionPointer","matchTags","bothTags","mode","htmlMode","autoCloseTags","autoRefresh","on","codemirror","codemirror/addon/edit/closetag.js","codemirror/addon/edit/matchtags","codemirror/addon/fold/xml-fold","codemirror/mode/css/css","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","4","mod","amd","autoCloseGT","cm","getOption","Pass","ranges","listSelections","replacements","empty","pos","head","tok","getTokenAt","inner","innerMode","getMode","state","tagName","opt","html","configuration","dontCloseTags","htmlDontClose","indentTags","htmlIndent","end","ch","slice","lowerTagName","toLowerCase","type","test","string","charAt","indexOf","closingTagExists","indent","text","newPos","Pos","line","info","replaceRange","anchor","sel","setSelections","indentLine","autoCloseCurrent","typingSlash","start","replacement","context","getLine","replaceSelections","autoCloseSlash","collection","elt","newTag","scanForClosingTag","Math","min","lastLine","nextClose","tag","cx","onCx","prev","to","next","defineOption","val","old","Init","removeKeyMap","whenClosing","whenOpening","addKeyMap","commands","closeTag","../../lib/codemirror","../fold/xml-fold","5","clear","tagHit","tagOther","doMatchTags","failedTagMatch","operation","somethingSelected","cur","getCursor","range","getViewport","from","max","match","findMatchingTag","matchBothTags","hit","at","open","close","markText","className","other","maybeUpdateMatch","off","toMatchingTag","found","extendSelection","6","cmp","b","Iter","firstLine","tagAt","iter","getTokenTypeAt","nextLine","prevLine","toTagEnd","gt","lastSlash","lastIndexOf","selfClose","toTagStart","lt","xmlTagStart","lastIndex","exec","index","toNextTag","toPrevTag","findMatchingClose","stack","startLine","startCh","push","findMatchingOpen","endLine","endCh","nameStartChar","RegExp","registerHelper","openTag","startPos","endPos","here","findEnclosingTag","forward","7","global","factory","classTest","cls","removeChildren","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","content","style","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","node","current","joinClasses","as","split","bind","args","Array","arguments","apply","copyObj","target","overwrite","prop","hasOwnProperty","countColumn","tabSize","startIndex","startValue","search","nextTab","array","findColumn","goal","col","skipped","spaceStr","spaceStrs","lst","arr","out","insertSorted","score","priority","splice","nothing","createObj","base","props","inst","Object","create","isWordCharBasic","toUpperCase","nonASCIISingleCaseWordChar","isWordChar","helper","source","isEmpty","isExtendingChar","charCodeAt","extendingChars","skipExtendingChars","str","dir","findFirst","pred","abs","mid","floor","Display","place","doc","input","d","scrollbarFiller","gutterFiller","lineDiv","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","lines","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","scroller","wrapper","ie","ie_version","zIndex","paddingRight","webkit","gecko","mobile","draggable","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","shift","selForContextMenu","activeTouch","init","size","chunk","children","sz","chunkSize","getBetween","getLines","updateLineHeight","height","diff","lineNo","no","_lineAtHeight","h","outer","i$1","lh","isLine","lineNumberFor","options","String","lineNumberFormatter","firstLineNumber","sticky","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","_clipPos","last","clipToLen","linelen","clipPosArray","seeReadOnlySpans","sawReadOnlySpans","seeCollapsedSpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","markedSpans","concat","attachLine","markedSpansBefore","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","span$1","found$1","clearEmptySpans","newMarkers","gapMarkers","gap","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","m","find","j","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","id","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","lineLength","len","findMaxLine","display","iterateBidiSections","order","part","level","getBidiPartAt","bidiOther","getOrder","direction","bidiOrdering","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","prepareMeasureForLine","targetTop","measureCharPrepared","top","moveVisually","bidi","partPos","mv","getWrappedLineExtent","lineWrapping","wrappedLineExtentChar","begin","wrappedLineExtent","searchInVisualLine","getRes","res","nextCh","getHandlers","emitter","_handlers","noHandlers","removeEventListener","detachEvent","map$$1","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","set","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","mac","ctrlKey","zeroWidthElement","zwspSupported","offsetHeight","offsetWidth","hasBadBidiRects","badBidiRects","txt","r0","getBoundingClientRect","r1","left","right","hasBadZoomedRects","badZoomedRects","normal","fromRange","defineMode","dependencies","modes","defineMIME","mime","spec","mimeModes","resolveMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","startState","a1","a2","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","overlays","overlay","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","result","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","Context","findStartLine","saved","fromSaved","processLine","startAt","stream","StringStream","callBlankLine","eol","readToken","blankLine","token","takeToken","asArray","tokens","Token","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","after","SavedContext","lookAhead","indented","retreatFrontier","updateLine","estimateHeight","estHeight","cleanUpLine","interpretTokenStyle","cache","styleToClassCacheWithMode","styleToClassCache","replace","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","maps","caches","lastChild","defaultSpecialCharPlaceholder","title","toString","startStyle","endStyle","css","displayText","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","j$1","j$2","upto","tokenText","LineView","hidden","buildViewArray","nextPos","pushOperation","op","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","signalLater","list","orphanDelayedCallbacks","setTimeout","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","background","wrap","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterWidth","alignable","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","clientWidth","eventInWidget","paddingTop","offsetTop","paddingVert","paddingH","window","getComputedStyle","currentStyle","data","parseInt","isNaN","scrollGap","displayWidth","displayHeight","clientHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","before","updateExternalMeasurement","measureChar","bias","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","nodeAndOffsetInLineMap","collapse","mStart","mEnd","coverStart","coverEnd","getUsefulRect","nullRect","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","pageScrollX","chrome","android","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","intoCoordSystem","includeWidgets","yOff","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","get","getBidi","invert","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","mergedPos","assign","prevDiff","prevPos","beginLeft","steps","ceil","prevPos$1","diff_change_per_step","box","textHeight","measureText","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","selection","primIndex","range$$1","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","add","fragment","rightSide","drawForLine","fromArg","toArg","lineLen","rightPos","leftPos","tmp","leftSide","padding","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","reset","receivedFocus","rmClass","updateHeightsInViewport","prevBottom","updateWidgetHeight","visibleLines","viewport","ensure","ensureFrom","ensureTo","alignHorizontally","comp","gutterW","align","maybeUpdateLineNumberWidth","innerW","updateGutterSpace","maybeScrollWindow","doScroll","innerHeight","phantom","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","measureForScrollbars","docH","viewHeight","viewWidth","barLeft","docHeight","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","update","paddingBottom","borderBottom","coverGutterNextToScrollbar","initScrollbars","scrollbarModel","scrollbarStyle","axis","_startOperation","viewChanged","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","nextOpId","_endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","i$4","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","minWidth","takeFocus","hasFocus","setDocumentHeight","postUpdateDisplay","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","regChange","lendiff","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","time","highlight","highlightWorker","Date","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","marginBottom","borderRightWidth","selectionSnapshot","active","getSelection","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","createRange","setEnd","removeAllRanges","addRange","editorIsHidden","force","visible","viewportMargin","different","wrapperHeight","toUpdate","selSnapshot","patchDisplay","minHeight","oldDisplayWidth","updateNumbersFrom","rm","currentWheelTarget","container","updateNumber","updateGutters","specs","gElt","setGuttersForLineNumbers","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","wheelPixelsPerUnit","onScrollWheel","scroll","canScrollX","canScrollY","presto","pixels","wheelSamples","movedX","movedY","sample","normalizeSelection","prim","sort","inv","Range","Selection","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","linesFor","Line","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","origin","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","equals","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","events","newGroup","instantiateSel","copy","event","deepCopy","newChanges","Number","extendRange","posBefore","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","this$1","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","atomic","near","movePos","far","cantEdit","selectAll","sel_dontScroll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","_replaceRange","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","adjustScrollWhenAboveVisible","addLineWidget","LineWidget","insertAt","aboveVisible","_markText","markTextShared","TextMarker","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","nextMarkerId","cloneNode","isParent","SharedTextMarker","findSharedMarkers","findMarks","clipPos","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","onDrop","clearDragCursor","lastDrop","files","dataTransfer","isReadOnly","FileReader","File","read","file","allowDropFileTypes","reader","onload","lineSeparator","readAsText","draggingText","text$1","getData","selected","replaceSelection","onDragStart","setData","effectAllowed","setDragImage","safari","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","ensureGlobalHandlers","globalsRegistered","registerGlobalHandlers","resizeTimer","onResize","setSize","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","keyNames","keyCode","addModifierNames","noShift","altKey","flipCtrlCmd","metaKey","shiftKey","keyName","altGraphKey","keyMap","deleteNearSelection","compute","kill","toKill","replaced","lineStart","visual","lineEnd","lineStartSmart","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","dispatchKey","seq","keySeq","stopSeq","handleKeyBinding","motion","handleCharBinding","onKeyDown","handled","lastStoppedKey","hasCopyEvent","showCrossHair","up","onKeyUp","onKeyPress","charCode","fromCharCode","clickRepeat","now","lastDoubleClick","compare","lastClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","captureRightClick","onContextMenu","configureMouse","option","unit","chromeOS","addNew","moveOnDrag","contained","behavior","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","e2","rangeForUnit","findWordAt","extendTo","lastPos","startCol","posCol","startSel","ourIndex","oldRange","ourRange","ranges$1","sel_mouse","curCount","counter","editorSize","move","gutterEvent","prevent","mX","mY","lineBox","g","contextMenuInGutter","themeChanged","theme","guttersChanged","dragDropChanged","funcs","dragFunctions","enter","over","leave","drop","wrappingChanged","CodeMirror$1","defaults","Doc","inputStyles","inputStyle","pasteIncoming","cutIncoming","Delayed","autofocus","registerEventHandlers","optionHandlers","finishInit","initHooks","textRendering","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","word","clearTimeout","pageX","pageY","coordsChar","inp","getField","how","aggressive","curSpace","indentation","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","setLastCopied","newLastCopied","lastCopied","applyTextInput","inserted","deleted","paste","textLines","splitLinesAuto","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","getRange","disableBrowserMagic","field","spellcheck","hiddenTextarea","te","div","ios","border","_findPosH","findNextLine","moveOnce","boundToLine","origDir","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","posToDOM","side","isInGutter","scan","badPos","bad","domTextBetween","recognizeMarker","closing","lineSep","addText","walk","cmText","textContent","markerID","isBlock","nodeName","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist","previousSibling","dist$1","textarea","tabindex","tabIndex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","getWrapperElement","userAgent","navigator","platform","ie_upto10","ie_11up","edge","documentMode","qtwebkit","vendor","mac_geMountainLion","windows","presto_version","endNode","setStart","createTextRange","moveToElementText","moveEnd","moveStart","selectInput","select","selectionStart","selectionEnd","_e","ms","sel_move","charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","types","type$1","prev$1","type$2","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","i$7","nstart","unshift","reverse","attachEvent","nl","rt","hasSelection","ownerDocument","parentElement","compareEndPoints","oncopy","lineOracle","lastColumnPos","lastColumnValue","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","oracle","maxLookAhead","NativeScrollbars","vert","horiz","checkedZeroWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","w","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","native","null","there","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","oldH","withOp","dHeight","nextDocId","cleanGeneration","setValue","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","addSelection","getSelections","dup","newSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","127","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","delWrappedLineRight","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","defineInitHook","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","poll","pollSelection","pollInterval","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","prepareCopyCut","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","prepareSelectAllHack","extval","rehide","oldWrapperCSS","oldCSS","detectingSelectAll","resetSelectionOnContextMenu","wrapperBox","oldScrollY","scrollY","scrollTo","mouseup","disabled","deflt","notOnInit","newBreaks","refresh","getInputField","detach","attach","integer","helpers","setOption","getDoc","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getHelpers","help","_global","getStateAfter","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","check","getScrollInfo","interpret","startOperation","endOperation","swapDoc","getScrollerElement","getGutterElement","registerGlobalHelper","predicate","dontDelegate","method","contenteditable","defineExtension","func","defineDocExtension","cmpPos","version","keySet","tokenCComment","maybeEnd","tokenize","config","parserConfig","ret","tp","tokenBase","tokenHooks","tokenString","tokenParenthesized","quote","escaped","pushContext","popContext","pass","states","popAndPass","wordAsValue","valueKeywords","colorKeywords","inline","propertyKeywords","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","allowNested","lineComment","supportsAtComponent","stateArg","block","maybeprop","propBlock","_stream","parens","pseudo","atBlock","atComponentBlock","atBlock_parens","restricted_atBlock_before","restricted_atBlock","keyframes","interpolation","textAfter","blockCommentStart","blockCommentEnd","fold","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","fontProperties_","counterDescriptors_","colorKeywords_","valueKeywords_","allWords","/",":","$","#","@","&","maybeBackup","pat","getAttrRegexp","attr","regexp","attrRegexpCache","getAttrValue","getTagRegexp","anchored","addTags","findMatchingMode","tagInfo","tagText","defaultTags","script","htmlState","tags","inTag","endTagA","endTag","localState","localMode","multilineTagIndentFactor","multilineTagIndentPastTag","configTags","configScript","scriptTypes","matches","local","../css/css","../javascript/javascript","../xml/xml","10","readRegexp","inSet","cont","tokenComment","expressionAllowed","isOperatorChar","tokenQuasi","lexical","wordRE","lastType","keywords","propertyIsEnumerable","kw","jsonldMode","isJsonldKeyword","findFatArrow","fatArrowAt","arrow","isTS","depth","sawSomething","bracket","brackets","JSLexical","inScope","varname","localVars","vars","parseJS","cc","marked","jsonMode","expression","statement","lex","register","inList","globalVars","pushcontext","defaultVars","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","maybeelse","functiondef","forspec","typeexpr","maybelabel","funarg","afterExport","afterImport","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","atomicTypes","classExpression","maybeexpressionNoComma","maybeexpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","expr","property","continueQuasi","targetNoComma","maybeTypeArgs","_","getterSetter","afterprop","what","sep","proceed","maybetype","afterType","typeprop","typearg","maybeReturnType","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","isContinuedStatement","statementIndent","jsonld","json","typescript","wordCharacters","A","B","C","operator","atom","jsKeywords","if","while","with","else","do","try","finally","return","break","continue","new","delete","throw","debugger","var","const","let","function","catch","for","switch","case","default","in","typeof","instanceof","true","false","class","super","yield","export","import","extends","await","tsKeywords","interface","implements","namespace","enum","public","private","protected","abstract","readonly","number","boolean","any","variable","jsonld-keyword","basecolumn","firstChar","c","doubleIndentSwitch","closeBrackets","skipExpression","11","htmlConfig","autoSelfClosers","area","br","command","embed","frame","hr","keygen","meta","param","track","wbr","menuitem","implicitlyClosed","dd","li","optgroup","rp","tbody","td","tfoot","tr","contextGrabbers","dt","address","article","aside","blockquote","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","header","hgroup","menu","nav","ol","section","table","ul","thead","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","editorConf","config_","inText","chain","parser","inBlock","doctype","baseState","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","setStyle","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","isInText","baseIndent","fullLine","alignCDATA","tagAfter","grabbers","skipAttribute"],"mappings":"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","file":"admin.min.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n  var require = undefined;var module = undefined;var exports = undefined;var define = undefined;(function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;if (!u && a) return a(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n        }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }return n[o].exports;\n    }var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n      s(r[o]);\n    }return s;\n  })({ 1: [function (require, module, exports) {\n      'use strict';\n\n      var tabs = document.querySelectorAll('.hf-tab');\n      var tabNavs = document.querySelectorAll('#hf-tabs-nav a');\n      for (var i = 0; i < tabNavs.length; i++) {\n        tabNavs[i].addEventListener('click', openTab);\n      }\n\n      function openTab(e) {\n        var tabTarget = this.getAttribute('data-tab-target');\n        for (var _i = 0; _i < tabNavs.length; _i++) {\n          tabNavs[_i].classList.toggle('nav-tab-active', tabNavs[_i] === this);\n        }\n        this.blur();\n\n        for (var _i2 = 0; _i2 < tabs.length; _i2++) {\n          var tab = tabs[_i2];\n          tab.classList.toggle('hf-tab-active', tab.getAttribute('data-tab') === tabTarget);\n        }\n\n        e.preventDefault();\n      }\n    }, {}], 2: [function (require, module, exports) {\n      'use strict';\n\n      require('./admin-tabs.js');\n      require('./form-editor.js');\n    }, { \"./admin-tabs.js\": 1, \"./form-editor.js\": 3 }], 3: [function (require, module, exports) {\n      'use strict';\n\n      // load CodeMirror & plugins\n\n      var CodeMirror = require('codemirror');\n      require('codemirror/mode/xml/xml');\n      require('codemirror/mode/javascript/javascript');\n      require('codemirror/mode/css/css');\n      require('codemirror/mode/htmlmixed/htmlmixed');\n      require('codemirror/addon/fold/xml-fold');\n      require('codemirror/addon/edit/matchtags');\n      require('codemirror/addon/edit/closetag.js');\n\n      var editor = void 0,\n          element = document.querySelector('#hf-form-editor'),\n          dom = document.createElement('form'),\n          requiredFieldsInput = document.getElementById('hf-required-fields'),\n          emailFieldsInput = document.getElementById('hf-email-fields');\n\n      if (element) {\n        dom.innerHTML = element.value;\n\n        editor = CodeMirror.fromTextArea(element, {\n          selectionPointer: true,\n          matchTags: { bothTags: true },\n          mode: \"htmlmixed\",\n          htmlMode: true,\n          autoCloseTags: true,\n          autoRefresh: true\n        });\n\n        editor.on('update', updateShadowDOM);\n        editor.on('blur', updateRequiredFields);\n        editor.on('blur', updateEmailFields);\n      }\n\n      function updateShadowDOM() {\n        console.log(\"Updating\");\n        dom.innerHTML = editor.getValue();\n      }\n\n      function updateRequiredFields() {\n        var fields = dom.querySelectorAll('[required]');\n        var fieldNames = [].map.call(fields, function (f) {\n          return f.name;\n        });\n        requiredFieldsInput.value = fieldNames.join(',');\n      }\n\n      function updateEmailFields() {\n        var fields = dom.querySelectorAll('input[type=\"email\"]');\n        var fieldNames = [].map.call(fields, function (f) {\n          return f.name;\n        });\n        emailFieldsInput.value = fieldNames.join(',');\n      }\n    }, { \"codemirror\": 7, \"codemirror/addon/edit/closetag.js\": 4, \"codemirror/addon/edit/matchtags\": 5, \"codemirror/addon/fold/xml-fold\": 6, \"codemirror/mode/css/css\": 8, \"codemirror/mode/htmlmixed/htmlmixed\": 9, \"codemirror/mode/javascript/javascript\": 10, \"codemirror/mode/xml/xml\": 11 }], 4: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      /**\n       * Tag-closer extension for CodeMirror.\n       *\n       * This extension adds an \"autoCloseTags\" option that can be set to\n       * either true to get the default behavior, or an object to further\n       * configure its behavior.\n       *\n       * These are supported options:\n       *\n       * `whenClosing` (default true)\n       *   Whether to autoclose when the '/' of a closing tag is typed.\n       * `whenOpening` (default true)\n       *   Whether to autoclose the tag when the final '>' of an opening\n       *   tag is typed.\n       * `dontCloseTags` (default is empty tags for HTML, none for XML)\n       *   An array of tag names that should not be autoclosed.\n       * `indentTags` (default is block tags for HTML, none for XML)\n       *   An array of tag names that should, when opened, cause a\n       *   blank line to be added inside the tag, and the blank line and\n       *   closing line to be indented.\n       *\n       * See demos/closetag.html for a usage example.\n       */\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        CodeMirror.defineOption(\"autoCloseTags\", false, function (cm, val, old) {\n          if (old != CodeMirror.Init && old) cm.removeKeyMap(\"autoCloseTags\");\n          if (!val) return;\n          var map = { name: \"autoCloseTags\" };\n          if ((typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) != \"object\" || val.whenClosing) map[\"'/'\"] = function (cm) {\n            return autoCloseSlash(cm);\n          };\n          if ((typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) != \"object\" || val.whenOpening) map[\"'>'\"] = function (cm) {\n            return autoCloseGT(cm);\n          };\n          cm.addKeyMap(map);\n        });\n\n        var htmlDontClose = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"wbr\"];\n        var htmlIndent = [\"applet\", \"blockquote\", \"body\", \"button\", \"div\", \"dl\", \"fieldset\", \"form\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"head\", \"html\", \"iframe\", \"layer\", \"legend\", \"object\", \"ol\", \"p\", \"select\", \"table\", \"ul\"];\n\n        function autoCloseGT(cm) {\n          if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n          var ranges = cm.listSelections(),\n              replacements = [];\n          for (var i = 0; i < ranges.length; i++) {\n            if (!ranges[i].empty()) return CodeMirror.Pass;\n            var pos = ranges[i].head,\n                tok = cm.getTokenAt(pos);\n            var inner = CodeMirror.innerMode(cm.getMode(), tok.state),\n                state = inner.state;\n            if (inner.mode.name != \"xml\" || !state.tagName) return CodeMirror.Pass;\n\n            var opt = cm.getOption(\"autoCloseTags\"),\n                html = inner.mode.configuration == \"html\";\n            var dontCloseTags = (typeof opt === \"undefined\" ? \"undefined\" : _typeof(opt)) == \"object\" && opt.dontCloseTags || html && htmlDontClose;\n            var indentTags = (typeof opt === \"undefined\" ? \"undefined\" : _typeof(opt)) == \"object\" && opt.indentTags || html && htmlIndent;\n\n            var tagName = state.tagName;\n            if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n            var lowerTagName = tagName.toLowerCase();\n            // Don't process the '>' at the end of an end-tag or self-closing tag\n            if (!tagName || tok.type == \"string\" && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) || tok.type == \"tag\" && state.type == \"closeTag\" || tok.string.indexOf(\"/\") == tok.string.length - 1 || // match something like <someTagName />\n            dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 || closingTagExists(cm, tagName, pos, state, true)) return CodeMirror.Pass;\n\n            var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n            replacements[i] = { indent: indent,\n              text: \">\" + (indent ? \"\\n\\n\" : \"\") + \"</\" + tagName + \">\",\n              newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1) };\n          }\n\n          for (var i = ranges.length - 1; i >= 0; i--) {\n            var info = replacements[i];\n            cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, \"+insert\");\n            var sel = cm.listSelections().slice(0);\n            sel[i] = { head: info.newPos, anchor: info.newPos };\n            cm.setSelections(sel);\n            if (info.indent) {\n              cm.indentLine(info.newPos.line, null, true);\n              cm.indentLine(info.newPos.line + 1, null, true);\n            }\n          }\n        }\n\n        function autoCloseCurrent(cm, typingSlash) {\n          var ranges = cm.listSelections(),\n              replacements = [];\n          var head = typingSlash ? \"/\" : \"</\";\n          for (var i = 0; i < ranges.length; i++) {\n            if (!ranges[i].empty()) return CodeMirror.Pass;\n            var pos = ranges[i].head,\n                tok = cm.getTokenAt(pos);\n            var inner = CodeMirror.innerMode(cm.getMode(), tok.state),\n                state = inner.state;\n            if (typingSlash && (tok.type == \"string\" || tok.string.charAt(0) != \"<\" || tok.start != pos.ch - 1)) return CodeMirror.Pass;\n            // Kludge to get around the fact that we are not in XML mode\n            // when completing in JS/CSS snippet in htmlmixed mode. Does not\n            // work for other XML embedded languages (there is no general\n            // way to go from a mixed mode to its current XML state).\n            var replacement;\n            if (inner.mode.name != \"xml\") {\n              if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"javascript\") replacement = head + \"script\";else if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"css\") replacement = head + \"style\";else return CodeMirror.Pass;\n            } else {\n              if (!state.context || !state.context.tagName || closingTagExists(cm, state.context.tagName, pos, state)) return CodeMirror.Pass;\n              replacement = head + state.context.tagName;\n            }\n            if (cm.getLine(pos.line).charAt(tok.end) != \">\") replacement += \">\";\n            replacements[i] = replacement;\n          }\n          cm.replaceSelections(replacements);\n          ranges = cm.listSelections();\n          for (var i = 0; i < ranges.length; i++) {\n            if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line) cm.indentLine(ranges[i].head.line);\n          }\n        }\n\n        function autoCloseSlash(cm) {\n          if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n          return autoCloseCurrent(cm, true);\n        }\n\n        CodeMirror.commands.closeTag = function (cm) {\n          return autoCloseCurrent(cm);\n        };\n\n        function indexOf(collection, elt) {\n          if (collection.indexOf) return collection.indexOf(elt);\n          for (var i = 0, e = collection.length; i < e; ++i) {\n            if (collection[i] == elt) return i;\n          }return -1;\n        }\n\n        // If xml-fold is loaded, we use its functionality to try and verify\n        // whether a given tag is actually unclosed.\n        function closingTagExists(cm, tagName, pos, state, newTag) {\n          if (!CodeMirror.scanForClosingTag) return false;\n          var end = Math.min(cm.lastLine() + 1, pos.line + 500);\n          var nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n          if (!nextClose || nextClose.tag != tagName) return false;\n          var cx = state.context;\n          // If the immediate wrapping context contains onCx instances of\n          // the same tag, a closing tag only exists if there are at least\n          // that many closing tags of that type following.\n          for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) {\n            ++onCx;\n          }pos = nextClose.to;\n          for (var i = 1; i < onCx; i++) {\n            var next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n            if (!next || next.tag != tagName) return false;\n            pos = next.to;\n          }\n          return true;\n        }\n      });\n    }, { \"../../lib/codemirror\": 7, \"../fold/xml-fold\": 6 }], 5: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineOption(\"matchTags\", false, function (cm, val, old) {\n          if (old && old != CodeMirror.Init) {\n            cm.off(\"cursorActivity\", doMatchTags);\n            cm.off(\"viewportChange\", maybeUpdateMatch);\n            clear(cm);\n          }\n          if (val) {\n            cm.state.matchBothTags = (typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) == \"object\" && val.bothTags;\n            cm.on(\"cursorActivity\", doMatchTags);\n            cm.on(\"viewportChange\", maybeUpdateMatch);\n            doMatchTags(cm);\n          }\n        });\n\n        function clear(cm) {\n          if (cm.state.tagHit) cm.state.tagHit.clear();\n          if (cm.state.tagOther) cm.state.tagOther.clear();\n          cm.state.tagHit = cm.state.tagOther = null;\n        }\n\n        function doMatchTags(cm) {\n          cm.state.failedTagMatch = false;\n          cm.operation(function () {\n            clear(cm);\n            if (cm.somethingSelected()) return;\n            var cur = cm.getCursor(),\n                range = cm.getViewport();\n            range.from = Math.min(range.from, cur.line);range.to = Math.max(cur.line + 1, range.to);\n            var match = CodeMirror.findMatchingTag(cm, cur, range);\n            if (!match) return;\n            if (cm.state.matchBothTags) {\n              var hit = match.at == \"open\" ? match.open : match.close;\n              if (hit) cm.state.tagHit = cm.markText(hit.from, hit.to, { className: \"CodeMirror-matchingtag\" });\n            }\n            var other = match.at == \"close\" ? match.open : match.close;\n            if (other) cm.state.tagOther = cm.markText(other.from, other.to, { className: \"CodeMirror-matchingtag\" });else cm.state.failedTagMatch = true;\n          });\n        }\n\n        function maybeUpdateMatch(cm) {\n          if (cm.state.failedTagMatch) doMatchTags(cm);\n        }\n\n        CodeMirror.commands.toMatchingTag = function (cm) {\n          var found = CodeMirror.findMatchingTag(cm, cm.getCursor());\n          if (found) {\n            var other = found.at == \"close\" ? found.open : found.close;\n            if (other) cm.extendSelection(other.to, other.from);\n          }\n        };\n      });\n    }, { \"../../lib/codemirror\": 7, \"../fold/xml-fold\": 6 }], 6: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var Pos = CodeMirror.Pos;\n        function cmp(a, b) {\n          return a.line - b.line || a.ch - b.ch;\n        }\n\n        var nameStartChar = \"A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\";\n        var nameChar = nameStartChar + \"-:.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040\";\n        var xmlTagStart = new RegExp(\"<(/?)([\" + nameStartChar + \"][\" + nameChar + \"]*)\", \"g\");\n\n        function Iter(cm, line, ch, range) {\n          this.line = line;this.ch = ch;\n          this.cm = cm;this.text = cm.getLine(line);\n          this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n          this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n        }\n\n        function tagAt(iter, ch) {\n          var type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n          return type && /\\btag\\b/.test(type);\n        }\n\n        function nextLine(iter) {\n          if (iter.line >= iter.max) return;\n          iter.ch = 0;\n          iter.text = iter.cm.getLine(++iter.line);\n          return true;\n        }\n        function prevLine(iter) {\n          if (iter.line <= iter.min) return;\n          iter.text = iter.cm.getLine(--iter.line);\n          iter.ch = iter.text.length;\n          return true;\n        }\n\n        function toTagEnd(iter) {\n          for (;;) {\n            var gt = iter.text.indexOf(\">\", iter.ch);\n            if (gt == -1) {\n              if (nextLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, gt + 1)) {\n              iter.ch = gt + 1;continue;\n            }\n            var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n            var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n            iter.ch = gt + 1;\n            return selfClose ? \"selfClose\" : \"regular\";\n          }\n        }\n        function toTagStart(iter) {\n          for (;;) {\n            var lt = iter.ch ? iter.text.lastIndexOf(\"<\", iter.ch - 1) : -1;\n            if (lt == -1) {\n              if (prevLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, lt + 1)) {\n              iter.ch = lt;continue;\n            }\n            xmlTagStart.lastIndex = lt;\n            iter.ch = lt;\n            var match = xmlTagStart.exec(iter.text);\n            if (match && match.index == lt) return match;\n          }\n        }\n\n        function toNextTag(iter) {\n          for (;;) {\n            xmlTagStart.lastIndex = iter.ch;\n            var found = xmlTagStart.exec(iter.text);\n            if (!found) {\n              if (nextLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, found.index + 1)) {\n              iter.ch = found.index + 1;continue;\n            }\n            iter.ch = found.index + found[0].length;\n            return found;\n          }\n        }\n        function toPrevTag(iter) {\n          for (;;) {\n            var gt = iter.ch ? iter.text.lastIndexOf(\">\", iter.ch - 1) : -1;\n            if (gt == -1) {\n              if (prevLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, gt + 1)) {\n              iter.ch = gt;continue;\n            }\n            var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n            var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n            iter.ch = gt + 1;\n            return selfClose ? \"selfClose\" : \"regular\";\n          }\n        }\n\n        function findMatchingClose(iter, tag) {\n          var stack = [];\n          for (;;) {\n            var next = toNextTag(iter),\n                end,\n                startLine = iter.line,\n                startCh = iter.ch - (next ? next[0].length : 0);\n            if (!next || !(end = toTagEnd(iter))) return;\n            if (end == \"selfClose\") continue;\n            if (next[1]) {\n              // closing tag\n              for (var i = stack.length - 1; i >= 0; --i) {\n                if (stack[i] == next[2]) {\n                  stack.length = i;\n                  break;\n                }\n              }if (i < 0 && (!tag || tag == next[2])) return {\n                tag: next[2],\n                from: Pos(startLine, startCh),\n                to: Pos(iter.line, iter.ch)\n              };\n            } else {\n              // opening tag\n              stack.push(next[2]);\n            }\n          }\n        }\n        function findMatchingOpen(iter, tag) {\n          var stack = [];\n          for (;;) {\n            var prev = toPrevTag(iter);\n            if (!prev) return;\n            if (prev == \"selfClose\") {\n              toTagStart(iter);continue;\n            }\n            var endLine = iter.line,\n                endCh = iter.ch;\n            var start = toTagStart(iter);\n            if (!start) return;\n            if (start[1]) {\n              // closing tag\n              stack.push(start[2]);\n            } else {\n              // opening tag\n              for (var i = stack.length - 1; i >= 0; --i) {\n                if (stack[i] == start[2]) {\n                  stack.length = i;\n                  break;\n                }\n              }if (i < 0 && (!tag || tag == start[2])) return {\n                tag: start[2],\n                from: Pos(iter.line, iter.ch),\n                to: Pos(endLine, endCh)\n              };\n            }\n          }\n        }\n\n        CodeMirror.registerHelper(\"fold\", \"xml\", function (cm, start) {\n          var iter = new Iter(cm, start.line, 0);\n          for (;;) {\n            var openTag = toNextTag(iter),\n                end;\n            if (!openTag || iter.line != start.line || !(end = toTagEnd(iter))) return;\n            if (!openTag[1] && end != \"selfClose\") {\n              var startPos = Pos(iter.line, iter.ch);\n              var endPos = findMatchingClose(iter, openTag[2]);\n              return endPos && { from: startPos, to: endPos.from };\n            }\n          }\n        });\n        CodeMirror.findMatchingTag = function (cm, pos, range) {\n          var iter = new Iter(cm, pos.line, pos.ch, range);\n          if (iter.text.indexOf(\">\") == -1 && iter.text.indexOf(\"<\") == -1) return;\n          var end = toTagEnd(iter),\n              to = end && Pos(iter.line, iter.ch);\n          var start = end && toTagStart(iter);\n          if (!end || !start || cmp(iter, pos) > 0) return;\n          var here = { from: Pos(iter.line, iter.ch), to: to, tag: start[2] };\n          if (end == \"selfClose\") return { open: here, close: null, at: \"open\" };\n\n          if (start[1]) {\n            // closing tag\n            return { open: findMatchingOpen(iter, start[2]), close: here, at: \"close\" };\n          } else {\n            // opening tag\n            iter = new Iter(cm, to.line, to.ch, range);\n            return { open: here, close: findMatchingClose(iter, start[2]), at: \"open\" };\n          }\n        };\n\n        CodeMirror.findEnclosingTag = function (cm, pos, range, tag) {\n          var iter = new Iter(cm, pos.line, pos.ch, range);\n          for (;;) {\n            var open = findMatchingOpen(iter, tag);\n            if (!open) break;\n            var forward = new Iter(cm, pos.line, pos.ch, range);\n            var close = findMatchingClose(forward, open.tag);\n            if (close) return { open: open, close: close };\n          }\n        };\n\n        // Used by addon/edit/closetag.js\n        CodeMirror.scanForClosingTag = function (cm, pos, name, end) {\n          var iter = new Iter(cm, pos.line, pos.ch, end ? { from: 0, to: end } : null);\n          return findMatchingClose(iter, name);\n        };\n      });\n    }, { \"../../lib/codemirror\": 7 }], 7: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      // This is CodeMirror (http://codemirror.net), a code editor\n      // implemented in JavaScript on top of the browser's DOM.\n      //\n      // You can find some technical background for some of the code below\n      // at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n      (function (global, factory) {\n        (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.CodeMirror = factory();\n      })(this, function () {\n        'use strict';\n\n        // Kludges for bugs and behavior differences that can't be feature\n        // detected are enabled based on userAgent etc sniffing.\n\n        var userAgent = navigator.userAgent;\n        var platform = navigator.platform;\n\n        var gecko = /gecko\\/\\d/i.test(userAgent);\n        var ie_upto10 = /MSIE \\d/.test(userAgent);\n        var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n        var edge = /Edge\\/(\\d+)/.exec(userAgent);\n        var ie = ie_upto10 || ie_11up || edge;\n        var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n        var webkit = !edge && /WebKit\\//.test(userAgent);\n        var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n        var chrome = !edge && /Chrome\\//.test(userAgent);\n        var presto = /Opera\\//.test(userAgent);\n        var safari = /Apple Computer/.test(navigator.vendor);\n        var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n        var phantom = /PhantomJS/.test(userAgent);\n\n        var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n        var android = /Android/.test(userAgent);\n        // This is woefully incomplete. Suggestions for alternative methods welcome.\n        var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n        var mac = ios || /Mac/.test(platform);\n        var chromeOS = /\\bCrOS\\b/.test(userAgent);\n        var windows = /win/i.test(platform);\n\n        var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n        if (presto_version) {\n          presto_version = Number(presto_version[1]);\n        }\n        if (presto_version && presto_version >= 15) {\n          presto = false;webkit = true;\n        }\n        // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n        var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n        var captureRightClick = gecko || ie && ie_version >= 9;\n\n        function classTest(cls) {\n          return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n        }\n\n        var rmClass = function rmClass(node, cls) {\n          var current = node.className;\n          var match = classTest(cls).exec(current);\n          if (match) {\n            var after = current.slice(match.index + match[0].length);\n            node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n          }\n        };\n\n        function removeChildren(e) {\n          for (var count = e.childNodes.length; count > 0; --count) {\n            e.removeChild(e.firstChild);\n          }\n          return e;\n        }\n\n        function removeChildrenAndAdd(parent, e) {\n          return removeChildren(parent).appendChild(e);\n        }\n\n        function elt(tag, content, className, style) {\n          var e = document.createElement(tag);\n          if (className) {\n            e.className = className;\n          }\n          if (style) {\n            e.style.cssText = style;\n          }\n          if (typeof content == \"string\") {\n            e.appendChild(document.createTextNode(content));\n          } else if (content) {\n            for (var i = 0; i < content.length; ++i) {\n              e.appendChild(content[i]);\n            }\n          }\n          return e;\n        }\n        // wrapper for elt, which removes the elt from the accessibility tree\n        function eltP(tag, content, className, style) {\n          var e = elt(tag, content, className, style);\n          e.setAttribute(\"role\", \"presentation\");\n          return e;\n        }\n\n        var range;\n        if (document.createRange) {\n          range = function range(node, start, end, endNode) {\n            var r = document.createRange();\n            r.setEnd(endNode || node, end);\n            r.setStart(node, start);\n            return r;\n          };\n        } else {\n          range = function range(node, start, end) {\n            var r = document.body.createTextRange();\n            try {\n              r.moveToElementText(node.parentNode);\n            } catch (e) {\n              return r;\n            }\n            r.collapse(true);\n            r.moveEnd(\"character\", end);\n            r.moveStart(\"character\", start);\n            return r;\n          };\n        }\n\n        function contains(parent, child) {\n          if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n            {\n              child = child.parentNode;\n            }\n          if (parent.contains) {\n            return parent.contains(child);\n          }\n          do {\n            if (child.nodeType == 11) {\n              child = child.host;\n            }\n            if (child == parent) {\n              return true;\n            }\n          } while (child = child.parentNode);\n        }\n\n        function activeElt() {\n          // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n          // IE < 10 will throw when accessed while the page is loading or in an iframe.\n          // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n          var activeElement;\n          try {\n            activeElement = document.activeElement;\n          } catch (e) {\n            activeElement = document.body || null;\n          }\n          while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n            activeElement = activeElement.shadowRoot.activeElement;\n          }\n          return activeElement;\n        }\n\n        function addClass(node, cls) {\n          var current = node.className;\n          if (!classTest(cls).test(current)) {\n            node.className += (current ? \" \" : \"\") + cls;\n          }\n        }\n        function joinClasses(a, b) {\n          var as = a.split(\" \");\n          for (var i = 0; i < as.length; i++) {\n            if (as[i] && !classTest(as[i]).test(b)) {\n              b += \" \" + as[i];\n            }\n          }\n          return b;\n        }\n\n        var selectInput = function selectInput(node) {\n          node.select();\n        };\n        if (ios) // Mobile Safari apparently has a bug where select() is broken.\n          {\n            selectInput = function selectInput(node) {\n              node.selectionStart = 0;node.selectionEnd = node.value.length;\n            };\n          } else if (ie) // Suppress mysterious IE10 errors\n          {\n            selectInput = function selectInput(node) {\n              try {\n                node.select();\n              } catch (_e) {}\n            };\n          }\n\n        function bind(f) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          return function () {\n            return f.apply(null, args);\n          };\n        }\n\n        function copyObj(obj, target, overwrite) {\n          if (!target) {\n            target = {};\n          }\n          for (var prop in obj) {\n            if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n              target[prop] = obj[prop];\n            }\n          }\n          return target;\n        }\n\n        // Counts the column offset in a string, taking tabs into account.\n        // Used mostly to find indentation.\n        function countColumn(string, end, tabSize, startIndex, startValue) {\n          if (end == null) {\n            end = string.search(/[^\\s\\u00a0]/);\n            if (end == -1) {\n              end = string.length;\n            }\n          }\n          for (var i = startIndex || 0, n = startValue || 0;;) {\n            var nextTab = string.indexOf(\"\\t\", i);\n            if (nextTab < 0 || nextTab >= end) {\n              return n + (end - i);\n            }\n            n += nextTab - i;\n            n += tabSize - n % tabSize;\n            i = nextTab + 1;\n          }\n        }\n\n        var Delayed = function Delayed() {\n          this.id = null;\n        };\n        Delayed.prototype.set = function (ms, f) {\n          clearTimeout(this.id);\n          this.id = setTimeout(f, ms);\n        };\n\n        function indexOf(array, elt) {\n          for (var i = 0; i < array.length; ++i) {\n            if (array[i] == elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        // Number of pixels added to scroller and sizer to hide scrollbar\n        var scrollerGap = 30;\n\n        // Returned or thrown by various protocols to signal 'I'm not\n        // handling this'.\n        var Pass = { toString: function toString() {\n            return \"CodeMirror.Pass\";\n          } };\n\n        // Reused option objects for setSelection & friends\n        var sel_dontScroll = { scroll: false };\n        var sel_mouse = { origin: \"*mouse\" };\n        var sel_move = { origin: \"+move\" };\n\n        // The inverse of countColumn -- find the offset that corresponds to\n        // a particular column.\n        function findColumn(string, goal, tabSize) {\n          for (var pos = 0, col = 0;;) {\n            var nextTab = string.indexOf(\"\\t\", pos);\n            if (nextTab == -1) {\n              nextTab = string.length;\n            }\n            var skipped = nextTab - pos;\n            if (nextTab == string.length || col + skipped >= goal) {\n              return pos + Math.min(skipped, goal - col);\n            }\n            col += nextTab - pos;\n            col += tabSize - col % tabSize;\n            pos = nextTab + 1;\n            if (col >= goal) {\n              return pos;\n            }\n          }\n        }\n\n        var spaceStrs = [\"\"];\n        function spaceStr(n) {\n          while (spaceStrs.length <= n) {\n            spaceStrs.push(lst(spaceStrs) + \" \");\n          }\n          return spaceStrs[n];\n        }\n\n        function lst(arr) {\n          return arr[arr.length - 1];\n        }\n\n        function map(array, f) {\n          var out = [];\n          for (var i = 0; i < array.length; i++) {\n            out[i] = f(array[i], i);\n          }\n          return out;\n        }\n\n        function insertSorted(array, value, score) {\n          var pos = 0,\n              priority = score(value);\n          while (pos < array.length && score(array[pos]) <= priority) {\n            pos++;\n          }\n          array.splice(pos, 0, value);\n        }\n\n        function nothing() {}\n\n        function createObj(base, props) {\n          var inst;\n          if (Object.create) {\n            inst = Object.create(base);\n          } else {\n            nothing.prototype = base;\n            inst = new nothing();\n          }\n          if (props) {\n            copyObj(props, inst);\n          }\n          return inst;\n        }\n\n        var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n        function isWordCharBasic(ch) {\n          return (/\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n          );\n        }\n        function isWordChar(ch, helper) {\n          if (!helper) {\n            return isWordCharBasic(ch);\n          }\n          if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n            return true;\n          }\n          return helper.test(ch);\n        }\n\n        function isEmpty(obj) {\n          for (var n in obj) {\n            if (obj.hasOwnProperty(n) && obj[n]) {\n              return false;\n            }\n          }\n          return true;\n        }\n\n        // Extending unicode characters. A series of a non-extending char +\n        // any number of extending chars is treated as a single unit as far\n        // as editing and measuring is concerned. This is not fully correct,\n        // since some scripts/fonts/browsers also treat other configurations\n        // of code points as a group.\n        var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n        function isExtendingChar(ch) {\n          return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n        }\n\n        // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n        function skipExtendingChars(str, pos, dir) {\n          while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n            pos += dir;\n          }\n          return pos;\n        }\n\n        // Returns the value from the range [`from`; `to`] that satisfies\n        // `pred` and is closest to `from`. Assumes that at least `to` satisfies `pred`.\n        function findFirst(pred, from, to) {\n          for (;;) {\n            if (Math.abs(from - to) <= 1) {\n              return pred(from) ? from : to;\n            }\n            var mid = Math.floor((from + to) / 2);\n            if (pred(mid)) {\n              to = mid;\n            } else {\n              from = mid;\n            }\n          }\n        }\n\n        // The display handles the DOM integration, both for input reading\n        // and content drawing. It holds references to DOM nodes and\n        // display-related state.\n\n        function Display(place, doc, input) {\n          var d = this;\n          this.input = input;\n\n          // Covers bottom-right square when both scrollbars are present.\n          d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n          d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n          // Covers bottom of gutter when coverGutterNextToScrollbar is on\n          // and h scrollbar is present.\n          d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n          d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n          // Will contain the actual code, positioned to cover the viewport.\n          d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n          // Elements are added to these to represent selection and cursors.\n          d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n          d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n          // A visibility: hidden element used to find the size of things.\n          d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n          // When lines outside of the viewport are measured, they are drawn in this.\n          d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n          // Wraps everything that needs to exist inside the vertically-padded coordinate system\n          d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n          var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n          // Moved around its parent to cover visible view.\n          d.mover = elt(\"div\", [lines], null, \"position: relative\");\n          // Set to the height of the document, allowing scrolling.\n          d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n          d.sizerWidth = null;\n          // Behavior of elts with overflow: auto and padding is\n          // inconsistent across browsers. This is used to ensure the\n          // scrollable area is big enough.\n          d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n          // Will contain the gutters, if any.\n          d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n          d.lineGutter = null;\n          // Actual scrollable element.\n          d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n          d.scroller.setAttribute(\"tabIndex\", \"-1\");\n          // The element in which the editor lives.\n          d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n          // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n          if (ie && ie_version < 8) {\n            d.gutters.style.zIndex = -1;d.scroller.style.paddingRight = 0;\n          }\n          if (!webkit && !(gecko && mobile)) {\n            d.scroller.draggable = true;\n          }\n\n          if (place) {\n            if (place.appendChild) {\n              place.appendChild(d.wrapper);\n            } else {\n              place(d.wrapper);\n            }\n          }\n\n          // Current rendered range (may be bigger than the view window).\n          d.viewFrom = d.viewTo = doc.first;\n          d.reportedViewFrom = d.reportedViewTo = doc.first;\n          // Information about the rendered lines.\n          d.view = [];\n          d.renderedView = null;\n          // Holds info about a single rendered line when it was rendered\n          // for measurement, while not in view.\n          d.externalMeasured = null;\n          // Empty space (in pixels) above the view\n          d.viewOffset = 0;\n          d.lastWrapHeight = d.lastWrapWidth = 0;\n          d.updateLineNumbers = null;\n\n          d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n          d.scrollbarsClipped = false;\n\n          // Used to only resize the line number gutter when necessary (when\n          // the amount of lines crosses a boundary that makes its width change)\n          d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n          // Set to true when a non-horizontal-scrolling line widget is\n          // added. As an optimization, line widget aligning is skipped when\n          // this is false.\n          d.alignWidgets = false;\n\n          d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n          // Tracks the maximum line length so that the horizontal scrollbar\n          // can be kept static when scrolling.\n          d.maxLine = null;\n          d.maxLineLength = 0;\n          d.maxLineChanged = false;\n\n          // Used for measuring wheel scrolling granularity\n          d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n          // True when shift is held down.\n          d.shift = false;\n\n          // Used to track whether anything happened since the context menu\n          // was opened.\n          d.selForContextMenu = null;\n\n          d.activeTouch = null;\n\n          input.init(d);\n        }\n\n        // Find the line object corresponding to the given line number.\n        function getLine(doc, n) {\n          n -= doc.first;\n          if (n < 0 || n >= doc.size) {\n            throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n          }\n          var chunk = doc;\n          while (!chunk.lines) {\n            for (var i = 0;; ++i) {\n              var child = chunk.children[i],\n                  sz = child.chunkSize();\n              if (n < sz) {\n                chunk = child;break;\n              }\n              n -= sz;\n            }\n          }\n          return chunk.lines[n];\n        }\n\n        // Get the part of a document between two positions, as an array of\n        // strings.\n        function getBetween(doc, start, end) {\n          var out = [],\n              n = start.line;\n          doc.iter(start.line, end.line + 1, function (line) {\n            var text = line.text;\n            if (n == end.line) {\n              text = text.slice(0, end.ch);\n            }\n            if (n == start.line) {\n              text = text.slice(start.ch);\n            }\n            out.push(text);\n            ++n;\n          });\n          return out;\n        }\n        // Get the lines between from and to, as array of strings.\n        function getLines(doc, from, to) {\n          var out = [];\n          doc.iter(from, to, function (line) {\n            out.push(line.text);\n          }); // iter aborts when callback returns truthy value\n          return out;\n        }\n\n        // Update the height of a line, propagating the height change\n        // upwards to parent nodes.\n        function updateLineHeight(line, height) {\n          var diff = height - line.height;\n          if (diff) {\n            for (var n = line; n; n = n.parent) {\n              n.height += diff;\n            }\n          }\n        }\n\n        // Given a line object, find its line number by walking up through\n        // its parent links.\n        function lineNo(line) {\n          if (line.parent == null) {\n            return null;\n          }\n          var cur = line.parent,\n              no = indexOf(cur.lines, line);\n          for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n            for (var i = 0;; ++i) {\n              if (chunk.children[i] == cur) {\n                break;\n              }\n              no += chunk.children[i].chunkSize();\n            }\n          }\n          return no + cur.first;\n        }\n\n        // Find the line at the given vertical position, using the height\n        // information in the document tree.\n        function _lineAtHeight(chunk, h) {\n          var n = chunk.first;\n          outer: do {\n            for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n              var child = chunk.children[i$1],\n                  ch = child.height;\n              if (h < ch) {\n                chunk = child;continue outer;\n              }\n              h -= ch;\n              n += child.chunkSize();\n            }\n            return n;\n          } while (!chunk.lines);\n          var i = 0;\n          for (; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i],\n                lh = line.height;\n            if (h < lh) {\n              break;\n            }\n            h -= lh;\n          }\n          return n + i;\n        }\n\n        function isLine(doc, l) {\n          return l >= doc.first && l < doc.first + doc.size;\n        }\n\n        function lineNumberFor(options, i) {\n          return String(options.lineNumberFormatter(i + options.firstLineNumber));\n        }\n\n        // A Pos instance represents a position within the text.\n        function Pos(line, ch, sticky) {\n          if (sticky === void 0) sticky = null;\n\n          if (!(this instanceof Pos)) {\n            return new Pos(line, ch, sticky);\n          }\n          this.line = line;\n          this.ch = ch;\n          this.sticky = sticky;\n        }\n\n        // Compare two positions, return 0 if they are the same, a negative\n        // number when a is less, and a positive number otherwise.\n        function cmp(a, b) {\n          return a.line - b.line || a.ch - b.ch;\n        }\n\n        function equalCursorPos(a, b) {\n          return a.sticky == b.sticky && cmp(a, b) == 0;\n        }\n\n        function copyPos(x) {\n          return Pos(x.line, x.ch);\n        }\n        function maxPos(a, b) {\n          return cmp(a, b) < 0 ? b : a;\n        }\n        function minPos(a, b) {\n          return cmp(a, b) < 0 ? a : b;\n        }\n\n        // Most of the external API clips given positions to make sure they\n        // actually exist within the document.\n        function clipLine(doc, n) {\n          return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n        }\n        function _clipPos(doc, pos) {\n          if (pos.line < doc.first) {\n            return Pos(doc.first, 0);\n          }\n          var last = doc.first + doc.size - 1;\n          if (pos.line > last) {\n            return Pos(last, getLine(doc, last).text.length);\n          }\n          return clipToLen(pos, getLine(doc, pos.line).text.length);\n        }\n        function clipToLen(pos, linelen) {\n          var ch = pos.ch;\n          if (ch == null || ch > linelen) {\n            return Pos(pos.line, linelen);\n          } else if (ch < 0) {\n            return Pos(pos.line, 0);\n          } else {\n            return pos;\n          }\n        }\n        function clipPosArray(doc, array) {\n          var out = [];\n          for (var i = 0; i < array.length; i++) {\n            out[i] = _clipPos(doc, array[i]);\n          }\n          return out;\n        }\n\n        // Optimize some code when these features are not used.\n        var sawReadOnlySpans = false;\n        var sawCollapsedSpans = false;\n\n        function seeReadOnlySpans() {\n          sawReadOnlySpans = true;\n        }\n\n        function seeCollapsedSpans() {\n          sawCollapsedSpans = true;\n        }\n\n        // TEXTMARKER SPANS\n\n        function MarkedSpan(marker, from, to) {\n          this.marker = marker;\n          this.from = from;this.to = to;\n        }\n\n        // Search an array of spans for a span matching the given marker.\n        function getMarkedSpanFor(spans, marker) {\n          if (spans) {\n            for (var i = 0; i < spans.length; ++i) {\n              var span = spans[i];\n              if (span.marker == marker) {\n                return span;\n              }\n            }\n          }\n        }\n        // Remove a span from an array, returning undefined if no spans are\n        // left (we don't store arrays for lines without spans).\n        function removeMarkedSpan(spans, span) {\n          var r;\n          for (var i = 0; i < spans.length; ++i) {\n            if (spans[i] != span) {\n              (r || (r = [])).push(spans[i]);\n            }\n          }\n          return r;\n        }\n        // Add a span to a line.\n        function addMarkedSpan(line, span) {\n          line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n          span.marker.attachLine(line);\n        }\n\n        // Used for the algorithm that adjusts markers for a change in the\n        // document. These functions cut an array of spans at a given\n        // character position, returning an array of remaining chunks (or\n        // undefined if nothing remains).\n        function markedSpansBefore(old, startCh, isInsert) {\n          var nw;\n          if (old) {\n            for (var i = 0; i < old.length; ++i) {\n              var span = old[i],\n                  marker = span.marker;\n              var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n              if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n                var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n              }\n            }\n          }\n          return nw;\n        }\n        function markedSpansAfter(old, endCh, isInsert) {\n          var nw;\n          if (old) {\n            for (var i = 0; i < old.length; ++i) {\n              var span = old[i],\n                  marker = span.marker;\n              var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n              if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n                var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n              }\n            }\n          }\n          return nw;\n        }\n\n        // Given a change object, compute the new set of marker spans that\n        // cover the line in which the change took place. Removes spans\n        // entirely within the change, reconnects spans belonging to the\n        // same marker that appear on both sides of the change, and cuts off\n        // spans partially within the change. Returns an array of span\n        // arrays with one element for each line in (after) the change.\n        function stretchSpansOverChange(doc, change) {\n          if (change.full) {\n            return null;\n          }\n          var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n          var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n          if (!oldFirst && !oldLast) {\n            return null;\n          }\n\n          var startCh = change.from.ch,\n              endCh = change.to.ch,\n              isInsert = cmp(change.from, change.to) == 0;\n          // Get the spans that 'stick out' on both sides\n          var first = markedSpansBefore(oldFirst, startCh, isInsert);\n          var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n          // Next, merge those two ends\n          var sameLine = change.text.length == 1,\n              offset = lst(change.text).length + (sameLine ? startCh : 0);\n          if (first) {\n            // Fix up .to properties of first\n            for (var i = 0; i < first.length; ++i) {\n              var span = first[i];\n              if (span.to == null) {\n                var found = getMarkedSpanFor(last, span.marker);\n                if (!found) {\n                  span.to = startCh;\n                } else if (sameLine) {\n                  span.to = found.to == null ? null : found.to + offset;\n                }\n              }\n            }\n          }\n          if (last) {\n            // Fix up .from in last (or move them into first in case of sameLine)\n            for (var i$1 = 0; i$1 < last.length; ++i$1) {\n              var span$1 = last[i$1];\n              if (span$1.to != null) {\n                span$1.to += offset;\n              }\n              if (span$1.from == null) {\n                var found$1 = getMarkedSpanFor(first, span$1.marker);\n                if (!found$1) {\n                  span$1.from = offset;\n                  if (sameLine) {\n                    (first || (first = [])).push(span$1);\n                  }\n                }\n              } else {\n                span$1.from += offset;\n                if (sameLine) {\n                  (first || (first = [])).push(span$1);\n                }\n              }\n            }\n          }\n          // Make sure we didn't create any zero-length spans\n          if (first) {\n            first = clearEmptySpans(first);\n          }\n          if (last && last != first) {\n            last = clearEmptySpans(last);\n          }\n\n          var newMarkers = [first];\n          if (!sameLine) {\n            // Fill gap with whole-line-spans\n            var gap = change.text.length - 2,\n                gapMarkers;\n            if (gap > 0 && first) {\n              for (var i$2 = 0; i$2 < first.length; ++i$2) {\n                if (first[i$2].to == null) {\n                  (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n                }\n              }\n            }\n            for (var i$3 = 0; i$3 < gap; ++i$3) {\n              newMarkers.push(gapMarkers);\n            }\n            newMarkers.push(last);\n          }\n          return newMarkers;\n        }\n\n        // Remove spans that are empty and don't have a clearWhenEmpty\n        // option of false.\n        function clearEmptySpans(spans) {\n          for (var i = 0; i < spans.length; ++i) {\n            var span = spans[i];\n            if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n              spans.splice(i--, 1);\n            }\n          }\n          if (!spans.length) {\n            return null;\n          }\n          return spans;\n        }\n\n        // Used to 'clip' out readOnly ranges when making a change.\n        function removeReadOnlyRanges(doc, from, to) {\n          var markers = null;\n          doc.iter(from.line, to.line + 1, function (line) {\n            if (line.markedSpans) {\n              for (var i = 0; i < line.markedSpans.length; ++i) {\n                var mark = line.markedSpans[i].marker;\n                if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n                  (markers || (markers = [])).push(mark);\n                }\n              }\n            }\n          });\n          if (!markers) {\n            return null;\n          }\n          var parts = [{ from: from, to: to }];\n          for (var i = 0; i < markers.length; ++i) {\n            var mk = markers[i],\n                m = mk.find(0);\n            for (var j = 0; j < parts.length; ++j) {\n              var p = parts[j];\n              if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n                continue;\n              }\n              var newParts = [j, 1],\n                  dfrom = cmp(p.from, m.from),\n                  dto = cmp(p.to, m.to);\n              if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n                newParts.push({ from: p.from, to: m.from });\n              }\n              if (dto > 0 || !mk.inclusiveRight && !dto) {\n                newParts.push({ from: m.to, to: p.to });\n              }\n              parts.splice.apply(parts, newParts);\n              j += newParts.length - 3;\n            }\n          }\n          return parts;\n        }\n\n        // Connect or disconnect spans from a line.\n        function detachMarkedSpans(line) {\n          var spans = line.markedSpans;\n          if (!spans) {\n            return;\n          }\n          for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.detachLine(line);\n          }\n          line.markedSpans = null;\n        }\n        function attachMarkedSpans(line, spans) {\n          if (!spans) {\n            return;\n          }\n          for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.attachLine(line);\n          }\n          line.markedSpans = spans;\n        }\n\n        // Helpers used when computing which overlapping collapsed span\n        // counts as the larger one.\n        function extraLeft(marker) {\n          return marker.inclusiveLeft ? -1 : 0;\n        }\n        function extraRight(marker) {\n          return marker.inclusiveRight ? 1 : 0;\n        }\n\n        // Returns a number indicating which of two overlapping collapsed\n        // spans is larger (and thus includes the other). Falls back to\n        // comparing ids when the spans cover exactly the same range.\n        function compareCollapsedMarkers(a, b) {\n          var lenDiff = a.lines.length - b.lines.length;\n          if (lenDiff != 0) {\n            return lenDiff;\n          }\n          var aPos = a.find(),\n              bPos = b.find();\n          var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n          if (fromCmp) {\n            return -fromCmp;\n          }\n          var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n          if (toCmp) {\n            return toCmp;\n          }\n          return b.id - a.id;\n        }\n\n        // Find out whether a line ends or starts in a collapsed span. If\n        // so, return the marker for that span.\n        function collapsedSpanAtSide(line, start) {\n          var sps = sawCollapsedSpans && line.markedSpans,\n              found;\n          if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n              sp = sps[i];\n              if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n                found = sp.marker;\n              }\n            }\n          }\n          return found;\n        }\n        function collapsedSpanAtStart(line) {\n          return collapsedSpanAtSide(line, true);\n        }\n        function collapsedSpanAtEnd(line) {\n          return collapsedSpanAtSide(line, false);\n        }\n\n        // Test whether there exists a collapsed span that partially\n        // overlaps (covers the start or end, but not both) of a new span.\n        // Such overlap is not allowed.\n        function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n          var line = getLine(doc, lineNo$$1);\n          var sps = sawCollapsedSpans && line.markedSpans;\n          if (sps) {\n            for (var i = 0; i < sps.length; ++i) {\n              var sp = sps[i];\n              if (!sp.marker.collapsed) {\n                continue;\n              }\n              var found = sp.marker.find(0);\n              var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n              var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n              if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n                continue;\n              }\n              if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n                return true;\n              }\n            }\n          }\n        }\n\n        // A visual line is a line as drawn on the screen. Folding, for\n        // example, can cause multiple logical lines to appear on the same\n        // visual line. This finds the start of the visual line that the\n        // given line is part of (usually that is the line itself).\n        function visualLine(line) {\n          var merged;\n          while (merged = collapsedSpanAtStart(line)) {\n            line = merged.find(-1, true).line;\n          }\n          return line;\n        }\n\n        function visualLineEnd(line) {\n          var merged;\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n          }\n          return line;\n        }\n\n        // Returns an array of logical lines that continue the visual line\n        // started by the argument, or undefined if there are no such lines.\n        function visualLineContinued(line) {\n          var merged, lines;\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;(lines || (lines = [])).push(line);\n          }\n          return lines;\n        }\n\n        // Get the line number of the start of the visual line that the\n        // given line number is part of.\n        function visualLineNo(doc, lineN) {\n          var line = getLine(doc, lineN),\n              vis = visualLine(line);\n          if (line == vis) {\n            return lineN;\n          }\n          return lineNo(vis);\n        }\n\n        // Get the line number of the start of the next visual line after\n        // the given line.\n        function visualLineEndNo(doc, lineN) {\n          if (lineN > doc.lastLine()) {\n            return lineN;\n          }\n          var line = getLine(doc, lineN),\n              merged;\n          if (!lineIsHidden(doc, line)) {\n            return lineN;\n          }\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n          }\n          return lineNo(line) + 1;\n        }\n\n        // Compute whether a line is hidden. Lines count as hidden when they\n        // are part of a visual line that starts with another line, or when\n        // they are entirely covered by collapsed, non-widget span.\n        function lineIsHidden(doc, line) {\n          var sps = sawCollapsedSpans && line.markedSpans;\n          if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n              sp = sps[i];\n              if (!sp.marker.collapsed) {\n                continue;\n              }\n              if (sp.from == null) {\n                return true;\n              }\n              if (sp.marker.widgetNode) {\n                continue;\n              }\n              if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n                return true;\n              }\n            }\n          }\n        }\n        function lineIsHiddenInner(doc, line, span) {\n          if (span.to == null) {\n            var end = span.marker.find(1, true);\n            return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n          }\n          if (span.marker.inclusiveRight && span.to == line.text.length) {\n            return true;\n          }\n          for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n            sp = line.markedSpans[i];\n            if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n              return true;\n            }\n          }\n        }\n\n        // Find the height above the given line.\n        function _heightAtLine(lineObj) {\n          lineObj = visualLine(lineObj);\n\n          var h = 0,\n              chunk = lineObj.parent;\n          for (var i = 0; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i];\n            if (line == lineObj) {\n              break;\n            } else {\n              h += line.height;\n            }\n          }\n          for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n            for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n              var cur = p.children[i$1];\n              if (cur == chunk) {\n                break;\n              } else {\n                h += cur.height;\n              }\n            }\n          }\n          return h;\n        }\n\n        // Compute the character length of a line, taking into account\n        // collapsed ranges (see markText) that might hide parts, and join\n        // other lines onto it.\n        function lineLength(line) {\n          if (line.height == 0) {\n            return 0;\n          }\n          var len = line.text.length,\n              merged,\n              cur = line;\n          while (merged = collapsedSpanAtStart(cur)) {\n            var found = merged.find(0, true);\n            cur = found.from.line;\n            len += found.from.ch - found.to.ch;\n          }\n          cur = line;\n          while (merged = collapsedSpanAtEnd(cur)) {\n            var found$1 = merged.find(0, true);\n            len -= cur.text.length - found$1.from.ch;\n            cur = found$1.to.line;\n            len += cur.text.length - found$1.to.ch;\n          }\n          return len;\n        }\n\n        // Find the longest line in the document.\n        function findMaxLine(cm) {\n          var d = cm.display,\n              doc = cm.doc;\n          d.maxLine = getLine(doc, doc.first);\n          d.maxLineLength = lineLength(d.maxLine);\n          d.maxLineChanged = true;\n          doc.iter(function (line) {\n            var len = lineLength(line);\n            if (len > d.maxLineLength) {\n              d.maxLineLength = len;\n              d.maxLine = line;\n            }\n          });\n        }\n\n        // BIDI HELPERS\n\n        function iterateBidiSections(order, from, to, f) {\n          if (!order) {\n            return f(from, to, \"ltr\");\n          }\n          var found = false;\n          for (var i = 0; i < order.length; ++i) {\n            var part = order[i];\n            if (part.from < to && part.to > from || from == to && part.to == from) {\n              f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n              found = true;\n            }\n          }\n          if (!found) {\n            f(from, to, \"ltr\");\n          }\n        }\n\n        var bidiOther = null;\n        function getBidiPartAt(order, ch, sticky) {\n          var found;\n          bidiOther = null;\n          for (var i = 0; i < order.length; ++i) {\n            var cur = order[i];\n            if (cur.from < ch && cur.to > ch) {\n              return i;\n            }\n            if (cur.to == ch) {\n              if (cur.from != cur.to && sticky == \"before\") {\n                found = i;\n              } else {\n                bidiOther = i;\n              }\n            }\n            if (cur.from == ch) {\n              if (cur.from != cur.to && sticky != \"before\") {\n                found = i;\n              } else {\n                bidiOther = i;\n              }\n            }\n          }\n          return found != null ? found : bidiOther;\n        }\n\n        // Bidirectional ordering algorithm\n        // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n        // that this (partially) implements.\n\n        // One-char codes used for character types:\n        // L (L):   Left-to-Right\n        // R (R):   Right-to-Left\n        // r (AL):  Right-to-Left Arabic\n        // 1 (EN):  European Number\n        // + (ES):  European Number Separator\n        // % (ET):  European Number Terminator\n        // n (AN):  Arabic Number\n        // , (CS):  Common Number Separator\n        // m (NSM): Non-Spacing Mark\n        // b (BN):  Boundary Neutral\n        // s (B):   Paragraph Separator\n        // t (S):   Segment Separator\n        // w (WS):  Whitespace\n        // N (ON):  Other Neutrals\n\n        // Returns null if characters are ordered as they appear\n        // (left-to-right), or an array of sections ({from, to, level}\n        // objects) in the order in which they occur visually.\n        var bidiOrdering = function () {\n          // Character types for codepoints 0 to 0xff\n          var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n          // Character types for codepoints 0x600 to 0x6f9\n          var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n          function charType(code) {\n            if (code <= 0xf7) {\n              return lowTypes.charAt(code);\n            } else if (0x590 <= code && code <= 0x5f4) {\n              return \"R\";\n            } else if (0x600 <= code && code <= 0x6f9) {\n              return arabicTypes.charAt(code - 0x600);\n            } else if (0x6ee <= code && code <= 0x8ac) {\n              return \"r\";\n            } else if (0x2000 <= code && code <= 0x200b) {\n              return \"w\";\n            } else if (code == 0x200c) {\n              return \"b\";\n            } else {\n              return \"L\";\n            }\n          }\n\n          var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n          var isNeutral = /[stwN]/,\n              isStrong = /[LRr]/,\n              countsAsLeft = /[Lb1n]/,\n              countsAsNum = /[1n]/;\n\n          function BidiSpan(level, from, to) {\n            this.level = level;\n            this.from = from;this.to = to;\n          }\n\n          return function (str, direction) {\n            var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n            if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n              return false;\n            }\n            var len = str.length,\n                types = [];\n            for (var i = 0; i < len; ++i) {\n              types.push(charType(str.charCodeAt(i)));\n            }\n\n            // W1. Examine each non-spacing mark (NSM) in the level run, and\n            // change the type of the NSM to the type of the previous\n            // character. If the NSM is at the start of the level run, it will\n            // get the type of sor.\n            for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n              var type = types[i$1];\n              if (type == \"m\") {\n                types[i$1] = prev;\n              } else {\n                prev = type;\n              }\n            }\n\n            // W2. Search backwards from each instance of a European number\n            // until the first strong type (R, L, AL, or sor) is found. If an\n            // AL is found, change the type of the European number to Arabic\n            // number.\n            // W3. Change all ALs to R.\n            for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n              var type$1 = types[i$2];\n              if (type$1 == \"1\" && cur == \"r\") {\n                types[i$2] = \"n\";\n              } else if (isStrong.test(type$1)) {\n                cur = type$1;if (type$1 == \"r\") {\n                  types[i$2] = \"R\";\n                }\n              }\n            }\n\n            // W4. A single European separator between two European numbers\n            // changes to a European number. A single common separator between\n            // two numbers of the same type changes to that type.\n            for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n              var type$2 = types[i$3];\n              if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n                types[i$3] = \"1\";\n              } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n                types[i$3] = prev$1;\n              }\n              prev$1 = type$2;\n            }\n\n            // W5. A sequence of European terminators adjacent to European\n            // numbers changes to all European numbers.\n            // W6. Otherwise, separators and terminators change to Other\n            // Neutral.\n            for (var i$4 = 0; i$4 < len; ++i$4) {\n              var type$3 = types[i$4];\n              if (type$3 == \",\") {\n                types[i$4] = \"N\";\n              } else if (type$3 == \"%\") {\n                var end = void 0;\n                for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n                var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n                for (var j = i$4; j < end; ++j) {\n                  types[j] = replace;\n                }\n                i$4 = end - 1;\n              }\n            }\n\n            // W7. Search backwards from each instance of a European number\n            // until the first strong type (R, L, or sor) is found. If an L is\n            // found, then change the type of the European number to L.\n            for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n              var type$4 = types[i$5];\n              if (cur$1 == \"L\" && type$4 == \"1\") {\n                types[i$5] = \"L\";\n              } else if (isStrong.test(type$4)) {\n                cur$1 = type$4;\n              }\n            }\n\n            // N1. A sequence of neutrals takes the direction of the\n            // surrounding strong text if the text on both sides has the same\n            // direction. European and Arabic numbers act as if they were R in\n            // terms of their influence on neutrals. Start-of-level-run (sor)\n            // and end-of-level-run (eor) are used at level run boundaries.\n            // N2. Any remaining neutrals take the embedding direction.\n            for (var i$6 = 0; i$6 < len; ++i$6) {\n              if (isNeutral.test(types[i$6])) {\n                var end$1 = void 0;\n                for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n                var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n                var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n                var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n                for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n                  types[j$1] = replace$1;\n                }\n                i$6 = end$1 - 1;\n              }\n            }\n\n            // Here we depart from the documented algorithm, in order to avoid\n            // building up an actual levels array. Since there are only three\n            // levels (0, 1, 2) in an implementation that doesn't take\n            // explicit embedding into account, we can build up the order on\n            // the fly, without following the level-based algorithm.\n            var order = [],\n                m;\n            for (var i$7 = 0; i$7 < len;) {\n              if (countsAsLeft.test(types[i$7])) {\n                var start = i$7;\n                for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n                order.push(new BidiSpan(0, start, i$7));\n              } else {\n                var pos = i$7,\n                    at = order.length;\n                for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n                for (var j$2 = pos; j$2 < i$7;) {\n                  if (countsAsNum.test(types[j$2])) {\n                    if (pos < j$2) {\n                      order.splice(at, 0, new BidiSpan(1, pos, j$2));\n                    }\n                    var nstart = j$2;\n                    for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n                    order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n                    pos = j$2;\n                  } else {\n                    ++j$2;\n                  }\n                }\n                if (pos < i$7) {\n                  order.splice(at, 0, new BidiSpan(1, pos, i$7));\n                }\n              }\n            }\n            if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n              order[0].from = m[0].length;\n              order.unshift(new BidiSpan(0, 0, m[0].length));\n            }\n            if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n              lst(order).to -= m[0].length;\n              order.push(new BidiSpan(0, len - m[0].length, len));\n            }\n\n            return direction == \"rtl\" ? order.reverse() : order;\n          };\n        }();\n\n        // Get the bidi ordering for the given line (and cache it). Returns\n        // false for lines that are fully left-to-right, and an array of\n        // BidiSpan objects otherwise.\n        function getOrder(line, direction) {\n          var order = line.order;\n          if (order == null) {\n            order = line.order = bidiOrdering(line.text, direction);\n          }\n          return order;\n        }\n\n        function moveCharLogically(line, ch, dir) {\n          var target = skipExtendingChars(line.text, ch + dir, dir);\n          return target < 0 || target > line.text.length ? null : target;\n        }\n\n        function moveLogically(line, start, dir) {\n          var ch = moveCharLogically(line, start.ch, dir);\n          return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n        }\n\n        function endOfLine(visually, cm, lineObj, lineNo, dir) {\n          if (visually) {\n            var order = getOrder(lineObj, cm.doc.direction);\n            if (order) {\n              var part = dir < 0 ? lst(order) : order[0];\n              var moveInStorageOrder = dir < 0 == (part.level == 1);\n              var sticky = moveInStorageOrder ? \"after\" : \"before\";\n              var ch;\n              // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n              // it could be that the last bidi part is not on the last visual line,\n              // since visual lines contain content order-consecutive chunks.\n              // Thus, in rtl, we are looking for the first (content-order) character\n              // in the rtl chunk that is on the last line (that is, the same line\n              // as the last (content-order) character).\n              if (part.level > 0) {\n                var prep = prepareMeasureForLine(cm, lineObj);\n                ch = dir < 0 ? lineObj.text.length - 1 : 0;\n                var targetTop = measureCharPrepared(cm, prep, ch).top;\n                ch = findFirst(function (ch) {\n                  return measureCharPrepared(cm, prep, ch).top == targetTop;\n                }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n                if (sticky == \"before\") {\n                  ch = moveCharLogically(lineObj, ch, 1);\n                }\n              } else {\n                ch = dir < 0 ? part.to : part.from;\n              }\n              return new Pos(lineNo, ch, sticky);\n            }\n          }\n          return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n        }\n\n        function moveVisually(cm, line, start, dir) {\n          var bidi = getOrder(line, cm.doc.direction);\n          if (!bidi) {\n            return moveLogically(line, start, dir);\n          }\n          if (start.ch >= line.text.length) {\n            start.ch = line.text.length;\n            start.sticky = \"before\";\n          } else if (start.ch <= 0) {\n            start.ch = 0;\n            start.sticky = \"after\";\n          }\n          var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n              part = bidi[partPos];\n          if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n            // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n            // nothing interesting happens.\n            return moveLogically(line, start, dir);\n          }\n\n          var mv = function mv(pos, dir) {\n            return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n          };\n          var prep;\n          var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n            if (!cm.options.lineWrapping) {\n              return { begin: 0, end: line.text.length };\n            }\n            prep = prep || prepareMeasureForLine(cm, line);\n            return wrappedLineExtentChar(cm, line, prep, ch);\n          };\n          var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n          if (cm.doc.direction == \"rtl\" || part.level == 1) {\n            var moveInStorageOrder = part.level == 1 == dir < 0;\n            var ch = mv(start, moveInStorageOrder ? 1 : -1);\n            if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n              // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n              var sticky = moveInStorageOrder ? \"before\" : \"after\";\n              return new Pos(start.line, ch, sticky);\n            }\n          }\n\n          // Case 3: Could not move within this bidi part in this visual line, so leave\n          // the current bidi part\n\n          var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n            var getRes = function getRes(ch, moveInStorageOrder) {\n              return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n            };\n\n            for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n              var part = bidi[partPos];\n              var moveInStorageOrder = dir > 0 == (part.level != 1);\n              var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n              if (part.from <= ch && ch < part.to) {\n                return getRes(ch, moveInStorageOrder);\n              }\n              ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n              if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n                return getRes(ch, moveInStorageOrder);\n              }\n            }\n          };\n\n          // Case 3a: Look for other bidi parts on the same visual line\n          var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n          if (res) {\n            return res;\n          }\n\n          // Case 3b: Look for other bidi parts on the next visual line\n          var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n          if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n            res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n            if (res) {\n              return res;\n            }\n          }\n\n          // Case 4: Nowhere to move\n          return null;\n        }\n\n        // EVENT HANDLING\n\n        // Lightweight event framework. on/off also work on DOM nodes,\n        // registering native DOM handlers.\n\n        var noHandlers = [];\n\n        var on = function on(emitter, type, f) {\n          if (emitter.addEventListener) {\n            emitter.addEventListener(type, f, false);\n          } else if (emitter.attachEvent) {\n            emitter.attachEvent(\"on\" + type, f);\n          } else {\n            var map$$1 = emitter._handlers || (emitter._handlers = {});\n            map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n          }\n        };\n\n        function getHandlers(emitter, type) {\n          return emitter._handlers && emitter._handlers[type] || noHandlers;\n        }\n\n        function off(emitter, type, f) {\n          if (emitter.removeEventListener) {\n            emitter.removeEventListener(type, f, false);\n          } else if (emitter.detachEvent) {\n            emitter.detachEvent(\"on\" + type, f);\n          } else {\n            var map$$1 = emitter._handlers,\n                arr = map$$1 && map$$1[type];\n            if (arr) {\n              var index = indexOf(arr, f);\n              if (index > -1) {\n                map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n              }\n            }\n          }\n        }\n\n        function signal(emitter, type /*, values...*/) {\n          var handlers = getHandlers(emitter, type);\n          if (!handlers.length) {\n            return;\n          }\n          var args = Array.prototype.slice.call(arguments, 2);\n          for (var i = 0; i < handlers.length; ++i) {\n            handlers[i].apply(null, args);\n          }\n        }\n\n        // The DOM events that CodeMirror handles can be overridden by\n        // registering a (non-DOM) handler on the editor for the event name,\n        // and preventDefault-ing the event in that handler.\n        function signalDOMEvent(cm, e, override) {\n          if (typeof e == \"string\") {\n            e = { type: e, preventDefault: function preventDefault() {\n                this.defaultPrevented = true;\n              } };\n          }\n          signal(cm, override || e.type, cm, e);\n          return e_defaultPrevented(e) || e.codemirrorIgnore;\n        }\n\n        function signalCursorActivity(cm) {\n          var arr = cm._handlers && cm._handlers.cursorActivity;\n          if (!arr) {\n            return;\n          }\n          var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n          for (var i = 0; i < arr.length; ++i) {\n            if (indexOf(set, arr[i]) == -1) {\n              set.push(arr[i]);\n            }\n          }\n        }\n\n        function hasHandler(emitter, type) {\n          return getHandlers(emitter, type).length > 0;\n        }\n\n        // Add on and off methods to a constructor's prototype, to make\n        // registering events on such objects more convenient.\n        function eventMixin(ctor) {\n          ctor.prototype.on = function (type, f) {\n            on(this, type, f);\n          };\n          ctor.prototype.off = function (type, f) {\n            off(this, type, f);\n          };\n        }\n\n        // Due to the fact that we still support jurassic IE versions, some\n        // compatibility wrappers are needed.\n\n        function e_preventDefault(e) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n        }\n        function e_stopPropagation(e) {\n          if (e.stopPropagation) {\n            e.stopPropagation();\n          } else {\n            e.cancelBubble = true;\n          }\n        }\n        function e_defaultPrevented(e) {\n          return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n        }\n        function e_stop(e) {\n          e_preventDefault(e);e_stopPropagation(e);\n        }\n\n        function e_target(e) {\n          return e.target || e.srcElement;\n        }\n        function e_button(e) {\n          var b = e.which;\n          if (b == null) {\n            if (e.button & 1) {\n              b = 1;\n            } else if (e.button & 2) {\n              b = 3;\n            } else if (e.button & 4) {\n              b = 2;\n            }\n          }\n          if (mac && e.ctrlKey && b == 1) {\n            b = 3;\n          }\n          return b;\n        }\n\n        // Detect drag-and-drop\n        var dragAndDrop = function () {\n          // There is *some* kind of drag-and-drop support in IE6-8, but I\n          // couldn't get it to work yet.\n          if (ie && ie_version < 9) {\n            return false;\n          }\n          var div = elt('div');\n          return \"draggable\" in div || \"dragDrop\" in div;\n        }();\n\n        var zwspSupported;\n        function zeroWidthElement(measure) {\n          if (zwspSupported == null) {\n            var test = elt(\"span\", \"\\u200B\");\n            removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n            if (measure.firstChild.offsetHeight != 0) {\n              zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n            }\n          }\n          var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n          node.setAttribute(\"cm-text\", \"\");\n          return node;\n        }\n\n        // Feature-detect IE's crummy client rect reporting for bidi text\n        var badBidiRects;\n        function hasBadBidiRects(measure) {\n          if (badBidiRects != null) {\n            return badBidiRects;\n          }\n          var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n          var r0 = range(txt, 0, 1).getBoundingClientRect();\n          var r1 = range(txt, 1, 2).getBoundingClientRect();\n          removeChildren(measure);\n          if (!r0 || r0.left == r0.right) {\n            return false;\n          } // Safari returns null in some cases (#2780)\n          return badBidiRects = r1.right - r0.right < 3;\n        }\n\n        // See if \"\".split is the broken IE version, if so, provide an\n        // alternative way to split lines.\n        var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n          var pos = 0,\n              result = [],\n              l = string.length;\n          while (pos <= l) {\n            var nl = string.indexOf(\"\\n\", pos);\n            if (nl == -1) {\n              nl = string.length;\n            }\n            var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n            var rt = line.indexOf(\"\\r\");\n            if (rt != -1) {\n              result.push(line.slice(0, rt));\n              pos += rt + 1;\n            } else {\n              result.push(line);\n              pos = nl + 1;\n            }\n          }\n          return result;\n        } : function (string) {\n          return string.split(/\\r\\n?|\\n/);\n        };\n\n        var hasSelection = window.getSelection ? function (te) {\n          try {\n            return te.selectionStart != te.selectionEnd;\n          } catch (e) {\n            return false;\n          }\n        } : function (te) {\n          var range$$1;\n          try {\n            range$$1 = te.ownerDocument.selection.createRange();\n          } catch (e) {}\n          if (!range$$1 || range$$1.parentElement() != te) {\n            return false;\n          }\n          return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0;\n        };\n\n        var hasCopyEvent = function () {\n          var e = elt(\"div\");\n          if (\"oncopy\" in e) {\n            return true;\n          }\n          e.setAttribute(\"oncopy\", \"return;\");\n          return typeof e.oncopy == \"function\";\n        }();\n\n        var badZoomedRects = null;\n        function hasBadZoomedRects(measure) {\n          if (badZoomedRects != null) {\n            return badZoomedRects;\n          }\n          var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n          var normal = node.getBoundingClientRect();\n          var fromRange = range(node, 0, 1).getBoundingClientRect();\n          return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n        }\n\n        // Known modes, by name and by MIME\n        var modes = {};\n        var mimeModes = {};\n\n        // Extra arguments are stored as the mode's dependencies, which is\n        // used by (legacy) mechanisms like loadmode.js to automatically\n        // load a mode. (Preferred mechanism is the require/define calls.)\n        function defineMode(name, mode) {\n          if (arguments.length > 2) {\n            mode.dependencies = Array.prototype.slice.call(arguments, 2);\n          }\n          modes[name] = mode;\n        }\n\n        function defineMIME(mime, spec) {\n          mimeModes[mime] = spec;\n        }\n\n        // Given a MIME type, a {name, ...options} config object, or a name\n        // string, return a mode config object.\n        function resolveMode(spec) {\n          if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n            spec = mimeModes[spec];\n          } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n            var found = mimeModes[spec.name];\n            if (typeof found == \"string\") {\n              found = { name: found };\n            }\n            spec = createObj(found, spec);\n            spec.name = found.name;\n          } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n            return resolveMode(\"application/xml\");\n          } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n            return resolveMode(\"application/json\");\n          }\n          if (typeof spec == \"string\") {\n            return { name: spec };\n          } else {\n            return spec || { name: \"null\" };\n          }\n        }\n\n        // Given a mode spec (anything that resolveMode accepts), find and\n        // initialize an actual mode object.\n        function getMode(options, spec) {\n          spec = resolveMode(spec);\n          var mfactory = modes[spec.name];\n          if (!mfactory) {\n            return getMode(options, \"text/plain\");\n          }\n          var modeObj = mfactory(options, spec);\n          if (modeExtensions.hasOwnProperty(spec.name)) {\n            var exts = modeExtensions[spec.name];\n            for (var prop in exts) {\n              if (!exts.hasOwnProperty(prop)) {\n                continue;\n              }\n              if (modeObj.hasOwnProperty(prop)) {\n                modeObj[\"_\" + prop] = modeObj[prop];\n              }\n              modeObj[prop] = exts[prop];\n            }\n          }\n          modeObj.name = spec.name;\n          if (spec.helperType) {\n            modeObj.helperType = spec.helperType;\n          }\n          if (spec.modeProps) {\n            for (var prop$1 in spec.modeProps) {\n              modeObj[prop$1] = spec.modeProps[prop$1];\n            }\n          }\n\n          return modeObj;\n        }\n\n        // This can be used to attach properties to mode objects from\n        // outside the actual mode definition.\n        var modeExtensions = {};\n        function extendMode(mode, properties) {\n          var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n          copyObj(properties, exts);\n        }\n\n        function copyState(mode, state) {\n          if (state === true) {\n            return state;\n          }\n          if (mode.copyState) {\n            return mode.copyState(state);\n          }\n          var nstate = {};\n          for (var n in state) {\n            var val = state[n];\n            if (val instanceof Array) {\n              val = val.concat([]);\n            }\n            nstate[n] = val;\n          }\n          return nstate;\n        }\n\n        // Given a mode and a state (for that mode), find the inner mode and\n        // state at the position that the state refers to.\n        function innerMode(mode, state) {\n          var info;\n          while (mode.innerMode) {\n            info = mode.innerMode(state);\n            if (!info || info.mode == mode) {\n              break;\n            }\n            state = info.state;\n            mode = info.mode;\n          }\n          return info || { mode: mode, state: state };\n        }\n\n        function startState(mode, a1, a2) {\n          return mode.startState ? mode.startState(a1, a2) : true;\n        }\n\n        // STRING STREAM\n\n        // Fed to the mode parsers, provides helper functions to make\n        // parsers more succinct.\n\n        var StringStream = function StringStream(string, tabSize, lineOracle) {\n          this.pos = this.start = 0;\n          this.string = string;\n          this.tabSize = tabSize || 8;\n          this.lastColumnPos = this.lastColumnValue = 0;\n          this.lineStart = 0;\n          this.lineOracle = lineOracle;\n        };\n\n        StringStream.prototype.eol = function () {\n          return this.pos >= this.string.length;\n        };\n        StringStream.prototype.sol = function () {\n          return this.pos == this.lineStart;\n        };\n        StringStream.prototype.peek = function () {\n          return this.string.charAt(this.pos) || undefined;\n        };\n        StringStream.prototype.next = function () {\n          if (this.pos < this.string.length) {\n            return this.string.charAt(this.pos++);\n          }\n        };\n        StringStream.prototype.eat = function (match) {\n          var ch = this.string.charAt(this.pos);\n          var ok;\n          if (typeof match == \"string\") {\n            ok = ch == match;\n          } else {\n            ok = ch && (match.test ? match.test(ch) : match(ch));\n          }\n          if (ok) {\n            ++this.pos;return ch;\n          }\n        };\n        StringStream.prototype.eatWhile = function (match) {\n          var start = this.pos;\n          while (this.eat(match)) {}\n          return this.pos > start;\n        };\n        StringStream.prototype.eatSpace = function () {\n          var this$1 = this;\n\n          var start = this.pos;\n          while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n            ++this$1.pos;\n          }\n          return this.pos > start;\n        };\n        StringStream.prototype.skipToEnd = function () {\n          this.pos = this.string.length;\n        };\n        StringStream.prototype.skipTo = function (ch) {\n          var found = this.string.indexOf(ch, this.pos);\n          if (found > -1) {\n            this.pos = found;return true;\n          }\n        };\n        StringStream.prototype.backUp = function (n) {\n          this.pos -= n;\n        };\n        StringStream.prototype.column = function () {\n          if (this.lastColumnPos < this.start) {\n            this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n            this.lastColumnPos = this.start;\n          }\n          return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n        };\n        StringStream.prototype.indentation = function () {\n          return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n        };\n        StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n          if (typeof pattern == \"string\") {\n            var cased = function cased(str) {\n              return caseInsensitive ? str.toLowerCase() : str;\n            };\n            var substr = this.string.substr(this.pos, pattern.length);\n            if (cased(substr) == cased(pattern)) {\n              if (consume !== false) {\n                this.pos += pattern.length;\n              }\n              return true;\n            }\n          } else {\n            var match = this.string.slice(this.pos).match(pattern);\n            if (match && match.index > 0) {\n              return null;\n            }\n            if (match && consume !== false) {\n              this.pos += match[0].length;\n            }\n            return match;\n          }\n        };\n        StringStream.prototype.current = function () {\n          return this.string.slice(this.start, this.pos);\n        };\n        StringStream.prototype.hideFirstChars = function (n, inner) {\n          this.lineStart += n;\n          try {\n            return inner();\n          } finally {\n            this.lineStart -= n;\n          }\n        };\n        StringStream.prototype.lookAhead = function (n) {\n          var oracle = this.lineOracle;\n          return oracle && oracle.lookAhead(n);\n        };\n\n        var SavedContext = function SavedContext(state, lookAhead) {\n          this.state = state;\n          this.lookAhead = lookAhead;\n        };\n\n        var Context = function Context(doc, state, line, lookAhead) {\n          this.state = state;\n          this.doc = doc;\n          this.line = line;\n          this.maxLookAhead = lookAhead || 0;\n        };\n\n        Context.prototype.lookAhead = function (n) {\n          var line = this.doc.getLine(this.line + n);\n          if (line != null && n > this.maxLookAhead) {\n            this.maxLookAhead = n;\n          }\n          return line;\n        };\n\n        Context.prototype.nextLine = function () {\n          this.line++;\n          if (this.maxLookAhead > 0) {\n            this.maxLookAhead--;\n          }\n        };\n\n        Context.fromSaved = function (doc, saved, line) {\n          if (saved instanceof SavedContext) {\n            return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n          } else {\n            return new Context(doc, copyState(doc.mode, saved), line);\n          }\n        };\n\n        Context.prototype.save = function (copy) {\n          var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n          return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n        };\n\n        // Compute a style array (an array starting with a mode generation\n        // -- for invalidation -- followed by pairs of end positions and\n        // style strings), which is used to highlight the tokens on the\n        // line.\n        function highlightLine(cm, line, context, forceToEnd) {\n          // A styles array always starts with a number identifying the\n          // mode/overlays that it is based on (for easy invalidation).\n          var st = [cm.state.modeGen],\n              lineClasses = {};\n          // Compute the base array of styles\n          runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n            return st.push(end, style);\n          }, lineClasses, forceToEnd);\n          var state = context.state;\n\n          // Run overlays, adjust style array.\n          var loop = function loop(o) {\n            var overlay = cm.state.overlays[o],\n                i = 1,\n                at = 0;\n            context.state = true;\n            runMode(cm, line.text, overlay.mode, context, function (end, style) {\n              var start = i;\n              // Ensure there's a token end at the current position, and that i points at it\n              while (at < end) {\n                var i_end = st[i];\n                if (i_end > end) {\n                  st.splice(i, 1, end, st[i + 1], i_end);\n                }\n                i += 2;\n                at = Math.min(end, i_end);\n              }\n              if (!style) {\n                return;\n              }\n              if (overlay.opaque) {\n                st.splice(start, i - start, end, \"overlay \" + style);\n                i = start + 2;\n              } else {\n                for (; start < i; start += 2) {\n                  var cur = st[start + 1];\n                  st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n                }\n              }\n            }, lineClasses);\n          };\n\n          for (var o = 0; o < cm.state.overlays.length; ++o) {\n            loop(o);\n          }context.state = state;\n\n          return { styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null };\n        }\n\n        function getLineStyles(cm, line, updateFrontier) {\n          if (!line.styles || line.styles[0] != cm.state.modeGen) {\n            var context = getContextBefore(cm, lineNo(line));\n            var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n            var result = highlightLine(cm, line, context);\n            if (resetState) {\n              context.state = resetState;\n            }\n            line.stateAfter = context.save(!resetState);\n            line.styles = result.styles;\n            if (result.classes) {\n              line.styleClasses = result.classes;\n            } else if (line.styleClasses) {\n              line.styleClasses = null;\n            }\n            if (updateFrontier === cm.doc.highlightFrontier) {\n              cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n            }\n          }\n          return line.styles;\n        }\n\n        function getContextBefore(cm, n, precise) {\n          var doc = cm.doc,\n              display = cm.display;\n          if (!doc.mode.startState) {\n            return new Context(doc, true, n);\n          }\n          var start = findStartLine(cm, n, precise);\n          var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n          var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n          doc.iter(start, n, function (line) {\n            processLine(cm, line.text, context);\n            var pos = context.line;\n            line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n            context.nextLine();\n          });\n          if (precise) {\n            doc.modeFrontier = context.line;\n          }\n          return context;\n        }\n\n        // Lightweight form of highlight -- proceed over this line and\n        // update state, but don't save a style array. Used for lines that\n        // aren't currently visible.\n        function processLine(cm, text, context, startAt) {\n          var mode = cm.doc.mode;\n          var stream = new StringStream(text, cm.options.tabSize, context);\n          stream.start = stream.pos = startAt || 0;\n          if (text == \"\") {\n            callBlankLine(mode, context.state);\n          }\n          while (!stream.eol()) {\n            readToken(mode, stream, context.state);\n            stream.start = stream.pos;\n          }\n        }\n\n        function callBlankLine(mode, state) {\n          if (mode.blankLine) {\n            return mode.blankLine(state);\n          }\n          if (!mode.innerMode) {\n            return;\n          }\n          var inner = innerMode(mode, state);\n          if (inner.mode.blankLine) {\n            return inner.mode.blankLine(inner.state);\n          }\n        }\n\n        function readToken(mode, stream, state, inner) {\n          for (var i = 0; i < 10; i++) {\n            if (inner) {\n              inner[0] = innerMode(mode, state).mode;\n            }\n            var style = mode.token(stream, state);\n            if (stream.pos > stream.start) {\n              return style;\n            }\n          }\n          throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n        }\n\n        var Token = function Token(stream, type, state) {\n          this.start = stream.start;this.end = stream.pos;\n          this.string = stream.current();\n          this.type = type || null;\n          this.state = state;\n        };\n\n        // Utility for getTokenAt and getLineTokens\n        function takeToken(cm, pos, precise, asArray) {\n          var doc = cm.doc,\n              mode = doc.mode,\n              style;\n          pos = _clipPos(doc, pos);\n          var line = getLine(doc, pos.line),\n              context = getContextBefore(cm, pos.line, precise);\n          var stream = new StringStream(line.text, cm.options.tabSize, context),\n              tokens;\n          if (asArray) {\n            tokens = [];\n          }\n          while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n            stream.start = stream.pos;\n            style = readToken(mode, stream, context.state);\n            if (asArray) {\n              tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n            }\n          }\n          return asArray ? tokens : new Token(stream, style, context.state);\n        }\n\n        function extractLineClasses(type, output) {\n          if (type) {\n            for (;;) {\n              var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n              if (!lineClass) {\n                break;\n              }\n              type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n              var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n              if (output[prop] == null) {\n                output[prop] = lineClass[2];\n              } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n                output[prop] += \" \" + lineClass[2];\n              }\n            }\n          }\n          return type;\n        }\n\n        // Run the given mode's parser over a line, calling f for each token.\n        function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n          var flattenSpans = mode.flattenSpans;\n          if (flattenSpans == null) {\n            flattenSpans = cm.options.flattenSpans;\n          }\n          var curStart = 0,\n              curStyle = null;\n          var stream = new StringStream(text, cm.options.tabSize, context),\n              style;\n          var inner = cm.options.addModeClass && [null];\n          if (text == \"\") {\n            extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n          }\n          while (!stream.eol()) {\n            if (stream.pos > cm.options.maxHighlightLength) {\n              flattenSpans = false;\n              if (forceToEnd) {\n                processLine(cm, text, context, stream.pos);\n              }\n              stream.pos = text.length;\n              style = null;\n            } else {\n              style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n            }\n            if (inner) {\n              var mName = inner[0].name;\n              if (mName) {\n                style = \"m-\" + (style ? mName + \" \" + style : mName);\n              }\n            }\n            if (!flattenSpans || curStyle != style) {\n              while (curStart < stream.start) {\n                curStart = Math.min(stream.start, curStart + 5000);\n                f(curStart, curStyle);\n              }\n              curStyle = style;\n            }\n            stream.start = stream.pos;\n          }\n          while (curStart < stream.pos) {\n            // Webkit seems to refuse to render text nodes longer than 57444\n            // characters, and returns inaccurate measurements in nodes\n            // starting around 5000 chars.\n            var pos = Math.min(stream.pos, curStart + 5000);\n            f(pos, curStyle);\n            curStart = pos;\n          }\n        }\n\n        // Finds the line to start with when starting a parse. Tries to\n        // find a line with a stateAfter, so that it can start with a\n        // valid state. If that fails, it returns the line with the\n        // smallest indentation, which tends to need the least context to\n        // parse correctly.\n        function findStartLine(cm, n, precise) {\n          var minindent,\n              minline,\n              doc = cm.doc;\n          var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n          for (var search = n; search > lim; --search) {\n            if (search <= doc.first) {\n              return doc.first;\n            }\n            var line = getLine(doc, search - 1),\n                after = line.stateAfter;\n            if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n              return search;\n            }\n            var indented = countColumn(line.text, null, cm.options.tabSize);\n            if (minline == null || minindent > indented) {\n              minline = search - 1;\n              minindent = indented;\n            }\n          }\n          return minline;\n        }\n\n        function retreatFrontier(doc, n) {\n          doc.modeFrontier = Math.min(doc.modeFrontier, n);\n          if (doc.highlightFrontier < n - 10) {\n            return;\n          }\n          var start = doc.first;\n          for (var line = n - 1; line > start; line--) {\n            var saved = getLine(doc, line).stateAfter;\n            // change is on 3\n            // state on line 1 looked ahead 2 -- so saw 3\n            // test 1 + 2 < 3 should cover this\n            if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n              start = line + 1;\n              break;\n            }\n          }\n          doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n        }\n\n        // LINE DATA STRUCTURE\n\n        // Line objects. These hold state related to a line, including\n        // highlighting info (the styles array).\n        var Line = function Line(text, markedSpans, estimateHeight) {\n          this.text = text;\n          attachMarkedSpans(this, markedSpans);\n          this.height = estimateHeight ? estimateHeight(this) : 1;\n        };\n\n        Line.prototype.lineNo = function () {\n          return lineNo(this);\n        };\n        eventMixin(Line);\n\n        // Change the content (text, markers) of a line. Automatically\n        // invalidates cached information and tries to re-estimate the\n        // line's height.\n        function updateLine(line, text, markedSpans, estimateHeight) {\n          line.text = text;\n          if (line.stateAfter) {\n            line.stateAfter = null;\n          }\n          if (line.styles) {\n            line.styles = null;\n          }\n          if (line.order != null) {\n            line.order = null;\n          }\n          detachMarkedSpans(line);\n          attachMarkedSpans(line, markedSpans);\n          var estHeight = estimateHeight ? estimateHeight(line) : 1;\n          if (estHeight != line.height) {\n            updateLineHeight(line, estHeight);\n          }\n        }\n\n        // Detach a line from the document tree and its markers.\n        function cleanUpLine(line) {\n          line.parent = null;\n          detachMarkedSpans(line);\n        }\n\n        // Convert a style as returned by a mode (either null, or a string\n        // containing one or more styles) to a CSS style. This is cached,\n        // and also looks for line-wide styles.\n        var styleToClassCache = {};\n        var styleToClassCacheWithMode = {};\n        function interpretTokenStyle(style, options) {\n          if (!style || /^\\s*$/.test(style)) {\n            return null;\n          }\n          var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n          return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n        }\n\n        // Render the DOM representation of the text of a line. Also builds\n        // up a 'line map', which points at the DOM nodes that represent\n        // specific stretches of text, and is used by the measuring code.\n        // The returned object contains the DOM node, this map, and\n        // information about line-wide styles that were set by the mode.\n        function buildLineContent(cm, lineView) {\n          // The padding-right forces the element to have a 'border', which\n          // is needed on Webkit to be able to get line-level bounding\n          // rectangles for it (in measureChar).\n          var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n          var builder = { pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n            col: 0, pos: 0, cm: cm,\n            trailingSpace: false,\n            splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\") };\n          lineView.measure = {};\n\n          // Iterate over the logical lines that make up this visual line.\n          for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n            var line = i ? lineView.rest[i - 1] : lineView.line,\n                order = void 0;\n            builder.pos = 0;\n            builder.addToken = buildToken;\n            // Optionally wire in some hacks into the token-rendering\n            // algorithm, to deal with browser quirks.\n            if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n              builder.addToken = buildTokenBadBidi(builder.addToken, order);\n            }\n            builder.map = [];\n            var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n            insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n            if (line.styleClasses) {\n              if (line.styleClasses.bgClass) {\n                builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n              }\n              if (line.styleClasses.textClass) {\n                builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n              }\n            }\n\n            // Ensure at least a single node is present, for measuring.\n            if (builder.map.length == 0) {\n              builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n            }\n\n            // Store the map and a cache object for the current logical line\n            if (i == 0) {\n              lineView.measure.map = builder.map;\n              lineView.measure.cache = {};\n            } else {\n              (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n            }\n          }\n\n          // See issue #2901\n          if (webkit) {\n            var last = builder.content.lastChild;\n            if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n              builder.content.className = \"cm-tab-wrap-hack\";\n            }\n          }\n\n          signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n          if (builder.pre.className) {\n            builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n          }\n\n          return builder;\n        }\n\n        function defaultSpecialCharPlaceholder(ch) {\n          var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n          token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n          token.setAttribute(\"aria-label\", token.title);\n          return token;\n        }\n\n        // Build up the DOM representation for a single token, and add it to\n        // the line map. Takes care to render special characters separately.\n        function buildToken(builder, text, style, startStyle, endStyle, title, css) {\n          if (!text) {\n            return;\n          }\n          var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n          var special = builder.cm.state.specialChars,\n              mustWrap = false;\n          var content;\n          if (!special.test(text)) {\n            builder.col += text.length;\n            content = document.createTextNode(displayText);\n            builder.map.push(builder.pos, builder.pos + text.length, content);\n            if (ie && ie_version < 9) {\n              mustWrap = true;\n            }\n            builder.pos += text.length;\n          } else {\n            content = document.createDocumentFragment();\n            var pos = 0;\n            while (true) {\n              special.lastIndex = pos;\n              var m = special.exec(text);\n              var skipped = m ? m.index - pos : text.length - pos;\n              if (skipped) {\n                var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n                if (ie && ie_version < 9) {\n                  content.appendChild(elt(\"span\", [txt]));\n                } else {\n                  content.appendChild(txt);\n                }\n                builder.map.push(builder.pos, builder.pos + skipped, txt);\n                builder.col += skipped;\n                builder.pos += skipped;\n              }\n              if (!m) {\n                break;\n              }\n              pos += skipped + 1;\n              var txt$1 = void 0;\n              if (m[0] == \"\\t\") {\n                var tabSize = builder.cm.options.tabSize,\n                    tabWidth = tabSize - builder.col % tabSize;\n                txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n                txt$1.setAttribute(\"role\", \"presentation\");\n                txt$1.setAttribute(\"cm-text\", \"\\t\");\n                builder.col += tabWidth;\n              } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n                txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n                txt$1.setAttribute(\"cm-text\", m[0]);\n                builder.col += 1;\n              } else {\n                txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n                txt$1.setAttribute(\"cm-text\", m[0]);\n                if (ie && ie_version < 9) {\n                  content.appendChild(elt(\"span\", [txt$1]));\n                } else {\n                  content.appendChild(txt$1);\n                }\n                builder.col += 1;\n              }\n              builder.map.push(builder.pos, builder.pos + 1, txt$1);\n              builder.pos++;\n            }\n          }\n          builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n          if (style || startStyle || endStyle || mustWrap || css) {\n            var fullStyle = style || \"\";\n            if (startStyle) {\n              fullStyle += startStyle;\n            }\n            if (endStyle) {\n              fullStyle += endStyle;\n            }\n            var token = elt(\"span\", [content], fullStyle, css);\n            if (title) {\n              token.title = title;\n            }\n            return builder.content.appendChild(token);\n          }\n          builder.content.appendChild(content);\n        }\n\n        function splitSpaces(text, trailingBefore) {\n          if (text.length > 1 && !/  /.test(text)) {\n            return text;\n          }\n          var spaceBefore = trailingBefore,\n              result = \"\";\n          for (var i = 0; i < text.length; i++) {\n            var ch = text.charAt(i);\n            if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n              ch = \"\\xA0\";\n            }\n            result += ch;\n            spaceBefore = ch == \" \";\n          }\n          return result;\n        }\n\n        // Work around nonsense dimensions being reported for stretches of\n        // right-to-left text.\n        function buildTokenBadBidi(inner, order) {\n          return function (builder, text, style, startStyle, endStyle, title, css) {\n            style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n            var start = builder.pos,\n                end = start + text.length;\n            for (;;) {\n              // Find the part that overlaps with the start of this text\n              var part = void 0;\n              for (var i = 0; i < order.length; i++) {\n                part = order[i];\n                if (part.to > start && part.from <= start) {\n                  break;\n                }\n              }\n              if (part.to >= end) {\n                return inner(builder, text, style, startStyle, endStyle, title, css);\n              }\n              inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n              startStyle = null;\n              text = text.slice(part.to - start);\n              start = part.to;\n            }\n          };\n        }\n\n        function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n          var widget = !ignoreWidget && marker.widgetNode;\n          if (widget) {\n            builder.map.push(builder.pos, builder.pos + size, widget);\n          }\n          if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n            if (!widget) {\n              widget = builder.content.appendChild(document.createElement(\"span\"));\n            }\n            widget.setAttribute(\"cm-marker\", marker.id);\n          }\n          if (widget) {\n            builder.cm.display.input.setUneditable(widget);\n            builder.content.appendChild(widget);\n          }\n          builder.pos += size;\n          builder.trailingSpace = false;\n        }\n\n        // Outputs a number of spans to make up a line, taking highlighting\n        // and marked text into account.\n        function insertLineContent(line, builder, styles) {\n          var spans = line.markedSpans,\n              allText = line.text,\n              at = 0;\n          if (!spans) {\n            for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n              builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n            }\n            return;\n          }\n\n          var len = allText.length,\n              pos = 0,\n              i = 1,\n              text = \"\",\n              style,\n              css;\n          var nextChange = 0,\n              spanStyle,\n              spanEndStyle,\n              spanStartStyle,\n              title,\n              collapsed;\n          for (;;) {\n            if (nextChange == pos) {\n              // Update current marker set\n              spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n              collapsed = null;nextChange = Infinity;\n              var foundBookmarks = [],\n                  endStyles = void 0;\n              for (var j = 0; j < spans.length; ++j) {\n                var sp = spans[j],\n                    m = sp.marker;\n                if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n                  foundBookmarks.push(m);\n                } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n                  if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n                    nextChange = sp.to;\n                    spanEndStyle = \"\";\n                  }\n                  if (m.className) {\n                    spanStyle += \" \" + m.className;\n                  }\n                  if (m.css) {\n                    css = (css ? css + \";\" : \"\") + m.css;\n                  }\n                  if (m.startStyle && sp.from == pos) {\n                    spanStartStyle += \" \" + m.startStyle;\n                  }\n                  if (m.endStyle && sp.to == nextChange) {\n                    (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n                  }\n                  if (m.title && !title) {\n                    title = m.title;\n                  }\n                  if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n                    collapsed = sp;\n                  }\n                } else if (sp.from > pos && nextChange > sp.from) {\n                  nextChange = sp.from;\n                }\n              }\n              if (endStyles) {\n                for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n                  if (endStyles[j$1 + 1] == nextChange) {\n                    spanEndStyle += \" \" + endStyles[j$1];\n                  }\n                }\n              }\n\n              if (!collapsed || collapsed.from == pos) {\n                for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n                  buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n                }\n              }\n              if (collapsed && (collapsed.from || 0) == pos) {\n                buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n                if (collapsed.to == null) {\n                  return;\n                }\n                if (collapsed.to == pos) {\n                  collapsed = false;\n                }\n              }\n            }\n            if (pos >= len) {\n              break;\n            }\n\n            var upto = Math.min(len, nextChange);\n            while (true) {\n              if (text) {\n                var end = pos + text.length;\n                if (!collapsed) {\n                  var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n                  builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n                }\n                if (end >= upto) {\n                  text = text.slice(upto - pos);pos = upto;break;\n                }\n                pos = end;\n                spanStartStyle = \"\";\n              }\n              text = allText.slice(at, at = styles[i++]);\n              style = interpretTokenStyle(styles[i++], builder.cm.options);\n            }\n          }\n        }\n\n        // These objects are used to represent the visible (currently drawn)\n        // part of the document. A LineView may correspond to multiple\n        // logical lines, if those are connected by collapsed ranges.\n        function LineView(doc, line, lineN) {\n          // The starting line\n          this.line = line;\n          // Continuing lines, if any\n          this.rest = visualLineContinued(line);\n          // Number of logical lines in this visual line\n          this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n          this.node = this.text = null;\n          this.hidden = lineIsHidden(doc, line);\n        }\n\n        // Create a range of LineView objects for the given lines.\n        function buildViewArray(cm, from, to) {\n          var array = [],\n              nextPos;\n          for (var pos = from; pos < to; pos = nextPos) {\n            var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n            nextPos = pos + view.size;\n            array.push(view);\n          }\n          return array;\n        }\n\n        var operationGroup = null;\n\n        function pushOperation(op) {\n          if (operationGroup) {\n            operationGroup.ops.push(op);\n          } else {\n            op.ownsGroup = operationGroup = {\n              ops: [op],\n              delayedCallbacks: []\n            };\n          }\n        }\n\n        function fireCallbacksForOps(group) {\n          // Calls delayed callbacks and cursorActivity handlers until no\n          // new ones appear\n          var callbacks = group.delayedCallbacks,\n              i = 0;\n          do {\n            for (; i < callbacks.length; i++) {\n              callbacks[i].call(null);\n            }\n            for (var j = 0; j < group.ops.length; j++) {\n              var op = group.ops[j];\n              if (op.cursorActivityHandlers) {\n                while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n                  op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n                }\n              }\n            }\n          } while (i < callbacks.length);\n        }\n\n        function finishOperation(op, endCb) {\n          var group = op.ownsGroup;\n          if (!group) {\n            return;\n          }\n\n          try {\n            fireCallbacksForOps(group);\n          } finally {\n            operationGroup = null;\n            endCb(group);\n          }\n        }\n\n        var orphanDelayedCallbacks = null;\n\n        // Often, we want to signal events at a point where we are in the\n        // middle of some work, but don't want the handler to start calling\n        // other methods on the editor, which might be in an inconsistent\n        // state or simply not expect any other events to happen.\n        // signalLater looks whether there are any handlers, and schedules\n        // them to be executed when the last operation ends, or, if no\n        // operation is active, when a timeout fires.\n        function signalLater(emitter, type /*, values...*/) {\n          var arr = getHandlers(emitter, type);\n          if (!arr.length) {\n            return;\n          }\n          var args = Array.prototype.slice.call(arguments, 2),\n              list;\n          if (operationGroup) {\n            list = operationGroup.delayedCallbacks;\n          } else if (orphanDelayedCallbacks) {\n            list = orphanDelayedCallbacks;\n          } else {\n            list = orphanDelayedCallbacks = [];\n            setTimeout(fireOrphanDelayed, 0);\n          }\n          var loop = function loop(i) {\n            list.push(function () {\n              return arr[i].apply(null, args);\n            });\n          };\n\n          for (var i = 0; i < arr.length; ++i) {\n            loop(i);\n          }\n        }\n\n        function fireOrphanDelayed() {\n          var delayed = orphanDelayedCallbacks;\n          orphanDelayedCallbacks = null;\n          for (var i = 0; i < delayed.length; ++i) {\n            delayed[i]();\n          }\n        }\n\n        // When an aspect of a line changes, a string is added to\n        // lineView.changes. This updates the relevant part of the line's\n        // DOM structure.\n        function updateLineForChanges(cm, lineView, lineN, dims) {\n          for (var j = 0; j < lineView.changes.length; j++) {\n            var type = lineView.changes[j];\n            if (type == \"text\") {\n              updateLineText(cm, lineView);\n            } else if (type == \"gutter\") {\n              updateLineGutter(cm, lineView, lineN, dims);\n            } else if (type == \"class\") {\n              updateLineClasses(cm, lineView);\n            } else if (type == \"widget\") {\n              updateLineWidgets(cm, lineView, dims);\n            }\n          }\n          lineView.changes = null;\n        }\n\n        // Lines with gutter elements, widgets or a background class need to\n        // be wrapped, and have the extra elements added to the wrapper div\n        function ensureLineWrapped(lineView) {\n          if (lineView.node == lineView.text) {\n            lineView.node = elt(\"div\", null, null, \"position: relative\");\n            if (lineView.text.parentNode) {\n              lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n            }\n            lineView.node.appendChild(lineView.text);\n            if (ie && ie_version < 8) {\n              lineView.node.style.zIndex = 2;\n            }\n          }\n          return lineView.node;\n        }\n\n        function updateLineBackground(cm, lineView) {\n          var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n          if (cls) {\n            cls += \" CodeMirror-linebackground\";\n          }\n          if (lineView.background) {\n            if (cls) {\n              lineView.background.className = cls;\n            } else {\n              lineView.background.parentNode.removeChild(lineView.background);lineView.background = null;\n            }\n          } else if (cls) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n            cm.display.input.setUneditable(lineView.background);\n          }\n        }\n\n        // Wrapper around buildLineContent which will reuse the structure\n        // in display.externalMeasured when possible.\n        function getLineContent(cm, lineView) {\n          var ext = cm.display.externalMeasured;\n          if (ext && ext.line == lineView.line) {\n            cm.display.externalMeasured = null;\n            lineView.measure = ext.measure;\n            return ext.built;\n          }\n          return buildLineContent(cm, lineView);\n        }\n\n        // Redraw the line's text. Interacts with the background and text\n        // classes because the mode may output tokens that influence these\n        // classes.\n        function updateLineText(cm, lineView) {\n          var cls = lineView.text.className;\n          var built = getLineContent(cm, lineView);\n          if (lineView.text == lineView.node) {\n            lineView.node = built.pre;\n          }\n          lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n          lineView.text = built.pre;\n          if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n            lineView.bgClass = built.bgClass;\n            lineView.textClass = built.textClass;\n            updateLineClasses(cm, lineView);\n          } else if (cls) {\n            lineView.text.className = cls;\n          }\n        }\n\n        function updateLineClasses(cm, lineView) {\n          updateLineBackground(cm, lineView);\n          if (lineView.line.wrapClass) {\n            ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n          } else if (lineView.node != lineView.text) {\n            lineView.node.className = \"\";\n          }\n          var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n          lineView.text.className = textClass || \"\";\n        }\n\n        function updateLineGutter(cm, lineView, lineN, dims) {\n          if (lineView.gutter) {\n            lineView.node.removeChild(lineView.gutter);\n            lineView.gutter = null;\n          }\n          if (lineView.gutterBackground) {\n            lineView.node.removeChild(lineView.gutterBackground);\n            lineView.gutterBackground = null;\n          }\n          if (lineView.line.gutterClass) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n            cm.display.input.setUneditable(lineView.gutterBackground);\n            wrap.insertBefore(lineView.gutterBackground, lineView.text);\n          }\n          var markers = lineView.line.gutterMarkers;\n          if (cm.options.lineNumbers || markers) {\n            var wrap$1 = ensureLineWrapped(lineView);\n            var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n            cm.display.input.setUneditable(gutterWrap);\n            wrap$1.insertBefore(gutterWrap, lineView.text);\n            if (lineView.line.gutterClass) {\n              gutterWrap.className += \" \" + lineView.line.gutterClass;\n            }\n            if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n              lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n            }\n            if (markers) {\n              for (var k = 0; k < cm.options.gutters.length; ++k) {\n                var id = cm.options.gutters[k],\n                    found = markers.hasOwnProperty(id) && markers[id];\n                if (found) {\n                  gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n                }\n              }\n            }\n          }\n        }\n\n        function updateLineWidgets(cm, lineView, dims) {\n          if (lineView.alignable) {\n            lineView.alignable = null;\n          }\n          for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n            next = node.nextSibling;\n            if (node.className == \"CodeMirror-linewidget\") {\n              lineView.node.removeChild(node);\n            }\n          }\n          insertLineWidgets(cm, lineView, dims);\n        }\n\n        // Build a line's DOM representation from scratch\n        function buildLineElement(cm, lineView, lineN, dims) {\n          var built = getLineContent(cm, lineView);\n          lineView.text = lineView.node = built.pre;\n          if (built.bgClass) {\n            lineView.bgClass = built.bgClass;\n          }\n          if (built.textClass) {\n            lineView.textClass = built.textClass;\n          }\n\n          updateLineClasses(cm, lineView);\n          updateLineGutter(cm, lineView, lineN, dims);\n          insertLineWidgets(cm, lineView, dims);\n          return lineView.node;\n        }\n\n        // A lineView may contain multiple logical lines (when merged by\n        // collapsed spans). The widgets for all of them need to be drawn.\n        function insertLineWidgets(cm, lineView, dims) {\n          insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n          if (lineView.rest) {\n            for (var i = 0; i < lineView.rest.length; i++) {\n              insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n            }\n          }\n        }\n\n        function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n          if (!line.widgets) {\n            return;\n          }\n          var wrap = ensureLineWrapped(lineView);\n          for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n            var widget = ws[i],\n                node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n            if (!widget.handleMouseEvents) {\n              node.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            positionLineWidget(widget, node, lineView, dims);\n            cm.display.input.setUneditable(node);\n            if (allowAbove && widget.above) {\n              wrap.insertBefore(node, lineView.gutter || lineView.text);\n            } else {\n              wrap.appendChild(node);\n            }\n            signalLater(widget, \"redraw\");\n          }\n        }\n\n        function positionLineWidget(widget, node, lineView, dims) {\n          if (widget.noHScroll) {\n            (lineView.alignable || (lineView.alignable = [])).push(node);\n            var width = dims.wrapperWidth;\n            node.style.left = dims.fixedPos + \"px\";\n            if (!widget.coverGutter) {\n              width -= dims.gutterTotalWidth;\n              node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n            }\n            node.style.width = width + \"px\";\n          }\n          if (widget.coverGutter) {\n            node.style.zIndex = 5;\n            node.style.position = \"relative\";\n            if (!widget.noHScroll) {\n              node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n            }\n          }\n        }\n\n        function widgetHeight(widget) {\n          if (widget.height != null) {\n            return widget.height;\n          }\n          var cm = widget.doc.cm;\n          if (!cm) {\n            return 0;\n          }\n          if (!contains(document.body, widget.node)) {\n            var parentStyle = \"position: relative;\";\n            if (widget.coverGutter) {\n              parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n            }\n            if (widget.noHScroll) {\n              parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n            }\n            removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n          }\n          return widget.height = widget.node.parentNode.offsetHeight;\n        }\n\n        // Return true when the given mouse event happened in a widget\n        function eventInWidget(display, e) {\n          for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n            if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n              return true;\n            }\n          }\n        }\n\n        // POSITION MEASUREMENT\n\n        function paddingTop(display) {\n          return display.lineSpace.offsetTop;\n        }\n        function paddingVert(display) {\n          return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n        }\n        function paddingH(display) {\n          if (display.cachedPaddingH) {\n            return display.cachedPaddingH;\n          }\n          var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n          var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n          var data = { left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight) };\n          if (!isNaN(data.left) && !isNaN(data.right)) {\n            display.cachedPaddingH = data;\n          }\n          return data;\n        }\n\n        function scrollGap(cm) {\n          return scrollerGap - cm.display.nativeBarWidth;\n        }\n        function displayWidth(cm) {\n          return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n        }\n        function displayHeight(cm) {\n          return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n        }\n\n        // Ensure the lineView.wrapping.heights array is populated. This is\n        // an array of bottom offsets for the lines that make up a drawn\n        // line. When lineWrapping is on, there might be more than one\n        // height.\n        function ensureLineHeights(cm, lineView, rect) {\n          var wrapping = cm.options.lineWrapping;\n          var curWidth = wrapping && displayWidth(cm);\n          if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n            var heights = lineView.measure.heights = [];\n            if (wrapping) {\n              lineView.measure.width = curWidth;\n              var rects = lineView.text.firstChild.getClientRects();\n              for (var i = 0; i < rects.length - 1; i++) {\n                var cur = rects[i],\n                    next = rects[i + 1];\n                if (Math.abs(cur.bottom - next.bottom) > 2) {\n                  heights.push((cur.bottom + next.top) / 2 - rect.top);\n                }\n              }\n            }\n            heights.push(rect.bottom - rect.top);\n          }\n        }\n\n        // Find a line map (mapping character offsets to text nodes) and a\n        // measurement cache for the given line number. (A line view might\n        // contain multiple lines when collapsed ranges are present.)\n        function mapFromLineView(lineView, line, lineN) {\n          if (lineView.line == line) {\n            return { map: lineView.measure.map, cache: lineView.measure.cache };\n          }\n          for (var i = 0; i < lineView.rest.length; i++) {\n            if (lineView.rest[i] == line) {\n              return { map: lineView.measure.maps[i], cache: lineView.measure.caches[i] };\n            }\n          }\n          for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n            if (lineNo(lineView.rest[i$1]) > lineN) {\n              return { map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true };\n            }\n          }\n        }\n\n        // Render a line into the hidden node display.externalMeasured. Used\n        // when measurement is needed for a line that's not in the viewport.\n        function updateExternalMeasurement(cm, line) {\n          line = visualLine(line);\n          var lineN = lineNo(line);\n          var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n          view.lineN = lineN;\n          var built = view.built = buildLineContent(cm, view);\n          view.text = built.pre;\n          removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n          return view;\n        }\n\n        // Get a {top, bottom, left, right} box (in line-local coordinates)\n        // for a given character.\n        function measureChar(cm, line, ch, bias) {\n          return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n        }\n\n        // Find a line view that corresponds to the given line number.\n        function findViewForLine(cm, lineN) {\n          if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n            return cm.display.view[findViewIndex(cm, lineN)];\n          }\n          var ext = cm.display.externalMeasured;\n          if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n            return ext;\n          }\n        }\n\n        // Measurement can be split in two steps, the set-up work that\n        // applies to the whole line, and the measurement of the actual\n        // character. Functions like coordsChar, that need to do a lot of\n        // measurements in a row, can thus ensure that the set-up work is\n        // only done once.\n        function prepareMeasureForLine(cm, line) {\n          var lineN = lineNo(line);\n          var view = findViewForLine(cm, lineN);\n          if (view && !view.text) {\n            view = null;\n          } else if (view && view.changes) {\n            updateLineForChanges(cm, view, lineN, getDimensions(cm));\n            cm.curOp.forceUpdate = true;\n          }\n          if (!view) {\n            view = updateExternalMeasurement(cm, line);\n          }\n\n          var info = mapFromLineView(view, line, lineN);\n          return {\n            line: line, view: view, rect: null,\n            map: info.map, cache: info.cache, before: info.before,\n            hasHeights: false\n          };\n        }\n\n        // Given a prepared measurement object, measures the position of an\n        // actual character (or fetches it from the cache).\n        function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n          if (prepared.before) {\n            ch = -1;\n          }\n          var key = ch + (bias || \"\"),\n              found;\n          if (prepared.cache.hasOwnProperty(key)) {\n            found = prepared.cache[key];\n          } else {\n            if (!prepared.rect) {\n              prepared.rect = prepared.view.text.getBoundingClientRect();\n            }\n            if (!prepared.hasHeights) {\n              ensureLineHeights(cm, prepared.view, prepared.rect);\n              prepared.hasHeights = true;\n            }\n            found = measureCharInner(cm, prepared, ch, bias);\n            if (!found.bogus) {\n              prepared.cache[key] = found;\n            }\n          }\n          return { left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom };\n        }\n\n        var nullRect = { left: 0, right: 0, top: 0, bottom: 0 };\n\n        function nodeAndOffsetInLineMap(map$$1, ch, bias) {\n          var node, start, end, collapse, mStart, mEnd;\n          // First, search the line map for the text node corresponding to,\n          // or closest to, the target character.\n          for (var i = 0; i < map$$1.length; i += 3) {\n            mStart = map$$1[i];\n            mEnd = map$$1[i + 1];\n            if (ch < mStart) {\n              start = 0;end = 1;\n              collapse = \"left\";\n            } else if (ch < mEnd) {\n              start = ch - mStart;\n              end = start + 1;\n            } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n              end = mEnd - mStart;\n              start = end - 1;\n              if (ch >= mEnd) {\n                collapse = \"right\";\n              }\n            }\n            if (start != null) {\n              node = map$$1[i + 2];\n              if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n                collapse = bias;\n              }\n              if (bias == \"left\" && start == 0) {\n                while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n                  node = map$$1[(i -= 3) + 2];\n                  collapse = \"left\";\n                }\n              }\n              if (bias == \"right\" && start == mEnd - mStart) {\n                while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n                  node = map$$1[(i += 3) + 2];\n                  collapse = \"right\";\n                }\n              }\n              break;\n            }\n          }\n          return { node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd };\n        }\n\n        function getUsefulRect(rects, bias) {\n          var rect = nullRect;\n          if (bias == \"left\") {\n            for (var i = 0; i < rects.length; i++) {\n              if ((rect = rects[i]).left != rect.right) {\n                break;\n              }\n            }\n          } else {\n            for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n              if ((rect = rects[i$1]).left != rect.right) {\n                break;\n              }\n            }\n          }\n          return rect;\n        }\n\n        function measureCharInner(cm, prepared, ch, bias) {\n          var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n          var node = place.node,\n              start = place.start,\n              end = place.end,\n              collapse = place.collapse;\n\n          var rect;\n          if (node.nodeType == 3) {\n            // If it is a text node, use a range to retrieve the coordinates.\n            for (var i$1 = 0; i$1 < 4; i$1++) {\n              // Retry a maximum of 4 times when nonsense rectangles are returned\n              while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n                --start;\n              }\n              while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n                ++end;\n              }\n              if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n                rect = node.parentNode.getBoundingClientRect();\n              } else {\n                rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n              }\n              if (rect.left || rect.right || start == 0) {\n                break;\n              }\n              end = start;\n              start = start - 1;\n              collapse = \"right\";\n            }\n            if (ie && ie_version < 11) {\n              rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n            }\n          } else {\n            // If it is a widget, simply get the box for the whole widget.\n            if (start > 0) {\n              collapse = bias = \"right\";\n            }\n            var rects;\n            if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n              rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n            } else {\n              rect = node.getBoundingClientRect();\n            }\n          }\n          if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n            var rSpan = node.parentNode.getClientRects()[0];\n            if (rSpan) {\n              rect = { left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom };\n            } else {\n              rect = nullRect;\n            }\n          }\n\n          var rtop = rect.top - prepared.rect.top,\n              rbot = rect.bottom - prepared.rect.top;\n          var mid = (rtop + rbot) / 2;\n          var heights = prepared.view.measure.heights;\n          var i = 0;\n          for (; i < heights.length - 1; i++) {\n            if (mid < heights[i]) {\n              break;\n            }\n          }\n          var top = i ? heights[i - 1] : 0,\n              bot = heights[i];\n          var result = { left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n            right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n            top: top, bottom: bot };\n          if (!rect.left && !rect.right) {\n            result.bogus = true;\n          }\n          if (!cm.options.singleCursorHeightPerLine) {\n            result.rtop = rtop;result.rbottom = rbot;\n          }\n\n          return result;\n        }\n\n        // Work around problem with bounding client rects on ranges being\n        // returned incorrectly when zoomed on IE10 and below.\n        function maybeUpdateRectForZooming(measure, rect) {\n          if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n            return rect;\n          }\n          var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n          var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n          return { left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY };\n        }\n\n        function clearLineMeasurementCacheFor(lineView) {\n          if (lineView.measure) {\n            lineView.measure.cache = {};\n            lineView.measure.heights = null;\n            if (lineView.rest) {\n              for (var i = 0; i < lineView.rest.length; i++) {\n                lineView.measure.caches[i] = {};\n              }\n            }\n          }\n        }\n\n        function clearLineMeasurementCache(cm) {\n          cm.display.externalMeasure = null;\n          removeChildren(cm.display.lineMeasure);\n          for (var i = 0; i < cm.display.view.length; i++) {\n            clearLineMeasurementCacheFor(cm.display.view[i]);\n          }\n        }\n\n        function clearCaches(cm) {\n          clearLineMeasurementCache(cm);\n          cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n          if (!cm.options.lineWrapping) {\n            cm.display.maxLineChanged = true;\n          }\n          cm.display.lineNumChars = null;\n        }\n\n        function pageScrollX() {\n          // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n          // which causes page_Offset and bounding client rects to use\n          // different reference viewports and invalidate our calculations.\n          if (chrome && android) {\n            return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n          }\n          return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n        }\n        function pageScrollY() {\n          if (chrome && android) {\n            return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n          }\n          return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n        }\n\n        // Converts a {top, bottom, left, right} box from line-local\n        // coordinates into another coordinate system. Context may be one of\n        // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n        // or \"page\".\n        function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n          if (!includeWidgets && lineObj.widgets) {\n            for (var i = 0; i < lineObj.widgets.length; ++i) {\n              if (lineObj.widgets[i].above) {\n                var size = widgetHeight(lineObj.widgets[i]);\n                rect.top += size;rect.bottom += size;\n              }\n            }\n          }\n          if (context == \"line\") {\n            return rect;\n          }\n          if (!context) {\n            context = \"local\";\n          }\n          var yOff = _heightAtLine(lineObj);\n          if (context == \"local\") {\n            yOff += paddingTop(cm.display);\n          } else {\n            yOff -= cm.display.viewOffset;\n          }\n          if (context == \"page\" || context == \"window\") {\n            var lOff = cm.display.lineSpace.getBoundingClientRect();\n            yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n            var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n            rect.left += xOff;rect.right += xOff;\n          }\n          rect.top += yOff;rect.bottom += yOff;\n          return rect;\n        }\n\n        // Coverts a box from \"div\" coords to another coordinate system.\n        // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n        function fromCoordSystem(cm, coords, context) {\n          if (context == \"div\") {\n            return coords;\n          }\n          var left = coords.left,\n              top = coords.top;\n          // First move into \"page\" coordinate system\n          if (context == \"page\") {\n            left -= pageScrollX();\n            top -= pageScrollY();\n          } else if (context == \"local\" || !context) {\n            var localBox = cm.display.sizer.getBoundingClientRect();\n            left += localBox.left;\n            top += localBox.top;\n          }\n\n          var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n          return { left: left - lineSpaceBox.left, top: top - lineSpaceBox.top };\n        }\n\n        function _charCoords(cm, pos, context, lineObj, bias) {\n          if (!lineObj) {\n            lineObj = getLine(cm.doc, pos.line);\n          }\n          return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n        }\n\n        // Returns a box for a given cursor position, which may have an\n        // 'other' property containing the position of the secondary cursor\n        // on a bidi boundary.\n        // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n        // and after `char - 1` in writing order of `char - 1`\n        // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n        // and before `char` in writing order of `char`\n        // Examples (upper-case letters are RTL, lower-case are LTR):\n        //     Pos(0, 1, ...)\n        //     before   after\n        // ab     a|b     a|b\n        // aB     a|B     aB|\n        // Ab     |Ab     A|b\n        // AB     B|A     B|A\n        // Every position after the last character on a line is considered to stick\n        // to the last character on the line.\n        function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n          lineObj = lineObj || getLine(cm.doc, pos.line);\n          if (!preparedMeasure) {\n            preparedMeasure = prepareMeasureForLine(cm, lineObj);\n          }\n          function get(ch, right) {\n            var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n            if (right) {\n              m.left = m.right;\n            } else {\n              m.right = m.left;\n            }\n            return intoCoordSystem(cm, lineObj, m, context);\n          }\n          var order = getOrder(lineObj, cm.doc.direction),\n              ch = pos.ch,\n              sticky = pos.sticky;\n          if (ch >= lineObj.text.length) {\n            ch = lineObj.text.length;\n            sticky = \"before\";\n          } else if (ch <= 0) {\n            ch = 0;\n            sticky = \"after\";\n          }\n          if (!order) {\n            return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n          }\n\n          function getBidi(ch, partPos, invert) {\n            var part = order[partPos],\n                right = part.level % 2 != 0;\n            return get(invert ? ch - 1 : ch, right != invert);\n          }\n          var partPos = getBidiPartAt(order, ch, sticky);\n          var other = bidiOther;\n          var val = getBidi(ch, partPos, sticky == \"before\");\n          if (other != null) {\n            val.other = getBidi(ch, other, sticky != \"before\");\n          }\n          return val;\n        }\n\n        // Used to cheaply estimate the coordinates for a position. Used for\n        // intermediate scroll updates.\n        function estimateCoords(cm, pos) {\n          var left = 0;\n          pos = _clipPos(cm.doc, pos);\n          if (!cm.options.lineWrapping) {\n            left = charWidth(cm.display) * pos.ch;\n          }\n          var lineObj = getLine(cm.doc, pos.line);\n          var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n          return { left: left, right: left, top: top, bottom: top + lineObj.height };\n        }\n\n        // Positions returned by coordsChar contain some extra information.\n        // xRel is the relative x position of the input coordinates compared\n        // to the found position (so xRel > 0 means the coordinates are to\n        // the right of the character position, for example). When outside\n        // is true, that means the coordinates lie outside the line's\n        // vertical range.\n        function PosWithInfo(line, ch, sticky, outside, xRel) {\n          var pos = Pos(line, ch, sticky);\n          pos.xRel = xRel;\n          if (outside) {\n            pos.outside = true;\n          }\n          return pos;\n        }\n\n        // Compute the character position closest to the given coordinates.\n        // Input must be lineSpace-local (\"div\" coordinate system).\n        function _coordsChar(cm, x, y) {\n          var doc = cm.doc;\n          y += cm.display.viewOffset;\n          if (y < 0) {\n            return PosWithInfo(doc.first, 0, null, true, -1);\n          }\n          var lineN = _lineAtHeight(doc, y),\n              last = doc.first + doc.size - 1;\n          if (lineN > last) {\n            return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1);\n          }\n          if (x < 0) {\n            x = 0;\n          }\n\n          var lineObj = getLine(doc, lineN);\n          for (;;) {\n            var found = coordsCharInner(cm, lineObj, lineN, x, y);\n            var merged = collapsedSpanAtEnd(lineObj);\n            var mergedPos = merged && merged.find(0, true);\n            if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0)) {\n              lineN = lineNo(lineObj = mergedPos.to.line);\n            } else {\n              return found;\n            }\n          }\n        }\n\n        function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n          var measure = function measure(ch) {\n            return intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n          };\n          var end = lineObj.text.length;\n          var begin = findFirst(function (ch) {\n            return measure(ch - 1).bottom <= y;\n          }, end, 0);\n          end = findFirst(function (ch) {\n            return measure(ch).top > y;\n          }, begin, end);\n          return { begin: begin, end: end };\n        }\n\n        function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n          var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n          return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n        }\n\n        function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n          y -= _heightAtLine(lineObj);\n          var begin = 0,\n              end = lineObj.text.length;\n          var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n          var pos;\n          var order = getOrder(lineObj, cm.doc.direction);\n          if (order) {\n            if (cm.options.lineWrapping) {\n              var assign;\n              assign = wrappedLineExtent(cm, lineObj, preparedMeasure, y), begin = assign.begin, end = assign.end, assign;\n            }\n            pos = new Pos(lineNo$$1, Math.floor(begin + (end - begin) / 2));\n            var beginLeft = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left;\n            var dir = beginLeft < x ? 1 : -1;\n            var prevDiff,\n                diff = beginLeft - x,\n                prevPos;\n            var steps = Math.ceil((end - begin) / 4);\n            outer: do {\n              prevDiff = diff;\n              prevPos = pos;\n              var i = 0;\n              for (; i < steps; ++i) {\n                var prevPos$1 = pos;\n                pos = moveVisually(cm, lineObj, pos, dir);\n                if (pos == null || pos.ch < begin || end <= (pos.sticky == \"before\" ? pos.ch - 1 : pos.ch)) {\n                  pos = prevPos$1;\n                  break outer;\n                }\n              }\n              diff = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left - x;\n              if (steps > 1) {\n                var diff_change_per_step = Math.abs(diff - prevDiff) / steps;\n                steps = Math.min(steps, Math.ceil(Math.abs(diff) / diff_change_per_step));\n                dir = diff < 0 ? 1 : -1;\n              }\n            } while (diff != 0 && (steps > 1 || dir < 0 != diff < 0 && Math.abs(diff) <= Math.abs(prevDiff)));\n            if (Math.abs(diff) > Math.abs(prevDiff)) {\n              if (diff < 0 == prevDiff < 0) {\n                throw new Error(\"Broke out of infinite loop in coordsCharInner\");\n              }\n              pos = prevPos;\n            }\n          } else {\n            var ch = findFirst(function (ch) {\n              var box = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n              if (box.top > y) {\n                // For the cursor stickiness\n                end = Math.min(ch, end);\n                return true;\n              } else if (box.bottom <= y) {\n                return false;\n              } else if (box.left > x) {\n                return true;\n              } else if (box.right < x) {\n                return false;\n              } else {\n                return x - box.left < box.right - x;\n              }\n            }, begin, end);\n            ch = skipExtendingChars(lineObj.text, ch, 1);\n            pos = new Pos(lineNo$$1, ch, ch == end ? \"before\" : \"after\");\n          }\n          var coords = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure);\n          if (y < coords.top || coords.bottom < y) {\n            pos.outside = true;\n          }\n          pos.xRel = x < coords.left ? -1 : x > coords.right ? 1 : 0;\n          return pos;\n        }\n\n        var measureText;\n        // Compute the default text height.\n        function textHeight(display) {\n          if (display.cachedTextHeight != null) {\n            return display.cachedTextHeight;\n          }\n          if (measureText == null) {\n            measureText = elt(\"pre\");\n            // Measure a bunch of lines, for browsers that compute\n            // fractional heights.\n            for (var i = 0; i < 49; ++i) {\n              measureText.appendChild(document.createTextNode(\"x\"));\n              measureText.appendChild(elt(\"br\"));\n            }\n            measureText.appendChild(document.createTextNode(\"x\"));\n          }\n          removeChildrenAndAdd(display.measure, measureText);\n          var height = measureText.offsetHeight / 50;\n          if (height > 3) {\n            display.cachedTextHeight = height;\n          }\n          removeChildren(display.measure);\n          return height || 1;\n        }\n\n        // Compute the default character width.\n        function charWidth(display) {\n          if (display.cachedCharWidth != null) {\n            return display.cachedCharWidth;\n          }\n          var anchor = elt(\"span\", \"xxxxxxxxxx\");\n          var pre = elt(\"pre\", [anchor]);\n          removeChildrenAndAdd(display.measure, pre);\n          var rect = anchor.getBoundingClientRect(),\n              width = (rect.right - rect.left) / 10;\n          if (width > 2) {\n            display.cachedCharWidth = width;\n          }\n          return width || 10;\n        }\n\n        // Do a bulk-read of the DOM positions and sizes needed to draw the\n        // view, so that we don't interleave reading and writing to the DOM.\n        function getDimensions(cm) {\n          var d = cm.display,\n              left = {},\n              width = {};\n          var gutterLeft = d.gutters.clientLeft;\n          for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n            left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n            width[cm.options.gutters[i]] = n.clientWidth;\n          }\n          return { fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth };\n        }\n\n        // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n        // but using getBoundingClientRect to get a sub-pixel-accurate\n        // result.\n        function compensateForHScroll(display) {\n          return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n        }\n\n        // Returns a function that estimates the height of a line, to use as\n        // first approximation until the line becomes visible (and is thus\n        // properly measurable).\n        function estimateHeight(cm) {\n          var th = textHeight(cm.display),\n              wrapping = cm.options.lineWrapping;\n          var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n          return function (line) {\n            if (lineIsHidden(cm.doc, line)) {\n              return 0;\n            }\n\n            var widgetsHeight = 0;\n            if (line.widgets) {\n              for (var i = 0; i < line.widgets.length; i++) {\n                if (line.widgets[i].height) {\n                  widgetsHeight += line.widgets[i].height;\n                }\n              }\n            }\n\n            if (wrapping) {\n              return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n            } else {\n              return widgetsHeight + th;\n            }\n          };\n        }\n\n        function estimateLineHeights(cm) {\n          var doc = cm.doc,\n              est = estimateHeight(cm);\n          doc.iter(function (line) {\n            var estHeight = est(line);\n            if (estHeight != line.height) {\n              updateLineHeight(line, estHeight);\n            }\n          });\n        }\n\n        // Given a mouse event, find the corresponding position. If liberal\n        // is false, it checks whether a gutter or scrollbar was clicked,\n        // and returns null if it was. forRect is used by rectangular\n        // selections, and tries to estimate a character position even for\n        // coordinates beyond the right of the text.\n        function posFromMouse(cm, e, liberal, forRect) {\n          var display = cm.display;\n          if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n            return null;\n          }\n\n          var x,\n              y,\n              space = display.lineSpace.getBoundingClientRect();\n          // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n          try {\n            x = e.clientX - space.left;y = e.clientY - space.top;\n          } catch (e) {\n            return null;\n          }\n          var coords = _coordsChar(cm, x, y),\n              line;\n          if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n            var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n            coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n          }\n          return coords;\n        }\n\n        // Find the view element corresponding to a given line. Return null\n        // when the line isn't visible.\n        function findViewIndex(cm, n) {\n          if (n >= cm.display.viewTo) {\n            return null;\n          }\n          n -= cm.display.viewFrom;\n          if (n < 0) {\n            return null;\n          }\n          var view = cm.display.view;\n          for (var i = 0; i < view.length; i++) {\n            n -= view[i].size;\n            if (n < 0) {\n              return i;\n            }\n          }\n        }\n\n        function updateSelection(cm) {\n          cm.display.input.showSelection(cm.display.input.prepareSelection());\n        }\n\n        function prepareSelection(cm, primary) {\n          var doc = cm.doc,\n              result = {};\n          var curFragment = result.cursors = document.createDocumentFragment();\n          var selFragment = result.selection = document.createDocumentFragment();\n\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            if (primary === false && i == doc.sel.primIndex) {\n              continue;\n            }\n            var range$$1 = doc.sel.ranges[i];\n            if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) {\n              continue;\n            }\n            var collapsed = range$$1.empty();\n            if (collapsed || cm.options.showCursorWhenSelecting) {\n              drawSelectionCursor(cm, range$$1.head, curFragment);\n            }\n            if (!collapsed) {\n              drawSelectionRange(cm, range$$1, selFragment);\n            }\n          }\n          return result;\n        }\n\n        // Draws a cursor for the given range\n        function drawSelectionCursor(cm, head, output) {\n          var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n          var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n          cursor.style.left = pos.left + \"px\";\n          cursor.style.top = pos.top + \"px\";\n          cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n          if (pos.other) {\n            // Secondary cursor, shown when on a 'jump' in bi-directional text\n            var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n            otherCursor.style.display = \"\";\n            otherCursor.style.left = pos.other.left + \"px\";\n            otherCursor.style.top = pos.other.top + \"px\";\n            otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n          }\n        }\n\n        // Draws the given range as a highlighted selection\n        function drawSelectionRange(cm, range$$1, output) {\n          var display = cm.display,\n              doc = cm.doc;\n          var fragment = document.createDocumentFragment();\n          var padding = paddingH(cm.display),\n              leftSide = padding.left;\n          var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n\n          function add(left, top, width, bottom) {\n            if (top < 0) {\n              top = 0;\n            }\n            top = Math.round(top);\n            bottom = Math.round(bottom);\n            fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n          }\n\n          function drawForLine(line, fromArg, toArg) {\n            var lineObj = getLine(doc, line);\n            var lineLen = lineObj.text.length;\n            var start, end;\n            function coords(ch, bias) {\n              return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n            }\n\n            iterateBidiSections(getOrder(lineObj, doc.direction), fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir) {\n              var leftPos = coords(from, \"left\"),\n                  rightPos,\n                  left,\n                  right;\n              if (from == to) {\n                rightPos = leftPos;\n                left = right = leftPos.left;\n              } else {\n                rightPos = coords(to - 1, \"right\");\n                if (dir == \"rtl\") {\n                  var tmp = leftPos;leftPos = rightPos;rightPos = tmp;\n                }\n                left = leftPos.left;\n                right = rightPos.right;\n              }\n              if (fromArg == null && from == 0) {\n                left = leftSide;\n              }\n              if (rightPos.top - leftPos.top > 3) {\n                // Different lines, draw top part\n                add(left, leftPos.top, null, leftPos.bottom);\n                left = leftSide;\n                if (leftPos.bottom < rightPos.top) {\n                  add(left, leftPos.bottom, null, rightPos.top);\n                }\n              }\n              if (toArg == null && to == lineLen) {\n                right = rightSide;\n              }\n              if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left) {\n                start = leftPos;\n              }\n              if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right) {\n                end = rightPos;\n              }\n              if (left < leftSide + 1) {\n                left = leftSide;\n              }\n              add(left, rightPos.top, right - left, rightPos.bottom);\n            });\n            return { start: start, end: end };\n          }\n\n          var sFrom = range$$1.from(),\n              sTo = range$$1.to();\n          if (sFrom.line == sTo.line) {\n            drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n          } else {\n            var fromLine = getLine(doc, sFrom.line),\n                toLine = getLine(doc, sTo.line);\n            var singleVLine = visualLine(fromLine) == visualLine(toLine);\n            var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n            var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n            if (singleVLine) {\n              if (leftEnd.top < rightStart.top - 2) {\n                add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n                add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n              } else {\n                add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n              }\n            }\n            if (leftEnd.bottom < rightStart.top) {\n              add(leftSide, leftEnd.bottom, null, rightStart.top);\n            }\n          }\n\n          output.appendChild(fragment);\n        }\n\n        // Cursor-blinking\n        function restartBlink(cm) {\n          if (!cm.state.focused) {\n            return;\n          }\n          var display = cm.display;\n          clearInterval(display.blinker);\n          var on = true;\n          display.cursorDiv.style.visibility = \"\";\n          if (cm.options.cursorBlinkRate > 0) {\n            display.blinker = setInterval(function () {\n              return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n            }, cm.options.cursorBlinkRate);\n          } else if (cm.options.cursorBlinkRate < 0) {\n            display.cursorDiv.style.visibility = \"hidden\";\n          }\n        }\n\n        function ensureFocus(cm) {\n          if (!cm.state.focused) {\n            cm.display.input.focus();onFocus(cm);\n          }\n        }\n\n        function delayBlurEvent(cm) {\n          cm.state.delayingBlurEvent = true;\n          setTimeout(function () {\n            if (cm.state.delayingBlurEvent) {\n              cm.state.delayingBlurEvent = false;\n              onBlur(cm);\n            }\n          }, 100);\n        }\n\n        function onFocus(cm, e) {\n          if (cm.state.delayingBlurEvent) {\n            cm.state.delayingBlurEvent = false;\n          }\n\n          if (cm.options.readOnly == \"nocursor\") {\n            return;\n          }\n          if (!cm.state.focused) {\n            signal(cm, \"focus\", cm, e);\n            cm.state.focused = true;\n            addClass(cm.display.wrapper, \"CodeMirror-focused\");\n            // This test prevents this from firing when a context\n            // menu is closed (since the input reset would kill the\n            // select-all detection hack)\n            if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n              cm.display.input.reset();\n              if (webkit) {\n                setTimeout(function () {\n                  return cm.display.input.reset(true);\n                }, 20);\n              } // Issue #1730\n            }\n            cm.display.input.receivedFocus();\n          }\n          restartBlink(cm);\n        }\n        function onBlur(cm, e) {\n          if (cm.state.delayingBlurEvent) {\n            return;\n          }\n\n          if (cm.state.focused) {\n            signal(cm, \"blur\", cm, e);\n            cm.state.focused = false;\n            rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n          }\n          clearInterval(cm.display.blinker);\n          setTimeout(function () {\n            if (!cm.state.focused) {\n              cm.display.shift = false;\n            }\n          }, 150);\n        }\n\n        // Read the actual heights of the rendered lines, and update their\n        // stored heights to match.\n        function updateHeightsInViewport(cm) {\n          var display = cm.display;\n          var prevBottom = display.lineDiv.offsetTop;\n          for (var i = 0; i < display.view.length; i++) {\n            var cur = display.view[i],\n                height = void 0;\n            if (cur.hidden) {\n              continue;\n            }\n            if (ie && ie_version < 8) {\n              var bot = cur.node.offsetTop + cur.node.offsetHeight;\n              height = bot - prevBottom;\n              prevBottom = bot;\n            } else {\n              var box = cur.node.getBoundingClientRect();\n              height = box.bottom - box.top;\n            }\n            var diff = cur.line.height - height;\n            if (height < 2) {\n              height = textHeight(display);\n            }\n            if (diff > .005 || diff < -.005) {\n              updateLineHeight(cur.line, height);\n              updateWidgetHeight(cur.line);\n              if (cur.rest) {\n                for (var j = 0; j < cur.rest.length; j++) {\n                  updateWidgetHeight(cur.rest[j]);\n                }\n              }\n            }\n          }\n        }\n\n        // Read and store the height of line widgets associated with the\n        // given line.\n        function updateWidgetHeight(line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; ++i) {\n              line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;\n            }\n          }\n        }\n\n        // Compute the lines that are visible in a given viewport (defaults\n        // the the current scroll position). viewport may contain top,\n        // height, and ensure (see op.scrollToPos) properties.\n        function visibleLines(display, doc, viewport) {\n          var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n          top = Math.floor(top - paddingTop(display));\n          var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n          var from = _lineAtHeight(doc, top),\n              to = _lineAtHeight(doc, bottom);\n          // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n          // forces those lines into the viewport (if possible).\n          if (viewport && viewport.ensure) {\n            var ensureFrom = viewport.ensure.from.line,\n                ensureTo = viewport.ensure.to.line;\n            if (ensureFrom < from) {\n              from = ensureFrom;\n              to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n            } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n              from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n              to = ensureTo;\n            }\n          }\n          return { from: from, to: Math.max(to, from + 1) };\n        }\n\n        // Re-align line numbers and gutter marks to compensate for\n        // horizontal scrolling.\n        function alignHorizontally(cm) {\n          var display = cm.display,\n              view = display.view;\n          if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n            return;\n          }\n          var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n          var gutterW = display.gutters.offsetWidth,\n              left = comp + \"px\";\n          for (var i = 0; i < view.length; i++) {\n            if (!view[i].hidden) {\n              if (cm.options.fixedGutter) {\n                if (view[i].gutter) {\n                  view[i].gutter.style.left = left;\n                }\n                if (view[i].gutterBackground) {\n                  view[i].gutterBackground.style.left = left;\n                }\n              }\n              var align = view[i].alignable;\n              if (align) {\n                for (var j = 0; j < align.length; j++) {\n                  align[j].style.left = left;\n                }\n              }\n            }\n          }\n          if (cm.options.fixedGutter) {\n            display.gutters.style.left = comp + gutterW + \"px\";\n          }\n        }\n\n        // Used to ensure that the line number gutter is still the right\n        // size for the current document size. Returns true when an update\n        // is needed.\n        function maybeUpdateLineNumberWidth(cm) {\n          if (!cm.options.lineNumbers) {\n            return false;\n          }\n          var doc = cm.doc,\n              last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n              display = cm.display;\n          if (last.length != display.lineNumChars) {\n            var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n            var innerW = test.firstChild.offsetWidth,\n                padding = test.offsetWidth - innerW;\n            display.lineGutter.style.width = \"\";\n            display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n            display.lineNumWidth = display.lineNumInnerWidth + padding;\n            display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n            display.lineGutter.style.width = display.lineNumWidth + \"px\";\n            updateGutterSpace(cm);\n            return true;\n          }\n          return false;\n        }\n\n        // SCROLLING THINGS INTO VIEW\n\n        // If an editor sits on the top or bottom of the window, partially\n        // scrolled out of view, this ensures that the cursor is visible.\n        function maybeScrollWindow(cm, rect) {\n          if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n            return;\n          }\n\n          var display = cm.display,\n              box = display.sizer.getBoundingClientRect(),\n              doScroll = null;\n          if (rect.top + box.top < 0) {\n            doScroll = true;\n          } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n            doScroll = false;\n          }\n          if (doScroll != null && !phantom) {\n            var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n            cm.display.lineSpace.appendChild(scrollNode);\n            scrollNode.scrollIntoView(doScroll);\n            cm.display.lineSpace.removeChild(scrollNode);\n          }\n        }\n\n        // Scroll a given position into view (immediately), verifying that\n        // it actually became visible (as line heights are accurately\n        // measured, the position of something may 'drift' during drawing).\n        function scrollPosIntoView(cm, pos, end, margin) {\n          if (margin == null) {\n            margin = 0;\n          }\n          var rect;\n          if (!cm.options.lineWrapping && pos == end) {\n            // Set pos and end to the cursor positions around the character pos sticks to\n            // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n            // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n            pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n            end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n          }\n          for (var limit = 0; limit < 5; limit++) {\n            var changed = false;\n            var coords = _cursorCoords(cm, pos);\n            var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n            rect = { left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin };\n            var scrollPos = calculateScrollPos(cm, rect);\n            var startTop = cm.doc.scrollTop,\n                startLeft = cm.doc.scrollLeft;\n            if (scrollPos.scrollTop != null) {\n              updateScrollTop(cm, scrollPos.scrollTop);\n              if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n                changed = true;\n              }\n            }\n            if (scrollPos.scrollLeft != null) {\n              setScrollLeft(cm, scrollPos.scrollLeft);\n              if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n                changed = true;\n              }\n            }\n            if (!changed) {\n              break;\n            }\n          }\n          return rect;\n        }\n\n        // Scroll a given set of coordinates into view (immediately).\n        function scrollIntoView(cm, rect) {\n          var scrollPos = calculateScrollPos(cm, rect);\n          if (scrollPos.scrollTop != null) {\n            updateScrollTop(cm, scrollPos.scrollTop);\n          }\n          if (scrollPos.scrollLeft != null) {\n            setScrollLeft(cm, scrollPos.scrollLeft);\n          }\n        }\n\n        // Calculate a new scroll position needed to scroll the given\n        // rectangle into view. Returns an object with scrollTop and\n        // scrollLeft properties. When these are undefined, the\n        // vertical/horizontal position does not need to be adjusted.\n        function calculateScrollPos(cm, rect) {\n          var display = cm.display,\n              snapMargin = textHeight(cm.display);\n          if (rect.top < 0) {\n            rect.top = 0;\n          }\n          var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n          var screen = displayHeight(cm),\n              result = {};\n          if (rect.bottom - rect.top > screen) {\n            rect.bottom = rect.top + screen;\n          }\n          var docBottom = cm.doc.height + paddingVert(display);\n          var atTop = rect.top < snapMargin,\n              atBottom = rect.bottom > docBottom - snapMargin;\n          if (rect.top < screentop) {\n            result.scrollTop = atTop ? 0 : rect.top;\n          } else if (rect.bottom > screentop + screen) {\n            var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n            if (newTop != screentop) {\n              result.scrollTop = newTop;\n            }\n          }\n\n          var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n          var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n          var tooWide = rect.right - rect.left > screenw;\n          if (tooWide) {\n            rect.right = rect.left + screenw;\n          }\n          if (rect.left < 10) {\n            result.scrollLeft = 0;\n          } else if (rect.left < screenleft) {\n            result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n          } else if (rect.right > screenw + screenleft - 3) {\n            result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n          }\n          return result;\n        }\n\n        // Store a relative adjustment to the scroll position in the current\n        // operation (to be applied when the operation finishes).\n        function addToScrollTop(cm, top) {\n          if (top == null) {\n            return;\n          }\n          resolveScrollToPos(cm);\n          cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n        }\n\n        // Make sure that at the end of the operation the current cursor is\n        // shown.\n        function ensureCursorVisible(cm) {\n          resolveScrollToPos(cm);\n          var cur = cm.getCursor();\n          cm.curOp.scrollToPos = { from: cur, to: cur, margin: cm.options.cursorScrollMargin };\n        }\n\n        function scrollToCoords(cm, x, y) {\n          if (x != null || y != null) {\n            resolveScrollToPos(cm);\n          }\n          if (x != null) {\n            cm.curOp.scrollLeft = x;\n          }\n          if (y != null) {\n            cm.curOp.scrollTop = y;\n          }\n        }\n\n        function scrollToRange(cm, range$$1) {\n          resolveScrollToPos(cm);\n          cm.curOp.scrollToPos = range$$1;\n        }\n\n        // When an operation has its scrollToPos property set, and another\n        // scroll action is applied before the end of the operation, this\n        // 'simulates' scrolling that position into view in a cheap way, so\n        // that the effect of intermediate scroll commands is not ignored.\n        function resolveScrollToPos(cm) {\n          var range$$1 = cm.curOp.scrollToPos;\n          if (range$$1) {\n            cm.curOp.scrollToPos = null;\n            var from = estimateCoords(cm, range$$1.from),\n                to = estimateCoords(cm, range$$1.to);\n            scrollToCoordsRange(cm, from, to, range$$1.margin);\n          }\n        }\n\n        function scrollToCoordsRange(cm, from, to, margin) {\n          var sPos = calculateScrollPos(cm, {\n            left: Math.min(from.left, to.left),\n            top: Math.min(from.top, to.top) - margin,\n            right: Math.max(from.right, to.right),\n            bottom: Math.max(from.bottom, to.bottom) + margin\n          });\n          scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n        }\n\n        // Sync the scrollable area and scrollbars, ensure the viewport\n        // covers the visible area.\n        function updateScrollTop(cm, val) {\n          if (Math.abs(cm.doc.scrollTop - val) < 2) {\n            return;\n          }\n          if (!gecko) {\n            updateDisplaySimple(cm, { top: val });\n          }\n          setScrollTop(cm, val, true);\n          if (gecko) {\n            updateDisplaySimple(cm);\n          }\n          startWorker(cm, 100);\n        }\n\n        function setScrollTop(cm, val, forceScroll) {\n          val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n          if (cm.display.scroller.scrollTop == val && !forceScroll) {\n            return;\n          }\n          cm.doc.scrollTop = val;\n          cm.display.scrollbars.setScrollTop(val);\n          if (cm.display.scroller.scrollTop != val) {\n            cm.display.scroller.scrollTop = val;\n          }\n        }\n\n        // Sync scroller and scrollbar, ensure the gutter elements are\n        // aligned.\n        function setScrollLeft(cm, val, isScroller, forceScroll) {\n          val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n          if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n            return;\n          }\n          cm.doc.scrollLeft = val;\n          alignHorizontally(cm);\n          if (cm.display.scroller.scrollLeft != val) {\n            cm.display.scroller.scrollLeft = val;\n          }\n          cm.display.scrollbars.setScrollLeft(val);\n        }\n\n        // SCROLLBARS\n\n        // Prepare DOM reads needed to update the scrollbars. Done in one\n        // shot to minimize update/measure roundtrips.\n        function measureForScrollbars(cm) {\n          var d = cm.display,\n              gutterW = d.gutters.offsetWidth;\n          var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n          return {\n            clientHeight: d.scroller.clientHeight,\n            viewHeight: d.wrapper.clientHeight,\n            scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n            viewWidth: d.wrapper.clientWidth,\n            barLeft: cm.options.fixedGutter ? gutterW : 0,\n            docHeight: docH,\n            scrollHeight: docH + scrollGap(cm) + d.barHeight,\n            nativeBarWidth: d.nativeBarWidth,\n            gutterWidth: gutterW\n          };\n        }\n\n        var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n          this.cm = cm;\n          var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n          var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n          place(vert);place(horiz);\n\n          on(vert, \"scroll\", function () {\n            if (vert.clientHeight) {\n              scroll(vert.scrollTop, \"vertical\");\n            }\n          });\n          on(horiz, \"scroll\", function () {\n            if (horiz.clientWidth) {\n              scroll(horiz.scrollLeft, \"horizontal\");\n            }\n          });\n\n          this.checkedZeroWidth = false;\n          // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n          if (ie && ie_version < 8) {\n            this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n          }\n        };\n\n        NativeScrollbars.prototype.update = function (measure) {\n          var needsH = measure.scrollWidth > measure.clientWidth + 1;\n          var needsV = measure.scrollHeight > measure.clientHeight + 1;\n          var sWidth = measure.nativeBarWidth;\n\n          if (needsV) {\n            this.vert.style.display = \"block\";\n            this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n            var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n            // A bug in IE8 can cause this value to be negative, so guard it.\n            this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n          } else {\n            this.vert.style.display = \"\";\n            this.vert.firstChild.style.height = \"0\";\n          }\n\n          if (needsH) {\n            this.horiz.style.display = \"block\";\n            this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n            this.horiz.style.left = measure.barLeft + \"px\";\n            var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n            this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n          } else {\n            this.horiz.style.display = \"\";\n            this.horiz.firstChild.style.width = \"0\";\n          }\n\n          if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n            if (sWidth == 0) {\n              this.zeroWidthHack();\n            }\n            this.checkedZeroWidth = true;\n          }\n\n          return { right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0 };\n        };\n\n        NativeScrollbars.prototype.setScrollLeft = function (pos) {\n          if (this.horiz.scrollLeft != pos) {\n            this.horiz.scrollLeft = pos;\n          }\n          if (this.disableHoriz) {\n            this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n          }\n        };\n\n        NativeScrollbars.prototype.setScrollTop = function (pos) {\n          if (this.vert.scrollTop != pos) {\n            this.vert.scrollTop = pos;\n          }\n          if (this.disableVert) {\n            this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n          }\n        };\n\n        NativeScrollbars.prototype.zeroWidthHack = function () {\n          var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n          this.horiz.style.height = this.vert.style.width = w;\n          this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n          this.disableHoriz = new Delayed();\n          this.disableVert = new Delayed();\n        };\n\n        NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n          bar.style.pointerEvents = \"auto\";\n          function maybeDisable() {\n            // To find out whether the scrollbar is still visible, we\n            // check whether the element under the pixel in the bottom\n            // right corner of the scrollbar box is the scrollbar box\n            // itself (when the bar is still visible) or its filler child\n            // (when the bar is hidden). If it is still visible, we keep\n            // it enabled, if it's hidden, we disable pointer events.\n            var box = bar.getBoundingClientRect();\n            var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n            if (elt$$1 != bar) {\n              bar.style.pointerEvents = \"none\";\n            } else {\n              delay.set(1000, maybeDisable);\n            }\n          }\n          delay.set(1000, maybeDisable);\n        };\n\n        NativeScrollbars.prototype.clear = function () {\n          var parent = this.horiz.parentNode;\n          parent.removeChild(this.horiz);\n          parent.removeChild(this.vert);\n        };\n\n        var NullScrollbars = function NullScrollbars() {};\n\n        NullScrollbars.prototype.update = function () {\n          return { bottom: 0, right: 0 };\n        };\n        NullScrollbars.prototype.setScrollLeft = function () {};\n        NullScrollbars.prototype.setScrollTop = function () {};\n        NullScrollbars.prototype.clear = function () {};\n\n        function updateScrollbars(cm, measure) {\n          if (!measure) {\n            measure = measureForScrollbars(cm);\n          }\n          var startWidth = cm.display.barWidth,\n              startHeight = cm.display.barHeight;\n          updateScrollbarsInner(cm, measure);\n          for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n            if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n              updateHeightsInViewport(cm);\n            }\n            updateScrollbarsInner(cm, measureForScrollbars(cm));\n            startWidth = cm.display.barWidth;startHeight = cm.display.barHeight;\n          }\n        }\n\n        // Re-synchronize the fake scrollbars with the actual size of the\n        // content.\n        function updateScrollbarsInner(cm, measure) {\n          var d = cm.display;\n          var sizes = d.scrollbars.update(measure);\n\n          d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n          d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n          d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n          if (sizes.right && sizes.bottom) {\n            d.scrollbarFiller.style.display = \"block\";\n            d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n            d.scrollbarFiller.style.width = sizes.right + \"px\";\n          } else {\n            d.scrollbarFiller.style.display = \"\";\n          }\n          if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n            d.gutterFiller.style.display = \"block\";\n            d.gutterFiller.style.height = sizes.bottom + \"px\";\n            d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n          } else {\n            d.gutterFiller.style.display = \"\";\n          }\n        }\n\n        var scrollbarModel = { \"native\": NativeScrollbars, \"null\": NullScrollbars };\n\n        function initScrollbars(cm) {\n          if (cm.display.scrollbars) {\n            cm.display.scrollbars.clear();\n            if (cm.display.scrollbars.addClass) {\n              rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n            }\n          }\n\n          cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n            cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n            // Prevent clicks in the scrollbars from killing focus\n            on(node, \"mousedown\", function () {\n              if (cm.state.focused) {\n                setTimeout(function () {\n                  return cm.display.input.focus();\n                }, 0);\n              }\n            });\n            node.setAttribute(\"cm-not-content\", \"true\");\n          }, function (pos, axis) {\n            if (axis == \"horizontal\") {\n              setScrollLeft(cm, pos);\n            } else {\n              updateScrollTop(cm, pos);\n            }\n          }, cm);\n          if (cm.display.scrollbars.addClass) {\n            addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n          }\n        }\n\n        // Operations are used to wrap a series of changes to the editor\n        // state in such a way that each change won't have to update the\n        // cursor and display (which would be awkward, slow, and\n        // error-prone). Instead, display updates are batched and then all\n        // combined and executed at once.\n\n        var nextOpId = 0;\n        // Start a new operation.\n        function _startOperation(cm) {\n          cm.curOp = {\n            cm: cm,\n            viewChanged: false, // Flag that indicates that lines might need to be redrawn\n            startHeight: cm.doc.height, // Used to detect need to update scrollbar\n            forceUpdate: false, // Used to force a redraw\n            updateInput: null, // Whether to reset the input textarea\n            typing: false, // Whether this reset should be careful to leave existing text (for compositing)\n            changeObjs: null, // Accumulated changes, for firing change events\n            cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n            cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n            selectionChanged: false, // Whether the selection needs to be redrawn\n            updateMaxLine: false, // Set when the widest line needs to be determined anew\n            scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n            scrollToPos: null, // Used to scroll to a specific position\n            focus: false,\n            id: ++nextOpId // Unique ID\n          };\n          pushOperation(cm.curOp);\n        }\n\n        // Finish an operation, updating the display and signalling delayed events\n        function _endOperation(cm) {\n          var op = cm.curOp;\n          finishOperation(op, function (group) {\n            for (var i = 0; i < group.ops.length; i++) {\n              group.ops[i].cm.curOp = null;\n            }\n            endOperations(group);\n          });\n        }\n\n        // The DOM updates done when an operation finishes are batched so\n        // that the minimum number of relayouts are required.\n        function endOperations(group) {\n          var ops = group.ops;\n          for (var i = 0; i < ops.length; i++) // Read DOM\n          {\n            endOperation_R1(ops[i]);\n          }\n          for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n          {\n            endOperation_W1(ops[i$1]);\n          }\n          for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n          {\n            endOperation_R2(ops[i$2]);\n          }\n          for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n          {\n            endOperation_W2(ops[i$3]);\n          }\n          for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n          {\n            endOperation_finish(ops[i$4]);\n          }\n        }\n\n        function endOperation_R1(op) {\n          var cm = op.cm,\n              display = cm.display;\n          maybeClipScrollbars(cm);\n          if (op.updateMaxLine) {\n            findMaxLine(cm);\n          }\n\n          op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n          op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && { top: op.scrollTop, ensure: op.scrollToPos }, op.forceUpdate);\n        }\n\n        function endOperation_W1(op) {\n          op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n        }\n\n        function endOperation_R2(op) {\n          var cm = op.cm,\n              display = cm.display;\n          if (op.updatedDisplay) {\n            updateHeightsInViewport(cm);\n          }\n\n          op.barMeasure = measureForScrollbars(cm);\n\n          // If the max line changed since it was last measured, measure it,\n          // and ensure the document's width matches it.\n          // updateDisplay_W2 will use these properties to do the actual resizing\n          if (display.maxLineChanged && !cm.options.lineWrapping) {\n            op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n            cm.display.sizerWidth = op.adjustWidthTo;\n            op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n            op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n          }\n\n          if (op.updatedDisplay || op.selectionChanged) {\n            op.preparedSelection = display.input.prepareSelection(op.focus);\n          }\n        }\n\n        function endOperation_W2(op) {\n          var cm = op.cm;\n\n          if (op.adjustWidthTo != null) {\n            cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n            if (op.maxScrollLeft < cm.doc.scrollLeft) {\n              setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n            }\n            cm.display.maxLineChanged = false;\n          }\n\n          var takeFocus = op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus());\n          if (op.preparedSelection) {\n            cm.display.input.showSelection(op.preparedSelection, takeFocus);\n          }\n          if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n            updateScrollbars(cm, op.barMeasure);\n          }\n          if (op.updatedDisplay) {\n            setDocumentHeight(cm, op.barMeasure);\n          }\n\n          if (op.selectionChanged) {\n            restartBlink(cm);\n          }\n\n          if (cm.state.focused && op.updateInput) {\n            cm.display.input.reset(op.typing);\n          }\n          if (takeFocus) {\n            ensureFocus(op.cm);\n          }\n        }\n\n        function endOperation_finish(op) {\n          var cm = op.cm,\n              display = cm.display,\n              doc = cm.doc;\n\n          if (op.updatedDisplay) {\n            postUpdateDisplay(cm, op.update);\n          }\n\n          // Abort mouse wheel delta measurement, when scrolling explicitly\n          if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n            display.wheelStartX = display.wheelStartY = null;\n          }\n\n          // Propagate the scroll position to the actual DOM scroller\n          if (op.scrollTop != null) {\n            setScrollTop(cm, op.scrollTop, op.forceScroll);\n          }\n\n          if (op.scrollLeft != null) {\n            setScrollLeft(cm, op.scrollLeft, true, true);\n          }\n          // If we need to scroll a specific position into view, do so.\n          if (op.scrollToPos) {\n            var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n            maybeScrollWindow(cm, rect);\n          }\n\n          // Fire events for markers that are hidden/unidden by editing or\n          // undoing\n          var hidden = op.maybeHiddenMarkers,\n              unhidden = op.maybeUnhiddenMarkers;\n          if (hidden) {\n            for (var i = 0; i < hidden.length; ++i) {\n              if (!hidden[i].lines.length) {\n                signal(hidden[i], \"hide\");\n              }\n            }\n          }\n          if (unhidden) {\n            for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n              if (unhidden[i$1].lines.length) {\n                signal(unhidden[i$1], \"unhide\");\n              }\n            }\n          }\n\n          if (display.wrapper.offsetHeight) {\n            doc.scrollTop = cm.display.scroller.scrollTop;\n          }\n\n          // Fire change events, and delayed event handlers\n          if (op.changeObjs) {\n            signal(cm, \"changes\", cm, op.changeObjs);\n          }\n          if (op.update) {\n            op.update.finish();\n          }\n        }\n\n        // Run the given function in an operation\n        function runInOp(cm, f) {\n          if (cm.curOp) {\n            return f();\n          }\n          _startOperation(cm);\n          try {\n            return f();\n          } finally {\n            _endOperation(cm);\n          }\n        }\n        // Wraps a function in an operation. Returns the wrapped function.\n        function operation(cm, f) {\n          return function () {\n            if (cm.curOp) {\n              return f.apply(cm, arguments);\n            }\n            _startOperation(cm);\n            try {\n              return f.apply(cm, arguments);\n            } finally {\n              _endOperation(cm);\n            }\n          };\n        }\n        // Used to add methods to editor and doc instances, wrapping them in\n        // operations.\n        function methodOp(f) {\n          return function () {\n            if (this.curOp) {\n              return f.apply(this, arguments);\n            }\n            _startOperation(this);\n            try {\n              return f.apply(this, arguments);\n            } finally {\n              _endOperation(this);\n            }\n          };\n        }\n        function docMethodOp(f) {\n          return function () {\n            var cm = this.cm;\n            if (!cm || cm.curOp) {\n              return f.apply(this, arguments);\n            }\n            _startOperation(cm);\n            try {\n              return f.apply(this, arguments);\n            } finally {\n              _endOperation(cm);\n            }\n          };\n        }\n\n        // Updates the display.view data structure for a given change to the\n        // document. From and to are in pre-change coordinates. Lendiff is\n        // the amount of lines added or subtracted by the change. This is\n        // used for changes that span multiple lines, or change the way\n        // lines are divided into visual lines. regLineChange (below)\n        // registers single-line changes.\n        function regChange(cm, from, to, lendiff) {\n          if (from == null) {\n            from = cm.doc.first;\n          }\n          if (to == null) {\n            to = cm.doc.first + cm.doc.size;\n          }\n          if (!lendiff) {\n            lendiff = 0;\n          }\n\n          var display = cm.display;\n          if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n            display.updateLineNumbers = from;\n          }\n\n          cm.curOp.viewChanged = true;\n\n          if (from >= display.viewTo) {\n            // Change after\n            if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n              resetView(cm);\n            }\n          } else if (to <= display.viewFrom) {\n            // Change before\n            if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n              resetView(cm);\n            } else {\n              display.viewFrom += lendiff;\n              display.viewTo += lendiff;\n            }\n          } else if (from <= display.viewFrom && to >= display.viewTo) {\n            // Full overlap\n            resetView(cm);\n          } else if (from <= display.viewFrom) {\n            // Top overlap\n            var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cut) {\n              display.view = display.view.slice(cut.index);\n              display.viewFrom = cut.lineN;\n              display.viewTo += lendiff;\n            } else {\n              resetView(cm);\n            }\n          } else if (to >= display.viewTo) {\n            // Bottom overlap\n            var cut$1 = viewCuttingPoint(cm, from, from, -1);\n            if (cut$1) {\n              display.view = display.view.slice(0, cut$1.index);\n              display.viewTo = cut$1.lineN;\n            } else {\n              resetView(cm);\n            }\n          } else {\n            // Gap in the middle\n            var cutTop = viewCuttingPoint(cm, from, from, -1);\n            var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cutTop && cutBot) {\n              display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n              display.viewTo += lendiff;\n            } else {\n              resetView(cm);\n            }\n          }\n\n          var ext = display.externalMeasured;\n          if (ext) {\n            if (to < ext.lineN) {\n              ext.lineN += lendiff;\n            } else if (from < ext.lineN + ext.size) {\n              display.externalMeasured = null;\n            }\n          }\n        }\n\n        // Register a change to a single line. Type must be one of \"text\",\n        // \"gutter\", \"class\", \"widget\"\n        function regLineChange(cm, line, type) {\n          cm.curOp.viewChanged = true;\n          var display = cm.display,\n              ext = cm.display.externalMeasured;\n          if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n            display.externalMeasured = null;\n          }\n\n          if (line < display.viewFrom || line >= display.viewTo) {\n            return;\n          }\n          var lineView = display.view[findViewIndex(cm, line)];\n          if (lineView.node == null) {\n            return;\n          }\n          var arr = lineView.changes || (lineView.changes = []);\n          if (indexOf(arr, type) == -1) {\n            arr.push(type);\n          }\n        }\n\n        // Clear the view.\n        function resetView(cm) {\n          cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n          cm.display.view = [];\n          cm.display.viewOffset = 0;\n        }\n\n        function viewCuttingPoint(cm, oldN, newN, dir) {\n          var index = findViewIndex(cm, oldN),\n              diff,\n              view = cm.display.view;\n          if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n            return { index: index, lineN: newN };\n          }\n          var n = cm.display.viewFrom;\n          for (var i = 0; i < index; i++) {\n            n += view[i].size;\n          }\n          if (n != oldN) {\n            if (dir > 0) {\n              if (index == view.length - 1) {\n                return null;\n              }\n              diff = n + view[index].size - oldN;\n              index++;\n            } else {\n              diff = n - oldN;\n            }\n            oldN += diff;newN += diff;\n          }\n          while (visualLineNo(cm.doc, newN) != newN) {\n            if (index == (dir < 0 ? 0 : view.length - 1)) {\n              return null;\n            }\n            newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n            index += dir;\n          }\n          return { index: index, lineN: newN };\n        }\n\n        // Force the view to cover a given range, adding empty view element\n        // or clipping off existing ones as needed.\n        function adjustView(cm, from, to) {\n          var display = cm.display,\n              view = display.view;\n          if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n            display.view = buildViewArray(cm, from, to);\n            display.viewFrom = from;\n          } else {\n            if (display.viewFrom > from) {\n              display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n            } else if (display.viewFrom < from) {\n              display.view = display.view.slice(findViewIndex(cm, from));\n            }\n            display.viewFrom = from;\n            if (display.viewTo < to) {\n              display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n            } else if (display.viewTo > to) {\n              display.view = display.view.slice(0, findViewIndex(cm, to));\n            }\n          }\n          display.viewTo = to;\n        }\n\n        // Count the number of lines in the view whose DOM representation is\n        // out of date (or nonexistent).\n        function countDirtyView(cm) {\n          var view = cm.display.view,\n              dirty = 0;\n          for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n              ++dirty;\n            }\n          }\n          return dirty;\n        }\n\n        // HIGHLIGHT WORKER\n\n        function startWorker(cm, time) {\n          if (cm.doc.highlightFrontier < cm.display.viewTo) {\n            cm.state.highlight.set(time, bind(highlightWorker, cm));\n          }\n        }\n\n        function highlightWorker(cm) {\n          var doc = cm.doc;\n          if (doc.highlightFrontier >= cm.display.viewTo) {\n            return;\n          }\n          var end = +new Date() + cm.options.workTime;\n          var context = getContextBefore(cm, doc.highlightFrontier);\n          var changedLines = [];\n\n          doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n            if (context.line >= cm.display.viewFrom) {\n              // Visible\n              var oldStyles = line.styles;\n              var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n              var highlighted = highlightLine(cm, line, context, true);\n              if (resetState) {\n                context.state = resetState;\n              }\n              line.styles = highlighted.styles;\n              var oldCls = line.styleClasses,\n                  newCls = highlighted.classes;\n              if (newCls) {\n                line.styleClasses = newCls;\n              } else if (oldCls) {\n                line.styleClasses = null;\n              }\n              var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n              for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n                ischange = oldStyles[i] != line.styles[i];\n              }\n              if (ischange) {\n                changedLines.push(context.line);\n              }\n              line.stateAfter = context.save();\n              context.nextLine();\n            } else {\n              if (line.text.length <= cm.options.maxHighlightLength) {\n                processLine(cm, line.text, context);\n              }\n              line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n              context.nextLine();\n            }\n            if (+new Date() > end) {\n              startWorker(cm, cm.options.workDelay);\n              return true;\n            }\n          });\n          doc.highlightFrontier = context.line;\n          doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n          if (changedLines.length) {\n            runInOp(cm, function () {\n              for (var i = 0; i < changedLines.length; i++) {\n                regLineChange(cm, changedLines[i], \"text\");\n              }\n            });\n          }\n        }\n\n        // DISPLAY DRAWING\n\n        var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n          var display = cm.display;\n\n          this.viewport = viewport;\n          // Store some values that we'll need later (but don't want to force a relayout for)\n          this.visible = visibleLines(display, cm.doc, viewport);\n          this.editorIsHidden = !display.wrapper.offsetWidth;\n          this.wrapperHeight = display.wrapper.clientHeight;\n          this.wrapperWidth = display.wrapper.clientWidth;\n          this.oldDisplayWidth = displayWidth(cm);\n          this.force = force;\n          this.dims = getDimensions(cm);\n          this.events = [];\n        };\n\n        DisplayUpdate.prototype.signal = function (emitter, type) {\n          if (hasHandler(emitter, type)) {\n            this.events.push(arguments);\n          }\n        };\n        DisplayUpdate.prototype.finish = function () {\n          var this$1 = this;\n\n          for (var i = 0; i < this.events.length; i++) {\n            signal.apply(null, this$1.events[i]);\n          }\n        };\n\n        function maybeClipScrollbars(cm) {\n          var display = cm.display;\n          if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n            display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n            display.heightForcer.style.height = scrollGap(cm) + \"px\";\n            display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n            display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n            display.scrollbarsClipped = true;\n          }\n        }\n\n        function selectionSnapshot(cm) {\n          if (cm.hasFocus()) {\n            return null;\n          }\n          var active = activeElt();\n          if (!active || !contains(cm.display.lineDiv, active)) {\n            return null;\n          }\n          var result = { activeElt: active };\n          if (window.getSelection) {\n            var sel = window.getSelection();\n            if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n              result.anchorNode = sel.anchorNode;\n              result.anchorOffset = sel.anchorOffset;\n              result.focusNode = sel.focusNode;\n              result.focusOffset = sel.focusOffset;\n            }\n          }\n          return result;\n        }\n\n        function restoreSelection(snapshot) {\n          if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n            return;\n          }\n          snapshot.activeElt.focus();\n          if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n            var sel = window.getSelection(),\n                range$$1 = document.createRange();\n            range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n            range$$1.collapse(false);\n            sel.removeAllRanges();\n            sel.addRange(range$$1);\n            sel.extend(snapshot.focusNode, snapshot.focusOffset);\n          }\n        }\n\n        // Does the actual updating of the line display. Bails out\n        // (returning false) when there is nothing to be done and forced is\n        // false.\n        function updateDisplayIfNeeded(cm, update) {\n          var display = cm.display,\n              doc = cm.doc;\n\n          if (update.editorIsHidden) {\n            resetView(cm);\n            return false;\n          }\n\n          // Bail out if the visible area is already rendered and nothing changed.\n          if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n            return false;\n          }\n\n          if (maybeUpdateLineNumberWidth(cm)) {\n            resetView(cm);\n            update.dims = getDimensions(cm);\n          }\n\n          // Compute a suitable new viewport (from & to)\n          var end = doc.first + doc.size;\n          var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n          var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n          if (display.viewFrom < from && from - display.viewFrom < 20) {\n            from = Math.max(doc.first, display.viewFrom);\n          }\n          if (display.viewTo > to && display.viewTo - to < 20) {\n            to = Math.min(end, display.viewTo);\n          }\n          if (sawCollapsedSpans) {\n            from = visualLineNo(cm.doc, from);\n            to = visualLineEndNo(cm.doc, to);\n          }\n\n          var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n          adjustView(cm, from, to);\n\n          display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom));\n          // Position the mover div to align with the current scroll position\n          cm.display.mover.style.top = display.viewOffset + \"px\";\n\n          var toUpdate = countDirtyView(cm);\n          if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n            return false;\n          }\n\n          // For big changes, we hide the enclosing element during the\n          // update, since that speeds up the operations on most browsers.\n          var selSnapshot = selectionSnapshot(cm);\n          if (toUpdate > 4) {\n            display.lineDiv.style.display = \"none\";\n          }\n          patchDisplay(cm, display.updateLineNumbers, update.dims);\n          if (toUpdate > 4) {\n            display.lineDiv.style.display = \"\";\n          }\n          display.renderedView = display.view;\n          // There might have been a widget with a focused element that got\n          // hidden or updated, if so re-focus it.\n          restoreSelection(selSnapshot);\n\n          // Prevent selection and cursors from interfering with the scroll\n          // width and height.\n          removeChildren(display.cursorDiv);\n          removeChildren(display.selectionDiv);\n          display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n          if (different) {\n            display.lastWrapHeight = update.wrapperHeight;\n            display.lastWrapWidth = update.wrapperWidth;\n            startWorker(cm, 400);\n          }\n\n          display.updateLineNumbers = null;\n\n          return true;\n        }\n\n        function postUpdateDisplay(cm, update) {\n          var viewport = update.viewport;\n\n          for (var first = true;; first = false) {\n            if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n              // Clip forced viewport to actual scrollable area.\n              if (viewport && viewport.top != null) {\n                viewport = { top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top) };\n              }\n              // Updated line heights might result in the drawn area not\n              // actually covering the viewport. Keep looping until it does.\n              update.visible = visibleLines(cm.display, cm.doc, viewport);\n              if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n                break;\n              }\n            }\n            if (!updateDisplayIfNeeded(cm, update)) {\n              break;\n            }\n            updateHeightsInViewport(cm);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.force = false;\n          }\n\n          update.signal(cm, \"update\", cm);\n          if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n            update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n            cm.display.reportedViewFrom = cm.display.viewFrom;cm.display.reportedViewTo = cm.display.viewTo;\n          }\n        }\n\n        function updateDisplaySimple(cm, viewport) {\n          var update = new DisplayUpdate(cm, viewport);\n          if (updateDisplayIfNeeded(cm, update)) {\n            updateHeightsInViewport(cm);\n            postUpdateDisplay(cm, update);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.finish();\n          }\n        }\n\n        // Sync the actual display DOM structure with display.view, removing\n        // nodes for lines that are no longer in view, and creating the ones\n        // that are not there yet, and updating the ones that are out of\n        // date.\n        function patchDisplay(cm, updateNumbersFrom, dims) {\n          var display = cm.display,\n              lineNumbers = cm.options.lineNumbers;\n          var container = display.lineDiv,\n              cur = container.firstChild;\n\n          function rm(node) {\n            var next = node.nextSibling;\n            // Works around a throw-scroll bug in OS X Webkit\n            if (webkit && mac && cm.display.currentWheelTarget == node) {\n              node.style.display = \"none\";\n            } else {\n              node.parentNode.removeChild(node);\n            }\n            return next;\n          }\n\n          var view = display.view,\n              lineN = display.viewFrom;\n          // Loop over the elements in the view, syncing cur (the DOM nodes\n          // in display.lineDiv) with the view as we go.\n          for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (lineView.hidden) {} else if (!lineView.node || lineView.node.parentNode != container) {\n              // Not drawn yet\n              var node = buildLineElement(cm, lineView, lineN, dims);\n              container.insertBefore(node, cur);\n            } else {\n              // Already drawn\n              while (cur != lineView.node) {\n                cur = rm(cur);\n              }\n              var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n              if (lineView.changes) {\n                if (indexOf(lineView.changes, \"gutter\") > -1) {\n                  updateNumber = false;\n                }\n                updateLineForChanges(cm, lineView, lineN, dims);\n              }\n              if (updateNumber) {\n                removeChildren(lineView.lineNumber);\n                lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n              }\n              cur = lineView.node.nextSibling;\n            }\n            lineN += lineView.size;\n          }\n          while (cur) {\n            cur = rm(cur);\n          }\n        }\n\n        function updateGutterSpace(cm) {\n          var width = cm.display.gutters.offsetWidth;\n          cm.display.sizer.style.marginLeft = width + \"px\";\n        }\n\n        function setDocumentHeight(cm, measure) {\n          cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n          cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n          cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n        }\n\n        // Rebuild the gutter elements, ensure the margin to the left of the\n        // code matches their width.\n        function updateGutters(cm) {\n          var gutters = cm.display.gutters,\n              specs = cm.options.gutters;\n          removeChildren(gutters);\n          var i = 0;\n          for (; i < specs.length; ++i) {\n            var gutterClass = specs[i];\n            var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n            if (gutterClass == \"CodeMirror-linenumbers\") {\n              cm.display.lineGutter = gElt;\n              gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n            }\n          }\n          gutters.style.display = i ? \"\" : \"none\";\n          updateGutterSpace(cm);\n        }\n\n        // Make sure the gutters options contains the element\n        // \"CodeMirror-linenumbers\" when the lineNumbers option is true.\n        function setGuttersForLineNumbers(options) {\n          var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n          if (found == -1 && options.lineNumbers) {\n            options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n          } else if (found > -1 && !options.lineNumbers) {\n            options.gutters = options.gutters.slice(0);\n            options.gutters.splice(found, 1);\n          }\n        }\n\n        // Since the delta values reported on mouse wheel events are\n        // unstandardized between browsers and even browser versions, and\n        // generally horribly unpredictable, this code starts by measuring\n        // the scroll effect that the first few mouse wheel events have,\n        // and, from that, detects the way it can convert deltas to pixel\n        // offsets afterwards.\n        //\n        // The reason we want to know the amount a wheel event will scroll\n        // is that it gives us a chance to update the display before the\n        // actual scrolling happens, reducing flickering.\n\n        var wheelSamples = 0;\n        var wheelPixelsPerUnit = null;\n        // Fill in a browser-detected starting value on browsers where we\n        // know one. These don't have to be accurate -- the result of them\n        // being wrong would just be a slight flicker on the first wheel\n        // scroll (if it is large enough).\n        if (ie) {\n          wheelPixelsPerUnit = -.53;\n        } else if (gecko) {\n          wheelPixelsPerUnit = 15;\n        } else if (chrome) {\n          wheelPixelsPerUnit = -.7;\n        } else if (safari) {\n          wheelPixelsPerUnit = -1 / 3;\n        }\n\n        function wheelEventDelta(e) {\n          var dx = e.wheelDeltaX,\n              dy = e.wheelDeltaY;\n          if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n            dx = e.detail;\n          }\n          if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n            dy = e.detail;\n          } else if (dy == null) {\n            dy = e.wheelDelta;\n          }\n          return { x: dx, y: dy };\n        }\n        function wheelEventPixels(e) {\n          var delta = wheelEventDelta(e);\n          delta.x *= wheelPixelsPerUnit;\n          delta.y *= wheelPixelsPerUnit;\n          return delta;\n        }\n\n        function onScrollWheel(cm, e) {\n          var delta = wheelEventDelta(e),\n              dx = delta.x,\n              dy = delta.y;\n\n          var display = cm.display,\n              scroll = display.scroller;\n          // Quit if there's nothing to scroll here\n          var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n          var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n          if (!(dx && canScrollX || dy && canScrollY)) {\n            return;\n          }\n\n          // Webkit browsers on OS X abort momentum scrolls when the target\n          // of the scroll event is removed from the scrollable element.\n          // This hack (see related code in patchDisplay) makes sure the\n          // element is kept around.\n          if (dy && mac && webkit) {\n            outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n              for (var i = 0; i < view.length; i++) {\n                if (view[i].node == cur) {\n                  cm.display.currentWheelTarget = cur;\n                  break outer;\n                }\n              }\n            }\n          }\n\n          // On some browsers, horizontal scrolling will cause redraws to\n          // happen before the gutter has been realigned, causing it to\n          // wriggle around in a most unseemly way. When we have an\n          // estimated pixels/delta value, we just handle horizontal\n          // scrolling entirely here. It'll be slightly off from native, but\n          // better than glitching out.\n          if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n            if (dy && canScrollY) {\n              updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n            }\n            setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n            // Only prevent default scrolling if vertical scrolling is\n            // actually possible. Otherwise, it causes vertical scroll\n            // jitter on OSX trackpads when deltaX is small and deltaY\n            // is large (issue #3579)\n            if (!dy || dy && canScrollY) {\n              e_preventDefault(e);\n            }\n            display.wheelStartX = null; // Abort measurement, if in progress\n            return;\n          }\n\n          // 'Project' the visible viewport to cover the area that is being\n          // scrolled into view (if we know enough to estimate it).\n          if (dy && wheelPixelsPerUnit != null) {\n            var pixels = dy * wheelPixelsPerUnit;\n            var top = cm.doc.scrollTop,\n                bot = top + display.wrapper.clientHeight;\n            if (pixels < 0) {\n              top = Math.max(0, top + pixels - 50);\n            } else {\n              bot = Math.min(cm.doc.height, bot + pixels + 50);\n            }\n            updateDisplaySimple(cm, { top: top, bottom: bot });\n          }\n\n          if (wheelSamples < 20) {\n            if (display.wheelStartX == null) {\n              display.wheelStartX = scroll.scrollLeft;display.wheelStartY = scroll.scrollTop;\n              display.wheelDX = dx;display.wheelDY = dy;\n              setTimeout(function () {\n                if (display.wheelStartX == null) {\n                  return;\n                }\n                var movedX = scroll.scrollLeft - display.wheelStartX;\n                var movedY = scroll.scrollTop - display.wheelStartY;\n                var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n                display.wheelStartX = display.wheelStartY = null;\n                if (!sample) {\n                  return;\n                }\n                wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n                ++wheelSamples;\n              }, 200);\n            } else {\n              display.wheelDX += dx;display.wheelDY += dy;\n            }\n          }\n        }\n\n        // Selection objects are immutable. A new one is created every time\n        // the selection changes. A selection is one or more non-overlapping\n        // (and non-touching) ranges, sorted, and an integer that indicates\n        // which one is the primary selection (the one that's scrolled into\n        // view, that getCursor returns, etc).\n        var Selection = function Selection(ranges, primIndex) {\n          this.ranges = ranges;\n          this.primIndex = primIndex;\n        };\n\n        Selection.prototype.primary = function () {\n          return this.ranges[this.primIndex];\n        };\n\n        Selection.prototype.equals = function (other) {\n          var this$1 = this;\n\n          if (other == this) {\n            return true;\n          }\n          if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n            return false;\n          }\n          for (var i = 0; i < this.ranges.length; i++) {\n            var here = this$1.ranges[i],\n                there = other.ranges[i];\n            if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n              return false;\n            }\n          }\n          return true;\n        };\n\n        Selection.prototype.deepCopy = function () {\n          var this$1 = this;\n\n          var out = [];\n          for (var i = 0; i < this.ranges.length; i++) {\n            out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head));\n          }\n          return new Selection(out, this.primIndex);\n        };\n\n        Selection.prototype.somethingSelected = function () {\n          var this$1 = this;\n\n          for (var i = 0; i < this.ranges.length; i++) {\n            if (!this$1.ranges[i].empty()) {\n              return true;\n            }\n          }\n          return false;\n        };\n\n        Selection.prototype.contains = function (pos, end) {\n          var this$1 = this;\n\n          if (!end) {\n            end = pos;\n          }\n          for (var i = 0; i < this.ranges.length; i++) {\n            var range = this$1.ranges[i];\n            if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n              return i;\n            }\n          }\n          return -1;\n        };\n\n        var Range = function Range(anchor, head) {\n          this.anchor = anchor;this.head = head;\n        };\n\n        Range.prototype.from = function () {\n          return minPos(this.anchor, this.head);\n        };\n        Range.prototype.to = function () {\n          return maxPos(this.anchor, this.head);\n        };\n        Range.prototype.empty = function () {\n          return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n        };\n\n        // Take an unsorted, potentially overlapping set of ranges, and\n        // build a selection out of it. 'Consumes' ranges array (modifying\n        // it).\n        function normalizeSelection(ranges, primIndex) {\n          var prim = ranges[primIndex];\n          ranges.sort(function (a, b) {\n            return cmp(a.from(), b.from());\n          });\n          primIndex = indexOf(ranges, prim);\n          for (var i = 1; i < ranges.length; i++) {\n            var cur = ranges[i],\n                prev = ranges[i - 1];\n            if (cmp(prev.to(), cur.from()) >= 0) {\n              var from = minPos(prev.from(), cur.from()),\n                  to = maxPos(prev.to(), cur.to());\n              var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n              if (i <= primIndex) {\n                --primIndex;\n              }\n              ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n            }\n          }\n          return new Selection(ranges, primIndex);\n        }\n\n        function simpleSelection(anchor, head) {\n          return new Selection([new Range(anchor, head || anchor)], 0);\n        }\n\n        // Compute the position of the end of a change (its 'to' property\n        // refers to the pre-change end).\n        function changeEnd(change) {\n          if (!change.text) {\n            return change.to;\n          }\n          return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n        }\n\n        // Adjust a position to refer to the post-change position of the\n        // same text, or the end of the change if the change covers it.\n        function adjustForChange(pos, change) {\n          if (cmp(pos, change.from) < 0) {\n            return pos;\n          }\n          if (cmp(pos, change.to) <= 0) {\n            return changeEnd(change);\n          }\n\n          var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n              ch = pos.ch;\n          if (pos.line == change.to.line) {\n            ch += changeEnd(change).ch - change.to.ch;\n          }\n          return Pos(line, ch);\n        }\n\n        function computeSelAfterChange(doc, change) {\n          var out = [];\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            var range = doc.sel.ranges[i];\n            out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n          }\n          return normalizeSelection(out, doc.sel.primIndex);\n        }\n\n        function offsetPos(pos, old, nw) {\n          if (pos.line == old.line) {\n            return Pos(nw.line, pos.ch - old.ch + nw.ch);\n          } else {\n            return Pos(nw.line + (pos.line - old.line), pos.ch);\n          }\n        }\n\n        // Used by replaceSelections to allow moving the selection to the\n        // start or around the replaced test. Hint may be \"start\" or \"around\".\n        function computeReplacedSel(doc, changes, hint) {\n          var out = [];\n          var oldPrev = Pos(doc.first, 0),\n              newPrev = oldPrev;\n          for (var i = 0; i < changes.length; i++) {\n            var change = changes[i];\n            var from = offsetPos(change.from, oldPrev, newPrev);\n            var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n            oldPrev = change.to;\n            newPrev = to;\n            if (hint == \"around\") {\n              var range = doc.sel.ranges[i],\n                  inv = cmp(range.head, range.anchor) < 0;\n              out[i] = new Range(inv ? to : from, inv ? from : to);\n            } else {\n              out[i] = new Range(from, from);\n            }\n          }\n          return new Selection(out, doc.sel.primIndex);\n        }\n\n        // Used to get the editor into a consistent state again when options change.\n\n        function loadMode(cm) {\n          cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n          resetModeState(cm);\n        }\n\n        function resetModeState(cm) {\n          cm.doc.iter(function (line) {\n            if (line.stateAfter) {\n              line.stateAfter = null;\n            }\n            if (line.styles) {\n              line.styles = null;\n            }\n          });\n          cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n          startWorker(cm, 100);\n          cm.state.modeGen++;\n          if (cm.curOp) {\n            regChange(cm);\n          }\n        }\n\n        // DOCUMENT DATA STRUCTURE\n\n        // By default, updates that start and end at the beginning of a line\n        // are treated specially, in order to make the association of line\n        // widgets and marker elements with the text behave more intuitive.\n        function isWholeLineUpdate(doc, change) {\n          return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n        }\n\n        // Perform a change on the document data structure.\n        function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n          function spansFor(n) {\n            return markedSpans ? markedSpans[n] : null;\n          }\n          function update(line, text, spans) {\n            updateLine(line, text, spans, estimateHeight$$1);\n            signalLater(line, \"change\", line, change);\n          }\n          function linesFor(start, end) {\n            var result = [];\n            for (var i = start; i < end; ++i) {\n              result.push(new Line(text[i], spansFor(i), estimateHeight$$1));\n            }\n            return result;\n          }\n\n          var from = change.from,\n              to = change.to,\n              text = change.text;\n          var firstLine = getLine(doc, from.line),\n              lastLine = getLine(doc, to.line);\n          var lastText = lst(text),\n              lastSpans = spansFor(text.length - 1),\n              nlines = to.line - from.line;\n\n          // Adjust the line structure\n          if (change.full) {\n            doc.insert(0, linesFor(0, text.length));\n            doc.remove(text.length, doc.size - text.length);\n          } else if (isWholeLineUpdate(doc, change)) {\n            // This is a whole-line replace. Treated specially to make\n            // sure line objects move the way they are supposed to.\n            var added = linesFor(0, text.length - 1);\n            update(lastLine, lastLine.text, lastSpans);\n            if (nlines) {\n              doc.remove(from.line, nlines);\n            }\n            if (added.length) {\n              doc.insert(from.line, added);\n            }\n          } else if (firstLine == lastLine) {\n            if (text.length == 1) {\n              update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n            } else {\n              var added$1 = linesFor(1, text.length - 1);\n              added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n              update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n              doc.insert(from.line + 1, added$1);\n            }\n          } else if (text.length == 1) {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n            doc.remove(from.line + 1, nlines);\n          } else {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n            update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n            var added$2 = linesFor(1, text.length - 1);\n            if (nlines > 1) {\n              doc.remove(from.line + 1, nlines - 1);\n            }\n            doc.insert(from.line + 1, added$2);\n          }\n\n          signalLater(doc, \"change\", doc, change);\n        }\n\n        // Call f for all linked documents.\n        function linkedDocs(doc, f, sharedHistOnly) {\n          function propagate(doc, skip, sharedHist) {\n            if (doc.linked) {\n              for (var i = 0; i < doc.linked.length; ++i) {\n                var rel = doc.linked[i];\n                if (rel.doc == skip) {\n                  continue;\n                }\n                var shared = sharedHist && rel.sharedHist;\n                if (sharedHistOnly && !shared) {\n                  continue;\n                }\n                f(rel.doc, shared);\n                propagate(rel.doc, doc, shared);\n              }\n            }\n          }\n          propagate(doc, null, true);\n        }\n\n        // Attach a document to an editor.\n        function attachDoc(cm, doc) {\n          if (doc.cm) {\n            throw new Error(\"This document is already in use.\");\n          }\n          cm.doc = doc;\n          doc.cm = cm;\n          estimateLineHeights(cm);\n          loadMode(cm);\n          setDirectionClass(cm);\n          if (!cm.options.lineWrapping) {\n            findMaxLine(cm);\n          }\n          cm.options.mode = doc.modeOption;\n          regChange(cm);\n        }\n\n        function setDirectionClass(cm) {\n          (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n        }\n\n        function directionChanged(cm) {\n          runInOp(cm, function () {\n            setDirectionClass(cm);\n            regChange(cm);\n          });\n        }\n\n        function History(startGen) {\n          // Arrays of change events and selections. Doing something adds an\n          // event to done and clears undo. Undoing moves events from done\n          // to undone, redoing moves them in the other direction.\n          this.done = [];this.undone = [];\n          this.undoDepth = Infinity;\n          // Used to track when changes can be merged into a single undo\n          // event\n          this.lastModTime = this.lastSelTime = 0;\n          this.lastOp = this.lastSelOp = null;\n          this.lastOrigin = this.lastSelOrigin = null;\n          // Used by the isClean() method\n          this.generation = this.maxGeneration = startGen || 1;\n        }\n\n        // Create a history change event from an updateDoc-style change\n        // object.\n        function historyChangeFromChange(doc, change) {\n          var histChange = { from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to) };\n          attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n          linkedDocs(doc, function (doc) {\n            return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n          }, true);\n          return histChange;\n        }\n\n        // Pop all selection events off the end of a history array. Stop at\n        // a change event.\n        function clearSelectionEvents(array) {\n          while (array.length) {\n            var last = lst(array);\n            if (last.ranges) {\n              array.pop();\n            } else {\n              break;\n            }\n          }\n        }\n\n        // Find the top change event in the history. Pop off selection\n        // events that are in the way.\n        function lastChangeEvent(hist, force) {\n          if (force) {\n            clearSelectionEvents(hist.done);\n            return lst(hist.done);\n          } else if (hist.done.length && !lst(hist.done).ranges) {\n            return lst(hist.done);\n          } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n            hist.done.pop();\n            return lst(hist.done);\n          }\n        }\n\n        // Register a change in the history. Merges changes that are within\n        // a single operation, or are close together with an origin that\n        // allows merging (starting with \"+\") into a single event.\n        function addChangeToHistory(doc, change, selAfter, opId) {\n          var hist = doc.history;\n          hist.undone.length = 0;\n          var time = +new Date(),\n              cur;\n          var last;\n\n          if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n            // Merge this change into the last event\n            last = lst(cur.changes);\n            if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n              // Optimized case for simple insertion -- don't want to add\n              // new changesets for every character typed\n              last.to = changeEnd(change);\n            } else {\n              // Add new sub-event\n              cur.changes.push(historyChangeFromChange(doc, change));\n            }\n          } else {\n            // Can not be merged, start a new event.\n            var before = lst(hist.done);\n            if (!before || !before.ranges) {\n              pushSelectionToHistory(doc.sel, hist.done);\n            }\n            cur = { changes: [historyChangeFromChange(doc, change)],\n              generation: hist.generation };\n            hist.done.push(cur);\n            while (hist.done.length > hist.undoDepth) {\n              hist.done.shift();\n              if (!hist.done[0].ranges) {\n                hist.done.shift();\n              }\n            }\n          }\n          hist.done.push(selAfter);\n          hist.generation = ++hist.maxGeneration;\n          hist.lastModTime = hist.lastSelTime = time;\n          hist.lastOp = hist.lastSelOp = opId;\n          hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n          if (!last) {\n            signal(doc, \"historyAdded\");\n          }\n        }\n\n        function selectionEventCanBeMerged(doc, origin, prev, sel) {\n          var ch = origin.charAt(0);\n          return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n        }\n\n        // Called whenever the selection changes, sets the new selection as\n        // the pending selection in the history, and pushes the old pending\n        // selection into the 'done' array when it was significantly\n        // different (in number of selected ranges, emptiness, or time).\n        function addSelectionToHistory(doc, sel, opId, options) {\n          var hist = doc.history,\n              origin = options && options.origin;\n\n          // A new event is started when the previous origin does not match\n          // the current, or the origins don't allow matching. Origins\n          // starting with * are always merged, those starting with + are\n          // merged when similar and close together in time.\n          if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n            hist.done[hist.done.length - 1] = sel;\n          } else {\n            pushSelectionToHistory(sel, hist.done);\n          }\n\n          hist.lastSelTime = +new Date();\n          hist.lastSelOrigin = origin;\n          hist.lastSelOp = opId;\n          if (options && options.clearRedo !== false) {\n            clearSelectionEvents(hist.undone);\n          }\n        }\n\n        function pushSelectionToHistory(sel, dest) {\n          var top = lst(dest);\n          if (!(top && top.ranges && top.equals(sel))) {\n            dest.push(sel);\n          }\n        }\n\n        // Used to store marked span information in the history.\n        function attachLocalSpans(doc, change, from, to) {\n          var existing = change[\"spans_\" + doc.id],\n              n = 0;\n          doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n            if (line.markedSpans) {\n              (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n            }\n            ++n;\n          });\n        }\n\n        // When un/re-doing restores text containing marked spans, those\n        // that have been explicitly cleared should not be restored.\n        function removeClearedSpans(spans) {\n          if (!spans) {\n            return null;\n          }\n          var out;\n          for (var i = 0; i < spans.length; ++i) {\n            if (spans[i].marker.explicitlyCleared) {\n              if (!out) {\n                out = spans.slice(0, i);\n              }\n            } else if (out) {\n              out.push(spans[i]);\n            }\n          }\n          return !out ? spans : out.length ? out : null;\n        }\n\n        // Retrieve and filter the old marked spans stored in a change event.\n        function getOldSpans(doc, change) {\n          var found = change[\"spans_\" + doc.id];\n          if (!found) {\n            return null;\n          }\n          var nw = [];\n          for (var i = 0; i < change.text.length; ++i) {\n            nw.push(removeClearedSpans(found[i]));\n          }\n          return nw;\n        }\n\n        // Used for un/re-doing changes from the history. Combines the\n        // result of computing the existing spans with the set of spans that\n        // existed in the history (so that deleting around a span and then\n        // undoing brings back the span).\n        function mergeOldSpans(doc, change) {\n          var old = getOldSpans(doc, change);\n          var stretched = stretchSpansOverChange(doc, change);\n          if (!old) {\n            return stretched;\n          }\n          if (!stretched) {\n            return old;\n          }\n\n          for (var i = 0; i < old.length; ++i) {\n            var oldCur = old[i],\n                stretchCur = stretched[i];\n            if (oldCur && stretchCur) {\n              spans: for (var j = 0; j < stretchCur.length; ++j) {\n                var span = stretchCur[j];\n                for (var k = 0; k < oldCur.length; ++k) {\n                  if (oldCur[k].marker == span.marker) {\n                    continue spans;\n                  }\n                }\n                oldCur.push(span);\n              }\n            } else if (stretchCur) {\n              old[i] = stretchCur;\n            }\n          }\n          return old;\n        }\n\n        // Used both to provide a JSON-safe object in .getHistory, and, when\n        // detaching a document, to split the history in two\n        function copyHistoryArray(events, newGroup, instantiateSel) {\n          var copy = [];\n          for (var i = 0; i < events.length; ++i) {\n            var event = events[i];\n            if (event.ranges) {\n              copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n              continue;\n            }\n            var changes = event.changes,\n                newChanges = [];\n            copy.push({ changes: newChanges });\n            for (var j = 0; j < changes.length; ++j) {\n              var change = changes[j],\n                  m = void 0;\n              newChanges.push({ from: change.from, to: change.to, text: change.text });\n              if (newGroup) {\n                for (var prop in change) {\n                  if (m = prop.match(/^spans_(\\d+)$/)) {\n                    if (indexOf(newGroup, Number(m[1])) > -1) {\n                      lst(newChanges)[prop] = change[prop];\n                      delete change[prop];\n                    }\n                  }\n                }\n              }\n            }\n          }\n          return copy;\n        }\n\n        // The 'scroll' parameter given to many of these indicated whether\n        // the new cursor position should be scrolled into view after\n        // modifying the selection.\n\n        // If shift is held or the extend flag is set, extends a range to\n        // include a given position (and optionally a second position).\n        // Otherwise, simply returns the range between the given positions.\n        // Used for cursor motion and such.\n        function extendRange(range, head, other, extend) {\n          if (extend) {\n            var anchor = range.anchor;\n            if (other) {\n              var posBefore = cmp(head, anchor) < 0;\n              if (posBefore != cmp(other, anchor) < 0) {\n                anchor = head;\n                head = other;\n              } else if (posBefore != cmp(head, other) < 0) {\n                head = other;\n              }\n            }\n            return new Range(anchor, head);\n          } else {\n            return new Range(other || head, head);\n          }\n        }\n\n        // Extend the primary selection range, discard the rest.\n        function extendSelection(doc, head, other, options, extend) {\n          if (extend == null) {\n            extend = doc.cm && (doc.cm.display.shift || doc.extend);\n          }\n          setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n        }\n\n        // Extend all selections (pos is an array of selections with length\n        // equal the number of selections)\n        function extendSelections(doc, heads, options) {\n          var out = [];\n          var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n          }\n          var newSel = normalizeSelection(out, doc.sel.primIndex);\n          setSelection(doc, newSel, options);\n        }\n\n        // Updates a single range in the selection.\n        function replaceOneSelection(doc, i, range, options) {\n          var ranges = doc.sel.ranges.slice(0);\n          ranges[i] = range;\n          setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n        }\n\n        // Reset the selection to a single range.\n        function setSimpleSelection(doc, anchor, head, options) {\n          setSelection(doc, simpleSelection(anchor, head), options);\n        }\n\n        // Give beforeSelectionChange handlers a change to influence a\n        // selection update.\n        function filterSelectionChange(doc, sel, options) {\n          var obj = {\n            ranges: sel.ranges,\n            update: function update(ranges) {\n              var this$1 = this;\n\n              this.ranges = [];\n              for (var i = 0; i < ranges.length; i++) {\n                this$1.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n              }\n            },\n            origin: options && options.origin\n          };\n          signal(doc, \"beforeSelectionChange\", doc, obj);\n          if (doc.cm) {\n            signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n          }\n          if (obj.ranges != sel.ranges) {\n            return normalizeSelection(obj.ranges, obj.ranges.length - 1);\n          } else {\n            return sel;\n          }\n        }\n\n        function setSelectionReplaceHistory(doc, sel, options) {\n          var done = doc.history.done,\n              last = lst(done);\n          if (last && last.ranges) {\n            done[done.length - 1] = sel;\n            setSelectionNoUndo(doc, sel, options);\n          } else {\n            setSelection(doc, sel, options);\n          }\n        }\n\n        // Set a new selection.\n        function setSelection(doc, sel, options) {\n          setSelectionNoUndo(doc, sel, options);\n          addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n        }\n\n        function setSelectionNoUndo(doc, sel, options) {\n          if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n            sel = filterSelectionChange(doc, sel, options);\n          }\n\n          var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n          setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n          if (!(options && options.scroll === false) && doc.cm) {\n            ensureCursorVisible(doc.cm);\n          }\n        }\n\n        function setSelectionInner(doc, sel) {\n          if (sel.equals(doc.sel)) {\n            return;\n          }\n\n          doc.sel = sel;\n\n          if (doc.cm) {\n            doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n            signalCursorActivity(doc.cm);\n          }\n          signalLater(doc, \"cursorActivity\", doc);\n        }\n\n        // Verify that the selection does not partially select any atomic\n        // marked ranges.\n        function reCheckSelection(doc) {\n          setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n        }\n\n        // Return a selection that does not partially select any atomic\n        // ranges.\n        function skipAtomicInSelection(doc, sel, bias, mayClear) {\n          var out;\n          for (var i = 0; i < sel.ranges.length; i++) {\n            var range = sel.ranges[i];\n            var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n            var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n            var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n            if (out || newAnchor != range.anchor || newHead != range.head) {\n              if (!out) {\n                out = sel.ranges.slice(0, i);\n              }\n              out[i] = new Range(newAnchor, newHead);\n            }\n          }\n          return out ? normalizeSelection(out, sel.primIndex) : sel;\n        }\n\n        function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n          var line = getLine(doc, pos.line);\n          if (line.markedSpans) {\n            for (var i = 0; i < line.markedSpans.length; ++i) {\n              var sp = line.markedSpans[i],\n                  m = sp.marker;\n              if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n                if (mayClear) {\n                  signal(m, \"beforeCursorEnter\");\n                  if (m.explicitlyCleared) {\n                    if (!line.markedSpans) {\n                      break;\n                    } else {\n                      --i;continue;\n                    }\n                  }\n                }\n                if (!m.atomic) {\n                  continue;\n                }\n\n                if (oldPos) {\n                  var near = m.find(dir < 0 ? 1 : -1),\n                      diff = void 0;\n                  if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft) {\n                    near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n                  }\n                  if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n                    return skipAtomicInner(doc, near, pos, dir, mayClear);\n                  }\n                }\n\n                var far = m.find(dir < 0 ? -1 : 1);\n                if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight) {\n                  far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n                }\n                return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n              }\n            }\n          }\n          return pos;\n        }\n\n        // Ensure a given position is not inside an atomic range.\n        function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n          var dir = bias || 1;\n          var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n          if (!found) {\n            doc.cantEdit = true;\n            return Pos(doc.first, 0);\n          }\n          return found;\n        }\n\n        function movePos(doc, pos, dir, line) {\n          if (dir < 0 && pos.ch == 0) {\n            if (pos.line > doc.first) {\n              return _clipPos(doc, Pos(pos.line - 1));\n            } else {\n              return null;\n            }\n          } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n            if (pos.line < doc.first + doc.size - 1) {\n              return Pos(pos.line + 1, 0);\n            } else {\n              return null;\n            }\n          } else {\n            return new Pos(pos.line, pos.ch + dir);\n          }\n        }\n\n        function selectAll(cm) {\n          cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n        }\n\n        // UPDATING\n\n        // Allow \"beforeChange\" event handlers to influence a change\n        function filterChange(doc, change, update) {\n          var obj = {\n            canceled: false,\n            from: change.from,\n            to: change.to,\n            text: change.text,\n            origin: change.origin,\n            cancel: function cancel() {\n              return obj.canceled = true;\n            }\n          };\n          if (update) {\n            obj.update = function (from, to, text, origin) {\n              if (from) {\n                obj.from = _clipPos(doc, from);\n              }\n              if (to) {\n                obj.to = _clipPos(doc, to);\n              }\n              if (text) {\n                obj.text = text;\n              }\n              if (origin !== undefined) {\n                obj.origin = origin;\n              }\n            };\n          }\n          signal(doc, \"beforeChange\", doc, obj);\n          if (doc.cm) {\n            signal(doc.cm, \"beforeChange\", doc.cm, obj);\n          }\n\n          if (obj.canceled) {\n            return null;\n          }\n          return { from: obj.from, to: obj.to, text: obj.text, origin: obj.origin };\n        }\n\n        // Apply a change to a document, and add it to the document's\n        // history, and propagating it to all linked documents.\n        function makeChange(doc, change, ignoreReadOnly) {\n          if (doc.cm) {\n            if (!doc.cm.curOp) {\n              return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n            }\n            if (doc.cm.state.suppressEdits) {\n              return;\n            }\n          }\n\n          if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n            change = filterChange(doc, change, true);\n            if (!change) {\n              return;\n            }\n          }\n\n          // Possibly split or suppress the update based on the presence\n          // of read-only spans in its range.\n          var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n          if (split) {\n            for (var i = split.length - 1; i >= 0; --i) {\n              makeChangeInner(doc, { from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin });\n            }\n          } else {\n            makeChangeInner(doc, change);\n          }\n        }\n\n        function makeChangeInner(doc, change) {\n          if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n            return;\n          }\n          var selAfter = computeSelAfterChange(doc, change);\n          addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n          makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n          var rebased = [];\n\n          linkedDocs(doc, function (doc, sharedHist) {\n            if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n              rebaseHist(doc.history, change);\n              rebased.push(doc.history);\n            }\n            makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n          });\n        }\n\n        // Revert a change stored in a document's history.\n        function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n          if (doc.cm && doc.cm.state.suppressEdits && !allowSelectionOnly) {\n            return;\n          }\n\n          var hist = doc.history,\n              event,\n              selAfter = doc.sel;\n          var source = type == \"undo\" ? hist.done : hist.undone,\n              dest = type == \"undo\" ? hist.undone : hist.done;\n\n          // Verify that there is a useable event (so that ctrl-z won't\n          // needlessly clear selection events)\n          var i = 0;\n          for (; i < source.length; i++) {\n            event = source[i];\n            if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n              break;\n            }\n          }\n          if (i == source.length) {\n            return;\n          }\n          hist.lastOrigin = hist.lastSelOrigin = null;\n\n          for (;;) {\n            event = source.pop();\n            if (event.ranges) {\n              pushSelectionToHistory(event, dest);\n              if (allowSelectionOnly && !event.equals(doc.sel)) {\n                setSelection(doc, event, { clearRedo: false });\n                return;\n              }\n              selAfter = event;\n            } else {\n              break;\n            }\n          }\n\n          // Build up a reverse change object to add to the opposite history\n          // stack (redo when undoing, and vice versa).\n          var antiChanges = [];\n          pushSelectionToHistory(selAfter, dest);\n          dest.push({ changes: antiChanges, generation: hist.generation });\n          hist.generation = event.generation || ++hist.maxGeneration;\n\n          var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n          var loop = function loop(i) {\n            var change = event.changes[i];\n            change.origin = type;\n            if (filter && !filterChange(doc, change, false)) {\n              source.length = 0;\n              return {};\n            }\n\n            antiChanges.push(historyChangeFromChange(doc, change));\n\n            var after = i ? computeSelAfterChange(doc, change) : lst(source);\n            makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n            if (!i && doc.cm) {\n              doc.cm.scrollIntoView({ from: change.from, to: changeEnd(change) });\n            }\n            var rebased = [];\n\n            // Propagate to the linked documents\n            linkedDocs(doc, function (doc, sharedHist) {\n              if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n                rebaseHist(doc.history, change);\n                rebased.push(doc.history);\n              }\n              makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n            });\n          };\n\n          for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n            var returned = loop(i$1);\n\n            if (returned) return returned.v;\n          }\n        }\n\n        // Sub-views need their line numbers shifted when text is added\n        // above or below them in the parent document.\n        function shiftDoc(doc, distance) {\n          if (distance == 0) {\n            return;\n          }\n          doc.first += distance;\n          doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n            return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n          }), doc.sel.primIndex);\n          if (doc.cm) {\n            regChange(doc.cm, doc.first, doc.first - distance, distance);\n            for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n              regLineChange(doc.cm, l, \"gutter\");\n            }\n          }\n        }\n\n        // More lower-level change function, handling only a single document\n        // (not linked ones).\n        function makeChangeSingleDoc(doc, change, selAfter, spans) {\n          if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n          }\n\n          if (change.to.line < doc.first) {\n            shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n            return;\n          }\n          if (change.from.line > doc.lastLine()) {\n            return;\n          }\n\n          // Clip the change to the size of this doc\n          if (change.from.line < doc.first) {\n            var shift = change.text.length - 1 - (doc.first - change.from.line);\n            shiftDoc(doc, shift);\n            change = { from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin };\n          }\n          var last = doc.lastLine();\n          if (change.to.line > last) {\n            change = { from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin };\n          }\n\n          change.removed = getBetween(doc, change.from, change.to);\n\n          if (!selAfter) {\n            selAfter = computeSelAfterChange(doc, change);\n          }\n          if (doc.cm) {\n            makeChangeSingleDocInEditor(doc.cm, change, spans);\n          } else {\n            updateDoc(doc, change, spans);\n          }\n          setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n        }\n\n        // Handle the interaction of a change to a document with the editor\n        // that this document is part of.\n        function makeChangeSingleDocInEditor(cm, change, spans) {\n          var doc = cm.doc,\n              display = cm.display,\n              from = change.from,\n              to = change.to;\n\n          var recomputeMaxLength = false,\n              checkWidthStart = from.line;\n          if (!cm.options.lineWrapping) {\n            checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n            doc.iter(checkWidthStart, to.line + 1, function (line) {\n              if (line == display.maxLine) {\n                recomputeMaxLength = true;\n                return true;\n              }\n            });\n          }\n\n          if (doc.sel.contains(change.from, change.to) > -1) {\n            signalCursorActivity(cm);\n          }\n\n          updateDoc(doc, change, spans, estimateHeight(cm));\n\n          if (!cm.options.lineWrapping) {\n            doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n              var len = lineLength(line);\n              if (len > display.maxLineLength) {\n                display.maxLine = line;\n                display.maxLineLength = len;\n                display.maxLineChanged = true;\n                recomputeMaxLength = false;\n              }\n            });\n            if (recomputeMaxLength) {\n              cm.curOp.updateMaxLine = true;\n            }\n          }\n\n          retreatFrontier(doc, from.line);\n          startWorker(cm, 400);\n\n          var lendiff = change.text.length - (to.line - from.line) - 1;\n          // Remember that these lines changed, for updating the display\n          if (change.full) {\n            regChange(cm);\n          } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n            regLineChange(cm, from.line, \"text\");\n          } else {\n            regChange(cm, from.line, to.line + 1, lendiff);\n          }\n\n          var changesHandler = hasHandler(cm, \"changes\"),\n              changeHandler = hasHandler(cm, \"change\");\n          if (changeHandler || changesHandler) {\n            var obj = {\n              from: from, to: to,\n              text: change.text,\n              removed: change.removed,\n              origin: change.origin\n            };\n            if (changeHandler) {\n              signalLater(cm, \"change\", cm, obj);\n            }\n            if (changesHandler) {\n              (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n            }\n          }\n          cm.display.selForContextMenu = null;\n        }\n\n        function _replaceRange(doc, code, from, to, origin) {\n          if (!to) {\n            to = from;\n          }\n          if (cmp(to, from) < 0) {\n            var tmp = to;to = from;from = tmp;\n          }\n          if (typeof code == \"string\") {\n            code = doc.splitLines(code);\n          }\n          makeChange(doc, { from: from, to: to, text: code, origin: origin });\n        }\n\n        // Rebasing/resetting history to deal with externally-sourced changes\n\n        function rebaseHistSelSingle(pos, from, to, diff) {\n          if (to < pos.line) {\n            pos.line += diff;\n          } else if (from < pos.line) {\n            pos.line = from;\n            pos.ch = 0;\n          }\n        }\n\n        // Tries to rebase an array of history events given a change in the\n        // document. If the change touches the same lines as the event, the\n        // event, and everything 'behind' it, is discarded. If the change is\n        // before the event, the event's positions are updated. Uses a\n        // copy-on-write scheme for the positions, to avoid having to\n        // reallocate them all on every rebase, but also avoid problems with\n        // shared position objects being unsafely updated.\n        function rebaseHistArray(array, from, to, diff) {\n          for (var i = 0; i < array.length; ++i) {\n            var sub = array[i],\n                ok = true;\n            if (sub.ranges) {\n              if (!sub.copied) {\n                sub = array[i] = sub.deepCopy();sub.copied = true;\n              }\n              for (var j = 0; j < sub.ranges.length; j++) {\n                rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n                rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n              }\n              continue;\n            }\n            for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n              var cur = sub.changes[j$1];\n              if (to < cur.from.line) {\n                cur.from = Pos(cur.from.line + diff, cur.from.ch);\n                cur.to = Pos(cur.to.line + diff, cur.to.ch);\n              } else if (from <= cur.to.line) {\n                ok = false;\n                break;\n              }\n            }\n            if (!ok) {\n              array.splice(0, i + 1);\n              i = 0;\n            }\n          }\n        }\n\n        function rebaseHist(hist, change) {\n          var from = change.from.line,\n              to = change.to.line,\n              diff = change.text.length - (to - from) - 1;\n          rebaseHistArray(hist.done, from, to, diff);\n          rebaseHistArray(hist.undone, from, to, diff);\n        }\n\n        // Utility for applying a change to a line by handle or number,\n        // returning the number and optionally registering the line as\n        // changed.\n        function changeLine(doc, handle, changeType, op) {\n          var no = handle,\n              line = handle;\n          if (typeof handle == \"number\") {\n            line = getLine(doc, clipLine(doc, handle));\n          } else {\n            no = lineNo(handle);\n          }\n          if (no == null) {\n            return null;\n          }\n          if (op(line, no) && doc.cm) {\n            regLineChange(doc.cm, no, changeType);\n          }\n          return line;\n        }\n\n        // The document is represented as a BTree consisting of leaves, with\n        // chunk of lines in them, and branches, with up to ten leaves or\n        // other branch nodes below them. The top node is always a branch\n        // node, and is the document object itself (meaning it has\n        // additional methods and properties).\n        //\n        // All nodes have parent links. The tree is used both to go from\n        // line numbers to line objects, and to go from objects to numbers.\n        // It also indexes by height, and is used to convert between height\n        // and line object, and to find the total height of the document.\n        //\n        // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n        function LeafChunk(lines) {\n          var this$1 = this;\n\n          this.lines = lines;\n          this.parent = null;\n          var height = 0;\n          for (var i = 0; i < lines.length; ++i) {\n            lines[i].parent = this$1;\n            height += lines[i].height;\n          }\n          this.height = height;\n        }\n\n        LeafChunk.prototype = {\n          chunkSize: function chunkSize() {\n            return this.lines.length;\n          },\n\n          // Remove the n lines at offset 'at'.\n          removeInner: function removeInner(at, n) {\n            var this$1 = this;\n\n            for (var i = at, e = at + n; i < e; ++i) {\n              var line = this$1.lines[i];\n              this$1.height -= line.height;\n              cleanUpLine(line);\n              signalLater(line, \"delete\");\n            }\n            this.lines.splice(at, n);\n          },\n\n          // Helper used to collapse a small branch into a single leaf.\n          collapse: function collapse(lines) {\n            lines.push.apply(lines, this.lines);\n          },\n\n          // Insert the given array of lines at offset 'at', count them as\n          // having the given height.\n          insertInner: function insertInner(at, lines, height) {\n            var this$1 = this;\n\n            this.height += height;\n            this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n            for (var i = 0; i < lines.length; ++i) {\n              lines[i].parent = this$1;\n            }\n          },\n\n          // Used to iterate over a part of the tree.\n          iterN: function iterN(at, n, op) {\n            var this$1 = this;\n\n            for (var e = at + n; at < e; ++at) {\n              if (op(this$1.lines[at])) {\n                return true;\n              }\n            }\n          }\n        };\n\n        function BranchChunk(children) {\n          var this$1 = this;\n\n          this.children = children;\n          var size = 0,\n              height = 0;\n          for (var i = 0; i < children.length; ++i) {\n            var ch = children[i];\n            size += ch.chunkSize();height += ch.height;\n            ch.parent = this$1;\n          }\n          this.size = size;\n          this.height = height;\n          this.parent = null;\n        }\n\n        BranchChunk.prototype = {\n          chunkSize: function chunkSize() {\n            return this.size;\n          },\n\n          removeInner: function removeInner(at, n) {\n            var this$1 = this;\n\n            this.size -= n;\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at < sz) {\n                var rm = Math.min(n, sz - at),\n                    oldHeight = child.height;\n                child.removeInner(at, rm);\n                this$1.height -= oldHeight - child.height;\n                if (sz == rm) {\n                  this$1.children.splice(i--, 1);child.parent = null;\n                }\n                if ((n -= rm) == 0) {\n                  break;\n                }\n                at = 0;\n              } else {\n                at -= sz;\n              }\n            }\n            // If the result is smaller than 25 lines, ensure that it is a\n            // single leaf node.\n            if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n              var lines = [];\n              this.collapse(lines);\n              this.children = [new LeafChunk(lines)];\n              this.children[0].parent = this;\n            }\n          },\n\n          collapse: function collapse(lines) {\n            var this$1 = this;\n\n            for (var i = 0; i < this.children.length; ++i) {\n              this$1.children[i].collapse(lines);\n            }\n          },\n\n          insertInner: function insertInner(at, lines, height) {\n            var this$1 = this;\n\n            this.size += lines.length;\n            this.height += height;\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at <= sz) {\n                child.insertInner(at, lines, height);\n                if (child.lines && child.lines.length > 50) {\n                  // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n                  // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n                  var remaining = child.lines.length % 25 + 25;\n                  for (var pos = remaining; pos < child.lines.length;) {\n                    var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n                    child.height -= leaf.height;\n                    this$1.children.splice(++i, 0, leaf);\n                    leaf.parent = this$1;\n                  }\n                  child.lines = child.lines.slice(0, remaining);\n                  this$1.maybeSpill();\n                }\n                break;\n              }\n              at -= sz;\n            }\n          },\n\n          // When a node has grown, check whether it should be split.\n          maybeSpill: function maybeSpill() {\n            if (this.children.length <= 10) {\n              return;\n            }\n            var me = this;\n            do {\n              var spilled = me.children.splice(me.children.length - 5, 5);\n              var sibling = new BranchChunk(spilled);\n              if (!me.parent) {\n                // Become the parent node\n                var copy = new BranchChunk(me.children);\n                copy.parent = me;\n                me.children = [copy, sibling];\n                me = copy;\n              } else {\n                me.size -= sibling.size;\n                me.height -= sibling.height;\n                var myIndex = indexOf(me.parent.children, me);\n                me.parent.children.splice(myIndex + 1, 0, sibling);\n              }\n              sibling.parent = me.parent;\n            } while (me.children.length > 10);\n            me.parent.maybeSpill();\n          },\n\n          iterN: function iterN(at, n, op) {\n            var this$1 = this;\n\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at < sz) {\n                var used = Math.min(n, sz - at);\n                if (child.iterN(at, used, op)) {\n                  return true;\n                }\n                if ((n -= used) == 0) {\n                  break;\n                }\n                at = 0;\n              } else {\n                at -= sz;\n              }\n            }\n          }\n        };\n\n        // Line widgets are block elements displayed above or below a line.\n\n        var LineWidget = function LineWidget(doc, node, options) {\n          var this$1 = this;\n\n          if (options) {\n            for (var opt in options) {\n              if (options.hasOwnProperty(opt)) {\n                this$1[opt] = options[opt];\n              }\n            }\n          }\n          this.doc = doc;\n          this.node = node;\n        };\n\n        LineWidget.prototype.clear = function () {\n          var this$1 = this;\n\n          var cm = this.doc.cm,\n              ws = this.line.widgets,\n              line = this.line,\n              no = lineNo(line);\n          if (no == null || !ws) {\n            return;\n          }\n          for (var i = 0; i < ws.length; ++i) {\n            if (ws[i] == this$1) {\n              ws.splice(i--, 1);\n            }\n          }\n          if (!ws.length) {\n            line.widgets = null;\n          }\n          var height = widgetHeight(this);\n          updateLineHeight(line, Math.max(0, line.height - height));\n          if (cm) {\n            runInOp(cm, function () {\n              adjustScrollWhenAboveVisible(cm, line, -height);\n              regLineChange(cm, no, \"widget\");\n            });\n            signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n          }\n        };\n\n        LineWidget.prototype.changed = function () {\n          var this$1 = this;\n\n          var oldH = this.height,\n              cm = this.doc.cm,\n              line = this.line;\n          this.height = null;\n          var diff = widgetHeight(this) - oldH;\n          if (!diff) {\n            return;\n          }\n          updateLineHeight(line, line.height + diff);\n          if (cm) {\n            runInOp(cm, function () {\n              cm.curOp.forceUpdate = true;\n              adjustScrollWhenAboveVisible(cm, line, diff);\n              signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n            });\n          }\n        };\n        eventMixin(LineWidget);\n\n        function adjustScrollWhenAboveVisible(cm, line, diff) {\n          if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n            addToScrollTop(cm, diff);\n          }\n        }\n\n        function addLineWidget(doc, handle, node, options) {\n          var widget = new LineWidget(doc, node, options);\n          var cm = doc.cm;\n          if (cm && widget.noHScroll) {\n            cm.display.alignWidgets = true;\n          }\n          changeLine(doc, handle, \"widget\", function (line) {\n            var widgets = line.widgets || (line.widgets = []);\n            if (widget.insertAt == null) {\n              widgets.push(widget);\n            } else {\n              widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n            }\n            widget.line = line;\n            if (cm && !lineIsHidden(doc, line)) {\n              var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n              updateLineHeight(line, line.height + widgetHeight(widget));\n              if (aboveVisible) {\n                addToScrollTop(cm, widget.height);\n              }\n              cm.curOp.forceUpdate = true;\n            }\n            return true;\n          });\n          signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n          return widget;\n        }\n\n        // TEXTMARKERS\n\n        // Created with markText and setBookmark methods. A TextMarker is a\n        // handle that can be used to clear or find a marked position in the\n        // document. Line objects hold arrays (markedSpans) containing\n        // {from, to, marker} object pointing to such marker objects, and\n        // indicating that such a marker is present on that line. Multiple\n        // lines may point to the same marker when it spans across lines.\n        // The spans will have null for their from/to properties when the\n        // marker continues beyond the start/end of the line. Markers have\n        // links back to the lines they currently touch.\n\n        // Collapsed markers have unique ids, in order to be able to order\n        // them, which is needed for uniquely determining an outer marker\n        // when they overlap (they may nest, but not partially overlap).\n        var nextMarkerId = 0;\n\n        var TextMarker = function TextMarker(doc, type) {\n          this.lines = [];\n          this.type = type;\n          this.doc = doc;\n          this.id = ++nextMarkerId;\n        };\n\n        // Clear the marker.\n        TextMarker.prototype.clear = function () {\n          var this$1 = this;\n\n          if (this.explicitlyCleared) {\n            return;\n          }\n          var cm = this.doc.cm,\n              withOp = cm && !cm.curOp;\n          if (withOp) {\n            _startOperation(cm);\n          }\n          if (hasHandler(this, \"clear\")) {\n            var found = this.find();\n            if (found) {\n              signalLater(this, \"clear\", found.from, found.to);\n            }\n          }\n          var min = null,\n              max = null;\n          for (var i = 0; i < this.lines.length; ++i) {\n            var line = this$1.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this$1);\n            if (cm && !this$1.collapsed) {\n              regLineChange(cm, lineNo(line), \"text\");\n            } else if (cm) {\n              if (span.to != null) {\n                max = lineNo(line);\n              }\n              if (span.from != null) {\n                min = lineNo(line);\n              }\n            }\n            line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n            if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm) {\n              updateLineHeight(line, textHeight(cm.display));\n            }\n          }\n          if (cm && this.collapsed && !cm.options.lineWrapping) {\n            for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n              var visual = visualLine(this$1.lines[i$1]),\n                  len = lineLength(visual);\n              if (len > cm.display.maxLineLength) {\n                cm.display.maxLine = visual;\n                cm.display.maxLineLength = len;\n                cm.display.maxLineChanged = true;\n              }\n            }\n          }\n\n          if (min != null && cm && this.collapsed) {\n            regChange(cm, min, max + 1);\n          }\n          this.lines.length = 0;\n          this.explicitlyCleared = true;\n          if (this.atomic && this.doc.cantEdit) {\n            this.doc.cantEdit = false;\n            if (cm) {\n              reCheckSelection(cm.doc);\n            }\n          }\n          if (cm) {\n            signalLater(cm, \"markerCleared\", cm, this, min, max);\n          }\n          if (withOp) {\n            _endOperation(cm);\n          }\n          if (this.parent) {\n            this.parent.clear();\n          }\n        };\n\n        // Find the position of the marker in the document. Returns a {from,\n        // to} object by default. Side can be passed to get a specific side\n        // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n        // Pos objects returned contain a line object, rather than a line\n        // number (used to prevent looking up the same line twice).\n        TextMarker.prototype.find = function (side, lineObj) {\n          var this$1 = this;\n\n          if (side == null && this.type == \"bookmark\") {\n            side = 1;\n          }\n          var from, to;\n          for (var i = 0; i < this.lines.length; ++i) {\n            var line = this$1.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this$1);\n            if (span.from != null) {\n              from = Pos(lineObj ? line : lineNo(line), span.from);\n              if (side == -1) {\n                return from;\n              }\n            }\n            if (span.to != null) {\n              to = Pos(lineObj ? line : lineNo(line), span.to);\n              if (side == 1) {\n                return to;\n              }\n            }\n          }\n          return from && { from: from, to: to };\n        };\n\n        // Signals that the marker's widget changed, and surrounding layout\n        // should be recomputed.\n        TextMarker.prototype.changed = function () {\n          var this$1 = this;\n\n          var pos = this.find(-1, true),\n              widget = this,\n              cm = this.doc.cm;\n          if (!pos || !cm) {\n            return;\n          }\n          runInOp(cm, function () {\n            var line = pos.line,\n                lineN = lineNo(pos.line);\n            var view = findViewForLine(cm, lineN);\n            if (view) {\n              clearLineMeasurementCacheFor(view);\n              cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n            }\n            cm.curOp.updateMaxLine = true;\n            if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n              var oldHeight = widget.height;\n              widget.height = null;\n              var dHeight = widgetHeight(widget) - oldHeight;\n              if (dHeight) {\n                updateLineHeight(line, line.height + dHeight);\n              }\n            }\n            signalLater(cm, \"markerChanged\", cm, this$1);\n          });\n        };\n\n        TextMarker.prototype.attachLine = function (line) {\n          if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;\n            if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n              (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n            }\n          }\n          this.lines.push(line);\n        };\n\n        TextMarker.prototype.detachLine = function (line) {\n          this.lines.splice(indexOf(this.lines, line), 1);\n          if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n          }\n        };\n        eventMixin(TextMarker);\n\n        // Create a marker, wire it up to the right lines, and\n        function _markText(doc, from, to, options, type) {\n          // Shared markers (across linked documents) are handled separately\n          // (markTextShared will call out to this again, once per\n          // document).\n          if (options && options.shared) {\n            return markTextShared(doc, from, to, options, type);\n          }\n          // Ensure we are in an operation.\n          if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, _markText)(doc, from, to, options, type);\n          }\n\n          var marker = new TextMarker(doc, type),\n              diff = cmp(from, to);\n          if (options) {\n            copyObj(options, marker, false);\n          }\n          // Don't connect empty markers unless clearWhenEmpty is false\n          if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n            return marker;\n          }\n          if (marker.replacedWith) {\n            // Showing up as a widget implies collapsed (widget replaces text)\n            marker.collapsed = true;\n            marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n            if (!options.handleMouseEvents) {\n              marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            if (options.insertLeft) {\n              marker.widgetNode.insertLeft = true;\n            }\n          }\n          if (marker.collapsed) {\n            if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n              throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n            }\n            seeCollapsedSpans();\n          }\n\n          if (marker.addToHistory) {\n            addChangeToHistory(doc, { from: from, to: to, origin: \"markText\" }, doc.sel, NaN);\n          }\n\n          var curLine = from.line,\n              cm = doc.cm,\n              updateMaxLine;\n          doc.iter(curLine, to.line + 1, function (line) {\n            if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n              updateMaxLine = true;\n            }\n            if (marker.collapsed && curLine != from.line) {\n              updateLineHeight(line, 0);\n            }\n            addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n            ++curLine;\n          });\n          // lineIsHidden depends on the presence of the spans, so needs a second pass\n          if (marker.collapsed) {\n            doc.iter(from.line, to.line + 1, function (line) {\n              if (lineIsHidden(doc, line)) {\n                updateLineHeight(line, 0);\n              }\n            });\n          }\n\n          if (marker.clearOnEnter) {\n            on(marker, \"beforeCursorEnter\", function () {\n              return marker.clear();\n            });\n          }\n\n          if (marker.readOnly) {\n            seeReadOnlySpans();\n            if (doc.history.done.length || doc.history.undone.length) {\n              doc.clearHistory();\n            }\n          }\n          if (marker.collapsed) {\n            marker.id = ++nextMarkerId;\n            marker.atomic = true;\n          }\n          if (cm) {\n            // Sync editor state\n            if (updateMaxLine) {\n              cm.curOp.updateMaxLine = true;\n            }\n            if (marker.collapsed) {\n              regChange(cm, from.line, to.line + 1);\n            } else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css) {\n              for (var i = from.line; i <= to.line; i++) {\n                regLineChange(cm, i, \"text\");\n              }\n            }\n            if (marker.atomic) {\n              reCheckSelection(cm.doc);\n            }\n            signalLater(cm, \"markerAdded\", cm, marker);\n          }\n          return marker;\n        }\n\n        // SHARED TEXTMARKERS\n\n        // A shared marker spans multiple linked documents. It is\n        // implemented as a meta-marker-object controlling multiple normal\n        // markers.\n        var SharedTextMarker = function SharedTextMarker(markers, primary) {\n          var this$1 = this;\n\n          this.markers = markers;\n          this.primary = primary;\n          for (var i = 0; i < markers.length; ++i) {\n            markers[i].parent = this$1;\n          }\n        };\n\n        SharedTextMarker.prototype.clear = function () {\n          var this$1 = this;\n\n          if (this.explicitlyCleared) {\n            return;\n          }\n          this.explicitlyCleared = true;\n          for (var i = 0; i < this.markers.length; ++i) {\n            this$1.markers[i].clear();\n          }\n          signalLater(this, \"clear\");\n        };\n\n        SharedTextMarker.prototype.find = function (side, lineObj) {\n          return this.primary.find(side, lineObj);\n        };\n        eventMixin(SharedTextMarker);\n\n        function markTextShared(doc, from, to, options, type) {\n          options = copyObj(options);\n          options.shared = false;\n          var markers = [_markText(doc, from, to, options, type)],\n              primary = markers[0];\n          var widget = options.widgetNode;\n          linkedDocs(doc, function (doc) {\n            if (widget) {\n              options.widgetNode = widget.cloneNode(true);\n            }\n            markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n            for (var i = 0; i < doc.linked.length; ++i) {\n              if (doc.linked[i].isParent) {\n                return;\n              }\n            }\n            primary = lst(markers);\n          });\n          return new SharedTextMarker(markers, primary);\n        }\n\n        function findSharedMarkers(doc) {\n          return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n            return m.parent;\n          });\n        }\n\n        function copySharedMarkers(doc, markers) {\n          for (var i = 0; i < markers.length; i++) {\n            var marker = markers[i],\n                pos = marker.find();\n            var mFrom = doc.clipPos(pos.from),\n                mTo = doc.clipPos(pos.to);\n            if (cmp(mFrom, mTo)) {\n              var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n              marker.markers.push(subMark);\n              subMark.parent = marker;\n            }\n          }\n        }\n\n        function detachSharedMarkers(markers) {\n          var loop = function loop(i) {\n            var marker = markers[i],\n                linked = [marker.primary.doc];\n            linkedDocs(marker.primary.doc, function (d) {\n              return linked.push(d);\n            });\n            for (var j = 0; j < marker.markers.length; j++) {\n              var subMarker = marker.markers[j];\n              if (indexOf(linked, subMarker.doc) == -1) {\n                subMarker.parent = null;\n                marker.markers.splice(j--, 1);\n              }\n            }\n          };\n\n          for (var i = 0; i < markers.length; i++) {\n            loop(i);\n          }\n        }\n\n        var nextDocId = 0;\n        var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n          if (!(this instanceof Doc)) {\n            return new Doc(text, mode, firstLine, lineSep, direction);\n          }\n          if (firstLine == null) {\n            firstLine = 0;\n          }\n\n          BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n          this.first = firstLine;\n          this.scrollTop = this.scrollLeft = 0;\n          this.cantEdit = false;\n          this.cleanGeneration = 1;\n          this.modeFrontier = this.highlightFrontier = firstLine;\n          var start = Pos(firstLine, 0);\n          this.sel = simpleSelection(start);\n          this.history = new History(null);\n          this.id = ++nextDocId;\n          this.modeOption = mode;\n          this.lineSep = lineSep;\n          this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n          this.extend = false;\n\n          if (typeof text == \"string\") {\n            text = this.splitLines(text);\n          }\n          updateDoc(this, { from: start, to: start, text: text });\n          setSelection(this, simpleSelection(start), sel_dontScroll);\n        };\n\n        Doc.prototype = createObj(BranchChunk.prototype, {\n          constructor: Doc,\n          // Iterate over the document. Supports two forms -- with only one\n          // argument, it calls that for each line in the document. With\n          // three, it iterates over the range given by the first two (with\n          // the second being non-inclusive).\n          iter: function iter(from, to, op) {\n            if (op) {\n              this.iterN(from - this.first, to - from, op);\n            } else {\n              this.iterN(this.first, this.first + this.size, from);\n            }\n          },\n\n          // Non-public interface for adding and removing lines.\n          insert: function insert(at, lines) {\n            var height = 0;\n            for (var i = 0; i < lines.length; ++i) {\n              height += lines[i].height;\n            }\n            this.insertInner(at - this.first, lines, height);\n          },\n          remove: function remove(at, n) {\n            this.removeInner(at - this.first, n);\n          },\n\n          // From here, the methods are part of the public interface. Most\n          // are also available from CodeMirror (editor) instances.\n\n          getValue: function getValue(lineSep) {\n            var lines = getLines(this, this.first, this.first + this.size);\n            if (lineSep === false) {\n              return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n          },\n          setValue: docMethodOp(function (code) {\n            var top = Pos(this.first, 0),\n                last = this.first + this.size - 1;\n            makeChange(this, { from: top, to: Pos(last, getLine(this, last).text.length),\n              text: this.splitLines(code), origin: \"setValue\", full: true }, true);\n            if (this.cm) {\n              scrollToCoords(this.cm, 0, 0);\n            }\n            setSelection(this, simpleSelection(top), sel_dontScroll);\n          }),\n          replaceRange: function replaceRange(code, from, to, origin) {\n            from = _clipPos(this, from);\n            to = to ? _clipPos(this, to) : from;\n            _replaceRange(this, code, from, to, origin);\n          },\n          getRange: function getRange(from, to, lineSep) {\n            var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n            if (lineSep === false) {\n              return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n          },\n\n          getLine: function getLine(line) {\n            var l = this.getLineHandle(line);return l && l.text;\n          },\n\n          getLineHandle: function getLineHandle(line) {\n            if (isLine(this, line)) {\n              return getLine(this, line);\n            }\n          },\n          getLineNumber: function getLineNumber(line) {\n            return lineNo(line);\n          },\n\n          getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n            if (typeof line == \"number\") {\n              line = getLine(this, line);\n            }\n            return visualLine(line);\n          },\n\n          lineCount: function lineCount() {\n            return this.size;\n          },\n          firstLine: function firstLine() {\n            return this.first;\n          },\n          lastLine: function lastLine() {\n            return this.first + this.size - 1;\n          },\n\n          clipPos: function clipPos(pos) {\n            return _clipPos(this, pos);\n          },\n\n          getCursor: function getCursor(start) {\n            var range$$1 = this.sel.primary(),\n                pos;\n            if (start == null || start == \"head\") {\n              pos = range$$1.head;\n            } else if (start == \"anchor\") {\n              pos = range$$1.anchor;\n            } else if (start == \"end\" || start == \"to\" || start === false) {\n              pos = range$$1.to();\n            } else {\n              pos = range$$1.from();\n            }\n            return pos;\n          },\n          listSelections: function listSelections() {\n            return this.sel.ranges;\n          },\n          somethingSelected: function somethingSelected() {\n            return this.sel.somethingSelected();\n          },\n\n          setCursor: docMethodOp(function (line, ch, options) {\n            setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n          }),\n          setSelection: docMethodOp(function (anchor, head, options) {\n            setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n          }),\n          extendSelection: docMethodOp(function (head, other, options) {\n            extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n          }),\n          extendSelections: docMethodOp(function (heads, options) {\n            extendSelections(this, clipPosArray(this, heads), options);\n          }),\n          extendSelectionsBy: docMethodOp(function (f, options) {\n            var heads = map(this.sel.ranges, f);\n            extendSelections(this, clipPosArray(this, heads), options);\n          }),\n          setSelections: docMethodOp(function (ranges, primary, options) {\n            var this$1 = this;\n\n            if (!ranges.length) {\n              return;\n            }\n            var out = [];\n            for (var i = 0; i < ranges.length; i++) {\n              out[i] = new Range(_clipPos(this$1, ranges[i].anchor), _clipPos(this$1, ranges[i].head));\n            }\n            if (primary == null) {\n              primary = Math.min(ranges.length - 1, this.sel.primIndex);\n            }\n            setSelection(this, normalizeSelection(out, primary), options);\n          }),\n          addSelection: docMethodOp(function (anchor, head, options) {\n            var ranges = this.sel.ranges.slice(0);\n            ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n            setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n          }),\n\n          getSelection: function getSelection(lineSep) {\n            var this$1 = this;\n\n            var ranges = this.sel.ranges,\n                lines;\n            for (var i = 0; i < ranges.length; i++) {\n              var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n              lines = lines ? lines.concat(sel) : sel;\n            }\n            if (lineSep === false) {\n              return lines;\n            } else {\n              return lines.join(lineSep || this.lineSeparator());\n            }\n          },\n          getSelections: function getSelections(lineSep) {\n            var this$1 = this;\n\n            var parts = [],\n                ranges = this.sel.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n              var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n              if (lineSep !== false) {\n                sel = sel.join(lineSep || this$1.lineSeparator());\n              }\n              parts[i] = sel;\n            }\n            return parts;\n          },\n          replaceSelection: function replaceSelection(code, collapse, origin) {\n            var dup = [];\n            for (var i = 0; i < this.sel.ranges.length; i++) {\n              dup[i] = code;\n            }\n            this.replaceSelections(dup, collapse, origin || \"+input\");\n          },\n          replaceSelections: docMethodOp(function (code, collapse, origin) {\n            var this$1 = this;\n\n            var changes = [],\n                sel = this.sel;\n            for (var i = 0; i < sel.ranges.length; i++) {\n              var range$$1 = sel.ranges[i];\n              changes[i] = { from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin };\n            }\n            var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n            for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n              makeChange(this$1, changes[i$1]);\n            }\n            if (newSel) {\n              setSelectionReplaceHistory(this, newSel);\n            } else if (this.cm) {\n              ensureCursorVisible(this.cm);\n            }\n          }),\n          undo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\");\n          }),\n          redo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\");\n          }),\n          undoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\", true);\n          }),\n          redoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\", true);\n          }),\n\n          setExtending: function setExtending(val) {\n            this.extend = val;\n          },\n          getExtending: function getExtending() {\n            return this.extend;\n          },\n\n          historySize: function historySize() {\n            var hist = this.history,\n                done = 0,\n                undone = 0;\n            for (var i = 0; i < hist.done.length; i++) {\n              if (!hist.done[i].ranges) {\n                ++done;\n              }\n            }\n            for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n              if (!hist.undone[i$1].ranges) {\n                ++undone;\n              }\n            }\n            return { undo: done, redo: undone };\n          },\n          clearHistory: function clearHistory() {\n            this.history = new History(this.history.maxGeneration);\n          },\n\n          markClean: function markClean() {\n            this.cleanGeneration = this.changeGeneration(true);\n          },\n          changeGeneration: function changeGeneration(forceSplit) {\n            if (forceSplit) {\n              this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n            }\n            return this.history.generation;\n          },\n          isClean: function isClean(gen) {\n            return this.history.generation == (gen || this.cleanGeneration);\n          },\n\n          getHistory: function getHistory() {\n            return { done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone) };\n          },\n          setHistory: function setHistory(histData) {\n            var hist = this.history = new History(this.history.maxGeneration);\n            hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n            hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n          },\n\n          setGutterMarker: docMethodOp(function (line, gutterID, value) {\n            return changeLine(this, line, \"gutter\", function (line) {\n              var markers = line.gutterMarkers || (line.gutterMarkers = {});\n              markers[gutterID] = value;\n              if (!value && isEmpty(markers)) {\n                line.gutterMarkers = null;\n              }\n              return true;\n            });\n          }),\n\n          clearGutter: docMethodOp(function (gutterID) {\n            var this$1 = this;\n\n            this.iter(function (line) {\n              if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n                changeLine(this$1, line, \"gutter\", function () {\n                  line.gutterMarkers[gutterID] = null;\n                  if (isEmpty(line.gutterMarkers)) {\n                    line.gutterMarkers = null;\n                  }\n                  return true;\n                });\n              }\n            });\n          }),\n\n          lineInfo: function lineInfo(line) {\n            var n;\n            if (typeof line == \"number\") {\n              if (!isLine(this, line)) {\n                return null;\n              }\n              n = line;\n              line = getLine(this, line);\n              if (!line) {\n                return null;\n              }\n            } else {\n              n = lineNo(line);\n              if (n == null) {\n                return null;\n              }\n            }\n            return { line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets };\n          },\n\n          addLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n              var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n              if (!line[prop]) {\n                line[prop] = cls;\n              } else if (classTest(cls).test(line[prop])) {\n                return false;\n              } else {\n                line[prop] += \" \" + cls;\n              }\n              return true;\n            });\n          }),\n          removeLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n              var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n              var cur = line[prop];\n              if (!cur) {\n                return false;\n              } else if (cls == null) {\n                line[prop] = null;\n              } else {\n                var found = cur.match(classTest(cls));\n                if (!found) {\n                  return false;\n                }\n                var end = found.index + found[0].length;\n                line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n              }\n              return true;\n            });\n          }),\n\n          addLineWidget: docMethodOp(function (handle, node, options) {\n            return addLineWidget(this, handle, node, options);\n          }),\n          removeLineWidget: function removeLineWidget(widget) {\n            widget.clear();\n          },\n\n          markText: function markText(from, to, options) {\n            return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n          },\n          setBookmark: function setBookmark(pos, options) {\n            var realOpts = { replacedWith: options && (options.nodeType == null ? options.widget : options),\n              insertLeft: options && options.insertLeft,\n              clearWhenEmpty: false, shared: options && options.shared,\n              handleMouseEvents: options && options.handleMouseEvents };\n            pos = _clipPos(this, pos);\n            return _markText(this, pos, pos, realOpts, \"bookmark\");\n          },\n          findMarksAt: function findMarksAt(pos) {\n            pos = _clipPos(this, pos);\n            var markers = [],\n                spans = getLine(this, pos.line).markedSpans;\n            if (spans) {\n              for (var i = 0; i < spans.length; ++i) {\n                var span = spans[i];\n                if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n                  markers.push(span.marker.parent || span.marker);\n                }\n              }\n            }\n            return markers;\n          },\n          findMarks: function findMarks(from, to, filter) {\n            from = _clipPos(this, from);to = _clipPos(this, to);\n            var found = [],\n                lineNo$$1 = from.line;\n            this.iter(from.line, to.line + 1, function (line) {\n              var spans = line.markedSpans;\n              if (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                  var span = spans[i];\n                  if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to || span.from == null && lineNo$$1 != from.line || span.from != null && lineNo$$1 == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n                    found.push(span.marker.parent || span.marker);\n                  }\n                }\n              }\n              ++lineNo$$1;\n            });\n            return found;\n          },\n          getAllMarks: function getAllMarks() {\n            var markers = [];\n            this.iter(function (line) {\n              var sps = line.markedSpans;\n              if (sps) {\n                for (var i = 0; i < sps.length; ++i) {\n                  if (sps[i].from != null) {\n                    markers.push(sps[i].marker);\n                  }\n                }\n              }\n            });\n            return markers;\n          },\n\n          posFromIndex: function posFromIndex(off) {\n            var ch,\n                lineNo$$1 = this.first,\n                sepSize = this.lineSeparator().length;\n            this.iter(function (line) {\n              var sz = line.text.length + sepSize;\n              if (sz > off) {\n                ch = off;return true;\n              }\n              off -= sz;\n              ++lineNo$$1;\n            });\n            return _clipPos(this, Pos(lineNo$$1, ch));\n          },\n          indexFromPos: function indexFromPos(coords) {\n            coords = _clipPos(this, coords);\n            var index = coords.ch;\n            if (coords.line < this.first || coords.ch < 0) {\n              return 0;\n            }\n            var sepSize = this.lineSeparator().length;\n            this.iter(this.first, coords.line, function (line) {\n              // iter aborts when callback returns a truthy value\n              index += line.text.length + sepSize;\n            });\n            return index;\n          },\n\n          copy: function copy(copyHistory) {\n            var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n            doc.scrollTop = this.scrollTop;doc.scrollLeft = this.scrollLeft;\n            doc.sel = this.sel;\n            doc.extend = false;\n            if (copyHistory) {\n              doc.history.undoDepth = this.history.undoDepth;\n              doc.setHistory(this.getHistory());\n            }\n            return doc;\n          },\n\n          linkedDoc: function linkedDoc(options) {\n            if (!options) {\n              options = {};\n            }\n            var from = this.first,\n                to = this.first + this.size;\n            if (options.from != null && options.from > from) {\n              from = options.from;\n            }\n            if (options.to != null && options.to < to) {\n              to = options.to;\n            }\n            var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n            if (options.sharedHist) {\n              copy.history = this.history;\n            }(this.linked || (this.linked = [])).push({ doc: copy, sharedHist: options.sharedHist });\n            copy.linked = [{ doc: this, isParent: true, sharedHist: options.sharedHist }];\n            copySharedMarkers(copy, findSharedMarkers(this));\n            return copy;\n          },\n          unlinkDoc: function unlinkDoc(other) {\n            var this$1 = this;\n\n            if (other instanceof CodeMirror$1) {\n              other = other.doc;\n            }\n            if (this.linked) {\n              for (var i = 0; i < this.linked.length; ++i) {\n                var link = this$1.linked[i];\n                if (link.doc != other) {\n                  continue;\n                }\n                this$1.linked.splice(i, 1);\n                other.unlinkDoc(this$1);\n                detachSharedMarkers(findSharedMarkers(this$1));\n                break;\n              }\n            }\n            // If the histories were shared, split them again\n            if (other.history == this.history) {\n              var splitIds = [other.id];\n              linkedDocs(other, function (doc) {\n                return splitIds.push(doc.id);\n              }, true);\n              other.history = new History(null);\n              other.history.done = copyHistoryArray(this.history.done, splitIds);\n              other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n            }\n          },\n          iterLinkedDocs: function iterLinkedDocs(f) {\n            linkedDocs(this, f);\n          },\n\n          getMode: function getMode() {\n            return this.mode;\n          },\n          getEditor: function getEditor() {\n            return this.cm;\n          },\n\n          splitLines: function splitLines(str) {\n            if (this.lineSep) {\n              return str.split(this.lineSep);\n            }\n            return splitLinesAuto(str);\n          },\n          lineSeparator: function lineSeparator() {\n            return this.lineSep || \"\\n\";\n          },\n\n          setDirection: docMethodOp(function (dir) {\n            if (dir != \"rtl\") {\n              dir = \"ltr\";\n            }\n            if (dir == this.direction) {\n              return;\n            }\n            this.direction = dir;\n            this.iter(function (line) {\n              return line.order = null;\n            });\n            if (this.cm) {\n              directionChanged(this.cm);\n            }\n          })\n        });\n\n        // Public alias.\n        Doc.prototype.eachLine = Doc.prototype.iter;\n\n        // Kludge to work around strange IE behavior where it'll sometimes\n        // re-fire a series of drag-related events right after the drop (#1551)\n        var lastDrop = 0;\n\n        function onDrop(e) {\n          var cm = this;\n          clearDragCursor(cm);\n          if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n          }\n          e_preventDefault(e);\n          if (ie) {\n            lastDrop = +new Date();\n          }\n          var pos = posFromMouse(cm, e, true),\n              files = e.dataTransfer.files;\n          if (!pos || cm.isReadOnly()) {\n            return;\n          }\n          // Might be a file drop, in which case we simply extract the text\n          // and insert it.\n          if (files && files.length && window.FileReader && window.File) {\n            var n = files.length,\n                text = Array(n),\n                read = 0;\n            var loadFile = function loadFile(file, i) {\n              if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n                return;\n              }\n\n              var reader = new FileReader();\n              reader.onload = operation(cm, function () {\n                var content = reader.result;\n                if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n                  content = \"\";\n                }\n                text[i] = content;\n                if (++read == n) {\n                  pos = _clipPos(cm.doc, pos);\n                  var change = { from: pos, to: pos,\n                    text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                    origin: \"paste\" };\n                  makeChange(cm.doc, change);\n                  setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n                }\n              });\n              reader.readAsText(file);\n            };\n            for (var i = 0; i < n; ++i) {\n              loadFile(files[i], i);\n            }\n          } else {\n            // Normal drop\n            // Don't do a replace if the drop happened inside of the selected text.\n            if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n              cm.state.draggingText(e);\n              // Ensure the editor is re-focused\n              setTimeout(function () {\n                return cm.display.input.focus();\n              }, 20);\n              return;\n            }\n            try {\n              var text$1 = e.dataTransfer.getData(\"Text\");\n              if (text$1) {\n                var selected;\n                if (cm.state.draggingText && !cm.state.draggingText.copy) {\n                  selected = cm.listSelections();\n                }\n                setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n                if (selected) {\n                  for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n                    _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n                  }\n                }\n                cm.replaceSelection(text$1, \"around\", \"paste\");\n                cm.display.input.focus();\n              }\n            } catch (e) {}\n          }\n        }\n\n        function onDragStart(cm, e) {\n          if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n            e_stop(e);return;\n          }\n          if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n          }\n\n          e.dataTransfer.setData(\"Text\", cm.getSelection());\n          e.dataTransfer.effectAllowed = \"copyMove\";\n\n          // Use dummy image instead of default browsers image.\n          // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n          if (e.dataTransfer.setDragImage && !safari) {\n            var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n            img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n            if (presto) {\n              img.width = img.height = 1;\n              cm.display.wrapper.appendChild(img);\n              // Force a relayout, or Opera won't use our image for some obscure reason\n              img._top = img.offsetTop;\n            }\n            e.dataTransfer.setDragImage(img, 0, 0);\n            if (presto) {\n              img.parentNode.removeChild(img);\n            }\n          }\n        }\n\n        function onDragOver(cm, e) {\n          var pos = posFromMouse(cm, e);\n          if (!pos) {\n            return;\n          }\n          var frag = document.createDocumentFragment();\n          drawSelectionCursor(cm, pos, frag);\n          if (!cm.display.dragCursor) {\n            cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n            cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n          }\n          removeChildrenAndAdd(cm.display.dragCursor, frag);\n        }\n\n        function clearDragCursor(cm) {\n          if (cm.display.dragCursor) {\n            cm.display.lineSpace.removeChild(cm.display.dragCursor);\n            cm.display.dragCursor = null;\n          }\n        }\n\n        // These must be handled carefully, because naively registering a\n        // handler for each editor will cause the editors to never be\n        // garbage collected.\n\n        function forEachCodeMirror(f) {\n          if (!document.getElementsByClassName) {\n            return;\n          }\n          var byClass = document.getElementsByClassName(\"CodeMirror\");\n          for (var i = 0; i < byClass.length; i++) {\n            var cm = byClass[i].CodeMirror;\n            if (cm) {\n              f(cm);\n            }\n          }\n        }\n\n        var globalsRegistered = false;\n        function ensureGlobalHandlers() {\n          if (globalsRegistered) {\n            return;\n          }\n          registerGlobalHandlers();\n          globalsRegistered = true;\n        }\n        function registerGlobalHandlers() {\n          // When the window resizes, we need to refresh active editors.\n          var resizeTimer;\n          on(window, \"resize\", function () {\n            if (resizeTimer == null) {\n              resizeTimer = setTimeout(function () {\n                resizeTimer = null;\n                forEachCodeMirror(onResize);\n              }, 100);\n            }\n          });\n          // When the window loses focus, we want to show the editor as blurred\n          on(window, \"blur\", function () {\n            return forEachCodeMirror(onBlur);\n          });\n        }\n        // Called when the window resizes\n        function onResize(cm) {\n          var d = cm.display;\n          if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth) {\n            return;\n          }\n          // Might be a text scaling operation, clear size caches.\n          d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n          d.scrollbarsClipped = false;\n          cm.setSize();\n        }\n\n        var keyNames = {\n          3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n          19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n          36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n          46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n          106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\",\n          173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n          221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n          63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n        };\n\n        // Number keys\n        for (var i = 0; i < 10; i++) {\n          keyNames[i + 48] = keyNames[i + 96] = String(i);\n        }\n        // Alphabetic keys\n        for (var i$1 = 65; i$1 <= 90; i$1++) {\n          keyNames[i$1] = String.fromCharCode(i$1);\n        }\n        // Function keys\n        for (var i$2 = 1; i$2 <= 12; i$2++) {\n          keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n        }\n\n        var keyMap = {};\n\n        keyMap.basic = {\n          \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n          \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n          \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n          \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n          \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n          \"Esc\": \"singleSelection\"\n        };\n        // Note that the save and find-related commands aren't defined by\n        // default. User code or addons can define them. Unknown commands\n        // are simply ignored.\n        keyMap.pcDefault = {\n          \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n          \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n          \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n          \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n          \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n          \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n          \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n          fallthrough: \"basic\"\n        };\n        // Very basic readline/emacs-style bindings, which are standard on Mac.\n        keyMap.emacsy = {\n          \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n          \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n          \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n          \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n          \"Ctrl-O\": \"openLine\"\n        };\n        keyMap.macDefault = {\n          \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n          \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n          \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n          \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n          \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n          \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n          \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n          fallthrough: [\"basic\", \"emacsy\"]\n        };\n        keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n        // KEYMAP DISPATCH\n\n        function normalizeKeyName(name) {\n          var parts = name.split(/-(?!$)/);\n          name = parts[parts.length - 1];\n          var alt, ctrl, shift, cmd;\n          for (var i = 0; i < parts.length - 1; i++) {\n            var mod = parts[i];\n            if (/^(cmd|meta|m)$/i.test(mod)) {\n              cmd = true;\n            } else if (/^a(lt)?$/i.test(mod)) {\n              alt = true;\n            } else if (/^(c|ctrl|control)$/i.test(mod)) {\n              ctrl = true;\n            } else if (/^s(hift)?$/i.test(mod)) {\n              shift = true;\n            } else {\n              throw new Error(\"Unrecognized modifier name: \" + mod);\n            }\n          }\n          if (alt) {\n            name = \"Alt-\" + name;\n          }\n          if (ctrl) {\n            name = \"Ctrl-\" + name;\n          }\n          if (cmd) {\n            name = \"Cmd-\" + name;\n          }\n          if (shift) {\n            name = \"Shift-\" + name;\n          }\n          return name;\n        }\n\n        // This is a kludge to keep keymaps mostly working as raw objects\n        // (backwards compatibility) while at the same time support features\n        // like normalization and multi-stroke key bindings. It compiles a\n        // new normalized keymap, and then updates the old object to reflect\n        // this.\n        function normalizeKeyMap(keymap) {\n          var copy = {};\n          for (var keyname in keymap) {\n            if (keymap.hasOwnProperty(keyname)) {\n              var value = keymap[keyname];\n              if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n                continue;\n              }\n              if (value == \"...\") {\n                delete keymap[keyname];continue;\n              }\n\n              var keys = map(keyname.split(\" \"), normalizeKeyName);\n              for (var i = 0; i < keys.length; i++) {\n                var val = void 0,\n                    name = void 0;\n                if (i == keys.length - 1) {\n                  name = keys.join(\" \");\n                  val = value;\n                } else {\n                  name = keys.slice(0, i + 1).join(\" \");\n                  val = \"...\";\n                }\n                var prev = copy[name];\n                if (!prev) {\n                  copy[name] = val;\n                } else if (prev != val) {\n                  throw new Error(\"Inconsistent bindings for \" + name);\n                }\n              }\n              delete keymap[keyname];\n            }\n          }\n          for (var prop in copy) {\n            keymap[prop] = copy[prop];\n          }\n          return keymap;\n        }\n\n        function lookupKey(key, map$$1, handle, context) {\n          map$$1 = getKeyMap(map$$1);\n          var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n          if (found === false) {\n            return \"nothing\";\n          }\n          if (found === \"...\") {\n            return \"multi\";\n          }\n          if (found != null && handle(found)) {\n            return \"handled\";\n          }\n\n          if (map$$1.fallthrough) {\n            if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\") {\n              return lookupKey(key, map$$1.fallthrough, handle, context);\n            }\n            for (var i = 0; i < map$$1.fallthrough.length; i++) {\n              var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n              if (result) {\n                return result;\n              }\n            }\n          }\n        }\n\n        // Modifier key presses don't count as 'real' key presses for the\n        // purpose of keymap fallthrough.\n        function isModifierKey(value) {\n          var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n          return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n        }\n\n        function addModifierNames(name, event, noShift) {\n          var base = name;\n          if (event.altKey && base != \"Alt\") {\n            name = \"Alt-\" + name;\n          }\n          if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n            name = \"Ctrl-\" + name;\n          }\n          if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n            name = \"Cmd-\" + name;\n          }\n          if (!noShift && event.shiftKey && base != \"Shift\") {\n            name = \"Shift-\" + name;\n          }\n          return name;\n        }\n\n        // Look up the name of a key as indicated by an event object.\n        function keyName(event, noShift) {\n          if (presto && event.keyCode == 34 && event[\"char\"]) {\n            return false;\n          }\n          var name = keyNames[event.keyCode];\n          if (name == null || event.altGraphKey) {\n            return false;\n          }\n          return addModifierNames(name, event, noShift);\n        }\n\n        function getKeyMap(val) {\n          return typeof val == \"string\" ? keyMap[val] : val;\n        }\n\n        // Helper for deleting text near the selection(s), used to implement\n        // backspace, delete, and similar functionality.\n        function deleteNearSelection(cm, compute) {\n          var ranges = cm.doc.sel.ranges,\n              kill = [];\n          // Build up a set of ranges to kill first, merging overlapping\n          // ranges.\n          for (var i = 0; i < ranges.length; i++) {\n            var toKill = compute(ranges[i]);\n            while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n              var replaced = kill.pop();\n              if (cmp(replaced.from, toKill.from) < 0) {\n                toKill.from = replaced.from;\n                break;\n              }\n            }\n            kill.push(toKill);\n          }\n          // Next, remove those actual ranges.\n          runInOp(cm, function () {\n            for (var i = kill.length - 1; i >= 0; i--) {\n              _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n            }\n            ensureCursorVisible(cm);\n          });\n        }\n\n        // Commands are parameter-less actions that can be performed on an\n        // editor, mostly used for keybindings.\n        var commands = {\n          selectAll: selectAll,\n          singleSelection: function singleSelection(cm) {\n            return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n          },\n          killLine: function killLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n              if (range.empty()) {\n                var len = getLine(cm.doc, range.head.line).text.length;\n                if (range.head.ch == len && range.head.line < cm.lastLine()) {\n                  return { from: range.head, to: Pos(range.head.line + 1, 0) };\n                } else {\n                  return { from: range.head, to: Pos(range.head.line, len) };\n                }\n              } else {\n                return { from: range.from(), to: range.to() };\n              }\n            });\n          },\n          deleteLine: function deleteLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n              return {\n                from: Pos(range.from().line, 0),\n                to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n              };\n            });\n          },\n          delLineLeft: function delLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n              return {\n                from: Pos(range.from().line, 0), to: range.from()\n              };\n            });\n          },\n          delWrappedLineLeft: function delWrappedLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n              var top = cm.charCoords(range.head, \"div\").top + 5;\n              var leftPos = cm.coordsChar({ left: 0, top: top }, \"div\");\n              return { from: leftPos, to: range.from() };\n            });\n          },\n          delWrappedLineRight: function delWrappedLineRight(cm) {\n            return deleteNearSelection(cm, function (range) {\n              var top = cm.charCoords(range.head, \"div\").top + 5;\n              var rightPos = cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n              return { from: range.from(), to: rightPos };\n            });\n          },\n          undo: function undo(cm) {\n            return cm.undo();\n          },\n          redo: function redo(cm) {\n            return cm.redo();\n          },\n          undoSelection: function undoSelection(cm) {\n            return cm.undoSelection();\n          },\n          redoSelection: function redoSelection(cm) {\n            return cm.redoSelection();\n          },\n          goDocStart: function goDocStart(cm) {\n            return cm.extendSelection(Pos(cm.firstLine(), 0));\n          },\n          goDocEnd: function goDocEnd(cm) {\n            return cm.extendSelection(Pos(cm.lastLine()));\n          },\n          goLineStart: function goLineStart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineStart(cm, range.head.line);\n            }, { origin: \"+move\", bias: 1 });\n          },\n          goLineStartSmart: function goLineStartSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineStartSmart(cm, range.head);\n            }, { origin: \"+move\", bias: 1 });\n          },\n          goLineEnd: function goLineEnd(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineEnd(cm, range.head.line);\n            }, { origin: \"+move\", bias: -1 });\n          },\n          goLineRight: function goLineRight(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              return cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n            }, sel_move);\n          },\n          goLineLeft: function goLineLeft(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              return cm.coordsChar({ left: 0, top: top }, \"div\");\n            }, sel_move);\n          },\n          goLineLeftSmart: function goLineLeftSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              var pos = cm.coordsChar({ left: 0, top: top }, \"div\");\n              if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n                return lineStartSmart(cm, range.head);\n              }\n              return pos;\n            }, sel_move);\n          },\n          goLineUp: function goLineUp(cm) {\n            return cm.moveV(-1, \"line\");\n          },\n          goLineDown: function goLineDown(cm) {\n            return cm.moveV(1, \"line\");\n          },\n          goPageUp: function goPageUp(cm) {\n            return cm.moveV(-1, \"page\");\n          },\n          goPageDown: function goPageDown(cm) {\n            return cm.moveV(1, \"page\");\n          },\n          goCharLeft: function goCharLeft(cm) {\n            return cm.moveH(-1, \"char\");\n          },\n          goCharRight: function goCharRight(cm) {\n            return cm.moveH(1, \"char\");\n          },\n          goColumnLeft: function goColumnLeft(cm) {\n            return cm.moveH(-1, \"column\");\n          },\n          goColumnRight: function goColumnRight(cm) {\n            return cm.moveH(1, \"column\");\n          },\n          goWordLeft: function goWordLeft(cm) {\n            return cm.moveH(-1, \"word\");\n          },\n          goGroupRight: function goGroupRight(cm) {\n            return cm.moveH(1, \"group\");\n          },\n          goGroupLeft: function goGroupLeft(cm) {\n            return cm.moveH(-1, \"group\");\n          },\n          goWordRight: function goWordRight(cm) {\n            return cm.moveH(1, \"word\");\n          },\n          delCharBefore: function delCharBefore(cm) {\n            return cm.deleteH(-1, \"char\");\n          },\n          delCharAfter: function delCharAfter(cm) {\n            return cm.deleteH(1, \"char\");\n          },\n          delWordBefore: function delWordBefore(cm) {\n            return cm.deleteH(-1, \"word\");\n          },\n          delWordAfter: function delWordAfter(cm) {\n            return cm.deleteH(1, \"word\");\n          },\n          delGroupBefore: function delGroupBefore(cm) {\n            return cm.deleteH(-1, \"group\");\n          },\n          delGroupAfter: function delGroupAfter(cm) {\n            return cm.deleteH(1, \"group\");\n          },\n          indentAuto: function indentAuto(cm) {\n            return cm.indentSelection(\"smart\");\n          },\n          indentMore: function indentMore(cm) {\n            return cm.indentSelection(\"add\");\n          },\n          indentLess: function indentLess(cm) {\n            return cm.indentSelection(\"subtract\");\n          },\n          insertTab: function insertTab(cm) {\n            return cm.replaceSelection(\"\\t\");\n          },\n          insertSoftTab: function insertSoftTab(cm) {\n            var spaces = [],\n                ranges = cm.listSelections(),\n                tabSize = cm.options.tabSize;\n            for (var i = 0; i < ranges.length; i++) {\n              var pos = ranges[i].from();\n              var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n              spaces.push(spaceStr(tabSize - col % tabSize));\n            }\n            cm.replaceSelections(spaces);\n          },\n          defaultTab: function defaultTab(cm) {\n            if (cm.somethingSelected()) {\n              cm.indentSelection(\"add\");\n            } else {\n              cm.execCommand(\"insertTab\");\n            }\n          },\n          // Swap the two chars left and right of each selection's head.\n          // Move cursor behind the two swapped characters afterwards.\n          //\n          // Doesn't consider line feeds a character.\n          // Doesn't scan more than one line above to find a character.\n          // Doesn't do anything on an empty line.\n          // Doesn't do anything with non-empty selections.\n          transposeChars: function transposeChars(cm) {\n            return runInOp(cm, function () {\n              var ranges = cm.listSelections(),\n                  newSel = [];\n              for (var i = 0; i < ranges.length; i++) {\n                if (!ranges[i].empty()) {\n                  continue;\n                }\n                var cur = ranges[i].head,\n                    line = getLine(cm.doc, cur.line).text;\n                if (line) {\n                  if (cur.ch == line.length) {\n                    cur = new Pos(cur.line, cur.ch - 1);\n                  }\n                  if (cur.ch > 0) {\n                    cur = new Pos(cur.line, cur.ch + 1);\n                    cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n                  } else if (cur.line > cm.doc.first) {\n                    var prev = getLine(cm.doc, cur.line - 1).text;\n                    if (prev) {\n                      cur = new Pos(cur.line, 1);\n                      cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n                    }\n                  }\n                }\n                newSel.push(new Range(cur, cur));\n              }\n              cm.setSelections(newSel);\n            });\n          },\n          newlineAndIndent: function newlineAndIndent(cm) {\n            return runInOp(cm, function () {\n              var sels = cm.listSelections();\n              for (var i = sels.length - 1; i >= 0; i--) {\n                cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n              }\n              sels = cm.listSelections();\n              for (var i$1 = 0; i$1 < sels.length; i$1++) {\n                cm.indentLine(sels[i$1].from().line, null, true);\n              }\n              ensureCursorVisible(cm);\n            });\n          },\n          openLine: function openLine(cm) {\n            return cm.replaceSelection(\"\\n\", \"start\");\n          },\n          toggleOverwrite: function toggleOverwrite(cm) {\n            return cm.toggleOverwrite();\n          }\n        };\n\n        function lineStart(cm, lineN) {\n          var line = getLine(cm.doc, lineN);\n          var visual = visualLine(line);\n          if (visual != line) {\n            lineN = lineNo(visual);\n          }\n          return endOfLine(true, cm, visual, lineN, 1);\n        }\n        function lineEnd(cm, lineN) {\n          var line = getLine(cm.doc, lineN);\n          var visual = visualLineEnd(line);\n          if (visual != line) {\n            lineN = lineNo(visual);\n          }\n          return endOfLine(true, cm, line, lineN, -1);\n        }\n        function lineStartSmart(cm, pos) {\n          var start = lineStart(cm, pos.line);\n          var line = getLine(cm.doc, start.line);\n          var order = getOrder(line, cm.doc.direction);\n          if (!order || order[0].level == 0) {\n            var firstNonWS = Math.max(0, line.text.search(/\\S/));\n            var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n            return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n          }\n          return start;\n        }\n\n        // Run a handler that was bound to a key.\n        function doHandleBinding(cm, bound, dropShift) {\n          if (typeof bound == \"string\") {\n            bound = commands[bound];\n            if (!bound) {\n              return false;\n            }\n          }\n          // Ensure previous input has been read, so that the handler sees a\n          // consistent view of the document\n          cm.display.input.ensurePolled();\n          var prevShift = cm.display.shift,\n              done = false;\n          try {\n            if (cm.isReadOnly()) {\n              cm.state.suppressEdits = true;\n            }\n            if (dropShift) {\n              cm.display.shift = false;\n            }\n            done = bound(cm) != Pass;\n          } finally {\n            cm.display.shift = prevShift;\n            cm.state.suppressEdits = false;\n          }\n          return done;\n        }\n\n        function lookupKeyForEditor(cm, name, handle) {\n          for (var i = 0; i < cm.state.keyMaps.length; i++) {\n            var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n            if (result) {\n              return result;\n            }\n          }\n          return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n        }\n\n        // Note that, despite the name, this function is also used to check\n        // for bound mouse clicks.\n\n        var stopSeq = new Delayed();\n        function dispatchKey(cm, name, e, handle) {\n          var seq = cm.state.keySeq;\n          if (seq) {\n            if (isModifierKey(name)) {\n              return \"handled\";\n            }\n            stopSeq.set(50, function () {\n              if (cm.state.keySeq == seq) {\n                cm.state.keySeq = null;\n                cm.display.input.reset();\n              }\n            });\n            name = seq + \" \" + name;\n          }\n          var result = lookupKeyForEditor(cm, name, handle);\n\n          if (result == \"multi\") {\n            cm.state.keySeq = name;\n          }\n          if (result == \"handled\") {\n            signalLater(cm, \"keyHandled\", cm, name, e);\n          }\n\n          if (result == \"handled\" || result == \"multi\") {\n            e_preventDefault(e);\n            restartBlink(cm);\n          }\n\n          if (seq && !result && /\\'$/.test(name)) {\n            e_preventDefault(e);\n            return true;\n          }\n          return !!result;\n        }\n\n        // Handle a key from the keydown event.\n        function handleKeyBinding(cm, e) {\n          var name = keyName(e, true);\n          if (!name) {\n            return false;\n          }\n\n          if (e.shiftKey && !cm.state.keySeq) {\n            // First try to resolve full name (including 'Shift-'). Failing\n            // that, see if there is a cursor-motion command (starting with\n            // 'go') bound to the keyname without 'Shift-'.\n            return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n              return doHandleBinding(cm, b, true);\n            }) || dispatchKey(cm, name, e, function (b) {\n              if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n                return doHandleBinding(cm, b);\n              }\n            });\n          } else {\n            return dispatchKey(cm, name, e, function (b) {\n              return doHandleBinding(cm, b);\n            });\n          }\n        }\n\n        // Handle a key from the keypress event\n        function handleCharBinding(cm, e, ch) {\n          return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n            return doHandleBinding(cm, b, true);\n          });\n        }\n\n        var lastStoppedKey = null;\n        function onKeyDown(e) {\n          var cm = this;\n          cm.curOp.focus = activeElt();\n          if (signalDOMEvent(cm, e)) {\n            return;\n          }\n          // IE does strange things with escape.\n          if (ie && ie_version < 11 && e.keyCode == 27) {\n            e.returnValue = false;\n          }\n          var code = e.keyCode;\n          cm.display.shift = code == 16 || e.shiftKey;\n          var handled = handleKeyBinding(cm, e);\n          if (presto) {\n            lastStoppedKey = handled ? code : null;\n            // Opera has no cut event... we try to at least catch the key combo\n            if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n              cm.replaceSelection(\"\", null, \"cut\");\n            }\n          }\n\n          // Turn mouse into crosshair when Alt is held on Mac.\n          if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n            showCrossHair(cm);\n          }\n        }\n\n        function showCrossHair(cm) {\n          var lineDiv = cm.display.lineDiv;\n          addClass(lineDiv, \"CodeMirror-crosshair\");\n\n          function up(e) {\n            if (e.keyCode == 18 || !e.altKey) {\n              rmClass(lineDiv, \"CodeMirror-crosshair\");\n              off(document, \"keyup\", up);\n              off(document, \"mouseover\", up);\n            }\n          }\n          on(document, \"keyup\", up);\n          on(document, \"mouseover\", up);\n        }\n\n        function onKeyUp(e) {\n          if (e.keyCode == 16) {\n            this.doc.sel.shift = false;\n          }\n          signalDOMEvent(this, e);\n        }\n\n        function onKeyPress(e) {\n          var cm = this;\n          if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n            return;\n          }\n          var keyCode = e.keyCode,\n              charCode = e.charCode;\n          if (presto && keyCode == lastStoppedKey) {\n            lastStoppedKey = null;e_preventDefault(e);return;\n          }\n          if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n            return;\n          }\n          var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n          // Some browsers fire keypress events for backspace\n          if (ch == \"\\x08\") {\n            return;\n          }\n          if (handleCharBinding(cm, e, ch)) {\n            return;\n          }\n          cm.display.input.onKeyPress(e);\n        }\n\n        var DOUBLECLICK_DELAY = 400;\n\n        var PastClick = function PastClick(time, pos, button) {\n          this.time = time;\n          this.pos = pos;\n          this.button = button;\n        };\n\n        PastClick.prototype.compare = function (time, pos, button) {\n          return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n        };\n\n        var lastClick;\n        var lastDoubleClick;\n        function clickRepeat(pos, button) {\n          var now = +new Date();\n          if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n            lastClick = lastDoubleClick = null;\n            return \"triple\";\n          } else if (lastClick && lastClick.compare(now, pos, button)) {\n            lastDoubleClick = new PastClick(now, pos, button);\n            lastClick = null;\n            return \"double\";\n          } else {\n            lastClick = new PastClick(now, pos, button);\n            lastDoubleClick = null;\n            return \"single\";\n          }\n        }\n\n        // A mouse down can be a single click, double click, triple click,\n        // start of selection drag, start of text drag, new cursor\n        // (ctrl-click), rectangle drag (alt-drag), or xwin\n        // middle-click-paste. Or it might be a click on something we should\n        // not interfere with, such as a scrollbar or widget.\n        function onMouseDown(e) {\n          var cm = this,\n              display = cm.display;\n          if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n            return;\n          }\n          display.input.ensurePolled();\n          display.shift = e.shiftKey;\n\n          if (eventInWidget(display, e)) {\n            if (!webkit) {\n              // Briefly turn off draggability, to allow widgets to do\n              // normal dragging things.\n              display.scroller.draggable = false;\n              setTimeout(function () {\n                return display.scroller.draggable = true;\n              }, 100);\n            }\n            return;\n          }\n          if (clickInGutter(cm, e)) {\n            return;\n          }\n          var pos = posFromMouse(cm, e),\n              button = e_button(e),\n              repeat = pos ? clickRepeat(pos, button) : \"single\";\n          window.focus();\n\n          // #3261: make sure, that we're not starting a second selection\n          if (button == 1 && cm.state.selectingText) {\n            cm.state.selectingText(e);\n          }\n\n          if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n            return;\n          }\n\n          if (button == 1) {\n            if (pos) {\n              leftButtonDown(cm, pos, repeat, e);\n            } else if (e_target(e) == display.scroller) {\n              e_preventDefault(e);\n            }\n          } else if (button == 2) {\n            if (pos) {\n              extendSelection(cm.doc, pos);\n            }\n            setTimeout(function () {\n              return display.input.focus();\n            }, 20);\n          } else if (button == 3) {\n            if (captureRightClick) {\n              onContextMenu(cm, e);\n            } else {\n              delayBlurEvent(cm);\n            }\n          }\n        }\n\n        function handleMappedButton(cm, button, pos, repeat, event) {\n          var name = \"Click\";\n          if (repeat == \"double\") {\n            name = \"Double\" + name;\n          } else if (repeat == \"triple\") {\n            name = \"Triple\" + name;\n          }\n          name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n          return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n            if (typeof bound == \"string\") {\n              bound = commands[bound];\n            }\n            if (!bound) {\n              return false;\n            }\n            var done = false;\n            try {\n              if (cm.isReadOnly()) {\n                cm.state.suppressEdits = true;\n              }\n              done = bound(cm, pos) != Pass;\n            } finally {\n              cm.state.suppressEdits = false;\n            }\n            return done;\n          });\n        }\n\n        function configureMouse(cm, repeat, event) {\n          var option = cm.getOption(\"configureMouse\");\n          var value = option ? option(cm, repeat, event) : {};\n          if (value.unit == null) {\n            var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n            value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n          }\n          if (value.extend == null || cm.doc.extend) {\n            value.extend = cm.doc.extend || event.shiftKey;\n          }\n          if (value.addNew == null) {\n            value.addNew = mac ? event.metaKey : event.ctrlKey;\n          }\n          if (value.moveOnDrag == null) {\n            value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n          }\n          return value;\n        }\n\n        function leftButtonDown(cm, pos, repeat, event) {\n          if (ie) {\n            setTimeout(bind(ensureFocus, cm), 0);\n          } else {\n            cm.curOp.focus = activeElt();\n          }\n\n          var behavior = configureMouse(cm, repeat, event);\n\n          var sel = cm.doc.sel,\n              contained;\n          if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n            leftButtonStartDrag(cm, event, pos, behavior);\n          } else {\n            leftButtonSelect(cm, event, pos, behavior);\n          }\n        }\n\n        // Start a text drag. When it ends, see if any dragging actually\n        // happen, and treat as a click if it didn't.\n        function leftButtonStartDrag(cm, event, pos, behavior) {\n          var display = cm.display,\n              moved = false;\n          var dragEnd = operation(cm, function (e) {\n            if (webkit) {\n              display.scroller.draggable = false;\n            }\n            cm.state.draggingText = false;\n            off(document, \"mouseup\", dragEnd);\n            off(document, \"mousemove\", mouseMove);\n            off(display.scroller, \"dragstart\", dragStart);\n            off(display.scroller, \"drop\", dragEnd);\n            if (!moved) {\n              e_preventDefault(e);\n              if (!behavior.addNew) {\n                extendSelection(cm.doc, pos, null, null, behavior.extend);\n              }\n              // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n              if (webkit || ie && ie_version == 9) {\n                setTimeout(function () {\n                  document.body.focus();display.input.focus();\n                }, 20);\n              } else {\n                display.input.focus();\n              }\n            }\n          });\n          var mouseMove = function mouseMove(e2) {\n            moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n          };\n          var dragStart = function dragStart() {\n            return moved = true;\n          };\n          // Let the drag handler handle this.\n          if (webkit) {\n            display.scroller.draggable = true;\n          }\n          cm.state.draggingText = dragEnd;\n          dragEnd.copy = !behavior.moveOnDrag;\n          // IE's approach to draggable\n          if (display.scroller.dragDrop) {\n            display.scroller.dragDrop();\n          }\n          on(document, \"mouseup\", dragEnd);\n          on(document, \"mousemove\", mouseMove);\n          on(display.scroller, \"dragstart\", dragStart);\n          on(display.scroller, \"drop\", dragEnd);\n\n          delayBlurEvent(cm);\n          setTimeout(function () {\n            return display.input.focus();\n          }, 20);\n        }\n\n        function rangeForUnit(cm, pos, unit) {\n          if (unit == \"char\") {\n            return new Range(pos, pos);\n          }\n          if (unit == \"word\") {\n            return cm.findWordAt(pos);\n          }\n          if (unit == \"line\") {\n            return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n          var result = unit(cm, pos);\n          return new Range(result.from, result.to);\n        }\n\n        // Normal selection, as opposed to text dragging.\n        function leftButtonSelect(cm, event, start, behavior) {\n          var display = cm.display,\n              doc = cm.doc;\n          e_preventDefault(event);\n\n          var ourRange,\n              ourIndex,\n              startSel = doc.sel,\n              ranges = startSel.ranges;\n          if (behavior.addNew && !behavior.extend) {\n            ourIndex = doc.sel.contains(start);\n            if (ourIndex > -1) {\n              ourRange = ranges[ourIndex];\n            } else {\n              ourRange = new Range(start, start);\n            }\n          } else {\n            ourRange = doc.sel.primary();\n            ourIndex = doc.sel.primIndex;\n          }\n\n          if (behavior.unit == \"rectangle\") {\n            if (!behavior.addNew) {\n              ourRange = new Range(start, start);\n            }\n            start = posFromMouse(cm, event, true, true);\n            ourIndex = -1;\n          } else {\n            var range$$1 = rangeForUnit(cm, start, behavior.unit);\n            if (behavior.extend) {\n              ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend);\n            } else {\n              ourRange = range$$1;\n            }\n          }\n\n          if (!behavior.addNew) {\n            ourIndex = 0;\n            setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n            startSel = doc.sel;\n          } else if (ourIndex == -1) {\n            ourIndex = ranges.length;\n            setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex), { scroll: false, origin: \"*mouse\" });\n          } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n            setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), { scroll: false, origin: \"*mouse\" });\n            startSel = doc.sel;\n          } else {\n            replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n          }\n\n          var lastPos = start;\n          function extendTo(pos) {\n            if (cmp(lastPos, pos) == 0) {\n              return;\n            }\n            lastPos = pos;\n\n            if (behavior.unit == \"rectangle\") {\n              var ranges = [],\n                  tabSize = cm.options.tabSize;\n              var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n              var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n              var left = Math.min(startCol, posCol),\n                  right = Math.max(startCol, posCol);\n              for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n                var text = getLine(doc, line).text,\n                    leftPos = findColumn(text, left, tabSize);\n                if (left == right) {\n                  ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n                } else if (text.length > leftPos) {\n                  ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n                }\n              }\n              if (!ranges.length) {\n                ranges.push(new Range(start, start));\n              }\n              setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), { origin: \"*mouse\", scroll: false });\n              cm.scrollIntoView(pos);\n            } else {\n              var oldRange = ourRange;\n              var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n              var anchor = oldRange.anchor,\n                  head;\n              if (cmp(range$$1.anchor, anchor) > 0) {\n                head = range$$1.head;\n                anchor = minPos(oldRange.from(), range$$1.anchor);\n              } else {\n                head = range$$1.anchor;\n                anchor = maxPos(oldRange.to(), range$$1.head);\n              }\n              var ranges$1 = startSel.ranges.slice(0);\n              ranges$1[ourIndex] = new Range(_clipPos(doc, anchor), head);\n              setSelection(doc, normalizeSelection(ranges$1, ourIndex), sel_mouse);\n            }\n          }\n\n          var editorSize = display.wrapper.getBoundingClientRect();\n          // Used to ensure timeout re-tries don't fire when another extend\n          // happened in the meantime (clearTimeout isn't reliable -- at\n          // least on Chrome, the timeouts still happen even when cleared,\n          // if the clear happens after their scheduled firing time).\n          var counter = 0;\n\n          function extend(e) {\n            var curCount = ++counter;\n            var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n            if (!cur) {\n              return;\n            }\n            if (cmp(cur, lastPos) != 0) {\n              cm.curOp.focus = activeElt();\n              extendTo(cur);\n              var visible = visibleLines(display, doc);\n              if (cur.line >= visible.to || cur.line < visible.from) {\n                setTimeout(operation(cm, function () {\n                  if (counter == curCount) {\n                    extend(e);\n                  }\n                }), 150);\n              }\n            } else {\n              var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n              if (outside) {\n                setTimeout(operation(cm, function () {\n                  if (counter != curCount) {\n                    return;\n                  }\n                  display.scroller.scrollTop += outside;\n                  extend(e);\n                }), 50);\n              }\n            }\n          }\n\n          function done(e) {\n            cm.state.selectingText = false;\n            counter = Infinity;\n            e_preventDefault(e);\n            display.input.focus();\n            off(document, \"mousemove\", move);\n            off(document, \"mouseup\", up);\n            doc.history.lastSelOrigin = null;\n          }\n\n          var move = operation(cm, function (e) {\n            if (!e_button(e)) {\n              done(e);\n            } else {\n              extend(e);\n            }\n          });\n          var up = operation(cm, done);\n          cm.state.selectingText = up;\n          on(document, \"mousemove\", move);\n          on(document, \"mouseup\", up);\n        }\n\n        // Determines whether an event happened in the gutter, and fires the\n        // handlers for the corresponding event.\n        function gutterEvent(cm, e, type, prevent) {\n          var mX, mY;\n          try {\n            mX = e.clientX;mY = e.clientY;\n          } catch (e) {\n            return false;\n          }\n          if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n            return false;\n          }\n          if (prevent) {\n            e_preventDefault(e);\n          }\n\n          var display = cm.display;\n          var lineBox = display.lineDiv.getBoundingClientRect();\n\n          if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n            return e_defaultPrevented(e);\n          }\n          mY -= lineBox.top - display.viewOffset;\n\n          for (var i = 0; i < cm.options.gutters.length; ++i) {\n            var g = display.gutters.childNodes[i];\n            if (g && g.getBoundingClientRect().right >= mX) {\n              var line = _lineAtHeight(cm.doc, mY);\n              var gutter = cm.options.gutters[i];\n              signal(cm, type, cm, line, gutter, e);\n              return e_defaultPrevented(e);\n            }\n          }\n        }\n\n        function clickInGutter(cm, e) {\n          return gutterEvent(cm, e, \"gutterClick\", true);\n        }\n\n        // CONTEXT MENU HANDLING\n\n        // To make the context menu work, we need to briefly unhide the\n        // textarea (making it as unobtrusive as possible) to let the\n        // right-click take effect on it.\n        function onContextMenu(cm, e) {\n          if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n            return;\n          }\n          if (signalDOMEvent(cm, e, \"contextmenu\")) {\n            return;\n          }\n          cm.display.input.onContextMenu(e);\n        }\n\n        function contextMenuInGutter(cm, e) {\n          if (!hasHandler(cm, \"gutterContextMenu\")) {\n            return false;\n          }\n          return gutterEvent(cm, e, \"gutterContextMenu\", false);\n        }\n\n        function themeChanged(cm) {\n          cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n          clearCaches(cm);\n        }\n\n        var Init = { toString: function toString() {\n            return \"CodeMirror.Init\";\n          } };\n\n        var defaults = {};\n        var optionHandlers = {};\n\n        function defineOptions(CodeMirror) {\n          var optionHandlers = CodeMirror.optionHandlers;\n\n          function option(name, deflt, handle, notOnInit) {\n            CodeMirror.defaults[name] = deflt;\n            if (handle) {\n              optionHandlers[name] = notOnInit ? function (cm, val, old) {\n                if (old != Init) {\n                  handle(cm, val, old);\n                }\n              } : handle;\n            }\n          }\n\n          CodeMirror.defineOption = option;\n\n          // Passed to option handlers when there is no old value.\n          CodeMirror.Init = Init;\n\n          // These two are, on init, called from the constructor because they\n          // have to be initialized before the editor can start at all.\n          option(\"value\", \"\", function (cm, val) {\n            return cm.setValue(val);\n          }, true);\n          option(\"mode\", null, function (cm, val) {\n            cm.doc.modeOption = val;\n            loadMode(cm);\n          }, true);\n\n          option(\"indentUnit\", 2, loadMode, true);\n          option(\"indentWithTabs\", false);\n          option(\"smartIndent\", true);\n          option(\"tabSize\", 4, function (cm) {\n            resetModeState(cm);\n            clearCaches(cm);\n            regChange(cm);\n          }, true);\n          option(\"lineSeparator\", null, function (cm, val) {\n            cm.doc.lineSep = val;\n            if (!val) {\n              return;\n            }\n            var newBreaks = [],\n                lineNo = cm.doc.first;\n            cm.doc.iter(function (line) {\n              for (var pos = 0;;) {\n                var found = line.text.indexOf(val, pos);\n                if (found == -1) {\n                  break;\n                }\n                pos = found + val.length;\n                newBreaks.push(Pos(lineNo, found));\n              }\n              lineNo++;\n            });\n            for (var i = newBreaks.length - 1; i >= 0; i--) {\n              _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n            }\n          });\n          option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function (cm, val, old) {\n            cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n            if (old != Init) {\n              cm.refresh();\n            }\n          });\n          option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n            return cm.refresh();\n          }, true);\n          option(\"electricChars\", true);\n          option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n            throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n          }, true);\n          option(\"spellcheck\", false, function (cm, val) {\n            return cm.getInputField().spellcheck = val;\n          }, true);\n          option(\"rtlMoveVisually\", !windows);\n          option(\"wholeLineUpdateBefore\", true);\n\n          option(\"theme\", \"default\", function (cm) {\n            themeChanged(cm);\n            guttersChanged(cm);\n          }, true);\n          option(\"keyMap\", \"default\", function (cm, val, old) {\n            var next = getKeyMap(val);\n            var prev = old != Init && getKeyMap(old);\n            if (prev && prev.detach) {\n              prev.detach(cm, next);\n            }\n            if (next.attach) {\n              next.attach(cm, prev || null);\n            }\n          });\n          option(\"extraKeys\", null);\n          option(\"configureMouse\", null);\n\n          option(\"lineWrapping\", false, wrappingChanged, true);\n          option(\"gutters\", [], function (cm) {\n            setGuttersForLineNumbers(cm.options);\n            guttersChanged(cm);\n          }, true);\n          option(\"fixedGutter\", true, function (cm, val) {\n            cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n            cm.refresh();\n          }, true);\n          option(\"coverGutterNextToScrollbar\", false, function (cm) {\n            return updateScrollbars(cm);\n          }, true);\n          option(\"scrollbarStyle\", \"native\", function (cm) {\n            initScrollbars(cm);\n            updateScrollbars(cm);\n            cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n            cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n          }, true);\n          option(\"lineNumbers\", false, function (cm) {\n            setGuttersForLineNumbers(cm.options);\n            guttersChanged(cm);\n          }, true);\n          option(\"firstLineNumber\", 1, guttersChanged, true);\n          option(\"lineNumberFormatter\", function (integer) {\n            return integer;\n          }, guttersChanged, true);\n          option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n          option(\"resetSelectionOnContextMenu\", true);\n          option(\"lineWiseCopyCut\", true);\n          option(\"pasteLinesPerSelection\", true);\n\n          option(\"readOnly\", false, function (cm, val) {\n            if (val == \"nocursor\") {\n              onBlur(cm);\n              cm.display.input.blur();\n            }\n            cm.display.input.readOnlyChanged(val);\n          });\n          option(\"disableInput\", false, function (cm, val) {\n            if (!val) {\n              cm.display.input.reset();\n            }\n          }, true);\n          option(\"dragDrop\", true, dragDropChanged);\n          option(\"allowDropFileTypes\", null);\n\n          option(\"cursorBlinkRate\", 530);\n          option(\"cursorScrollMargin\", 0);\n          option(\"cursorHeight\", 1, updateSelection, true);\n          option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n          option(\"workTime\", 100);\n          option(\"workDelay\", 100);\n          option(\"flattenSpans\", true, resetModeState, true);\n          option(\"addModeClass\", false, resetModeState, true);\n          option(\"pollInterval\", 100);\n          option(\"undoDepth\", 200, function (cm, val) {\n            return cm.doc.history.undoDepth = val;\n          });\n          option(\"historyEventDelay\", 1250);\n          option(\"viewportMargin\", 10, function (cm) {\n            return cm.refresh();\n          }, true);\n          option(\"maxHighlightLength\", 10000, resetModeState, true);\n          option(\"moveInputWithCursor\", true, function (cm, val) {\n            if (!val) {\n              cm.display.input.resetPosition();\n            }\n          });\n\n          option(\"tabindex\", null, function (cm, val) {\n            return cm.display.input.getField().tabIndex = val || \"\";\n          });\n          option(\"autofocus\", null);\n          option(\"direction\", \"ltr\", function (cm, val) {\n            return cm.doc.setDirection(val);\n          }, true);\n        }\n\n        function guttersChanged(cm) {\n          updateGutters(cm);\n          regChange(cm);\n          alignHorizontally(cm);\n        }\n\n        function dragDropChanged(cm, value, old) {\n          var wasOn = old && old != Init;\n          if (!value != !wasOn) {\n            var funcs = cm.display.dragFunctions;\n            var toggle = value ? on : off;\n            toggle(cm.display.scroller, \"dragstart\", funcs.start);\n            toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n            toggle(cm.display.scroller, \"dragover\", funcs.over);\n            toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n            toggle(cm.display.scroller, \"drop\", funcs.drop);\n          }\n        }\n\n        function wrappingChanged(cm) {\n          if (cm.options.lineWrapping) {\n            addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            cm.display.sizer.style.minWidth = \"\";\n            cm.display.sizerWidth = null;\n          } else {\n            rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            findMaxLine(cm);\n          }\n          estimateLineHeights(cm);\n          regChange(cm);\n          clearCaches(cm);\n          setTimeout(function () {\n            return updateScrollbars(cm);\n          }, 100);\n        }\n\n        // A CodeMirror instance represents an editor. This is the object\n        // that user code is usually dealing with.\n\n        function CodeMirror$1(place, options) {\n          var this$1 = this;\n\n          if (!(this instanceof CodeMirror$1)) {\n            return new CodeMirror$1(place, options);\n          }\n\n          this.options = options = options ? copyObj(options) : {};\n          // Determine effective options based on given values and defaults.\n          copyObj(defaults, options, false);\n          setGuttersForLineNumbers(options);\n\n          var doc = options.value;\n          if (typeof doc == \"string\") {\n            doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n          }\n          this.doc = doc;\n\n          var input = new CodeMirror$1.inputStyles[options.inputStyle](this);\n          var display = this.display = new Display(place, doc, input);\n          display.wrapper.CodeMirror = this;\n          updateGutters(this);\n          themeChanged(this);\n          if (options.lineWrapping) {\n            this.display.wrapper.className += \" CodeMirror-wrap\";\n          }\n          initScrollbars(this);\n\n          this.state = {\n            keyMaps: [], // stores maps added by addKeyMap\n            overlays: [], // highlighting overlays, as added by addOverlay\n            modeGen: 0, // bumped when mode/overlay changes, used to invalidate highlighting info\n            overwrite: false,\n            delayingBlurEvent: false,\n            focused: false,\n            suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n            pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n            selectingText: false,\n            draggingText: false,\n            highlight: new Delayed(), // stores highlight worker timeout\n            keySeq: null, // Unfinished key sequence\n            specialChars: null\n          };\n\n          if (options.autofocus && !mobile) {\n            display.input.focus();\n          }\n\n          // Override magic textarea content restore that IE sometimes does\n          // on our hidden textarea on reload\n          if (ie && ie_version < 11) {\n            setTimeout(function () {\n              return this$1.display.input.reset(true);\n            }, 20);\n          }\n\n          registerEventHandlers(this);\n          ensureGlobalHandlers();\n\n          _startOperation(this);\n          this.curOp.forceUpdate = true;\n          attachDoc(this, doc);\n\n          if (options.autofocus && !mobile || this.hasFocus()) {\n            setTimeout(bind(onFocus, this), 20);\n          } else {\n            onBlur(this);\n          }\n\n          for (var opt in optionHandlers) {\n            if (optionHandlers.hasOwnProperty(opt)) {\n              optionHandlers[opt](this$1, options[opt], Init);\n            }\n          }\n          maybeUpdateLineNumberWidth(this);\n          if (options.finishInit) {\n            options.finishInit(this);\n          }\n          for (var i = 0; i < initHooks.length; ++i) {\n            initHooks[i](this$1);\n          }\n          _endOperation(this);\n          // Suppress optimizelegibility in Webkit, since it breaks text\n          // measuring on line wrapping boundaries.\n          if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n            display.lineDiv.style.textRendering = \"auto\";\n          }\n        }\n\n        // The default configuration options.\n        CodeMirror$1.defaults = defaults;\n        // Functions to run when options are changed.\n        CodeMirror$1.optionHandlers = optionHandlers;\n\n        // Attach the necessary event handlers when initializing the editor\n        function registerEventHandlers(cm) {\n          var d = cm.display;\n          on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n          // Older IE's will not fire a second mousedown for a double click\n          if (ie && ie_version < 11) {\n            on(d.scroller, \"dblclick\", operation(cm, function (e) {\n              if (signalDOMEvent(cm, e)) {\n                return;\n              }\n              var pos = posFromMouse(cm, e);\n              if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n                return;\n              }\n              e_preventDefault(e);\n              var word = cm.findWordAt(pos);\n              extendSelection(cm.doc, word.anchor, word.head);\n            }));\n          } else {\n            on(d.scroller, \"dblclick\", function (e) {\n              return signalDOMEvent(cm, e) || e_preventDefault(e);\n            });\n          }\n          // Some browsers fire contextmenu *after* opening the menu, at\n          // which point we can't mess with it anymore. Context menu is\n          // handled in onMouseDown for these browsers.\n          if (!captureRightClick) {\n            on(d.scroller, \"contextmenu\", function (e) {\n              return onContextMenu(cm, e);\n            });\n          }\n\n          // Used to suppress mouse event handling when a touch happens\n          var touchFinished,\n              prevTouch = { end: 0 };\n          function finishTouch() {\n            if (d.activeTouch) {\n              touchFinished = setTimeout(function () {\n                return d.activeTouch = null;\n              }, 1000);\n              prevTouch = d.activeTouch;\n              prevTouch.end = +new Date();\n            }\n          }\n          function isMouseLikeTouchEvent(e) {\n            if (e.touches.length != 1) {\n              return false;\n            }\n            var touch = e.touches[0];\n            return touch.radiusX <= 1 && touch.radiusY <= 1;\n          }\n          function farAway(touch, other) {\n            if (other.left == null) {\n              return true;\n            }\n            var dx = other.left - touch.left,\n                dy = other.top - touch.top;\n            return dx * dx + dy * dy > 20 * 20;\n          }\n          on(d.scroller, \"touchstart\", function (e) {\n            if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {\n              d.input.ensurePolled();\n              clearTimeout(touchFinished);\n              var now = +new Date();\n              d.activeTouch = { start: now, moved: false,\n                prev: now - prevTouch.end <= 300 ? prevTouch : null };\n              if (e.touches.length == 1) {\n                d.activeTouch.left = e.touches[0].pageX;\n                d.activeTouch.top = e.touches[0].pageY;\n              }\n            }\n          });\n          on(d.scroller, \"touchmove\", function () {\n            if (d.activeTouch) {\n              d.activeTouch.moved = true;\n            }\n          });\n          on(d.scroller, \"touchend\", function (e) {\n            var touch = d.activeTouch;\n            if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n              var pos = cm.coordsChar(d.activeTouch, \"page\"),\n                  range;\n              if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n                {\n                  range = new Range(pos, pos);\n                } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n                {\n                  range = cm.findWordAt(pos);\n                } else // Triple tap\n                {\n                  range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n                }\n              cm.setSelection(range.anchor, range.head);\n              cm.focus();\n              e_preventDefault(e);\n            }\n            finishTouch();\n          });\n          on(d.scroller, \"touchcancel\", finishTouch);\n\n          // Sync scrolling between fake scrollbars and real scrollable\n          // area, ensure viewport is updated when scrolling.\n          on(d.scroller, \"scroll\", function () {\n            if (d.scroller.clientHeight) {\n              updateScrollTop(cm, d.scroller.scrollTop);\n              setScrollLeft(cm, d.scroller.scrollLeft, true);\n              signal(cm, \"scroll\", cm);\n            }\n          });\n\n          // Listen to wheel events in order to try and update the viewport on time.\n          on(d.scroller, \"mousewheel\", function (e) {\n            return onScrollWheel(cm, e);\n          });\n          on(d.scroller, \"DOMMouseScroll\", function (e) {\n            return onScrollWheel(cm, e);\n          });\n\n          // Prevent wrapper from ever scrolling\n          on(d.wrapper, \"scroll\", function () {\n            return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n          });\n\n          d.dragFunctions = {\n            enter: function enter(e) {\n              if (!signalDOMEvent(cm, e)) {\n                e_stop(e);\n              }\n            },\n            over: function over(e) {\n              if (!signalDOMEvent(cm, e)) {\n                onDragOver(cm, e);e_stop(e);\n              }\n            },\n            start: function start(e) {\n              return onDragStart(cm, e);\n            },\n            drop: operation(cm, onDrop),\n            leave: function leave(e) {\n              if (!signalDOMEvent(cm, e)) {\n                clearDragCursor(cm);\n              }\n            }\n          };\n\n          var inp = d.input.getField();\n          on(inp, \"keyup\", function (e) {\n            return onKeyUp.call(cm, e);\n          });\n          on(inp, \"keydown\", operation(cm, onKeyDown));\n          on(inp, \"keypress\", operation(cm, onKeyPress));\n          on(inp, \"focus\", function (e) {\n            return onFocus(cm, e);\n          });\n          on(inp, \"blur\", function (e) {\n            return onBlur(cm, e);\n          });\n        }\n\n        var initHooks = [];\n        CodeMirror$1.defineInitHook = function (f) {\n          return initHooks.push(f);\n        };\n\n        // Indent the given line. The how parameter can be \"smart\",\n        // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n        // (typically set to true for forced single-line indents), empty\n        // lines are not indented, and places where the mode returns Pass\n        // are left alone.\n        function indentLine(cm, n, how, aggressive) {\n          var doc = cm.doc,\n              state;\n          if (how == null) {\n            how = \"add\";\n          }\n          if (how == \"smart\") {\n            // Fall back to \"prev\" when the mode doesn't have an indentation\n            // method.\n            if (!doc.mode.indent) {\n              how = \"prev\";\n            } else {\n              state = getContextBefore(cm, n).state;\n            }\n          }\n\n          var tabSize = cm.options.tabSize;\n          var line = getLine(doc, n),\n              curSpace = countColumn(line.text, null, tabSize);\n          if (line.stateAfter) {\n            line.stateAfter = null;\n          }\n          var curSpaceString = line.text.match(/^\\s*/)[0],\n              indentation;\n          if (!aggressive && !/\\S/.test(line.text)) {\n            indentation = 0;\n            how = \"not\";\n          } else if (how == \"smart\") {\n            indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n            if (indentation == Pass || indentation > 150) {\n              if (!aggressive) {\n                return;\n              }\n              how = \"prev\";\n            }\n          }\n          if (how == \"prev\") {\n            if (n > doc.first) {\n              indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n            } else {\n              indentation = 0;\n            }\n          } else if (how == \"add\") {\n            indentation = curSpace + cm.options.indentUnit;\n          } else if (how == \"subtract\") {\n            indentation = curSpace - cm.options.indentUnit;\n          } else if (typeof how == \"number\") {\n            indentation = curSpace + how;\n          }\n          indentation = Math.max(0, indentation);\n\n          var indentString = \"\",\n              pos = 0;\n          if (cm.options.indentWithTabs) {\n            for (var i = Math.floor(indentation / tabSize); i; --i) {\n              pos += tabSize;indentString += \"\\t\";\n            }\n          }\n          if (pos < indentation) {\n            indentString += spaceStr(indentation - pos);\n          }\n\n          if (indentString != curSpaceString) {\n            _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n            line.stateAfter = null;\n            return true;\n          } else {\n            // Ensure that, if the cursor was in the whitespace at the start\n            // of the line, it is moved to the end of that space.\n            for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n              var range = doc.sel.ranges[i$1];\n              if (range.head.line == n && range.head.ch < curSpaceString.length) {\n                var pos$1 = Pos(n, curSpaceString.length);\n                replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n                break;\n              }\n            }\n          }\n        }\n\n        // This will be set to a {lineWise: bool, text: [string]} object, so\n        // that, when pasting, we know what kind of selections the copied\n        // text was made out of.\n        var lastCopied = null;\n\n        function setLastCopied(newLastCopied) {\n          lastCopied = newLastCopied;\n        }\n\n        function applyTextInput(cm, inserted, deleted, sel, origin) {\n          var doc = cm.doc;\n          cm.display.shift = false;\n          if (!sel) {\n            sel = doc.sel;\n          }\n\n          var paste = cm.state.pasteIncoming || origin == \"paste\";\n          var textLines = splitLinesAuto(inserted),\n              multiPaste = null;\n          // When pasing N lines into N selections, insert one line per selection\n          if (paste && sel.ranges.length > 1) {\n            if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n              if (sel.ranges.length % lastCopied.text.length == 0) {\n                multiPaste = [];\n                for (var i = 0; i < lastCopied.text.length; i++) {\n                  multiPaste.push(doc.splitLines(lastCopied.text[i]));\n                }\n              }\n            } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n              multiPaste = map(textLines, function (l) {\n                return [l];\n              });\n            }\n          }\n\n          var updateInput;\n          // Normal behavior is to insert the new text into every selection\n          for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n            var range$$1 = sel.ranges[i$1];\n            var from = range$$1.from(),\n                to = range$$1.to();\n            if (range$$1.empty()) {\n              if (deleted && deleted > 0) // Handle deletion\n                {\n                  from = Pos(from.line, from.ch - deleted);\n                } else if (cm.state.overwrite && !paste) // Handle overwrite\n                {\n                  to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n                } else if (lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n                from = to = Pos(from.line, 0);\n              }\n            }\n            updateInput = cm.curOp.updateInput;\n            var changeEvent = { from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n              origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\") };\n            makeChange(cm.doc, changeEvent);\n            signalLater(cm, \"inputRead\", cm, changeEvent);\n          }\n          if (inserted && !paste) {\n            triggerElectric(cm, inserted);\n          }\n\n          ensureCursorVisible(cm);\n          cm.curOp.updateInput = updateInput;\n          cm.curOp.typing = true;\n          cm.state.pasteIncoming = cm.state.cutIncoming = false;\n        }\n\n        function handlePaste(e, cm) {\n          var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n          if (pasted) {\n            e.preventDefault();\n            if (!cm.isReadOnly() && !cm.options.disableInput) {\n              runInOp(cm, function () {\n                return applyTextInput(cm, pasted, 0, null, \"paste\");\n              });\n            }\n            return true;\n          }\n        }\n\n        function triggerElectric(cm, inserted) {\n          // When an 'electric' character is inserted, immediately trigger a reindent\n          if (!cm.options.electricChars || !cm.options.smartIndent) {\n            return;\n          }\n          var sel = cm.doc.sel;\n\n          for (var i = sel.ranges.length - 1; i >= 0; i--) {\n            var range$$1 = sel.ranges[i];\n            if (range$$1.head.ch > 100 || i && sel.ranges[i - 1].head.line == range$$1.head.line) {\n              continue;\n            }\n            var mode = cm.getModeAt(range$$1.head);\n            var indented = false;\n            if (mode.electricChars) {\n              for (var j = 0; j < mode.electricChars.length; j++) {\n                if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n                  indented = indentLine(cm, range$$1.head.line, \"smart\");\n                  break;\n                }\n              }\n            } else if (mode.electricInput) {\n              if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch))) {\n                indented = indentLine(cm, range$$1.head.line, \"smart\");\n              }\n            }\n            if (indented) {\n              signalLater(cm, \"electricInput\", cm, range$$1.head.line);\n            }\n          }\n        }\n\n        function copyableRanges(cm) {\n          var text = [],\n              ranges = [];\n          for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n            var line = cm.doc.sel.ranges[i].head.line;\n            var lineRange = { anchor: Pos(line, 0), head: Pos(line + 1, 0) };\n            ranges.push(lineRange);\n            text.push(cm.getRange(lineRange.anchor, lineRange.head));\n          }\n          return { text: text, ranges: ranges };\n        }\n\n        function disableBrowserMagic(field, spellcheck) {\n          field.setAttribute(\"autocorrect\", \"off\");\n          field.setAttribute(\"autocapitalize\", \"off\");\n          field.setAttribute(\"spellcheck\", !!spellcheck);\n        }\n\n        function hiddenTextarea() {\n          var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n          var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n          // The textarea is kept positioned near the cursor to prevent the\n          // fact that it'll be scrolled into view on input from scrolling\n          // our fake cursor out of view. On webkit, when wrap=off, paste is\n          // very slow. So make the area wide instead.\n          if (webkit) {\n            te.style.width = \"1000px\";\n          } else {\n            te.setAttribute(\"wrap\", \"off\");\n          }\n          // If border: 0; -- iOS fails to open keyboard (issue #1287)\n          if (ios) {\n            te.style.border = \"1px solid black\";\n          }\n          disableBrowserMagic(te);\n          return div;\n        }\n\n        // The publicly visible API. Note that methodOp(f) means\n        // 'wrap f in an operation, performed on its `this` parameter'.\n\n        // This is not the complete set of editor methods. Most of the\n        // methods defined on the Doc type are also injected into\n        // CodeMirror.prototype, for backwards compatibility and\n        // convenience.\n\n        var addEditorMethods = function addEditorMethods(CodeMirror) {\n          var optionHandlers = CodeMirror.optionHandlers;\n\n          var helpers = CodeMirror.helpers = {};\n\n          CodeMirror.prototype = {\n            constructor: CodeMirror,\n            focus: function focus() {\n              window.focus();this.display.input.focus();\n            },\n\n            setOption: function setOption(option, value) {\n              var options = this.options,\n                  old = options[option];\n              if (options[option] == value && option != \"mode\") {\n                return;\n              }\n              options[option] = value;\n              if (optionHandlers.hasOwnProperty(option)) {\n                operation(this, optionHandlers[option])(this, value, old);\n              }\n              signal(this, \"optionChange\", this, option);\n            },\n\n            getOption: function getOption(option) {\n              return this.options[option];\n            },\n            getDoc: function getDoc() {\n              return this.doc;\n            },\n\n            addKeyMap: function addKeyMap(map$$1, bottom) {\n              this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n            },\n            removeKeyMap: function removeKeyMap(map$$1) {\n              var maps = this.state.keyMaps;\n              for (var i = 0; i < maps.length; ++i) {\n                if (maps[i] == map$$1 || maps[i].name == map$$1) {\n                  maps.splice(i, 1);\n                  return true;\n                }\n              }\n            },\n\n            addOverlay: methodOp(function (spec, options) {\n              var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n              if (mode.startState) {\n                throw new Error(\"Overlays may not be stateful.\");\n              }\n              insertSorted(this.state.overlays, { mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                priority: options && options.priority || 0 }, function (overlay) {\n                return overlay.priority;\n              });\n              this.state.modeGen++;\n              regChange(this);\n            }),\n            removeOverlay: methodOp(function (spec) {\n              var this$1 = this;\n\n              var overlays = this.state.overlays;\n              for (var i = 0; i < overlays.length; ++i) {\n                var cur = overlays[i].modeSpec;\n                if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n                  overlays.splice(i, 1);\n                  this$1.state.modeGen++;\n                  regChange(this$1);\n                  return;\n                }\n              }\n            }),\n\n            indentLine: methodOp(function (n, dir, aggressive) {\n              if (typeof dir != \"string\" && typeof dir != \"number\") {\n                if (dir == null) {\n                  dir = this.options.smartIndent ? \"smart\" : \"prev\";\n                } else {\n                  dir = dir ? \"add\" : \"subtract\";\n                }\n              }\n              if (isLine(this.doc, n)) {\n                indentLine(this, n, dir, aggressive);\n              }\n            }),\n            indentSelection: methodOp(function (how) {\n              var this$1 = this;\n\n              var ranges = this.doc.sel.ranges,\n                  end = -1;\n              for (var i = 0; i < ranges.length; i++) {\n                var range$$1 = ranges[i];\n                if (!range$$1.empty()) {\n                  var from = range$$1.from(),\n                      to = range$$1.to();\n                  var start = Math.max(end, from.line);\n                  end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n                  for (var j = start; j < end; ++j) {\n                    indentLine(this$1, j, how);\n                  }\n                  var newRanges = this$1.doc.sel.ranges;\n                  if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n                    replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n                  }\n                } else if (range$$1.head.line > end) {\n                  indentLine(this$1, range$$1.head.line, how, true);\n                  end = range$$1.head.line;\n                  if (i == this$1.doc.sel.primIndex) {\n                    ensureCursorVisible(this$1);\n                  }\n                }\n              }\n            }),\n\n            // Fetch the parser token for a given character. Useful for hacks\n            // that want to inspect the mode state (say, for completion).\n            getTokenAt: function getTokenAt(pos, precise) {\n              return takeToken(this, pos, precise);\n            },\n\n            getLineTokens: function getLineTokens(line, precise) {\n              return takeToken(this, Pos(line), precise, true);\n            },\n\n            getTokenTypeAt: function getTokenTypeAt(pos) {\n              pos = _clipPos(this.doc, pos);\n              var styles = getLineStyles(this, getLine(this.doc, pos.line));\n              var before = 0,\n                  after = (styles.length - 1) / 2,\n                  ch = pos.ch;\n              var type;\n              if (ch == 0) {\n                type = styles[2];\n              } else {\n                for (;;) {\n                  var mid = before + after >> 1;\n                  if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n                    after = mid;\n                  } else if (styles[mid * 2 + 1] < ch) {\n                    before = mid + 1;\n                  } else {\n                    type = styles[mid * 2 + 2];break;\n                  }\n                }\n              }\n              var cut = type ? type.indexOf(\"overlay \") : -1;\n              return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n            },\n\n            getModeAt: function getModeAt(pos) {\n              var mode = this.doc.mode;\n              if (!mode.innerMode) {\n                return mode;\n              }\n              return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n            },\n\n            getHelper: function getHelper(pos, type) {\n              return this.getHelpers(pos, type)[0];\n            },\n\n            getHelpers: function getHelpers(pos, type) {\n              var this$1 = this;\n\n              var found = [];\n              if (!helpers.hasOwnProperty(type)) {\n                return found;\n              }\n              var help = helpers[type],\n                  mode = this.getModeAt(pos);\n              if (typeof mode[type] == \"string\") {\n                if (help[mode[type]]) {\n                  found.push(help[mode[type]]);\n                }\n              } else if (mode[type]) {\n                for (var i = 0; i < mode[type].length; i++) {\n                  var val = help[mode[type][i]];\n                  if (val) {\n                    found.push(val);\n                  }\n                }\n              } else if (mode.helperType && help[mode.helperType]) {\n                found.push(help[mode.helperType]);\n              } else if (help[mode.name]) {\n                found.push(help[mode.name]);\n              }\n              for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n                var cur = help._global[i$1];\n                if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1) {\n                  found.push(cur.val);\n                }\n              }\n              return found;\n            },\n\n            getStateAfter: function getStateAfter(line, precise) {\n              var doc = this.doc;\n              line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n              return getContextBefore(this, line + 1, precise).state;\n            },\n\n            cursorCoords: function cursorCoords(start, mode) {\n              var pos,\n                  range$$1 = this.doc.sel.primary();\n              if (start == null) {\n                pos = range$$1.head;\n              } else if ((typeof start === \"undefined\" ? \"undefined\" : _typeof(start)) == \"object\") {\n                pos = _clipPos(this.doc, start);\n              } else {\n                pos = start ? range$$1.from() : range$$1.to();\n              }\n              return _cursorCoords(this, pos, mode || \"page\");\n            },\n\n            charCoords: function charCoords(pos, mode) {\n              return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n            },\n\n            coordsChar: function coordsChar(coords, mode) {\n              coords = fromCoordSystem(this, coords, mode || \"page\");\n              return _coordsChar(this, coords.left, coords.top);\n            },\n\n            lineAtHeight: function lineAtHeight(height, mode) {\n              height = fromCoordSystem(this, { top: height, left: 0 }, mode || \"page\").top;\n              return _lineAtHeight(this.doc, height + this.display.viewOffset);\n            },\n            heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n              var end = false,\n                  lineObj;\n              if (typeof line == \"number\") {\n                var last = this.doc.first + this.doc.size - 1;\n                if (line < this.doc.first) {\n                  line = this.doc.first;\n                } else if (line > last) {\n                  line = last;end = true;\n                }\n                lineObj = getLine(this.doc, line);\n              } else {\n                lineObj = line;\n              }\n              return intoCoordSystem(this, lineObj, { top: 0, left: 0 }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n            },\n\n            defaultTextHeight: function defaultTextHeight() {\n              return textHeight(this.display);\n            },\n            defaultCharWidth: function defaultCharWidth() {\n              return charWidth(this.display);\n            },\n\n            getViewport: function getViewport() {\n              return { from: this.display.viewFrom, to: this.display.viewTo };\n            },\n\n            addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n              var display = this.display;\n              pos = _cursorCoords(this, _clipPos(this.doc, pos));\n              var top = pos.bottom,\n                  left = pos.left;\n              node.style.position = \"absolute\";\n              node.setAttribute(\"cm-ignore-events\", \"true\");\n              this.display.input.setUneditable(node);\n              display.sizer.appendChild(node);\n              if (vert == \"over\") {\n                top = pos.top;\n              } else if (vert == \"above\" || vert == \"near\") {\n                var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n                    hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n                // Default to positioning above (if specified and possible); otherwise default to positioning below\n                if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n                  top = pos.top - node.offsetHeight;\n                } else if (pos.bottom + node.offsetHeight <= vspace) {\n                  top = pos.bottom;\n                }\n                if (left + node.offsetWidth > hspace) {\n                  left = hspace - node.offsetWidth;\n                }\n              }\n              node.style.top = top + \"px\";\n              node.style.left = node.style.right = \"\";\n              if (horiz == \"right\") {\n                left = display.sizer.clientWidth - node.offsetWidth;\n                node.style.right = \"0px\";\n              } else {\n                if (horiz == \"left\") {\n                  left = 0;\n                } else if (horiz == \"middle\") {\n                  left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n                }\n                node.style.left = left + \"px\";\n              }\n              if (scroll) {\n                scrollIntoView(this, { left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight });\n              }\n            },\n\n            triggerOnKeyDown: methodOp(onKeyDown),\n            triggerOnKeyPress: methodOp(onKeyPress),\n            triggerOnKeyUp: onKeyUp,\n            triggerOnMouseDown: methodOp(onMouseDown),\n\n            execCommand: function execCommand(cmd) {\n              if (commands.hasOwnProperty(cmd)) {\n                return commands[cmd].call(null, this);\n              }\n            },\n\n            triggerElectric: methodOp(function (text) {\n              triggerElectric(this, text);\n            }),\n\n            findPosH: function findPosH(from, amount, unit, visually) {\n              var this$1 = this;\n\n              var dir = 1;\n              if (amount < 0) {\n                dir = -1;amount = -amount;\n              }\n              var cur = _clipPos(this.doc, from);\n              for (var i = 0; i < amount; ++i) {\n                cur = _findPosH(this$1.doc, cur, dir, unit, visually);\n                if (cur.hitSide) {\n                  break;\n                }\n              }\n              return cur;\n            },\n\n            moveH: methodOp(function (dir, unit) {\n              var this$1 = this;\n\n              this.extendSelectionsBy(function (range$$1) {\n                if (this$1.display.shift || this$1.doc.extend || range$$1.empty()) {\n                  return _findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually);\n                } else {\n                  return dir < 0 ? range$$1.from() : range$$1.to();\n                }\n              }, sel_move);\n            }),\n\n            deleteH: methodOp(function (dir, unit) {\n              var sel = this.doc.sel,\n                  doc = this.doc;\n              if (sel.somethingSelected()) {\n                doc.replaceSelection(\"\", null, \"+delete\");\n              } else {\n                deleteNearSelection(this, function (range$$1) {\n                  var other = _findPosH(doc, range$$1.head, dir, unit, false);\n                  return dir < 0 ? { from: other, to: range$$1.head } : { from: range$$1.head, to: other };\n                });\n              }\n            }),\n\n            findPosV: function findPosV(from, amount, unit, goalColumn) {\n              var this$1 = this;\n\n              var dir = 1,\n                  x = goalColumn;\n              if (amount < 0) {\n                dir = -1;amount = -amount;\n              }\n              var cur = _clipPos(this.doc, from);\n              for (var i = 0; i < amount; ++i) {\n                var coords = _cursorCoords(this$1, cur, \"div\");\n                if (x == null) {\n                  x = coords.left;\n                } else {\n                  coords.left = x;\n                }\n                cur = _findPosV(this$1, coords, dir, unit);\n                if (cur.hitSide) {\n                  break;\n                }\n              }\n              return cur;\n            },\n\n            moveV: methodOp(function (dir, unit) {\n              var this$1 = this;\n\n              var doc = this.doc,\n                  goals = [];\n              var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n              doc.extendSelectionsBy(function (range$$1) {\n                if (collapse) {\n                  return dir < 0 ? range$$1.from() : range$$1.to();\n                }\n                var headPos = _cursorCoords(this$1, range$$1.head, \"div\");\n                if (range$$1.goalColumn != null) {\n                  headPos.left = range$$1.goalColumn;\n                }\n                goals.push(headPos.left);\n                var pos = _findPosV(this$1, headPos, dir, unit);\n                if (unit == \"page\" && range$$1 == doc.sel.primary()) {\n                  addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n                }\n                return pos;\n              }, sel_move);\n              if (goals.length) {\n                for (var i = 0; i < doc.sel.ranges.length; i++) {\n                  doc.sel.ranges[i].goalColumn = goals[i];\n                }\n              }\n            }),\n\n            // Find the word at the given position (as returned by coordsChar).\n            findWordAt: function findWordAt(pos) {\n              var doc = this.doc,\n                  line = getLine(doc, pos.line).text;\n              var start = pos.ch,\n                  end = pos.ch;\n              if (line) {\n                var helper = this.getHelper(pos, \"wordChars\");\n                if ((pos.sticky == \"before\" || end == line.length) && start) {\n                  --start;\n                } else {\n                  ++end;\n                }\n                var startChar = line.charAt(start);\n                var check = isWordChar(startChar, helper) ? function (ch) {\n                  return isWordChar(ch, helper);\n                } : /\\s/.test(startChar) ? function (ch) {\n                  return (/\\s/.test(ch)\n                  );\n                } : function (ch) {\n                  return !/\\s/.test(ch) && !isWordChar(ch);\n                };\n                while (start > 0 && check(line.charAt(start - 1))) {\n                  --start;\n                }\n                while (end < line.length && check(line.charAt(end))) {\n                  ++end;\n                }\n              }\n              return new Range(Pos(pos.line, start), Pos(pos.line, end));\n            },\n\n            toggleOverwrite: function toggleOverwrite(value) {\n              if (value != null && value == this.state.overwrite) {\n                return;\n              }\n              if (this.state.overwrite = !this.state.overwrite) {\n                addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n              } else {\n                rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n              }\n\n              signal(this, \"overwriteToggle\", this, this.state.overwrite);\n            },\n            hasFocus: function hasFocus() {\n              return this.display.input.getField() == activeElt();\n            },\n            isReadOnly: function isReadOnly() {\n              return !!(this.options.readOnly || this.doc.cantEdit);\n            },\n\n            scrollTo: methodOp(function (x, y) {\n              scrollToCoords(this, x, y);\n            }),\n            getScrollInfo: function getScrollInfo() {\n              var scroller = this.display.scroller;\n              return { left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this) };\n            },\n\n            scrollIntoView: methodOp(function (range$$1, margin) {\n              if (range$$1 == null) {\n                range$$1 = { from: this.doc.sel.primary().head, to: null };\n                if (margin == null) {\n                  margin = this.options.cursorScrollMargin;\n                }\n              } else if (typeof range$$1 == \"number\") {\n                range$$1 = { from: Pos(range$$1, 0), to: null };\n              } else if (range$$1.from == null) {\n                range$$1 = { from: range$$1, to: null };\n              }\n              if (!range$$1.to) {\n                range$$1.to = range$$1.from;\n              }\n              range$$1.margin = margin || 0;\n\n              if (range$$1.from.line != null) {\n                scrollToRange(this, range$$1);\n              } else {\n                scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n              }\n            }),\n\n            setSize: methodOp(function (width, height) {\n              var this$1 = this;\n\n              var interpret = function interpret(val) {\n                return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n              };\n              if (width != null) {\n                this.display.wrapper.style.width = interpret(width);\n              }\n              if (height != null) {\n                this.display.wrapper.style.height = interpret(height);\n              }\n              if (this.options.lineWrapping) {\n                clearLineMeasurementCache(this);\n              }\n              var lineNo$$1 = this.display.viewFrom;\n              this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n                if (line.widgets) {\n                  for (var i = 0; i < line.widgets.length; i++) {\n                    if (line.widgets[i].noHScroll) {\n                      regLineChange(this$1, lineNo$$1, \"widget\");break;\n                    }\n                  }\n                }\n                ++lineNo$$1;\n              });\n              this.curOp.forceUpdate = true;\n              signal(this, \"refresh\", this);\n            }),\n\n            operation: function operation(f) {\n              return runInOp(this, f);\n            },\n            startOperation: function startOperation() {\n              return _startOperation(this);\n            },\n            endOperation: function endOperation() {\n              return _endOperation(this);\n            },\n\n            refresh: methodOp(function () {\n              var oldHeight = this.display.cachedTextHeight;\n              regChange(this);\n              this.curOp.forceUpdate = true;\n              clearCaches(this);\n              scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n              updateGutterSpace(this);\n              if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n                estimateLineHeights(this);\n              }\n              signal(this, \"refresh\", this);\n            }),\n\n            swapDoc: methodOp(function (doc) {\n              var old = this.doc;\n              old.cm = null;\n              attachDoc(this, doc);\n              clearCaches(this);\n              this.display.input.reset();\n              scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n              this.curOp.forceScroll = true;\n              signalLater(this, \"swapDoc\", this, old);\n              return old;\n            }),\n\n            getInputField: function getInputField() {\n              return this.display.input.getField();\n            },\n            getWrapperElement: function getWrapperElement() {\n              return this.display.wrapper;\n            },\n            getScrollerElement: function getScrollerElement() {\n              return this.display.scroller;\n            },\n            getGutterElement: function getGutterElement() {\n              return this.display.gutters;\n            }\n          };\n          eventMixin(CodeMirror);\n\n          CodeMirror.registerHelper = function (type, name, value) {\n            if (!helpers.hasOwnProperty(type)) {\n              helpers[type] = CodeMirror[type] = { _global: [] };\n            }\n            helpers[type][name] = value;\n          };\n          CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n            CodeMirror.registerHelper(type, name, value);\n            helpers[type]._global.push({ pred: predicate, val: value });\n          };\n        };\n\n        // Used for horizontal relative motion. Dir is -1 or 1 (left or\n        // right), unit can be \"char\", \"column\" (like char, but doesn't\n        // cross line boundaries), \"word\" (across next word), or \"group\" (to\n        // the start of next group of word or non-word-non-whitespace\n        // chars). The visually param controls whether, in right-to-left\n        // text, direction 1 means to move towards the next index in the\n        // string, or towards the character to the right of the current\n        // position. The resulting position will have a hitSide=true\n        // property if it reached the end of the document.\n        function _findPosH(doc, pos, dir, unit, visually) {\n          var oldPos = pos;\n          var origDir = dir;\n          var lineObj = getLine(doc, pos.line);\n          function findNextLine() {\n            var l = pos.line + dir;\n            if (l < doc.first || l >= doc.first + doc.size) {\n              return false;\n            }\n            pos = new Pos(l, pos.ch, pos.sticky);\n            return lineObj = getLine(doc, l);\n          }\n          function moveOnce(boundToLine) {\n            var next;\n            if (visually) {\n              next = moveVisually(doc.cm, lineObj, pos, dir);\n            } else {\n              next = moveLogically(lineObj, pos, dir);\n            }\n            if (next == null) {\n              if (!boundToLine && findNextLine()) {\n                pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir);\n              } else {\n                return false;\n              }\n            } else {\n              pos = next;\n            }\n            return true;\n          }\n\n          if (unit == \"char\") {\n            moveOnce();\n          } else if (unit == \"column\") {\n            moveOnce(true);\n          } else if (unit == \"word\" || unit == \"group\") {\n            var sawType = null,\n                group = unit == \"group\";\n            var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n            for (var first = true;; first = false) {\n              if (dir < 0 && !moveOnce(!first)) {\n                break;\n              }\n              var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n              var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n              if (group && !first && !type) {\n                type = \"s\";\n              }\n              if (sawType && sawType != type) {\n                if (dir < 0) {\n                  dir = 1;moveOnce();pos.sticky = \"after\";\n                }\n                break;\n              }\n\n              if (type) {\n                sawType = type;\n              }\n              if (dir > 0 && !moveOnce(!first)) {\n                break;\n              }\n            }\n          }\n          var result = skipAtomic(doc, pos, oldPos, origDir, true);\n          if (equalCursorPos(oldPos, result)) {\n            result.hitSide = true;\n          }\n          return result;\n        }\n\n        // For relative vertical movement. Dir may be -1 or 1. Unit can be\n        // \"page\" or \"line\". The resulting position will have a hitSide=true\n        // property if it reached the end of the document.\n        function _findPosV(cm, pos, dir, unit) {\n          var doc = cm.doc,\n              x = pos.left,\n              y;\n          if (unit == \"page\") {\n            var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n            var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n            y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n          } else if (unit == \"line\") {\n            y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n          }\n          var target;\n          for (;;) {\n            target = _coordsChar(cm, x, y);\n            if (!target.outside) {\n              break;\n            }\n            if (dir < 0 ? y <= 0 : y >= doc.height) {\n              target.hitSide = true;break;\n            }\n            y += dir * 5;\n          }\n          return target;\n        }\n\n        // CONTENTEDITABLE INPUT STYLE\n\n        var ContentEditableInput = function ContentEditableInput(cm) {\n          this.cm = cm;\n          this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n          this.polling = new Delayed();\n          this.composing = null;\n          this.gracePeriod = false;\n          this.readDOMTimeout = null;\n        };\n\n        ContentEditableInput.prototype.init = function (display) {\n          var this$1 = this;\n\n          var input = this,\n              cm = input.cm;\n          var div = input.div = display.lineDiv;\n          disableBrowserMagic(div, cm.options.spellcheck);\n\n          on(div, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n              return;\n            }\n            // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n            if (ie_version <= 11) {\n              setTimeout(operation(cm, function () {\n                return this$1.updateFromDOM();\n              }), 20);\n            }\n          });\n\n          on(div, \"compositionstart\", function (e) {\n            this$1.composing = { data: e.data, done: false };\n          });\n          on(div, \"compositionupdate\", function (e) {\n            if (!this$1.composing) {\n              this$1.composing = { data: e.data, done: false };\n            }\n          });\n          on(div, \"compositionend\", function (e) {\n            if (this$1.composing) {\n              if (e.data != this$1.composing.data) {\n                this$1.readFromDOMSoon();\n              }\n              this$1.composing.done = true;\n            }\n          });\n\n          on(div, \"touchstart\", function () {\n            return input.forceCompositionEnd();\n          });\n\n          on(div, \"input\", function () {\n            if (!this$1.composing) {\n              this$1.readFromDOMSoon();\n            }\n          });\n\n          function onCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n              return;\n            }\n            if (cm.somethingSelected()) {\n              setLastCopied({ lineWise: false, text: cm.getSelections() });\n              if (e.type == \"cut\") {\n                cm.replaceSelection(\"\", null, \"cut\");\n              }\n            } else if (!cm.options.lineWiseCopyCut) {\n              return;\n            } else {\n              var ranges = copyableRanges(cm);\n              setLastCopied({ lineWise: true, text: ranges.text });\n              if (e.type == \"cut\") {\n                cm.operation(function () {\n                  cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n                  cm.replaceSelection(\"\", null, \"cut\");\n                });\n              }\n            }\n            if (e.clipboardData) {\n              e.clipboardData.clearData();\n              var content = lastCopied.text.join(\"\\n\");\n              // iOS exposes the clipboard API, but seems to discard content inserted into it\n              e.clipboardData.setData(\"Text\", content);\n              if (e.clipboardData.getData(\"Text\") == content) {\n                e.preventDefault();\n                return;\n              }\n            }\n            // Old-fashioned briefly-focus-a-textarea hack\n            var kludge = hiddenTextarea(),\n                te = kludge.firstChild;\n            cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n            te.value = lastCopied.text.join(\"\\n\");\n            var hadFocus = document.activeElement;\n            selectInput(te);\n            setTimeout(function () {\n              cm.display.lineSpace.removeChild(kludge);\n              hadFocus.focus();\n              if (hadFocus == div) {\n                input.showPrimarySelection();\n              }\n            }, 50);\n          }\n          on(div, \"copy\", onCopyCut);\n          on(div, \"cut\", onCopyCut);\n        };\n\n        ContentEditableInput.prototype.prepareSelection = function () {\n          var result = prepareSelection(this.cm, false);\n          result.focus = this.cm.state.focused;\n          return result;\n        };\n\n        ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n          if (!info || !this.cm.display.view.length) {\n            return;\n          }\n          if (info.focus || takeFocus) {\n            this.showPrimarySelection();\n          }\n          this.showMultipleSelections(info);\n        };\n\n        ContentEditableInput.prototype.showPrimarySelection = function () {\n          var sel = window.getSelection(),\n              cm = this.cm,\n              prim = cm.doc.sel.primary();\n          var from = prim.from(),\n              to = prim.to();\n\n          if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n            sel.removeAllRanges();\n            return;\n          }\n\n          var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n          var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n          if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n            return;\n          }\n\n          var view = cm.display.view;\n          var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || { node: view[0].measure.map[2], offset: 0 };\n          var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n          if (!end) {\n            var measure = view[view.length - 1].measure;\n            var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n            end = { node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3] };\n          }\n\n          if (!start || !end) {\n            sel.removeAllRanges();\n            return;\n          }\n\n          var old = sel.rangeCount && sel.getRangeAt(0),\n              rng;\n          try {\n            rng = range(start.node, start.offset, end.offset, end.node);\n          } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n          if (rng) {\n            if (!gecko && cm.state.focused) {\n              sel.collapse(start.node, start.offset);\n              if (!rng.collapsed) {\n                sel.removeAllRanges();\n                sel.addRange(rng);\n              }\n            } else {\n              sel.removeAllRanges();\n              sel.addRange(rng);\n            }\n            if (old && sel.anchorNode == null) {\n              sel.addRange(old);\n            } else if (gecko) {\n              this.startGracePeriod();\n            }\n          }\n          this.rememberSelection();\n        };\n\n        ContentEditableInput.prototype.startGracePeriod = function () {\n          var this$1 = this;\n\n          clearTimeout(this.gracePeriod);\n          this.gracePeriod = setTimeout(function () {\n            this$1.gracePeriod = false;\n            if (this$1.selectionChanged()) {\n              this$1.cm.operation(function () {\n                return this$1.cm.curOp.selectionChanged = true;\n              });\n            }\n          }, 20);\n        };\n\n        ContentEditableInput.prototype.showMultipleSelections = function (info) {\n          removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n          removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n        };\n\n        ContentEditableInput.prototype.rememberSelection = function () {\n          var sel = window.getSelection();\n          this.lastAnchorNode = sel.anchorNode;this.lastAnchorOffset = sel.anchorOffset;\n          this.lastFocusNode = sel.focusNode;this.lastFocusOffset = sel.focusOffset;\n        };\n\n        ContentEditableInput.prototype.selectionInEditor = function () {\n          var sel = window.getSelection();\n          if (!sel.rangeCount) {\n            return false;\n          }\n          var node = sel.getRangeAt(0).commonAncestorContainer;\n          return contains(this.div, node);\n        };\n\n        ContentEditableInput.prototype.focus = function () {\n          if (this.cm.options.readOnly != \"nocursor\") {\n            if (!this.selectionInEditor()) {\n              this.showSelection(this.prepareSelection(), true);\n            }\n            this.div.focus();\n          }\n        };\n        ContentEditableInput.prototype.blur = function () {\n          this.div.blur();\n        };\n        ContentEditableInput.prototype.getField = function () {\n          return this.div;\n        };\n\n        ContentEditableInput.prototype.supportsTouch = function () {\n          return true;\n        };\n\n        ContentEditableInput.prototype.receivedFocus = function () {\n          var input = this;\n          if (this.selectionInEditor()) {\n            this.pollSelection();\n          } else {\n            runInOp(this.cm, function () {\n              return input.cm.curOp.selectionChanged = true;\n            });\n          }\n\n          function poll() {\n            if (input.cm.state.focused) {\n              input.pollSelection();\n              input.polling.set(input.cm.options.pollInterval, poll);\n            }\n          }\n          this.polling.set(this.cm.options.pollInterval, poll);\n        };\n\n        ContentEditableInput.prototype.selectionChanged = function () {\n          var sel = window.getSelection();\n          return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n        };\n\n        ContentEditableInput.prototype.pollSelection = function () {\n          if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n            return;\n          }\n          var sel = window.getSelection(),\n              cm = this.cm;\n          // On Android Chrome (version 56, at least), backspacing into an\n          // uneditable block element will put the cursor in that element,\n          // and then, because it's not editable, hide the virtual keyboard.\n          // Because Android doesn't allow us to actually detect backspace\n          // presses in a sane way, this code checks for when that happens\n          // and simulates a backspace press in this case.\n          if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\n            this.cm.triggerOnKeyDown({ type: \"keydown\", keyCode: 8, preventDefault: Math.abs });\n            this.blur();\n            this.focus();\n            return;\n          }\n          if (this.composing) {\n            return;\n          }\n          this.rememberSelection();\n          var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n          var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n          if (anchor && head) {\n            runInOp(cm, function () {\n              setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n              if (anchor.bad || head.bad) {\n                cm.curOp.selectionChanged = true;\n              }\n            });\n          }\n        };\n\n        ContentEditableInput.prototype.pollContent = function () {\n          if (this.readDOMTimeout != null) {\n            clearTimeout(this.readDOMTimeout);\n            this.readDOMTimeout = null;\n          }\n\n          var cm = this.cm,\n              display = cm.display,\n              sel = cm.doc.sel.primary();\n          var from = sel.from(),\n              to = sel.to();\n          if (from.ch == 0 && from.line > cm.firstLine()) {\n            from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n          }\n          if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n            to = Pos(to.line + 1, 0);\n          }\n          if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n            return false;\n          }\n\n          var fromIndex, fromLine, fromNode;\n          if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n            fromLine = lineNo(display.view[0].line);\n            fromNode = display.view[0].node;\n          } else {\n            fromLine = lineNo(display.view[fromIndex].line);\n            fromNode = display.view[fromIndex - 1].node.nextSibling;\n          }\n          var toIndex = findViewIndex(cm, to.line);\n          var toLine, toNode;\n          if (toIndex == display.view.length - 1) {\n            toLine = display.viewTo - 1;\n            toNode = display.lineDiv.lastChild;\n          } else {\n            toLine = lineNo(display.view[toIndex + 1].line) - 1;\n            toNode = display.view[toIndex + 1].node.previousSibling;\n          }\n\n          if (!fromNode) {\n            return false;\n          }\n          var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n          var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n          while (newText.length > 1 && oldText.length > 1) {\n            if (lst(newText) == lst(oldText)) {\n              newText.pop();oldText.pop();toLine--;\n            } else if (newText[0] == oldText[0]) {\n              newText.shift();oldText.shift();fromLine++;\n            } else {\n              break;\n            }\n          }\n\n          var cutFront = 0,\n              cutEnd = 0;\n          var newTop = newText[0],\n              oldTop = oldText[0],\n              maxCutFront = Math.min(newTop.length, oldTop.length);\n          while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n            ++cutFront;\n          }\n          var newBot = lst(newText),\n              oldBot = lst(oldText);\n          var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n          while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n            ++cutEnd;\n          }\n          // Try to move start of change to start of selection if ambiguous\n          if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n            while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n              cutFront--;\n              cutEnd++;\n            }\n          }\n\n          newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n          newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n          var chFrom = Pos(fromLine, cutFront);\n          var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n          if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n            _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n            return true;\n          }\n        };\n\n        ContentEditableInput.prototype.ensurePolled = function () {\n          this.forceCompositionEnd();\n        };\n        ContentEditableInput.prototype.reset = function () {\n          this.forceCompositionEnd();\n        };\n        ContentEditableInput.prototype.forceCompositionEnd = function () {\n          if (!this.composing) {\n            return;\n          }\n          clearTimeout(this.readDOMTimeout);\n          this.composing = null;\n          this.updateFromDOM();\n          this.div.blur();\n          this.div.focus();\n        };\n        ContentEditableInput.prototype.readFromDOMSoon = function () {\n          var this$1 = this;\n\n          if (this.readDOMTimeout != null) {\n            return;\n          }\n          this.readDOMTimeout = setTimeout(function () {\n            this$1.readDOMTimeout = null;\n            if (this$1.composing) {\n              if (this$1.composing.done) {\n                this$1.composing = null;\n              } else {\n                return;\n              }\n            }\n            this$1.updateFromDOM();\n          }, 80);\n        };\n\n        ContentEditableInput.prototype.updateFromDOM = function () {\n          var this$1 = this;\n\n          if (this.cm.isReadOnly() || !this.pollContent()) {\n            runInOp(this.cm, function () {\n              return regChange(this$1.cm);\n            });\n          }\n        };\n\n        ContentEditableInput.prototype.setUneditable = function (node) {\n          node.contentEditable = \"false\";\n        };\n\n        ContentEditableInput.prototype.onKeyPress = function (e) {\n          if (e.charCode == 0) {\n            return;\n          }\n          e.preventDefault();\n          if (!this.cm.isReadOnly()) {\n            operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n          }\n        };\n\n        ContentEditableInput.prototype.readOnlyChanged = function (val) {\n          this.div.contentEditable = String(val != \"nocursor\");\n        };\n\n        ContentEditableInput.prototype.onContextMenu = function () {};\n        ContentEditableInput.prototype.resetPosition = function () {};\n\n        ContentEditableInput.prototype.needsContentAttribute = true;\n\n        function posToDOM(cm, pos) {\n          var view = findViewForLine(cm, pos.line);\n          if (!view || view.hidden) {\n            return null;\n          }\n          var line = getLine(cm.doc, pos.line);\n          var info = mapFromLineView(view, line, pos.line);\n\n          var order = getOrder(line, cm.doc.direction),\n              side = \"left\";\n          if (order) {\n            var partPos = getBidiPartAt(order, pos.ch);\n            side = partPos % 2 ? \"right\" : \"left\";\n          }\n          var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n          result.offset = result.collapse == \"right\" ? result.end : result.start;\n          return result;\n        }\n\n        function isInGutter(node) {\n          for (var scan = node; scan; scan = scan.parentNode) {\n            if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n              return true;\n            }\n          }\n          return false;\n        }\n\n        function badPos(pos, bad) {\n          if (bad) {\n            pos.bad = true;\n          }return pos;\n        }\n\n        function domTextBetween(cm, from, to, fromLine, toLine) {\n          var text = \"\",\n              closing = false,\n              lineSep = cm.doc.lineSeparator();\n          function recognizeMarker(id) {\n            return function (marker) {\n              return marker.id == id;\n            };\n          }\n          function close() {\n            if (closing) {\n              text += lineSep;\n              closing = false;\n            }\n          }\n          function addText(str) {\n            if (str) {\n              close();\n              text += str;\n            }\n          }\n          function walk(node) {\n            if (node.nodeType == 1) {\n              var cmText = node.getAttribute(\"cm-text\");\n              if (cmText != null) {\n                addText(cmText || node.textContent.replace(/\\u200b/g, \"\"));\n                return;\n              }\n              var markerID = node.getAttribute(\"cm-marker\"),\n                  range$$1;\n              if (markerID) {\n                var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n                if (found.length && (range$$1 = found[0].find(0))) {\n                  addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep));\n                }\n                return;\n              }\n              if (node.getAttribute(\"contenteditable\") == \"false\") {\n                return;\n              }\n              var isBlock = /^(pre|div|p)$/i.test(node.nodeName);\n              if (isBlock) {\n                close();\n              }\n              for (var i = 0; i < node.childNodes.length; i++) {\n                walk(node.childNodes[i]);\n              }\n              if (isBlock) {\n                closing = true;\n              }\n            } else if (node.nodeType == 3) {\n              addText(node.nodeValue);\n            }\n          }\n          for (;;) {\n            walk(from);\n            if (from == to) {\n              break;\n            }\n            from = from.nextSibling;\n          }\n          return text;\n        }\n\n        function domToPos(cm, node, offset) {\n          var lineNode;\n          if (node == cm.display.lineDiv) {\n            lineNode = cm.display.lineDiv.childNodes[offset];\n            if (!lineNode) {\n              return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n            }\n            node = null;offset = 0;\n          } else {\n            for (lineNode = node;; lineNode = lineNode.parentNode) {\n              if (!lineNode || lineNode == cm.display.lineDiv) {\n                return null;\n              }\n              if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n                break;\n              }\n            }\n          }\n          for (var i = 0; i < cm.display.view.length; i++) {\n            var lineView = cm.display.view[i];\n            if (lineView.node == lineNode) {\n              return locateNodeInLineView(lineView, node, offset);\n            }\n          }\n        }\n\n        function locateNodeInLineView(lineView, node, offset) {\n          var wrapper = lineView.text.firstChild,\n              bad = false;\n          if (!node || !contains(wrapper, node)) {\n            return badPos(Pos(lineNo(lineView.line), 0), true);\n          }\n          if (node == wrapper) {\n            bad = true;\n            node = wrapper.childNodes[offset];\n            offset = 0;\n            if (!node) {\n              var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n              return badPos(Pos(lineNo(line), line.text.length), bad);\n            }\n          }\n\n          var textNode = node.nodeType == 3 ? node : null,\n              topNode = node;\n          if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n            textNode = node.firstChild;\n            if (offset) {\n              offset = textNode.nodeValue.length;\n            }\n          }\n          while (topNode.parentNode != wrapper) {\n            topNode = topNode.parentNode;\n          }\n          var measure = lineView.measure,\n              maps = measure.maps;\n\n          function find(textNode, topNode, offset) {\n            for (var i = -1; i < (maps ? maps.length : 0); i++) {\n              var map$$1 = i < 0 ? measure.map : maps[i];\n              for (var j = 0; j < map$$1.length; j += 3) {\n                var curNode = map$$1[j + 2];\n                if (curNode == textNode || curNode == topNode) {\n                  var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n                  var ch = map$$1[j] + offset;\n                  if (offset < 0 || curNode != textNode) {\n                    ch = map$$1[j + (offset ? 1 : 0)];\n                  }\n                  return Pos(line, ch);\n                }\n              }\n            }\n          }\n          var found = find(textNode, topNode, offset);\n          if (found) {\n            return badPos(found, bad);\n          }\n\n          // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n          for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n            found = find(after, after.firstChild, 0);\n            if (found) {\n              return badPos(Pos(found.line, found.ch - dist), bad);\n            } else {\n              dist += after.textContent.length;\n            }\n          }\n          for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n            found = find(before, before.firstChild, -1);\n            if (found) {\n              return badPos(Pos(found.line, found.ch + dist$1), bad);\n            } else {\n              dist$1 += before.textContent.length;\n            }\n          }\n        }\n\n        // TEXTAREA INPUT STYLE\n\n        var TextareaInput = function TextareaInput(cm) {\n          this.cm = cm;\n          // See input.poll and input.reset\n          this.prevInput = \"\";\n\n          // Flag that indicates whether we expect input to appear real soon\n          // now (after some event like 'keypress' or 'input') and are\n          // polling intensively.\n          this.pollingFast = false;\n          // Self-resetting timeout for the poller\n          this.polling = new Delayed();\n          // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n          this.hasSelection = false;\n          this.composing = null;\n        };\n\n        TextareaInput.prototype.init = function (display) {\n          var this$1 = this;\n\n          var input = this,\n              cm = this.cm;\n\n          // Wraps and hides input textarea\n          var div = this.wrapper = hiddenTextarea();\n          // The semihidden textarea that is focused when the editor is\n          // focused, and receives input.\n          var te = this.textarea = div.firstChild;\n          display.wrapper.insertBefore(div, display.wrapper.firstChild);\n\n          // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n          if (ios) {\n            te.style.width = \"0px\";\n          }\n\n          on(te, \"input\", function () {\n            if (ie && ie_version >= 9 && this$1.hasSelection) {\n              this$1.hasSelection = null;\n            }\n            input.poll();\n          });\n\n          on(te, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n              return;\n            }\n\n            cm.state.pasteIncoming = true;\n            input.fastPoll();\n          });\n\n          function prepareCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n              return;\n            }\n            if (cm.somethingSelected()) {\n              setLastCopied({ lineWise: false, text: cm.getSelections() });\n            } else if (!cm.options.lineWiseCopyCut) {\n              return;\n            } else {\n              var ranges = copyableRanges(cm);\n              setLastCopied({ lineWise: true, text: ranges.text });\n              if (e.type == \"cut\") {\n                cm.setSelections(ranges.ranges, null, sel_dontScroll);\n              } else {\n                input.prevInput = \"\";\n                te.value = ranges.text.join(\"\\n\");\n                selectInput(te);\n              }\n            }\n            if (e.type == \"cut\") {\n              cm.state.cutIncoming = true;\n            }\n          }\n          on(te, \"cut\", prepareCopyCut);\n          on(te, \"copy\", prepareCopyCut);\n\n          on(display.scroller, \"paste\", function (e) {\n            if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n              return;\n            }\n            cm.state.pasteIncoming = true;\n            input.focus();\n          });\n\n          // Prevent normal selection in the editor (we handle our own)\n          on(display.lineSpace, \"selectstart\", function (e) {\n            if (!eventInWidget(display, e)) {\n              e_preventDefault(e);\n            }\n          });\n\n          on(te, \"compositionstart\", function () {\n            var start = cm.getCursor(\"from\");\n            if (input.composing) {\n              input.composing.range.clear();\n            }\n            input.composing = {\n              start: start,\n              range: cm.markText(start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" })\n            };\n          });\n          on(te, \"compositionend\", function () {\n            if (input.composing) {\n              input.poll();\n              input.composing.range.clear();\n              input.composing = null;\n            }\n          });\n        };\n\n        TextareaInput.prototype.prepareSelection = function () {\n          // Redraw the selection and/or cursor\n          var cm = this.cm,\n              display = cm.display,\n              doc = cm.doc;\n          var result = prepareSelection(cm);\n\n          // Move the hidden textarea near the cursor to prevent scrolling artifacts\n          if (cm.options.moveInputWithCursor) {\n            var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n            var wrapOff = display.wrapper.getBoundingClientRect(),\n                lineOff = display.lineDiv.getBoundingClientRect();\n            result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n            result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n          }\n\n          return result;\n        };\n\n        TextareaInput.prototype.showSelection = function (drawn) {\n          var cm = this.cm,\n              display = cm.display;\n          removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n          removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n          if (drawn.teTop != null) {\n            this.wrapper.style.top = drawn.teTop + \"px\";\n            this.wrapper.style.left = drawn.teLeft + \"px\";\n          }\n        };\n\n        // Reset the input to correspond to the selection (or to be empty,\n        // when not typing and nothing is selected)\n        TextareaInput.prototype.reset = function (typing) {\n          if (this.contextMenuPending || this.composing) {\n            return;\n          }\n          var cm = this.cm;\n          if (cm.somethingSelected()) {\n            this.prevInput = \"\";\n            var content = cm.getSelection();\n            this.textarea.value = content;\n            if (cm.state.focused) {\n              selectInput(this.textarea);\n            }\n            if (ie && ie_version >= 9) {\n              this.hasSelection = content;\n            }\n          } else if (!typing) {\n            this.prevInput = this.textarea.value = \"\";\n            if (ie && ie_version >= 9) {\n              this.hasSelection = null;\n            }\n          }\n        };\n\n        TextareaInput.prototype.getField = function () {\n          return this.textarea;\n        };\n\n        TextareaInput.prototype.supportsTouch = function () {\n          return false;\n        };\n\n        TextareaInput.prototype.focus = function () {\n          if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n            try {\n              this.textarea.focus();\n            } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n          }\n        };\n\n        TextareaInput.prototype.blur = function () {\n          this.textarea.blur();\n        };\n\n        TextareaInput.prototype.resetPosition = function () {\n          this.wrapper.style.top = this.wrapper.style.left = 0;\n        };\n\n        TextareaInput.prototype.receivedFocus = function () {\n          this.slowPoll();\n        };\n\n        // Poll for input changes, using the normal rate of polling. This\n        // runs as long as the editor is focused.\n        TextareaInput.prototype.slowPoll = function () {\n          var this$1 = this;\n\n          if (this.pollingFast) {\n            return;\n          }\n          this.polling.set(this.cm.options.pollInterval, function () {\n            this$1.poll();\n            if (this$1.cm.state.focused) {\n              this$1.slowPoll();\n            }\n          });\n        };\n\n        // When an event has just come in that is likely to add or change\n        // something in the input textarea, we poll faster, to ensure that\n        // the change appears on the screen quickly.\n        TextareaInput.prototype.fastPoll = function () {\n          var missed = false,\n              input = this;\n          input.pollingFast = true;\n          function p() {\n            var changed = input.poll();\n            if (!changed && !missed) {\n              missed = true;input.polling.set(60, p);\n            } else {\n              input.pollingFast = false;input.slowPoll();\n            }\n          }\n          input.polling.set(20, p);\n        };\n\n        // Read input from the textarea, and update the document to match.\n        // When something is selected, it is present in the textarea, and\n        // selected (unless it is huge, in which case a placeholder is\n        // used). When nothing is selected, the cursor sits after previously\n        // seen text (can be empty), which is stored in prevInput (we must\n        // not reset the textarea when typing, because that breaks IME).\n        TextareaInput.prototype.poll = function () {\n          var this$1 = this;\n\n          var cm = this.cm,\n              input = this.textarea,\n              prevInput = this.prevInput;\n          // Since this is called a *lot*, try to bail out as cheaply as\n          // possible when it is clear that nothing happened. hasSelection\n          // will be the case when there is a lot of text in the textarea,\n          // in which case reading its value would be expensive.\n          if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n            return false;\n          }\n\n          var text = input.value;\n          // If nothing changed, bail.\n          if (text == prevInput && !cm.somethingSelected()) {\n            return false;\n          }\n          // Work around nonsensical selection resetting in IE9/10, and\n          // inexplicable appearance of private area unicode characters on\n          // some key combos in Mac (#2689).\n          if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n            cm.display.input.reset();\n            return false;\n          }\n\n          if (cm.doc.sel == cm.display.selForContextMenu) {\n            var first = text.charCodeAt(0);\n            if (first == 0x200b && !prevInput) {\n              prevInput = \"\\u200B\";\n            }\n            if (first == 0x21da) {\n              this.reset();return this.cm.execCommand(\"undo\");\n            }\n          }\n          // Find the part of the input that is actually new\n          var same = 0,\n              l = Math.min(prevInput.length, text.length);\n          while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n            ++same;\n          }\n\n          runInOp(cm, function () {\n            applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null);\n\n            // Don't leave long text in the textarea, since it makes further polling slow\n            if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n              input.value = this$1.prevInput = \"\";\n            } else {\n              this$1.prevInput = text;\n            }\n\n            if (this$1.composing) {\n              this$1.composing.range.clear();\n              this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" });\n            }\n          });\n          return true;\n        };\n\n        TextareaInput.prototype.ensurePolled = function () {\n          if (this.pollingFast && this.poll()) {\n            this.pollingFast = false;\n          }\n        };\n\n        TextareaInput.prototype.onKeyPress = function () {\n          if (ie && ie_version >= 9) {\n            this.hasSelection = null;\n          }\n          this.fastPoll();\n        };\n\n        TextareaInput.prototype.onContextMenu = function (e) {\n          var input = this,\n              cm = input.cm,\n              display = cm.display,\n              te = input.textarea;\n          var pos = posFromMouse(cm, e),\n              scrollPos = display.scroller.scrollTop;\n          if (!pos || presto) {\n            return;\n          } // Opera is difficult.\n\n          // Reset the current text selection only if the click is done outside of the selection\n          // and 'resetSelectionOnContextMenu' option is true.\n          var reset = cm.options.resetSelectionOnContextMenu;\n          if (reset && cm.doc.sel.contains(pos) == -1) {\n            operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n          }\n\n          var oldCSS = te.style.cssText,\n              oldWrapperCSS = input.wrapper.style.cssText;\n          input.wrapper.style.cssText = \"position: absolute\";\n          var wrapperBox = input.wrapper.getBoundingClientRect();\n          te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n          var oldScrollY;\n          if (webkit) {\n            oldScrollY = window.scrollY;\n          } // Work around Chrome issue (#2712)\n          display.input.focus();\n          if (webkit) {\n            window.scrollTo(null, oldScrollY);\n          }\n          display.input.reset();\n          // Adds \"Select all\" to context menu in FF\n          if (!cm.somethingSelected()) {\n            te.value = input.prevInput = \" \";\n          }\n          input.contextMenuPending = true;\n          display.selForContextMenu = cm.doc.sel;\n          clearTimeout(display.detectingSelectAll);\n\n          // Select-all will be greyed out if there's nothing to select, so\n          // this adds a zero-width space so that we can later check whether\n          // it got selected.\n          function prepareSelectAllHack() {\n            if (te.selectionStart != null) {\n              var selected = cm.somethingSelected();\n              var extval = \"\\u200B\" + (selected ? te.value : \"\");\n              te.value = \"\\u21DA\"; // Used to catch context-menu undo\n              te.value = extval;\n              input.prevInput = selected ? \"\" : \"\\u200B\";\n              te.selectionStart = 1;te.selectionEnd = extval.length;\n              // Re-set this, in case some other handler touched the\n              // selection in the meantime.\n              display.selForContextMenu = cm.doc.sel;\n            }\n          }\n          function rehide() {\n            input.contextMenuPending = false;\n            input.wrapper.style.cssText = oldWrapperCSS;\n            te.style.cssText = oldCSS;\n            if (ie && ie_version < 9) {\n              display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n            }\n\n            // Try to detect the user choosing select-all\n            if (te.selectionStart != null) {\n              if (!ie || ie && ie_version < 9) {\n                prepareSelectAllHack();\n              }\n              var i = 0,\n                  poll = function poll() {\n                if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n                  operation(cm, selectAll)(cm);\n                } else if (i++ < 10) {\n                  display.detectingSelectAll = setTimeout(poll, 500);\n                } else {\n                  display.selForContextMenu = null;\n                  display.input.reset();\n                }\n              };\n              display.detectingSelectAll = setTimeout(poll, 200);\n            }\n          }\n\n          if (ie && ie_version >= 9) {\n            prepareSelectAllHack();\n          }\n          if (captureRightClick) {\n            e_stop(e);\n            var mouseup = function mouseup() {\n              off(window, \"mouseup\", mouseup);\n              setTimeout(rehide, 20);\n            };\n            on(window, \"mouseup\", mouseup);\n          } else {\n            setTimeout(rehide, 50);\n          }\n        };\n\n        TextareaInput.prototype.readOnlyChanged = function (val) {\n          if (!val) {\n            this.reset();\n          }\n          this.textarea.disabled = val == \"nocursor\";\n        };\n\n        TextareaInput.prototype.setUneditable = function () {};\n\n        TextareaInput.prototype.needsContentAttribute = false;\n\n        function fromTextArea(textarea, options) {\n          options = options ? copyObj(options) : {};\n          options.value = textarea.value;\n          if (!options.tabindex && textarea.tabIndex) {\n            options.tabindex = textarea.tabIndex;\n          }\n          if (!options.placeholder && textarea.placeholder) {\n            options.placeholder = textarea.placeholder;\n          }\n          // Set autofocus to true if this textarea is focused, or if it has\n          // autofocus and no other element is focused.\n          if (options.autofocus == null) {\n            var hasFocus = activeElt();\n            options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n          }\n\n          function save() {\n            textarea.value = cm.getValue();\n          }\n\n          var realSubmit;\n          if (textarea.form) {\n            on(textarea.form, \"submit\", save);\n            // Deplorable hack to make the submit method do the right thing.\n            if (!options.leaveSubmitMethodAlone) {\n              var form = textarea.form;\n              realSubmit = form.submit;\n              try {\n                var wrappedSubmit = form.submit = function () {\n                  save();\n                  form.submit = realSubmit;\n                  form.submit();\n                  form.submit = wrappedSubmit;\n                };\n              } catch (e) {}\n            }\n          }\n\n          options.finishInit = function (cm) {\n            cm.save = save;\n            cm.getTextArea = function () {\n              return textarea;\n            };\n            cm.toTextArea = function () {\n              cm.toTextArea = isNaN; // Prevent this from being ran twice\n              save();\n              textarea.parentNode.removeChild(cm.getWrapperElement());\n              textarea.style.display = \"\";\n              if (textarea.form) {\n                off(textarea.form, \"submit\", save);\n                if (typeof textarea.form.submit == \"function\") {\n                  textarea.form.submit = realSubmit;\n                }\n              }\n            };\n          };\n\n          textarea.style.display = \"none\";\n          var cm = CodeMirror$1(function (node) {\n            return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n          }, options);\n          return cm;\n        }\n\n        function addLegacyProps(CodeMirror) {\n          CodeMirror.off = off;\n          CodeMirror.on = on;\n          CodeMirror.wheelEventPixels = wheelEventPixels;\n          CodeMirror.Doc = Doc;\n          CodeMirror.splitLines = splitLinesAuto;\n          CodeMirror.countColumn = countColumn;\n          CodeMirror.findColumn = findColumn;\n          CodeMirror.isWordChar = isWordCharBasic;\n          CodeMirror.Pass = Pass;\n          CodeMirror.signal = signal;\n          CodeMirror.Line = Line;\n          CodeMirror.changeEnd = changeEnd;\n          CodeMirror.scrollbarModel = scrollbarModel;\n          CodeMirror.Pos = Pos;\n          CodeMirror.cmpPos = cmp;\n          CodeMirror.modes = modes;\n          CodeMirror.mimeModes = mimeModes;\n          CodeMirror.resolveMode = resolveMode;\n          CodeMirror.getMode = getMode;\n          CodeMirror.modeExtensions = modeExtensions;\n          CodeMirror.extendMode = extendMode;\n          CodeMirror.copyState = copyState;\n          CodeMirror.startState = startState;\n          CodeMirror.innerMode = innerMode;\n          CodeMirror.commands = commands;\n          CodeMirror.keyMap = keyMap;\n          CodeMirror.keyName = keyName;\n          CodeMirror.isModifierKey = isModifierKey;\n          CodeMirror.lookupKey = lookupKey;\n          CodeMirror.normalizeKeyMap = normalizeKeyMap;\n          CodeMirror.StringStream = StringStream;\n          CodeMirror.SharedTextMarker = SharedTextMarker;\n          CodeMirror.TextMarker = TextMarker;\n          CodeMirror.LineWidget = LineWidget;\n          CodeMirror.e_preventDefault = e_preventDefault;\n          CodeMirror.e_stopPropagation = e_stopPropagation;\n          CodeMirror.e_stop = e_stop;\n          CodeMirror.addClass = addClass;\n          CodeMirror.contains = contains;\n          CodeMirror.rmClass = rmClass;\n          CodeMirror.keyNames = keyNames;\n        }\n\n        // EDITOR CONSTRUCTOR\n\n        defineOptions(CodeMirror$1);\n\n        addEditorMethods(CodeMirror$1);\n\n        // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n        var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n        for (var prop in Doc.prototype) {\n          if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n            CodeMirror$1.prototype[prop] = function (method) {\n              return function () {\n                return method.apply(this.doc, arguments);\n              };\n            }(Doc.prototype[prop]);\n          }\n        }\n\n        eventMixin(Doc);\n\n        // INPUT HANDLING\n\n        CodeMirror$1.inputStyles = { \"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput };\n\n        // MODE DEFINITION AND QUERYING\n\n        // Extra arguments are stored as the mode's dependencies, which is\n        // used by (legacy) mechanisms like loadmode.js to automatically\n        // load a mode. (Preferred mechanism is the require/define calls.)\n        CodeMirror$1.defineMode = function (name /*, mode, */) {\n          if (!CodeMirror$1.defaults.mode && name != \"null\") {\n            CodeMirror$1.defaults.mode = name;\n          }\n          defineMode.apply(this, arguments);\n        };\n\n        CodeMirror$1.defineMIME = defineMIME;\n\n        // Minimal default mode.\n        CodeMirror$1.defineMode(\"null\", function () {\n          return { token: function token(stream) {\n              return stream.skipToEnd();\n            } };\n        });\n        CodeMirror$1.defineMIME(\"text/plain\", \"null\");\n\n        // EXTENSIONS\n\n        CodeMirror$1.defineExtension = function (name, func) {\n          CodeMirror$1.prototype[name] = func;\n        };\n        CodeMirror$1.defineDocExtension = function (name, func) {\n          Doc.prototype[name] = func;\n        };\n\n        CodeMirror$1.fromTextArea = fromTextArea;\n\n        addLegacyProps(CodeMirror$1);\n\n        CodeMirror$1.version = \"5.29.0\";\n\n        return CodeMirror$1;\n      });\n    }, {}], 8: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineMode(\"css\", function (config, parserConfig) {\n          var inline = parserConfig.inline;\n          if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n          var indentUnit = config.indentUnit,\n              tokenHooks = parserConfig.tokenHooks,\n              documentTypes = parserConfig.documentTypes || {},\n              mediaTypes = parserConfig.mediaTypes || {},\n              mediaFeatures = parserConfig.mediaFeatures || {},\n              mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n              propertyKeywords = parserConfig.propertyKeywords || {},\n              nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n              fontProperties = parserConfig.fontProperties || {},\n              counterDescriptors = parserConfig.counterDescriptors || {},\n              colorKeywords = parserConfig.colorKeywords || {},\n              valueKeywords = parserConfig.valueKeywords || {},\n              allowNested = parserConfig.allowNested,\n              lineComment = parserConfig.lineComment,\n              supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n          var type, override;\n          function ret(style, tp) {\n            type = tp;return style;\n          }\n\n          // Tokenizers\n\n          function tokenBase(stream, state) {\n            var ch = stream.next();\n            if (tokenHooks[ch]) {\n              var result = tokenHooks[ch](stream, state);\n              if (result !== false) return result;\n            }\n            if (ch == \"@\") {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"def\", stream.current());\n            } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n              return ret(null, \"compare\");\n            } else if (ch == \"\\\"\" || ch == \"'\") {\n              state.tokenize = tokenString(ch);\n              return state.tokenize(stream, state);\n            } else if (ch == \"#\") {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"atom\", \"hash\");\n            } else if (ch == \"!\") {\n              stream.match(/^\\s*\\w*/);\n              return ret(\"keyword\", \"important\");\n            } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n              stream.eatWhile(/[\\w.%]/);\n              return ret(\"number\", \"unit\");\n            } else if (ch === \"-\") {\n              if (/[\\d.]/.test(stream.peek())) {\n                stream.eatWhile(/[\\w.%]/);\n                return ret(\"number\", \"unit\");\n              } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n                stream.eatWhile(/[\\w\\\\\\-]/);\n                if (stream.match(/^\\s*:/, false)) return ret(\"variable-2\", \"variable-definition\");\n                return ret(\"variable-2\", \"variable\");\n              } else if (stream.match(/^\\w+-/)) {\n                return ret(\"meta\", \"meta\");\n              }\n            } else if (/[,+>*\\/]/.test(ch)) {\n              return ret(null, \"select-op\");\n            } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n              return ret(\"qualifier\", \"qualifier\");\n            } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n              return ret(null, ch);\n            } else if (ch == \"u\" && stream.match(/rl(-prefix)?\\(/) || ch == \"d\" && stream.match(\"omain(\") || ch == \"r\" && stream.match(\"egexp(\")) {\n              stream.backUp(1);\n              state.tokenize = tokenParenthesized;\n              return ret(\"property\", \"word\");\n            } else if (/[\\w\\\\\\-]/.test(ch)) {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"property\", \"word\");\n            } else {\n              return ret(null, null);\n            }\n          }\n\n          function tokenString(quote) {\n            return function (stream, state) {\n              var escaped = false,\n                  ch;\n              while ((ch = stream.next()) != null) {\n                if (ch == quote && !escaped) {\n                  if (quote == \")\") stream.backUp(1);\n                  break;\n                }\n                escaped = !escaped && ch == \"\\\\\";\n              }\n              if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n              return ret(\"string\", \"string\");\n            };\n          }\n\n          function tokenParenthesized(stream, state) {\n            stream.next(); // Must be '('\n            if (!stream.match(/\\s*[\\\"\\')]/, false)) state.tokenize = tokenString(\")\");else state.tokenize = null;\n            return ret(null, \"(\");\n          }\n\n          // Context management\n\n          function Context(type, indent, prev) {\n            this.type = type;\n            this.indent = indent;\n            this.prev = prev;\n          }\n\n          function pushContext(state, stream, type, indent) {\n            state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n            return type;\n          }\n\n          function popContext(state) {\n            if (state.context.prev) state.context = state.context.prev;\n            return state.context.type;\n          }\n\n          function pass(type, stream, state) {\n            return states[state.context.type](type, stream, state);\n          }\n          function popAndPass(type, stream, state, n) {\n            for (var i = n || 1; i > 0; i--) {\n              state.context = state.context.prev;\n            }return pass(type, stream, state);\n          }\n\n          // Parser\n\n          function wordAsValue(stream) {\n            var word = stream.current().toLowerCase();\n            if (valueKeywords.hasOwnProperty(word)) override = \"atom\";else if (colorKeywords.hasOwnProperty(word)) override = \"keyword\";else override = \"variable\";\n          }\n\n          var states = {};\n\n          states.top = function (type, stream, state) {\n            if (type == \"{\") {\n              return pushContext(state, stream, \"block\");\n            } else if (type == \"}\" && state.context.prev) {\n              return popContext(state);\n            } else if (supportsAtComponent && /@component/.test(type)) {\n              return pushContext(state, stream, \"atComponentBlock\");\n            } else if (/^@(-moz-)?document$/.test(type)) {\n              return pushContext(state, stream, \"documentTypes\");\n            } else if (/^@(media|supports|(-moz-)?document|import)$/.test(type)) {\n              return pushContext(state, stream, \"atBlock\");\n            } else if (/^@(font-face|counter-style)/.test(type)) {\n              state.stateArg = type;\n              return \"restricted_atBlock_before\";\n            } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)) {\n              return \"keyframes\";\n            } else if (type && type.charAt(0) == \"@\") {\n              return pushContext(state, stream, \"at\");\n            } else if (type == \"hash\") {\n              override = \"builtin\";\n            } else if (type == \"word\") {\n              override = \"tag\";\n            } else if (type == \"variable-definition\") {\n              return \"maybeprop\";\n            } else if (type == \"interpolation\") {\n              return pushContext(state, stream, \"interpolation\");\n            } else if (type == \":\") {\n              return \"pseudo\";\n            } else if (allowNested && type == \"(\") {\n              return pushContext(state, stream, \"parens\");\n            }\n            return state.context.type;\n          };\n\n          states.block = function (type, stream, state) {\n            if (type == \"word\") {\n              var word = stream.current().toLowerCase();\n              if (propertyKeywords.hasOwnProperty(word)) {\n                override = \"property\";\n                return \"maybeprop\";\n              } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n                override = \"string-2\";\n                return \"maybeprop\";\n              } else if (allowNested) {\n                override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n                return \"block\";\n              } else {\n                override += \" error\";\n                return \"maybeprop\";\n              }\n            } else if (type == \"meta\") {\n              return \"block\";\n            } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n              override = \"error\";\n              return \"block\";\n            } else {\n              return states.top(type, stream, state);\n            }\n          };\n\n          states.maybeprop = function (type, stream, state) {\n            if (type == \":\") return pushContext(state, stream, \"prop\");\n            return pass(type, stream, state);\n          };\n\n          states.prop = function (type, stream, state) {\n            if (type == \";\") return popContext(state);\n            if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n            if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n            if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n            if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n              override += \" error\";\n            } else if (type == \"word\") {\n              wordAsValue(stream);\n            } else if (type == \"interpolation\") {\n              return pushContext(state, stream, \"interpolation\");\n            }\n            return \"prop\";\n          };\n\n          states.propBlock = function (type, _stream, state) {\n            if (type == \"}\") return popContext(state);\n            if (type == \"word\") {\n              override = \"property\";return \"maybeprop\";\n            }\n            return state.context.type;\n          };\n\n          states.parens = function (type, stream, state) {\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n            if (type == \")\") return popContext(state);\n            if (type == \"(\") return pushContext(state, stream, \"parens\");\n            if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n            if (type == \"word\") wordAsValue(stream);\n            return \"parens\";\n          };\n\n          states.pseudo = function (type, stream, state) {\n            if (type == \"meta\") return \"pseudo\";\n\n            if (type == \"word\") {\n              override = \"variable-3\";\n              return state.context.type;\n            }\n            return pass(type, stream, state);\n          };\n\n          states.documentTypes = function (type, stream, state) {\n            if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n              override = \"tag\";\n              return state.context.type;\n            } else {\n              return states.atBlock(type, stream, state);\n            }\n          };\n\n          states.atBlock = function (type, stream, state) {\n            if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n            if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n            if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n            if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n            if (type == \"word\") {\n              var word = stream.current().toLowerCase();\n              if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\") override = \"keyword\";else if (mediaTypes.hasOwnProperty(word)) override = \"attribute\";else if (mediaFeatures.hasOwnProperty(word)) override = \"property\";else if (mediaValueKeywords.hasOwnProperty(word)) override = \"keyword\";else if (propertyKeywords.hasOwnProperty(word)) override = \"property\";else if (nonStandardPropertyKeywords.hasOwnProperty(word)) override = \"string-2\";else if (valueKeywords.hasOwnProperty(word)) override = \"atom\";else if (colorKeywords.hasOwnProperty(word)) override = \"keyword\";else override = \"error\";\n            }\n            return state.context.type;\n          };\n\n          states.atComponentBlock = function (type, stream, state) {\n            if (type == \"}\") return popAndPass(type, stream, state);\n            if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n            if (type == \"word\") override = \"error\";\n            return state.context.type;\n          };\n\n          states.atBlock_parens = function (type, stream, state) {\n            if (type == \")\") return popContext(state);\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n            return states.atBlock(type, stream, state);\n          };\n\n          states.restricted_atBlock_before = function (type, stream, state) {\n            if (type == \"{\") return pushContext(state, stream, \"restricted_atBlock\");\n            if (type == \"word\" && state.stateArg == \"@counter-style\") {\n              override = \"variable\";\n              return \"restricted_atBlock_before\";\n            }\n            return pass(type, stream, state);\n          };\n\n          states.restricted_atBlock = function (type, stream, state) {\n            if (type == \"}\") {\n              state.stateArg = null;\n              return popContext(state);\n            }\n            if (type == \"word\") {\n              if (state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase()) || state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())) override = \"error\";else override = \"property\";\n              return \"maybeprop\";\n            }\n            return \"restricted_atBlock\";\n          };\n\n          states.keyframes = function (type, stream, state) {\n            if (type == \"word\") {\n              override = \"variable\";return \"keyframes\";\n            }\n            if (type == \"{\") return pushContext(state, stream, \"top\");\n            return pass(type, stream, state);\n          };\n\n          states.at = function (type, stream, state) {\n            if (type == \";\") return popContext(state);\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n            if (type == \"word\") override = \"tag\";else if (type == \"hash\") override = \"builtin\";\n            return \"at\";\n          };\n\n          states.interpolation = function (type, stream, state) {\n            if (type == \"}\") return popContext(state);\n            if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n            if (type == \"word\") override = \"variable\";else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n            return \"interpolation\";\n          };\n\n          return {\n            startState: function startState(base) {\n              return { tokenize: null,\n                state: inline ? \"block\" : \"top\",\n                stateArg: null,\n                context: new Context(inline ? \"block\" : \"top\", base || 0, null) };\n            },\n\n            token: function token(stream, state) {\n              if (!state.tokenize && stream.eatSpace()) return null;\n              var style = (state.tokenize || tokenBase)(stream, state);\n              if (style && (typeof style === \"undefined\" ? \"undefined\" : _typeof(style)) == \"object\") {\n                type = style[1];\n                style = style[0];\n              }\n              override = style;\n              if (type != \"comment\") state.state = states[state.state](type, stream, state);\n              return override;\n            },\n\n            indent: function indent(state, textAfter) {\n              var cx = state.context,\n                  ch = textAfter && textAfter.charAt(0);\n              var indent = cx.indent;\n              if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n              if (cx.prev) {\n                if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" || cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n                  // Resume indentation from parent context.\n                  cx = cx.prev;\n                  indent = cx.indent;\n                } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") || ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n                  // Dedent relative to current context.\n                  indent = Math.max(0, cx.indent - indentUnit);\n                }\n              }\n              return indent;\n            },\n\n            electricChars: \"}\",\n            blockCommentStart: \"/*\",\n            blockCommentEnd: \"*/\",\n            lineComment: lineComment,\n            fold: \"brace\"\n          };\n        });\n\n        function keySet(array) {\n          var keys = {};\n          for (var i = 0; i < array.length; ++i) {\n            keys[array[i].toLowerCase()] = true;\n          }\n          return keys;\n        }\n\n        var documentTypes_ = [\"domain\", \"regexp\", \"url\", \"url-prefix\"],\n            documentTypes = keySet(documentTypes_);\n\n        var mediaTypes_ = [\"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\", \"tty\", \"tv\", \"embossed\"],\n            mediaTypes = keySet(mediaTypes_);\n\n        var mediaFeatures_ = [\"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\", \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\", \"min-device-height\", \"max-device-height\", \"aspect-ratio\", \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\", \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\", \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\", \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\", \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\", \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\", \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"],\n            mediaFeatures = keySet(mediaFeatures_);\n\n        var mediaValueKeywords_ = [\"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\", \"interlace\", \"progressive\"],\n            mediaValueKeywords = keySet(mediaValueKeywords_);\n\n        var propertyKeywords_ = [\"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\", \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\", \"animation-direction\", \"animation-duration\", \"animation-fill-mode\", \"animation-iteration-count\", \"animation-name\", \"animation-play-state\", \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\", \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\", \"background-color\", \"background-image\", \"background-origin\", \"background-position\", \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\", \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\", \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\", \"border-bottom-left-radius\", \"border-bottom-right-radius\", \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\", \"border-color\", \"border-image\", \"border-image-outset\", \"border-image-repeat\", \"border-image-slice\", \"border-image-source\", \"border-image-width\", \"border-left\", \"border-left-color\", \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\", \"border-right-color\", \"border-right-style\", \"border-right-width\", \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\", \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\", \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\", \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\", \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\", \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\", \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\", \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\", \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"drop-initial-after-adjust\", \"drop-initial-after-align\", \"drop-initial-before-adjust\", \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\", \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\", \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\", \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\", \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\", \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\", \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\", \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\", \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\", \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\", \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\", \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\", \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\", \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\", \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\", \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\", \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\", \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\", \"marks\", \"marquee-direction\", \"marquee-loop\", \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\", \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\", \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\", \"opacity\", \"order\", \"orphans\", \"outline\", \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\", \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\", \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\", \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\", \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\", \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\", \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\", \"region-break-before\", \"region-break-inside\", \"region-fragment\", \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\", \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\", \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\", \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\", \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\", \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\", \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\", \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\", \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\", \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\", \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\", \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\", \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\", \"transition\", \"transition-delay\", \"transition-duration\", \"transition-property\", \"transition-timing-function\", \"unicode-bidi\", \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\", \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\", \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\", \"word-spacing\", \"word-wrap\", \"z-index\",\n        // SVG-specific\n        \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\", \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\", \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\", \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"],\n            propertyKeywords = keySet(propertyKeywords_);\n\n        var nonStandardPropertyKeywords_ = [\"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\", \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\", \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\", \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\", \"searchfield-results-decoration\", \"zoom\"],\n            nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n        var fontProperties_ = [\"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\", \"font-stretch\", \"font-weight\", \"font-style\"],\n            fontProperties = keySet(fontProperties_);\n\n        var counterDescriptors_ = [\"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\", \"speak-as\", \"suffix\", \"symbols\", \"system\"],\n            counterDescriptors = keySet(counterDescriptors_);\n\n        var colorKeywords_ = [\"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\", \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\", \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\", \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\", \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\", \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\", \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\", \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\", \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\", \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\", \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\", \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\", \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\", \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\", \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\", \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\", \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\", \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\", \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\", \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\", \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\", \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\", \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\", \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\", \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\", \"whitesmoke\", \"yellow\", \"yellowgreen\"],\n            colorKeywords = keySet(colorKeywords_);\n\n        var valueKeywords_ = [\"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\", \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\", \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\", \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\", \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\", \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\", \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\", \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\", \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\", \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\", \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\", \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\", \"compact\", \"condensed\", \"contain\", \"content\", \"contents\", \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\", \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\", \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\", \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\", \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\", \"dot-dash\", \"dot-dot-dash\", \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\", \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\", \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\", \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\", \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\", \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\", \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\", \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\", \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\", \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\", \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\", \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\", \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\", \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\", \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\", \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\", \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\", \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\", \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\", \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\", \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\", \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\", \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\", \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\", \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\", \"media-controls-background\", \"media-current-time-display\", \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\", \"media-return-to-realtime-button\", \"media-rewind-button\", \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\", \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\", \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\", \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\", \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\", \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\", \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\", \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\", \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\", \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\", \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\", \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\", \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\", \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\", \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\", \"relative\", \"repeat\", \"repeating-linear-gradient\", \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\", \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\", \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\", \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\", \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\", \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\", \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\", \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\", \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\", \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\", \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\", \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\", \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\", \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\", \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\", \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\", \"tamil\", \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\", \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\", \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\", \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\", \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\", \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\", \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\", \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\", \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\", \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\", \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\", \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\", \"xx-large\", \"xx-small\"],\n            valueKeywords = keySet(valueKeywords_);\n\n        var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);\n        CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n        function tokenCComment(stream, state) {\n          var maybeEnd = false,\n              ch;\n          while ((ch = stream.next()) != null) {\n            if (maybeEnd && ch == \"/\") {\n              state.tokenize = null;\n              break;\n            }\n            maybeEnd = ch == \"*\";\n          }\n          return [\"comment\", \"comment\"];\n        }\n\n        CodeMirror.defineMIME(\"text/css\", {\n          documentTypes: documentTypes,\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          fontProperties: fontProperties,\n          counterDescriptors: counterDescriptors,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (!stream.eat(\"*\")) return false;\n              state.tokenize = tokenCComment;\n              return tokenCComment(stream, state);\n            }\n          },\n          name: \"css\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-scss\", {\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          fontProperties: fontProperties,\n          allowNested: true,\n          lineComment: \"//\",\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return [\"comment\", \"comment\"];\n              } else if (stream.eat(\"*\")) {\n                state.tokenize = tokenCComment;\n                return tokenCComment(stream, state);\n              } else {\n                return [\"operator\", \"operator\"];\n              }\n            },\n            \":\": function _(stream) {\n              if (stream.match(/\\s*\\{/, false)) return [null, null];\n              return false;\n            },\n            \"$\": function $(stream) {\n              stream.match(/^[\\w-]+/);\n              if (stream.match(/^\\s*:/, false)) return [\"variable-2\", \"variable-definition\"];\n              return [\"variable-2\", \"variable\"];\n            },\n            \"#\": function _(stream) {\n              if (!stream.eat(\"{\")) return false;\n              return [null, \"interpolation\"];\n            }\n          },\n          name: \"css\",\n          helperType: \"scss\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-less\", {\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          fontProperties: fontProperties,\n          allowNested: true,\n          lineComment: \"//\",\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return [\"comment\", \"comment\"];\n              } else if (stream.eat(\"*\")) {\n                state.tokenize = tokenCComment;\n                return tokenCComment(stream, state);\n              } else {\n                return [\"operator\", \"operator\"];\n              }\n            },\n            \"@\": function _(stream) {\n              if (stream.eat(\"{\")) return [null, \"interpolation\"];\n              if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/, false)) return false;\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              if (stream.match(/^\\s*:/, false)) return [\"variable-2\", \"variable-definition\"];\n              return [\"variable-2\", \"variable\"];\n            },\n            \"&\": function _() {\n              return [\"atom\", \"atom\"];\n            }\n          },\n          name: \"css\",\n          helperType: \"less\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-gss\", {\n          documentTypes: documentTypes,\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          fontProperties: fontProperties,\n          counterDescriptors: counterDescriptors,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          supportsAtComponent: true,\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (!stream.eat(\"*\")) return false;\n              state.tokenize = tokenCComment;\n              return tokenCComment(stream, state);\n            }\n          },\n          name: \"css\",\n          helperType: \"gss\"\n        });\n      });\n    }, { \"../../lib/codemirror\": 7 }], 9: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../javascript/javascript\"), require(\"../css/css\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../xml/xml\", \"../javascript/javascript\", \"../css/css\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var defaultTags = {\n          script: [[\"lang\", /(javascript|babel)/i, \"javascript\"], [\"type\", /^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, \"javascript\"], [\"type\", /./, \"text/plain\"], [null, null, \"javascript\"]],\n          style: [[\"lang\", /^css$/i, \"css\"], [\"type\", /^(text\\/)?(x-)?(stylesheet|css)$/i, \"css\"], [\"type\", /./, \"text/plain\"], [null, null, \"css\"]]\n        };\n\n        function maybeBackup(stream, pat, style) {\n          var cur = stream.current(),\n              close = cur.search(pat);\n          if (close > -1) {\n            stream.backUp(cur.length - close);\n          } else if (cur.match(/<\\/?$/)) {\n            stream.backUp(cur.length);\n            if (!stream.match(pat, false)) stream.match(cur);\n          }\n          return style;\n        }\n\n        var attrRegexpCache = {};\n        function getAttrRegexp(attr) {\n          var regexp = attrRegexpCache[attr];\n          if (regexp) return regexp;\n          return attrRegexpCache[attr] = new RegExp(\"\\\\s+\" + attr + \"\\\\s*=\\\\s*('|\\\")?([^'\\\"]+)('|\\\")?\\\\s*\");\n        }\n\n        function getAttrValue(text, attr) {\n          var match = text.match(getAttrRegexp(attr));\n          return match ? /^\\s*(.*?)\\s*$/.exec(match[2])[1] : \"\";\n        }\n\n        function getTagRegexp(tagName, anchored) {\n          return new RegExp((anchored ? \"^\" : \"\") + \"<\\/\\s*\" + tagName + \"\\s*>\", \"i\");\n        }\n\n        function addTags(from, to) {\n          for (var tag in from) {\n            var dest = to[tag] || (to[tag] = []);\n            var source = from[tag];\n            for (var i = source.length - 1; i >= 0; i--) {\n              dest.unshift(source[i]);\n            }\n          }\n        }\n\n        function findMatchingMode(tagInfo, tagText) {\n          for (var i = 0; i < tagInfo.length; i++) {\n            var spec = tagInfo[i];\n            if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];\n          }\n        }\n\n        CodeMirror.defineMode(\"htmlmixed\", function (config, parserConfig) {\n          var htmlMode = CodeMirror.getMode(config, {\n            name: \"xml\",\n            htmlMode: true,\n            multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,\n            multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag\n          });\n\n          var tags = {};\n          var configTags = parserConfig && parserConfig.tags,\n              configScript = parserConfig && parserConfig.scriptTypes;\n          addTags(defaultTags, tags);\n          if (configTags) addTags(configTags, tags);\n          if (configScript) for (var i = configScript.length - 1; i >= 0; i--) {\n            tags.script.unshift([\"type\", configScript[i].matches, configScript[i].mode]);\n          }function html(stream, state) {\n            var style = htmlMode.token(stream, state.htmlState),\n                tag = /\\btag\\b/.test(style),\n                tagName;\n            if (tag && !/[<>\\s\\/]/.test(stream.current()) && (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) && tags.hasOwnProperty(tagName)) {\n              state.inTag = tagName + \" \";\n            } else if (state.inTag && tag && />$/.test(stream.current())) {\n              var inTag = /^([\\S]+) (.*)/.exec(state.inTag);\n              state.inTag = null;\n              var modeSpec = stream.current() == \">\" && findMatchingMode(tags[inTag[1]], inTag[2]);\n              var mode = CodeMirror.getMode(config, modeSpec);\n              var endTagA = getTagRegexp(inTag[1], true),\n                  endTag = getTagRegexp(inTag[1], false);\n              state.token = function (stream, state) {\n                if (stream.match(endTagA, false)) {\n                  state.token = html;\n                  state.localState = state.localMode = null;\n                  return null;\n                }\n                return maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));\n              };\n              state.localMode = mode;\n              state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, \"\"));\n            } else if (state.inTag) {\n              state.inTag += stream.current();\n              if (stream.eol()) state.inTag += \" \";\n            }\n            return style;\n          };\n\n          return {\n            startState: function startState() {\n              var state = CodeMirror.startState(htmlMode);\n              return { token: html, inTag: null, localMode: null, localState: null, htmlState: state };\n            },\n\n            copyState: function copyState(state) {\n              var local;\n              if (state.localState) {\n                local = CodeMirror.copyState(state.localMode, state.localState);\n              }\n              return { token: state.token, inTag: state.inTag,\n                localMode: state.localMode, localState: local,\n                htmlState: CodeMirror.copyState(htmlMode, state.htmlState) };\n            },\n\n            token: function token(stream, state) {\n              return state.token(stream, state);\n            },\n\n            indent: function indent(state, textAfter, line) {\n              if (!state.localMode || /^\\s*<\\//.test(textAfter)) return htmlMode.indent(state.htmlState, textAfter);else if (state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line);else return CodeMirror.Pass;\n            },\n\n            innerMode: function innerMode(state) {\n              return { state: state.localState || state.htmlState, mode: state.localMode || htmlMode };\n            }\n          };\n        }, \"xml\", \"javascript\", \"css\");\n\n        CodeMirror.defineMIME(\"text/html\", \"htmlmixed\");\n      });\n    }, { \"../../lib/codemirror\": 7, \"../css/css\": 8, \"../javascript/javascript\": 10, \"../xml/xml\": 11 }], 10: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineMode(\"javascript\", function (config, parserConfig) {\n          var indentUnit = config.indentUnit;\n          var statementIndent = parserConfig.statementIndent;\n          var jsonldMode = parserConfig.jsonld;\n          var jsonMode = parserConfig.json || jsonldMode;\n          var isTS = parserConfig.typescript;\n          var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n          // Tokenizer\n\n          var keywords = function () {\n            function kw(type) {\n              return { type: type, style: \"keyword\" };\n            }\n            var A = kw(\"keyword a\"),\n                B = kw(\"keyword b\"),\n                C = kw(\"keyword c\");\n            var operator = kw(\"operator\"),\n                atom = { type: \"atom\", style: \"atom\" };\n\n            var jsKeywords = {\n              \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n              \"return\": C, \"break\": C, \"continue\": C, \"new\": kw(\"new\"), \"delete\": C, \"throw\": C, \"debugger\": C,\n              \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n              \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n              \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n              \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n              \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n              \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n              \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n              \"await\": C\n            };\n\n            // Extend the 'normal' keywords with the TypeScript language extensions\n            if (isTS) {\n              var type = { type: \"variable\", style: \"type\" };\n              var tsKeywords = {\n                // object-like things\n                \"interface\": kw(\"class\"),\n                \"implements\": C,\n                \"namespace\": C,\n                \"module\": kw(\"module\"),\n                \"enum\": kw(\"module\"),\n\n                // scope modifiers\n                \"public\": kw(\"modifier\"),\n                \"private\": kw(\"modifier\"),\n                \"protected\": kw(\"modifier\"),\n                \"abstract\": kw(\"modifier\"),\n                \"readonly\": kw(\"modifier\"),\n\n                // types\n                \"string\": type, \"number\": type, \"boolean\": type, \"any\": type\n              };\n\n              for (var attr in tsKeywords) {\n                jsKeywords[attr] = tsKeywords[attr];\n              }\n            }\n\n            return jsKeywords;\n          }();\n\n          var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n          var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n          function readRegexp(stream) {\n            var escaped = false,\n                next,\n                inSet = false;\n            while ((next = stream.next()) != null) {\n              if (!escaped) {\n                if (next == \"/\" && !inSet) return;\n                if (next == \"[\") inSet = true;else if (inSet && next == \"]\") inSet = false;\n              }\n              escaped = !escaped && next == \"\\\\\";\n            }\n          }\n\n          // Used as scratch variables to communicate multiple values without\n          // consing up tons of objects.\n          var type, content;\n          function ret(tp, style, cont) {\n            type = tp;content = cont;\n            return style;\n          }\n          function tokenBase(stream, state) {\n            var ch = stream.next();\n            if (ch == '\"' || ch == \"'\") {\n              state.tokenize = tokenString(ch);\n              return state.tokenize(stream, state);\n            } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n              return ret(\"number\", \"number\");\n            } else if (ch == \".\" && stream.match(\"..\")) {\n              return ret(\"spread\", \"meta\");\n            } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n              return ret(ch);\n            } else if (ch == \"=\" && stream.eat(\">\")) {\n              return ret(\"=>\", \"operator\");\n            } else if (ch == \"0\" && stream.eat(/x/i)) {\n              stream.eatWhile(/[\\da-f]/i);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"0\" && stream.eat(/o/i)) {\n              stream.eatWhile(/[0-7]/i);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"0\" && stream.eat(/b/i)) {\n              stream.eatWhile(/[01]/i);\n              return ret(\"number\", \"number\");\n            } else if (/\\d/.test(ch)) {\n              stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"/\") {\n              if (stream.eat(\"*\")) {\n                state.tokenize = tokenComment;\n                return tokenComment(stream, state);\n              } else if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return ret(\"comment\", \"comment\");\n              } else if (expressionAllowed(stream, state, 1)) {\n                readRegexp(stream);\n                stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n                return ret(\"regexp\", \"string-2\");\n              } else {\n                stream.eatWhile(isOperatorChar);\n                return ret(\"operator\", \"operator\", stream.current());\n              }\n            } else if (ch == \"`\") {\n              state.tokenize = tokenQuasi;\n              return tokenQuasi(stream, state);\n            } else if (ch == \"#\") {\n              stream.skipToEnd();\n              return ret(\"error\", \"error\");\n            } else if (isOperatorChar.test(ch)) {\n              if (ch != \">\" || !state.lexical || state.lexical.type != \">\") stream.eatWhile(isOperatorChar);\n              return ret(\"operator\", \"operator\", stream.current());\n            } else if (wordRE.test(ch)) {\n              stream.eatWhile(wordRE);\n              var word = stream.current();\n              if (state.lastType != \".\") {\n                if (keywords.propertyIsEnumerable(word)) {\n                  var kw = keywords[word];\n                  return ret(kw.type, kw.style, word);\n                }\n                if (word == \"async\" && stream.match(/^\\s*[\\(\\w]/, false)) return ret(\"async\", \"keyword\", word);\n              }\n              return ret(\"variable\", \"variable\", word);\n            }\n          }\n\n          function tokenString(quote) {\n            return function (stream, state) {\n              var escaped = false,\n                  next;\n              if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)) {\n                state.tokenize = tokenBase;\n                return ret(\"jsonld-keyword\", \"meta\");\n              }\n              while ((next = stream.next()) != null) {\n                if (next == quote && !escaped) break;\n                escaped = !escaped && next == \"\\\\\";\n              }\n              if (!escaped) state.tokenize = tokenBase;\n              return ret(\"string\", \"string\");\n            };\n          }\n\n          function tokenComment(stream, state) {\n            var maybeEnd = false,\n                ch;\n            while (ch = stream.next()) {\n              if (ch == \"/\" && maybeEnd) {\n                state.tokenize = tokenBase;\n                break;\n              }\n              maybeEnd = ch == \"*\";\n            }\n            return ret(\"comment\", \"comment\");\n          }\n\n          function tokenQuasi(stream, state) {\n            var escaped = false,\n                next;\n            while ((next = stream.next()) != null) {\n              if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n                state.tokenize = tokenBase;\n                break;\n              }\n              escaped = !escaped && next == \"\\\\\";\n            }\n            return ret(\"quasi\", \"string-2\", stream.current());\n          }\n\n          var brackets = \"([{}])\";\n          // This is a crude lookahead trick to try and notice that we're\n          // parsing the argument patterns for a fat-arrow function before we\n          // actually hit the arrow token. It only works if the arrow is on\n          // the same line as the arguments and there's no strange noise\n          // (comments) in between. Fallback is to only notice when we hit the\n          // arrow, and not declare the arguments as locals for the arrow\n          // body.\n          function findFatArrow(stream, state) {\n            if (state.fatArrowAt) state.fatArrowAt = null;\n            var arrow = stream.string.indexOf(\"=>\", stream.start);\n            if (arrow < 0) return;\n\n            if (isTS) {\n              // Try to skip TypeScript return type declarations after the arguments\n              var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow));\n              if (m) arrow = m.index;\n            }\n\n            var depth = 0,\n                sawSomething = false;\n            for (var pos = arrow - 1; pos >= 0; --pos) {\n              var ch = stream.string.charAt(pos);\n              var bracket = brackets.indexOf(ch);\n              if (bracket >= 0 && bracket < 3) {\n                if (!depth) {\n                  ++pos;break;\n                }\n                if (--depth == 0) {\n                  if (ch == \"(\") sawSomething = true;break;\n                }\n              } else if (bracket >= 3 && bracket < 6) {\n                ++depth;\n              } else if (wordRE.test(ch)) {\n                sawSomething = true;\n              } else if (/[\"'\\/]/.test(ch)) {\n                return;\n              } else if (sawSomething && !depth) {\n                ++pos;\n                break;\n              }\n            }\n            if (sawSomething && !depth) state.fatArrowAt = pos;\n          }\n\n          // Parser\n\n          var atomicTypes = { \"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true };\n\n          function JSLexical(indented, column, type, align, prev, info) {\n            this.indented = indented;\n            this.column = column;\n            this.type = type;\n            this.prev = prev;\n            this.info = info;\n            if (align != null) this.align = align;\n          }\n\n          function inScope(state, varname) {\n            for (var v = state.localVars; v; v = v.next) {\n              if (v.name == varname) return true;\n            }for (var cx = state.context; cx; cx = cx.prev) {\n              for (var v = cx.vars; v; v = v.next) {\n                if (v.name == varname) return true;\n              }\n            }\n          }\n\n          function parseJS(state, style, type, content, stream) {\n            var cc = state.cc;\n            // Communicate our context to the combinators.\n            // (Less wasteful than consing up a hundred closures on every call.)\n            cx.state = state;cx.stream = stream;cx.marked = null, cx.cc = cc;cx.style = style;\n\n            if (!state.lexical.hasOwnProperty(\"align\")) state.lexical.align = true;\n\n            while (true) {\n              var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n              if (combinator(type, content)) {\n                while (cc.length && cc[cc.length - 1].lex) {\n                  cc.pop()();\n                }if (cx.marked) return cx.marked;\n                if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n                return style;\n              }\n            }\n          }\n\n          // Combinator utils\n\n          var cx = { state: null, column: null, marked: null, cc: null };\n          function pass() {\n            for (var i = arguments.length - 1; i >= 0; i--) {\n              cx.cc.push(arguments[i]);\n            }\n          }\n          function cont() {\n            pass.apply(null, arguments);\n            return true;\n          }\n          function register(varname) {\n            function inList(list) {\n              for (var v = list; v; v = v.next) {\n                if (v.name == varname) return true;\n              }return false;\n            }\n            var state = cx.state;\n            cx.marked = \"def\";\n            if (state.context) {\n              if (inList(state.localVars)) return;\n              state.localVars = { name: varname, next: state.localVars };\n            } else {\n              if (inList(state.globalVars)) return;\n              if (parserConfig.globalVars) state.globalVars = { name: varname, next: state.globalVars };\n            }\n          }\n\n          // Combinators\n\n          var defaultVars = { name: \"this\", next: { name: \"arguments\" } };\n          function pushcontext() {\n            cx.state.context = { prev: cx.state.context, vars: cx.state.localVars };\n            cx.state.localVars = defaultVars;\n          }\n          function popcontext() {\n            cx.state.localVars = cx.state.context.vars;\n            cx.state.context = cx.state.context.prev;\n          }\n          function pushlex(type, info) {\n            var result = function result() {\n              var state = cx.state,\n                  indent = state.indented;\n              if (state.lexical.type == \"stat\") indent = state.lexical.indented;else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev) {\n                indent = outer.indented;\n              }state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n            };\n            result.lex = true;\n            return result;\n          }\n          function poplex() {\n            var state = cx.state;\n            if (state.lexical.prev) {\n              if (state.lexical.type == \")\") state.indented = state.lexical.indented;\n              state.lexical = state.lexical.prev;\n            }\n          }\n          poplex.lex = true;\n\n          function expect(wanted) {\n            function exp(type) {\n              if (type == wanted) return cont();else if (wanted == \";\") return pass();else return cont(exp);\n            };\n            return exp;\n          }\n\n          function statement(type, value) {\n            if (type == \"var\") return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n            if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n            if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n            if (type == \"{\") return cont(pushlex(\"}\"), block, poplex);\n            if (type == \";\") return cont();\n            if (type == \"if\") {\n              if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex) cx.state.cc.pop()();\n              return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n            }\n            if (type == \"function\") return cont(functiondef);\n            if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n            if (type == \"variable\") {\n              if (isTS && value == \"type\") {\n                cx.marked = \"keyword\";\n                return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n              }if (isTS && value == \"declare\") {\n                cx.marked = \"keyword\";\n                return cont(statement);\n              } else {\n                return cont(pushlex(\"stat\"), maybelabel);\n              }\n            }\n            if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), block, poplex, poplex);\n            if (type == \"case\") return cont(expression, expect(\":\"));\n            if (type == \"default\") return cont(expect(\":\"));\n            if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"), statement, poplex, popcontext);\n            if (type == \"class\") return cont(pushlex(\"form\"), className, poplex);\n            if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n            if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n            if (type == \"module\") return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex);\n            if (type == \"async\") return cont(statement);\n            if (value == \"@\") return cont(expression, statement);\n            return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n          }\n          function expression(type) {\n            return expressionInner(type, false);\n          }\n          function expressionNoComma(type) {\n            return expressionInner(type, true);\n          }\n          function parenExpr(type) {\n            if (type != \"(\") return pass();\n            return cont(pushlex(\")\"), expression, expect(\")\"), poplex);\n          }\n          function expressionInner(type, noComma) {\n            if (cx.state.fatArrowAt == cx.stream.start) {\n              var body = noComma ? arrowBodyNoComma : arrowBody;\n              if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(pattern, \")\"), poplex, expect(\"=>\"), body, popcontext);else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n            }\n\n            var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n            if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n            if (type == \"function\") return cont(functiondef, maybeop);\n            if (type == \"class\") return cont(pushlex(\"form\"), classExpression, poplex);\n            if (type == \"keyword c\" || type == \"async\") return cont(noComma ? maybeexpressionNoComma : maybeexpression);\n            if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n            if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n            if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n            if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n            if (type == \"quasi\") return pass(quasi, maybeop);\n            if (type == \"new\") return cont(maybeTarget(noComma));\n            return cont();\n          }\n          function maybeexpression(type) {\n            if (type.match(/[;\\}\\)\\],]/)) return pass();\n            return pass(expression);\n          }\n          function maybeexpressionNoComma(type) {\n            if (type.match(/[;\\}\\)\\],]/)) return pass();\n            return pass(expressionNoComma);\n          }\n\n          function maybeoperatorComma(type, value) {\n            if (type == \",\") return cont(expression);\n            return maybeoperatorNoComma(type, value, false);\n          }\n          function maybeoperatorNoComma(type, value, noComma) {\n            var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n            var expr = noComma == false ? expression : expressionNoComma;\n            if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n            if (type == \"operator\") {\n              if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n              if (value == \"?\") return cont(expression, expect(\":\"), expr);\n              return cont(expr);\n            }\n            if (type == \"quasi\") {\n              return pass(quasi, me);\n            }\n            if (type == \";\") return;\n            if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n            if (type == \".\") return cont(property, me);\n            if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n            if (isTS && value == \"as\") {\n              cx.marked = \"keyword\";return cont(typeexpr, me);\n            }\n          }\n          function quasi(type, value) {\n            if (type != \"quasi\") return pass();\n            if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n            return cont(expression, continueQuasi);\n          }\n          function continueQuasi(type) {\n            if (type == \"}\") {\n              cx.marked = \"string-2\";\n              cx.state.tokenize = tokenQuasi;\n              return cont(quasi);\n            }\n          }\n          function arrowBody(type) {\n            findFatArrow(cx.stream, cx.state);\n            return pass(type == \"{\" ? statement : expression);\n          }\n          function arrowBodyNoComma(type) {\n            findFatArrow(cx.stream, cx.state);\n            return pass(type == \"{\" ? statement : expressionNoComma);\n          }\n          function maybeTarget(noComma) {\n            return function (type) {\n              if (type == \".\") return cont(noComma ? targetNoComma : target);else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma);else return pass(noComma ? expressionNoComma : expression);\n            };\n          }\n          function target(_, value) {\n            if (value == \"target\") {\n              cx.marked = \"keyword\";return cont(maybeoperatorComma);\n            }\n          }\n          function targetNoComma(_, value) {\n            if (value == \"target\") {\n              cx.marked = \"keyword\";return cont(maybeoperatorNoComma);\n            }\n          }\n          function maybelabel(type) {\n            if (type == \":\") return cont(poplex, statement);\n            return pass(maybeoperatorComma, expect(\";\"), poplex);\n          }\n          function property(type) {\n            if (type == \"variable\") {\n              cx.marked = \"property\";return cont();\n            }\n          }\n          function objprop(type, value) {\n            if (type == \"async\") {\n              cx.marked = \"property\";\n              return cont(objprop);\n            } else if (type == \"variable\" || cx.style == \"keyword\") {\n              cx.marked = \"property\";\n              if (value == \"get\" || value == \"set\") return cont(getterSetter);\n              return cont(afterprop);\n            } else if (type == \"number\" || type == \"string\") {\n              cx.marked = jsonldMode ? \"property\" : cx.style + \" property\";\n              return cont(afterprop);\n            } else if (type == \"jsonld-keyword\") {\n              return cont(afterprop);\n            } else if (type == \"modifier\") {\n              return cont(objprop);\n            } else if (type == \"[\") {\n              return cont(expression, expect(\"]\"), afterprop);\n            } else if (type == \"spread\") {\n              return cont(expression, afterprop);\n            } else if (type == \":\") {\n              return pass(afterprop);\n            }\n          }\n          function getterSetter(type) {\n            if (type != \"variable\") return pass(afterprop);\n            cx.marked = \"property\";\n            return cont(functiondef);\n          }\n          function afterprop(type) {\n            if (type == \":\") return cont(expressionNoComma);\n            if (type == \"(\") return pass(functiondef);\n          }\n          function commasep(what, end, sep) {\n            function proceed(type, value) {\n              if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n                var lex = cx.state.lexical;\n                if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n                return cont(function (type, value) {\n                  if (type == end || value == end) return pass();\n                  return pass(what);\n                }, proceed);\n              }\n              if (type == end || value == end) return cont();\n              return cont(expect(end));\n            }\n            return function (type, value) {\n              if (type == end || value == end) return cont();\n              return pass(what, proceed);\n            };\n          }\n          function contCommasep(what, end, info) {\n            for (var i = 3; i < arguments.length; i++) {\n              cx.cc.push(arguments[i]);\n            }return cont(pushlex(end, info), commasep(what, end), poplex);\n          }\n          function block(type) {\n            if (type == \"}\") return cont();\n            return pass(statement, block);\n          }\n          function maybetype(type, value) {\n            if (isTS) {\n              if (type == \":\") return cont(typeexpr);\n              if (value == \"?\") return cont(maybetype);\n            }\n          }\n          function typeexpr(type, value) {\n            if (type == \"variable\") {\n              if (value == \"keyof\") {\n                cx.marked = \"keyword\";\n                return cont(typeexpr);\n              } else {\n                cx.marked = \"type\";\n                return cont(afterType);\n              }\n            }\n            if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n            if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType);\n            if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType);\n            if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType);\n          }\n          function maybeReturnType(type) {\n            if (type == \"=>\") return cont(typeexpr);\n          }\n          function typeprop(type, value) {\n            if (type == \"variable\" || cx.style == \"keyword\") {\n              cx.marked = \"property\";\n              return cont(typeprop);\n            } else if (value == \"?\") {\n              return cont(typeprop);\n            } else if (type == \":\") {\n              return cont(typeexpr);\n            } else if (type == \"[\") {\n              return cont(expression, maybetype, expect(\"]\"), typeprop);\n            }\n          }\n          function typearg(type) {\n            if (type == \"variable\") return cont(typearg);else if (type == \":\") return cont(typeexpr);\n          }\n          function afterType(type, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType);\n            if (value == \"|\" || type == \".\") return cont(typeexpr);\n            if (type == \"[\") return cont(expect(\"]\"), afterType);\n            if (value == \"extends\") return cont(typeexpr);\n          }\n          function maybeTypeArgs(_, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType);\n          }\n          function vardef() {\n            return pass(pattern, maybetype, maybeAssign, vardefCont);\n          }\n          function pattern(type, value) {\n            if (type == \"modifier\") return cont(pattern);\n            if (type == \"variable\") {\n              register(value);return cont();\n            }\n            if (type == \"spread\") return cont(pattern);\n            if (type == \"[\") return contCommasep(pattern, \"]\");\n            if (type == \"{\") return contCommasep(proppattern, \"}\");\n          }\n          function proppattern(type, value) {\n            if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n              register(value);\n              return cont(maybeAssign);\n            }\n            if (type == \"variable\") cx.marked = \"property\";\n            if (type == \"spread\") return cont(pattern);\n            if (type == \"}\") return pass();\n            return cont(expect(\":\"), pattern, maybeAssign);\n          }\n          function maybeAssign(_type, value) {\n            if (value == \"=\") return cont(expressionNoComma);\n          }\n          function vardefCont(type) {\n            if (type == \",\") return cont(vardef);\n          }\n          function maybeelse(type, value) {\n            if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n          }\n          function forspec(type) {\n            if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n          }\n          function forspec1(type) {\n            if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n            if (type == \";\") return cont(forspec2);\n            if (type == \"variable\") return cont(formaybeinof);\n            return pass(expression, expect(\";\"), forspec2);\n          }\n          function formaybeinof(_type, value) {\n            if (value == \"in\" || value == \"of\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n            return cont(maybeoperatorComma, forspec2);\n          }\n          function forspec2(type, value) {\n            if (type == \";\") return cont(forspec3);\n            if (value == \"in\" || value == \"of\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n            return pass(expression, expect(\";\"), forspec3);\n          }\n          function forspec3(type) {\n            if (type != \")\") cont(expression);\n          }\n          function functiondef(type, value) {\n            if (value == \"*\") {\n              cx.marked = \"keyword\";return cont(functiondef);\n            }\n            if (type == \"variable\") {\n              register(value);return cont(functiondef);\n            }\n            if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, maybetype, statement, popcontext);\n            if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, functiondef);\n          }\n          function funarg(type) {\n            if (type == \"spread\" || type == \"modifier\") return cont(funarg);\n            return pass(pattern, maybetype, maybeAssign);\n          }\n          function classExpression(type, value) {\n            // Class expressions may have an optional name.\n            if (type == \"variable\") return className(type, value);\n            return classNameAfter(type, value);\n          }\n          function className(type, value) {\n            if (type == \"variable\") {\n              register(value);return cont(classNameAfter);\n            }\n          }\n          function classNameAfter(type, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, classNameAfter);\n            if (value == \"extends\" || value == \"implements\" || isTS && type == \",\") return cont(isTS ? typeexpr : expression, classNameAfter);\n            if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n          }\n          function classBody(type, value) {\n            if (type == \"modifier\" || type == \"async\" || type == \"variable\" && (value == \"static\" || value == \"get\" || value == \"set\") && cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false)) {\n              cx.marked = \"keyword\";\n              return cont(classBody);\n            }\n            if (type == \"variable\") {\n              cx.marked = \"property\";\n              return cont(isTS ? classfield : functiondef, classBody);\n            }\n            if (type == \"[\") return cont(expression, expect(\"]\"), isTS ? classfield : functiondef, classBody);\n            if (value == \"*\") {\n              cx.marked = \"keyword\";\n              return cont(classBody);\n            }\n            if (type == \";\") return cont(classBody);\n            if (type == \"}\") return cont();\n            if (value == \"@\") return cont(expression, classBody);\n          }\n          function classfield(type, value) {\n            if (value == \"?\") return cont(classfield);\n            if (type == \":\") return cont(typeexpr, maybeAssign);\n            if (value == \"=\") return cont(expressionNoComma);\n            return pass(functiondef);\n          }\n          function afterExport(type, value) {\n            if (value == \"*\") {\n              cx.marked = \"keyword\";return cont(maybeFrom, expect(\";\"));\n            }\n            if (value == \"default\") {\n              cx.marked = \"keyword\";return cont(expression, expect(\";\"));\n            }\n            if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n            return pass(statement);\n          }\n          function exportField(type, value) {\n            if (value == \"as\") {\n              cx.marked = \"keyword\";return cont(expect(\"variable\"));\n            }\n            if (type == \"variable\") return pass(expressionNoComma, exportField);\n          }\n          function afterImport(type) {\n            if (type == \"string\") return cont();\n            return pass(importSpec, maybeMoreImports, maybeFrom);\n          }\n          function importSpec(type, value) {\n            if (type == \"{\") return contCommasep(importSpec, \"}\");\n            if (type == \"variable\") register(value);\n            if (value == \"*\") cx.marked = \"keyword\";\n            return cont(maybeAs);\n          }\n          function maybeMoreImports(type) {\n            if (type == \",\") return cont(importSpec, maybeMoreImports);\n          }\n          function maybeAs(_type, value) {\n            if (value == \"as\") {\n              cx.marked = \"keyword\";return cont(importSpec);\n            }\n          }\n          function maybeFrom(_type, value) {\n            if (value == \"from\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n          }\n          function arrayLiteral(type) {\n            if (type == \"]\") return cont();\n            return pass(commasep(expressionNoComma, \"]\"));\n          }\n\n          function isContinuedStatement(state, textAfter) {\n            return state.lastType == \"operator\" || state.lastType == \",\" || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));\n          }\n\n          function expressionAllowed(stream, state, backUp) {\n            return state.tokenize == tokenBase && /^(?:operator|sof|keyword c|case|new|export|default|[\\[{}\\(,;:]|=>)$/.test(state.lastType) || state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0)));\n          }\n\n          // Interface\n\n          return {\n            startState: function startState(basecolumn) {\n              var state = {\n                tokenize: tokenBase,\n                lastType: \"sof\",\n                cc: [],\n                lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n                localVars: parserConfig.localVars,\n                context: parserConfig.localVars && { vars: parserConfig.localVars },\n                indented: basecolumn || 0\n              };\n              if (parserConfig.globalVars && _typeof(parserConfig.globalVars) == \"object\") state.globalVars = parserConfig.globalVars;\n              return state;\n            },\n\n            token: function token(stream, state) {\n              if (stream.sol()) {\n                if (!state.lexical.hasOwnProperty(\"align\")) state.lexical.align = false;\n                state.indented = stream.indentation();\n                findFatArrow(stream, state);\n              }\n              if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n              var style = state.tokenize(stream, state);\n              if (type == \"comment\") return style;\n              state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n              return parseJS(state, style, type, content, stream);\n            },\n\n            indent: function indent(state, textAfter) {\n              if (state.tokenize == tokenComment) return CodeMirror.Pass;\n              if (state.tokenize != tokenBase) return 0;\n              var firstChar = textAfter && textAfter.charAt(0),\n                  lexical = state.lexical,\n                  top;\n              // Kludge to prevent 'maybelse' from blocking lexical scope pops\n              if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n                var c = state.cc[i];\n                if (c == poplex) lexical = lexical.prev;else if (c != maybeelse) break;\n              }\n              while ((lexical.type == \"stat\" || lexical.type == \"form\") && (firstChar == \"}\" || (top = state.cc[state.cc.length - 1]) && (top == maybeoperatorComma || top == maybeoperatorNoComma) && !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))) {\n                lexical = lexical.prev;\n              }if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\") lexical = lexical.prev;\n              var type = lexical.type,\n                  closing = firstChar == type;\n\n              if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);else if (type == \"form\" && firstChar == \"{\") return lexical.indented;else if (type == \"form\") return lexical.indented + indentUnit;else if (type == \"stat\") return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false) return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);else if (lexical.align) return lexical.column + (closing ? 0 : 1);else return lexical.indented + (closing ? 0 : indentUnit);\n            },\n\n            electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n            blockCommentStart: jsonMode ? null : \"/*\",\n            blockCommentEnd: jsonMode ? null : \"*/\",\n            lineComment: jsonMode ? null : \"//\",\n            fold: \"brace\",\n            closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n            helperType: jsonMode ? \"json\" : \"javascript\",\n            jsonldMode: jsonldMode,\n            jsonMode: jsonMode,\n\n            expressionAllowed: expressionAllowed,\n\n            skipExpression: function skipExpression(state) {\n              var top = state.cc[state.cc.length - 1];\n              if (top == expression || top == expressionNoComma) state.cc.pop();\n            }\n          };\n        });\n\n        CodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\n        CodeMirror.defineMIME(\"text/javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/json\", { name: \"javascript\", json: true });\n        CodeMirror.defineMIME(\"application/x-json\", { name: \"javascript\", json: true });\n        CodeMirror.defineMIME(\"application/ld+json\", { name: \"javascript\", jsonld: true });\n        CodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\n        CodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n      });\n    }, { \"../../lib/codemirror\": 7 }], 11: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var htmlConfig = {\n          autoSelfClosers: { 'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n            'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n            'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n            'track': true, 'wbr': true, 'menuitem': true },\n          implicitlyClosed: { 'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n            'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n            'th': true, 'tr': true },\n          contextGrabbers: {\n            'dd': { 'dd': true, 'dt': true },\n            'dt': { 'dd': true, 'dt': true },\n            'li': { 'li': true },\n            'option': { 'option': true, 'optgroup': true },\n            'optgroup': { 'optgroup': true },\n            'p': { 'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n              'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n              'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n              'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n              'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true },\n            'rp': { 'rp': true, 'rt': true },\n            'rt': { 'rp': true, 'rt': true },\n            'tbody': { 'tbody': true, 'tfoot': true },\n            'td': { 'td': true, 'th': true },\n            'tfoot': { 'tbody': true },\n            'th': { 'td': true, 'th': true },\n            'thead': { 'tbody': true, 'tfoot': true },\n            'tr': { 'tr': true }\n          },\n          doNotIndent: { \"pre\": true },\n          allowUnquoted: true,\n          allowMissing: true,\n          caseFold: true\n        };\n\n        var xmlConfig = {\n          autoSelfClosers: {},\n          implicitlyClosed: {},\n          contextGrabbers: {},\n          doNotIndent: {},\n          allowUnquoted: false,\n          allowMissing: false,\n          caseFold: false\n        };\n\n        CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n          var indentUnit = editorConf.indentUnit;\n          var config = {};\n          var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n          for (var prop in defaults) {\n            config[prop] = defaults[prop];\n          }for (var prop in config_) {\n            config[prop] = config_[prop];\n          } // Return variables for tokenizers\n          var type, setStyle;\n\n          function inText(stream, state) {\n            function chain(parser) {\n              state.tokenize = parser;\n              return parser(stream, state);\n            }\n\n            var ch = stream.next();\n            if (ch == \"<\") {\n              if (stream.eat(\"!\")) {\n                if (stream.eat(\"[\")) {\n                  if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n                } else if (stream.match(\"--\")) {\n                  return chain(inBlock(\"comment\", \"-->\"));\n                } else if (stream.match(\"DOCTYPE\", true, true)) {\n                  stream.eatWhile(/[\\w\\._\\-]/);\n                  return chain(doctype(1));\n                } else {\n                  return null;\n                }\n              } else if (stream.eat(\"?\")) {\n                stream.eatWhile(/[\\w\\._\\-]/);\n                state.tokenize = inBlock(\"meta\", \"?>\");\n                return \"meta\";\n              } else {\n                type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n                state.tokenize = inTag;\n                return \"tag bracket\";\n              }\n            } else if (ch == \"&\") {\n              var ok;\n              if (stream.eat(\"#\")) {\n                if (stream.eat(\"x\")) {\n                  ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n                } else {\n                  ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n                }\n              } else {\n                ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n              }\n              return ok ? \"atom\" : \"error\";\n            } else {\n              stream.eatWhile(/[^&<]/);\n              return null;\n            }\n          }\n          inText.isInText = true;\n\n          function inTag(stream, state) {\n            var ch = stream.next();\n            if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n              state.tokenize = inText;\n              type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n              return \"tag bracket\";\n            } else if (ch == \"=\") {\n              type = \"equals\";\n              return null;\n            } else if (ch == \"<\") {\n              state.tokenize = inText;\n              state.state = baseState;\n              state.tagName = state.tagStart = null;\n              var next = state.tokenize(stream, state);\n              return next ? next + \" tag error\" : \"tag error\";\n            } else if (/[\\'\\\"]/.test(ch)) {\n              state.tokenize = inAttribute(ch);\n              state.stringStartCol = stream.column();\n              return state.tokenize(stream, state);\n            } else {\n              stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n              return \"word\";\n            }\n          }\n\n          function inAttribute(quote) {\n            var closure = function closure(stream, state) {\n              while (!stream.eol()) {\n                if (stream.next() == quote) {\n                  state.tokenize = inTag;\n                  break;\n                }\n              }\n              return \"string\";\n            };\n            closure.isInAttribute = true;\n            return closure;\n          }\n\n          function inBlock(style, terminator) {\n            return function (stream, state) {\n              while (!stream.eol()) {\n                if (stream.match(terminator)) {\n                  state.tokenize = inText;\n                  break;\n                }\n                stream.next();\n              }\n              return style;\n            };\n          }\n          function doctype(depth) {\n            return function (stream, state) {\n              var ch;\n              while ((ch = stream.next()) != null) {\n                if (ch == \"<\") {\n                  state.tokenize = doctype(depth + 1);\n                  return state.tokenize(stream, state);\n                } else if (ch == \">\") {\n                  if (depth == 1) {\n                    state.tokenize = inText;\n                    break;\n                  } else {\n                    state.tokenize = doctype(depth - 1);\n                    return state.tokenize(stream, state);\n                  }\n                }\n              }\n              return \"meta\";\n            };\n          }\n\n          function Context(state, tagName, startOfLine) {\n            this.prev = state.context;\n            this.tagName = tagName;\n            this.indent = state.indented;\n            this.startOfLine = startOfLine;\n            if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n          }\n          function popContext(state) {\n            if (state.context) state.context = state.context.prev;\n          }\n          function maybePopContext(state, nextTagName) {\n            var parentTagName;\n            while (true) {\n              if (!state.context) {\n                return;\n              }\n              parentTagName = state.context.tagName;\n              if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n                return;\n              }\n              popContext(state);\n            }\n          }\n\n          function baseState(type, stream, state) {\n            if (type == \"openTag\") {\n              state.tagStart = stream.column();\n              return tagNameState;\n            } else if (type == \"closeTag\") {\n              return closeTagNameState;\n            } else {\n              return baseState;\n            }\n          }\n          function tagNameState(type, stream, state) {\n            if (type == \"word\") {\n              state.tagName = stream.current();\n              setStyle = \"tag\";\n              return attrState;\n            } else {\n              setStyle = \"error\";\n              return tagNameState;\n            }\n          }\n          function closeTagNameState(type, stream, state) {\n            if (type == \"word\") {\n              var tagName = stream.current();\n              if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n              if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n                setStyle = \"tag\";\n                return closeState;\n              } else {\n                setStyle = \"tag error\";\n                return closeStateErr;\n              }\n            } else {\n              setStyle = \"error\";\n              return closeStateErr;\n            }\n          }\n\n          function closeState(type, _stream, state) {\n            if (type != \"endTag\") {\n              setStyle = \"error\";\n              return closeState;\n            }\n            popContext(state);\n            return baseState;\n          }\n          function closeStateErr(type, stream, state) {\n            setStyle = \"error\";\n            return closeState(type, stream, state);\n          }\n\n          function attrState(type, _stream, state) {\n            if (type == \"word\") {\n              setStyle = \"attribute\";\n              return attrEqState;\n            } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n              var tagName = state.tagName,\n                  tagStart = state.tagStart;\n              state.tagName = state.tagStart = null;\n              if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n                maybePopContext(state, tagName);\n              } else {\n                maybePopContext(state, tagName);\n                state.context = new Context(state, tagName, tagStart == state.indented);\n              }\n              return baseState;\n            }\n            setStyle = \"error\";\n            return attrState;\n          }\n          function attrEqState(type, stream, state) {\n            if (type == \"equals\") return attrValueState;\n            if (!config.allowMissing) setStyle = \"error\";\n            return attrState(type, stream, state);\n          }\n          function attrValueState(type, stream, state) {\n            if (type == \"string\") return attrContinuedState;\n            if (type == \"word\" && config.allowUnquoted) {\n              setStyle = \"string\";return attrState;\n            }\n            setStyle = \"error\";\n            return attrState(type, stream, state);\n          }\n          function attrContinuedState(type, stream, state) {\n            if (type == \"string\") return attrContinuedState;\n            return attrState(type, stream, state);\n          }\n\n          return {\n            startState: function startState(baseIndent) {\n              var state = { tokenize: inText,\n                state: baseState,\n                indented: baseIndent || 0,\n                tagName: null, tagStart: null,\n                context: null };\n              if (baseIndent != null) state.baseIndent = baseIndent;\n              return state;\n            },\n\n            token: function token(stream, state) {\n              if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n\n              if (stream.eatSpace()) return null;\n              type = null;\n              var style = state.tokenize(stream, state);\n              if ((style || type) && style != \"comment\") {\n                setStyle = null;\n                state.state = state.state(type || style, stream, state);\n                if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n              }\n              return style;\n            },\n\n            indent: function indent(state, textAfter, fullLine) {\n              var context = state.context;\n              // Indent multi-line strings (e.g. css).\n              if (state.tokenize.isInAttribute) {\n                if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n              }\n              if (context && context.noIndent) return CodeMirror.Pass;\n              if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n              // Indent the starts of attribute names.\n              if (state.tagName) {\n                if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n              }\n              if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n              var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n              if (tagAfter && tagAfter[1]) {\n                // Closing tag spotted\n                while (context) {\n                  if (context.tagName == tagAfter[2]) {\n                    context = context.prev;\n                    break;\n                  } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n                    context = context.prev;\n                  } else {\n                    break;\n                  }\n                }\n              } else if (tagAfter) {\n                // Opening tag spotted\n                while (context) {\n                  var grabbers = config.contextGrabbers[context.tagName];\n                  if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n                }\n              }\n              while (context && context.prev && !context.startOfLine) {\n                context = context.prev;\n              }if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n            },\n\n            electricInput: /<\\/[\\s\\w:]+>$/,\n            blockCommentStart: \"<!--\",\n            blockCommentEnd: \"-->\",\n\n            configuration: config.htmlMode ? \"html\" : \"xml\",\n            helperType: config.htmlMode ? \"html\" : \"xml\",\n\n            skipAttribute: function skipAttribute(state) {\n              if (state.state == attrValueState) state.state = attrState;\n            }\n          };\n        });\n\n        CodeMirror.defineMIME(\"text/xml\", \"xml\");\n        CodeMirror.defineMIME(\"application/xml\", \"xml\");\n        if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", { name: \"xml\", htmlMode: true });\n      });\n    }, { \"../../lib/codemirror\": 7 }] }, {}, [2]);\n  ;\n})();"]}